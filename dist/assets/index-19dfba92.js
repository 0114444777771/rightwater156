function W6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function PN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AN={exports:{}},kg={},RN={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th=Symbol.for("react.element"),H6=Symbol.for("react.portal"),K6=Symbol.for("react.fragment"),Q6=Symbol.for("react.strict_mode"),Y6=Symbol.for("react.profiler"),X6=Symbol.for("react.provider"),J6=Symbol.for("react.context"),Z6=Symbol.for("react.forward_ref"),eU=Symbol.for("react.suspense"),tU=Symbol.for("react.memo"),nU=Symbol.for("react.lazy"),jI=Symbol.iterator;function rU(t){return t===null||typeof t!="object"?null:(t=jI&&t[jI]||t["@@iterator"],typeof t=="function"?t:null)}var NN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kN=Object.assign,DN={};function Yc(t,e,n){this.props=t,this.context=e,this.refs=DN,this.updater=n||NN}Yc.prototype.isReactComponent={};Yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jN(){}jN.prototype=Yc.prototype;function O_(t,e,n){this.props=t,this.context=e,this.refs=DN,this.updater=n||NN}var M_=O_.prototype=new jN;M_.constructor=O_;kN(M_,Yc.prototype);M_.isPureReactComponent=!0;var OI=Array.isArray,ON=Object.prototype.hasOwnProperty,V_={current:null},MN={key:!0,ref:!0,__self:!0,__source:!0};function VN(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ON.call(e,r)&&!MN.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Th,type:t,key:i,ref:o,props:s,_owner:V_.current}}function sU(t,e){return{$$typeof:Th,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function L_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Th}function iU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MI=/\/+/g;function Ov(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iU(""+t.key):e.toString(36)}function Sp(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Th:case H6:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ov(o,0):r,OI(s)?(n="",t!=null&&(n=t.replace(MI,"$&/")+"/"),Sp(s,e,n,"",function(c){return c})):s!=null&&(L_(s)&&(s=sU(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(MI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",OI(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ov(i,a);o+=Sp(i,e,n,l,s)}else if(l=rU(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ov(i,a++),o+=Sp(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kf(t,e,n){if(t==null)return t;var r=[],s=0;return Sp(t,r,"","",function(i){return e.call(n,i,s++)}),r}function oU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var On={current:null},Cp={transition:null},aU={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:Cp,ReactCurrentOwner:V_};function LN(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:kf,forEach:function(t,e,n){kf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kf(t,function(){e++}),e},toArray:function(t){return kf(t,function(e){return e})||[]},only:function(t){if(!L_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Yc;ke.Fragment=K6;ke.Profiler=Y6;ke.PureComponent=O_;ke.StrictMode=Q6;ke.Suspense=eU;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aU;ke.act=LN;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kN({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=V_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ON.call(e,l)&&!MN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Th,type:t.type,key:s,ref:i,props:r,_owner:o}};ke.createContext=function(t){return t={$$typeof:J6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:X6,_context:t},t.Consumer=t};ke.createElement=VN;ke.createFactory=function(t){var e=VN.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:Z6,render:t}};ke.isValidElement=L_;ke.lazy=function(t){return{$$typeof:nU,_payload:{_status:-1,_result:t},_init:oU}};ke.memo=function(t,e){return{$$typeof:tU,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Cp.transition;Cp.transition={};try{t()}finally{Cp.transition=e}};ke.unstable_act=LN;ke.useCallback=function(t,e){return On.current.useCallback(t,e)};ke.useContext=function(t){return On.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return On.current.useDeferredValue(t)};ke.useEffect=function(t,e){return On.current.useEffect(t,e)};ke.useId=function(){return On.current.useId()};ke.useImperativeHandle=function(t,e,n){return On.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return On.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return On.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return On.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return On.current.useReducer(t,e,n)};ke.useRef=function(t){return On.current.useRef(t)};ke.useState=function(t){return On.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return On.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return On.current.useTransition()};ke.version="18.3.1";RN.exports=ke;var m=RN.exports;const oe=PN(m),Ih=W6({__proto__:null,default:oe},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lU=m,cU=Symbol.for("react.element"),uU=Symbol.for("react.fragment"),dU=Object.prototype.hasOwnProperty,hU=lU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fU={key:!0,ref:!0,__self:!0,__source:!0};function $N(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dU.call(e,r)&&!fU.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cU,type:t,key:i,ref:o,props:s,_owner:hU.current}}kg.Fragment=uU;kg.jsx=$N;kg.jsxs=$N;AN.exports=kg;var h=AN.exports,gx={},FN={exports:{}},yr={},UN={exports:{}},BN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var F=U.length;U.push($);e:for(;0<F;){var z=F-1>>>1,q=U[z];if(0<s(q,$))U[z]=$,U[F]=q,F=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],F=U.pop();if(F!==$){U[0]=F;e:for(var z=0,q=U.length,W=q>>>1;z<W;){var Y=2*(z+1)-1,K=U[Y],ne=Y+1,ee=U[ne];if(0>s(K,F))ne<q&&0>s(ee,K)?(U[z]=ee,U[ne]=F,z=ne):(U[z]=K,U[Y]=F,z=Y);else if(ne<q&&0>s(ee,F))U[z]=ee,U[ne]=F,z=ne;else break e}}return $}function s(U,$){var F=U.sortIndex-$.sortIndex;return F!==0?F:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,g=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=U)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function S(U){if(y=!1,b(U),!v)if(n(l)!==null)v=!0,O(k);else{var $=n(c);$!==null&&M(S,$.startTime-U)}}function k(U,$){v=!1,y&&(y=!1,x(E),E=-1),g=!0;var F=f;try{for(b($),d=n(l);d!==null&&(!(d.expirationTime>$)||U&&!D());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var q=z(d.expirationTime<=$);$=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),b($)}else r(l);d=n(l)}if(d!==null)var W=!0;else{var Y=n(c);Y!==null&&M(S,Y.startTime-$),W=!1}return W}finally{d=null,f=F,g=!1}}var R=!1,C=null,E=-1,I=5,P=-1;function D(){return!(t.unstable_now()-P<I)}function j(){if(C!==null){var U=t.unstable_now();P=U;var $=!0;try{$=C(!0,U)}finally{$?N():(R=!1,C=null)}}else R=!1}var N;if(typeof _=="function")N=function(){_(j)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=j,N=function(){B.postMessage(null)}}else N=function(){w(j,0)};function O(U){C=U,R||(R=!0,N())}function M(U,$){E=w(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,O(k))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var F=f;f=$;try{return U()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var F=f;f=U;try{return $()}finally{f=F}},t.unstable_scheduleCallback=function(U,$,F){var z=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?z+F:z):F=z,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=F+q,U={id:u++,callback:$,priorityLevel:U,startTime:F,expirationTime:q,sortIndex:-1},F>z?(U.sortIndex=F,e(c,U),n(l)===null&&U===n(c)&&(y?(x(E),E=-1):y=!0,M(S,F-z))):(U.sortIndex=q,e(l,U),v||g||(v=!0,O(k))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var $=f;return function(){var F=f;f=$;try{return U.apply(this,arguments)}finally{f=F}}}})(BN);UN.exports=BN;var pU=UN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mU=m,pr=pU;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zN=new Set,Dd={};function Wa(t,e){yc(t,e),yc(t+"Capture",e)}function yc(t,e){for(Dd[t]=e,t=0;t<e.length;t++)zN.add(e[t])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yx=Object.prototype.hasOwnProperty,gU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VI={},LI={};function yU(t){return yx.call(LI,t)?!0:yx.call(VI,t)?!1:gU.test(t)?LI[t]=!0:(VI[t]=!0,!1)}function vU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xU(t,e,n,r){if(e===null||typeof e>"u"||vU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hn[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hn[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hn[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hn[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hn[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hn[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hn[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hn[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hn[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var $_=/[\-:]([a-z])/g;function F_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($_,F_);hn[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($_,F_);hn[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($_,F_);hn[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});hn.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function U_(t,e,n,r){var s=hn.hasOwnProperty(e)?hn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xU(e,n,s,r)&&(n=null),r||s===null?yU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fi=mU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Df=Symbol.for("react.element"),Vl=Symbol.for("react.portal"),Ll=Symbol.for("react.fragment"),B_=Symbol.for("react.strict_mode"),vx=Symbol.for("react.profiler"),qN=Symbol.for("react.provider"),GN=Symbol.for("react.context"),z_=Symbol.for("react.forward_ref"),xx=Symbol.for("react.suspense"),wx=Symbol.for("react.suspense_list"),q_=Symbol.for("react.memo"),Vi=Symbol.for("react.lazy"),WN=Symbol.for("react.offscreen"),$I=Symbol.iterator;function ku(t){return t===null||typeof t!="object"?null:(t=$I&&t[$I]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,Mv;function Xu(t){if(Mv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mv=e&&e[1]||""}return`
`+Mv+t}var Vv=!1;function Lv(t,e){if(!t||Vv)return"";Vv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xu(t):""}function wU(t){switch(t.tag){case 5:return Xu(t.type);case 16:return Xu("Lazy");case 13:return Xu("Suspense");case 19:return Xu("SuspenseList");case 0:case 2:case 15:return t=Lv(t.type,!1),t;case 11:return t=Lv(t.type.render,!1),t;case 1:return t=Lv(t.type,!0),t;default:return""}}function _x(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ll:return"Fragment";case Vl:return"Portal";case vx:return"Profiler";case B_:return"StrictMode";case xx:return"Suspense";case wx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GN:return(t.displayName||"Context")+".Consumer";case qN:return(t._context.displayName||"Context")+".Provider";case z_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q_:return e=t.displayName||null,e!==null?e:_x(t.type)||"Memo";case Vi:e=t._payload,t=t._init;try{return _x(t(e))}catch{}}return null}function _U(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _x(e);case 8:return e===B_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function HN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bU(t){var e=HN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jf(t){t._valueTracker||(t._valueTracker=bU(t))}function KN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=HN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bx(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function FI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=po(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QN(t,e){e=e.checked,e!=null&&U_(t,"checked",e,!1)}function Ex(t,e){QN(t,e);var n=po(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tx(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tx(t,e.type,po(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function UI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tx(t,e,n){(e!=="number"||sm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ju=Array.isArray;function Zl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+po(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ix(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function BI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Ju(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:po(n)}}function YN(t,e){var n=po(e.value),r=po(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Of,JN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Of=Of||document.createElement("div"),Of.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Of.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EU=["Webkit","ms","Moz","O"];Object.keys(cd).forEach(function(t){EU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cd[e]=cd[t]})});function ZN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cd.hasOwnProperty(t)&&cd[t]?(""+e).trim():e+"px"}function e2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ZN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var TU=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cx(t,e){if(e){if(TU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Px(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ax=null;function G_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rx=null,ec=null,tc=null;function qI(t){if(t=Ph(t)){if(typeof Rx!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Vg(e),Rx(t.stateNode,t.type,e))}}function t2(t){ec?tc?tc.push(t):tc=[t]:ec=t}function n2(){if(ec){var t=ec,e=tc;if(tc=ec=null,qI(t),e)for(t=0;t<e.length;t++)qI(e[t])}}function r2(t,e){return t(e)}function s2(){}var $v=!1;function i2(t,e,n){if($v)return t(e,n);$v=!0;try{return r2(t,e,n)}finally{$v=!1,(ec!==null||tc!==null)&&(s2(),n2())}}function Od(t,e){var n=t.stateNode;if(n===null)return null;var r=Vg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var Nx=!1;if(Zs)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){Nx=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{Nx=!1}function IU(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ud=!1,im=null,om=!1,kx=null,SU={onError:function(t){ud=!0,im=t}};function CU(t,e,n,r,s,i,o,a,l){ud=!1,im=null,IU.apply(SU,arguments)}function PU(t,e,n,r,s,i,o,a,l){if(CU.apply(this,arguments),ud){if(ud){var c=im;ud=!1,im=null}else throw Error(te(198));om||(om=!0,kx=c)}}function Ha(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function o2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function GI(t){if(Ha(t)!==t)throw Error(te(188))}function AU(t){var e=t.alternate;if(!e){if(e=Ha(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return GI(s),t;if(i===r)return GI(s),e;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function a2(t){return t=AU(t),t!==null?l2(t):null}function l2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=l2(t);if(e!==null)return e;t=t.sibling}return null}var c2=pr.unstable_scheduleCallback,WI=pr.unstable_cancelCallback,RU=pr.unstable_shouldYield,NU=pr.unstable_requestPaint,jt=pr.unstable_now,kU=pr.unstable_getCurrentPriorityLevel,W_=pr.unstable_ImmediatePriority,u2=pr.unstable_UserBlockingPriority,am=pr.unstable_NormalPriority,DU=pr.unstable_LowPriority,d2=pr.unstable_IdlePriority,Dg=null,gs=null;function jU(t){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(Dg,t,void 0,(t.current.flags&128)===128)}catch{}}var Qr=Math.clz32?Math.clz32:VU,OU=Math.log,MU=Math.LN2;function VU(t){return t>>>=0,t===0?32:31-(OU(t)/MU|0)|0}var Mf=64,Vf=4194304;function Zu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Zu(a):(i&=o,i!==0&&(r=Zu(i)))}else o=n&~s,o!==0?r=Zu(o):i!==0&&(r=Zu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qr(e),s=1<<n,r|=t[n],e&=~s;return r}function LU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $U(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Qr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=LU(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Dx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function h2(){var t=Mf;return Mf<<=1,!(Mf&4194240)&&(Mf=64),t}function Fv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qr(e),t[e]=n}function FU(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Qr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function H_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Je=0;function f2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var p2,K_,m2,g2,y2,jx=!1,Lf=[],Zi=null,eo=null,to=null,Md=new Map,Vd=new Map,Fi=[],UU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HI(t,e){switch(t){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Md.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vd.delete(e.pointerId)}}function ju(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ph(e),e!==null&&K_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BU(t,e,n,r,s){switch(e){case"focusin":return Zi=ju(Zi,t,e,n,r,s),!0;case"dragenter":return eo=ju(eo,t,e,n,r,s),!0;case"mouseover":return to=ju(to,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Md.set(i,ju(Md.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vd.set(i,ju(Vd.get(i)||null,t,e,n,r,s)),!0}return!1}function v2(t){var e=sa(t.target);if(e!==null){var n=Ha(e);if(n!==null){if(e=n.tag,e===13){if(e=o2(n),e!==null){t.blockedOn=e,y2(t.priority,function(){m2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ox(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ax=r,n.target.dispatchEvent(r),Ax=null}else return e=Ph(n),e!==null&&K_(e),t.blockedOn=n,!1;e.shift()}return!0}function KI(t,e,n){Pp(t)&&n.delete(e)}function zU(){jx=!1,Zi!==null&&Pp(Zi)&&(Zi=null),eo!==null&&Pp(eo)&&(eo=null),to!==null&&Pp(to)&&(to=null),Md.forEach(KI),Vd.forEach(KI)}function Ou(t,e){t.blockedOn===e&&(t.blockedOn=null,jx||(jx=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,zU)))}function Ld(t){function e(s){return Ou(s,t)}if(0<Lf.length){Ou(Lf[0],t);for(var n=1;n<Lf.length;n++){var r=Lf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zi!==null&&Ou(Zi,t),eo!==null&&Ou(eo,t),to!==null&&Ou(to,t),Md.forEach(e),Vd.forEach(e),n=0;n<Fi.length;n++)r=Fi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fi.length&&(n=Fi[0],n.blockedOn===null);)v2(n),n.blockedOn===null&&Fi.shift()}var nc=fi.ReactCurrentBatchConfig,cm=!0;function qU(t,e,n,r){var s=Je,i=nc.transition;nc.transition=null;try{Je=1,Q_(t,e,n,r)}finally{Je=s,nc.transition=i}}function GU(t,e,n,r){var s=Je,i=nc.transition;nc.transition=null;try{Je=4,Q_(t,e,n,r)}finally{Je=s,nc.transition=i}}function Q_(t,e,n,r){if(cm){var s=Ox(t,e,n,r);if(s===null)Yv(t,e,r,um,n),HI(t,r);else if(BU(s,t,e,n,r))r.stopPropagation();else if(HI(t,r),e&4&&-1<UU.indexOf(t)){for(;s!==null;){var i=Ph(s);if(i!==null&&p2(i),i=Ox(t,e,n,r),i===null&&Yv(t,e,r,um,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yv(t,e,r,null,n)}}var um=null;function Ox(t,e,n,r){if(um=null,t=G_(r),t=sa(t),t!==null)if(e=Ha(t),e===null)t=null;else if(n=e.tag,n===13){if(t=o2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return um=t,null}function x2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kU()){case W_:return 1;case u2:return 4;case am:case DU:return 16;case d2:return 536870912;default:return 16}default:return 16}}var Qi=null,Y_=null,Ap=null;function w2(){if(Ap)return Ap;var t,e=Y_,n=e.length,r,s="value"in Qi?Qi.value:Qi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ap=s.slice(t,1<r?1-r:void 0)}function Rp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $f(){return!0}function QI(){return!1}function vr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$f:QI,this.isPropagationStopped=QI,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$f)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$f)},persist:function(){},isPersistent:$f}),e}var Xc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X_=vr(Xc),Ch=Tt({},Xc,{view:0,detail:0}),WU=vr(Ch),Uv,Bv,Mu,jg=Tt({},Ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:J_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mu&&(Mu&&t.type==="mousemove"?(Uv=t.screenX-Mu.screenX,Bv=t.screenY-Mu.screenY):Bv=Uv=0,Mu=t),Uv)},movementY:function(t){return"movementY"in t?t.movementY:Bv}}),YI=vr(jg),HU=Tt({},jg,{dataTransfer:0}),KU=vr(HU),QU=Tt({},Ch,{relatedTarget:0}),zv=vr(QU),YU=Tt({},Xc,{animationName:0,elapsedTime:0,pseudoElement:0}),XU=vr(YU),JU=Tt({},Xc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZU=vr(JU),e8=Tt({},Xc,{data:0}),XI=vr(e8),t8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s8(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r8[t])?!!e[t]:!1}function J_(){return s8}var i8=Tt({},Ch,{key:function(t){if(t.key){var e=t8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:J_,charCode:function(t){return t.type==="keypress"?Rp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o8=vr(i8),a8=Tt({},jg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JI=vr(a8),l8=Tt({},Ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:J_}),c8=vr(l8),u8=Tt({},Xc,{propertyName:0,elapsedTime:0,pseudoElement:0}),d8=vr(u8),h8=Tt({},jg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f8=vr(h8),p8=[9,13,27,32],Z_=Zs&&"CompositionEvent"in window,dd=null;Zs&&"documentMode"in document&&(dd=document.documentMode);var m8=Zs&&"TextEvent"in window&&!dd,_2=Zs&&(!Z_||dd&&8<dd&&11>=dd),ZI=String.fromCharCode(32),eS=!1;function b2(t,e){switch(t){case"keyup":return p8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $l=!1;function g8(t,e){switch(t){case"compositionend":return E2(e);case"keypress":return e.which!==32?null:(eS=!0,ZI);case"textInput":return t=e.data,t===ZI&&eS?null:t;default:return null}}function y8(t,e){if($l)return t==="compositionend"||!Z_&&b2(t,e)?(t=w2(),Ap=Y_=Qi=null,$l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _2&&e.locale!=="ko"?null:e.data;default:return null}}var v8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v8[t.type]:e==="textarea"}function T2(t,e,n,r){t2(r),e=dm(e,"onChange"),0<e.length&&(n=new X_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hd=null,$d=null;function x8(t){O2(t,0)}function Og(t){var e=Bl(t);if(KN(e))return t}function w8(t,e){if(t==="change")return e}var I2=!1;if(Zs){var qv;if(Zs){var Gv="oninput"in document;if(!Gv){var nS=document.createElement("div");nS.setAttribute("oninput","return;"),Gv=typeof nS.oninput=="function"}qv=Gv}else qv=!1;I2=qv&&(!document.documentMode||9<document.documentMode)}function rS(){hd&&(hd.detachEvent("onpropertychange",S2),$d=hd=null)}function S2(t){if(t.propertyName==="value"&&Og($d)){var e=[];T2(e,$d,t,G_(t)),i2(x8,e)}}function _8(t,e,n){t==="focusin"?(rS(),hd=e,$d=n,hd.attachEvent("onpropertychange",S2)):t==="focusout"&&rS()}function b8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Og($d)}function E8(t,e){if(t==="click")return Og(e)}function T8(t,e){if(t==="input"||t==="change")return Og(e)}function I8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jr=typeof Object.is=="function"?Object.is:I8;function Fd(t,e){if(Jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yx.call(e,s)||!Jr(t[s],e[s]))return!1}return!0}function sS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iS(t,e){var n=sS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sS(n)}}function C2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?C2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function P2(){for(var t=window,e=sm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sm(t.document)}return e}function e1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S8(t){var e=P2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&C2(n.ownerDocument.documentElement,n)){if(r!==null&&e1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=iS(n,i);var o=iS(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var C8=Zs&&"documentMode"in document&&11>=document.documentMode,Fl=null,Mx=null,fd=null,Vx=!1;function oS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vx||Fl==null||Fl!==sm(r)||(r=Fl,"selectionStart"in r&&e1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fd&&Fd(fd,r)||(fd=r,r=dm(Mx,"onSelect"),0<r.length&&(e=new X_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fl)))}function Ff(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ul={animationend:Ff("Animation","AnimationEnd"),animationiteration:Ff("Animation","AnimationIteration"),animationstart:Ff("Animation","AnimationStart"),transitionend:Ff("Transition","TransitionEnd")},Wv={},A2={};Zs&&(A2=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function Mg(t){if(Wv[t])return Wv[t];if(!Ul[t])return t;var e=Ul[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in A2)return Wv[t]=e[n];return t}var R2=Mg("animationend"),N2=Mg("animationiteration"),k2=Mg("animationstart"),D2=Mg("transitionend"),j2=new Map,aS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Co(t,e){j2.set(t,e),Wa(e,[t])}for(var Hv=0;Hv<aS.length;Hv++){var Kv=aS[Hv],P8=Kv.toLowerCase(),A8=Kv[0].toUpperCase()+Kv.slice(1);Co(P8,"on"+A8)}Co(R2,"onAnimationEnd");Co(N2,"onAnimationIteration");Co(k2,"onAnimationStart");Co("dblclick","onDoubleClick");Co("focusin","onFocus");Co("focusout","onBlur");Co(D2,"onTransitionEnd");yc("onMouseEnter",["mouseout","mouseover"]);yc("onMouseLeave",["mouseout","mouseover"]);yc("onPointerEnter",["pointerout","pointerover"]);yc("onPointerLeave",["pointerout","pointerover"]);Wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function lS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PU(r,e,void 0,t),t.currentTarget=null}function O2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;lS(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;lS(s,a,c),i=l}}}if(om)throw t=kx,om=!1,kx=null,t}function ct(t,e){var n=e[Bx];n===void 0&&(n=e[Bx]=new Set);var r=t+"__bubble";n.has(r)||(M2(e,t,2,!1),n.add(r))}function Qv(t,e,n){var r=0;e&&(r|=4),M2(n,t,r,e)}var Uf="_reactListening"+Math.random().toString(36).slice(2);function Ud(t){if(!t[Uf]){t[Uf]=!0,zN.forEach(function(n){n!=="selectionchange"&&(R8.has(n)||Qv(n,!1,t),Qv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uf]||(e[Uf]=!0,Qv("selectionchange",!1,e))}}function M2(t,e,n,r){switch(x2(e)){case 1:var s=qU;break;case 4:s=GU;break;default:s=Q_}n=s.bind(null,e,n,t),s=void 0,!Nx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=sa(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}i2(function(){var c=i,u=G_(n),d=[];e:{var f=j2.get(t);if(f!==void 0){var g=X_,v=t;switch(t){case"keypress":if(Rp(n)===0)break e;case"keydown":case"keyup":g=o8;break;case"focusin":v="focus",g=zv;break;case"focusout":v="blur",g=zv;break;case"beforeblur":case"afterblur":g=zv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=YI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=KU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=c8;break;case R2:case N2:case k2:g=XU;break;case D2:g=d8;break;case"scroll":g=WU;break;case"wheel":g=f8;break;case"copy":case"cut":case"paste":g=ZU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=JI}var y=(e&4)!==0,w=!y&&t==="scroll",x=y?f!==null?f+"Capture":null:f;y=[];for(var _=c,b;_!==null;){b=_;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,x!==null&&(S=Od(_,x),S!=null&&y.push(Bd(_,S,b)))),w)break;_=_.return}0<y.length&&(f=new g(f,v,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ax&&(v=n.relatedTarget||n.fromElement)&&(sa(v)||v[ei]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?sa(v):null,v!==null&&(w=Ha(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(y=YI,S="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=JI,S="onPointerLeave",x="onPointerEnter",_="pointer"),w=g==null?f:Bl(g),b=v==null?f:Bl(v),f=new y(S,_+"leave",g,n,u),f.target=w,f.relatedTarget=b,S=null,sa(u)===c&&(y=new y(x,_+"enter",v,n,u),y.target=b,y.relatedTarget=w,S=y),w=S,g&&v)t:{for(y=g,x=v,_=0,b=y;b;b=vl(b))_++;for(b=0,S=x;S;S=vl(S))b++;for(;0<_-b;)y=vl(y),_--;for(;0<b-_;)x=vl(x),b--;for(;_--;){if(y===x||x!==null&&y===x.alternate)break t;y=vl(y),x=vl(x)}y=null}else y=null;g!==null&&cS(d,f,g,y,!1),v!==null&&w!==null&&cS(d,w,v,y,!0)}}e:{if(f=c?Bl(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=w8;else if(tS(f))if(I2)k=T8;else{k=b8;var R=_8}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=E8);if(k&&(k=k(t,c))){T2(d,k,n,u);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&Tx(f,"number",f.value)}switch(R=c?Bl(c):window,t){case"focusin":(tS(R)||R.contentEditable==="true")&&(Fl=R,Mx=c,fd=null);break;case"focusout":fd=Mx=Fl=null;break;case"mousedown":Vx=!0;break;case"contextmenu":case"mouseup":case"dragend":Vx=!1,oS(d,n,u);break;case"selectionchange":if(C8)break;case"keydown":case"keyup":oS(d,n,u)}var C;if(Z_)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else $l?b2(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(_2&&n.locale!=="ko"&&($l||E!=="onCompositionStart"?E==="onCompositionEnd"&&$l&&(C=w2()):(Qi=u,Y_="value"in Qi?Qi.value:Qi.textContent,$l=!0)),R=dm(c,E),0<R.length&&(E=new XI(E,t,null,n,u),d.push({event:E,listeners:R}),C?E.data=C:(C=E2(n),C!==null&&(E.data=C)))),(C=m8?g8(t,n):y8(t,n))&&(c=dm(c,"onBeforeInput"),0<c.length&&(u=new XI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}O2(d,e)})}function Bd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Od(t,n),i!=null&&r.unshift(Bd(t,i,s)),i=Od(t,e),i!=null&&r.push(Bd(t,i,s))),t=t.return}return r}function vl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cS(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Od(n,i),l!=null&&o.unshift(Bd(n,l,a))):s||(l=Od(n,i),l!=null&&o.push(Bd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var N8=/\r\n?/g,k8=/\u0000|\uFFFD/g;function uS(t){return(typeof t=="string"?t:""+t).replace(N8,`
`).replace(k8,"")}function Bf(t,e,n){if(e=uS(e),uS(t)!==e&&n)throw Error(te(425))}function hm(){}var Lx=null,$x=null;function Fx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ux=typeof setTimeout=="function"?setTimeout:void 0,D8=typeof clearTimeout=="function"?clearTimeout:void 0,dS=typeof Promise=="function"?Promise:void 0,j8=typeof queueMicrotask=="function"?queueMicrotask:typeof dS<"u"?function(t){return dS.resolve(null).then(t).catch(O8)}:Ux;function O8(t){setTimeout(function(){throw t})}function Xv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ld(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ld(e)}function no(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jc=Math.random().toString(36).slice(2),hs="__reactFiber$"+Jc,zd="__reactProps$"+Jc,ei="__reactContainer$"+Jc,Bx="__reactEvents$"+Jc,M8="__reactListeners$"+Jc,V8="__reactHandles$"+Jc;function sa(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ei]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hS(t);t!==null;){if(n=t[hs])return n;t=hS(t)}return e}t=n,n=t.parentNode}return null}function Ph(t){return t=t[hs]||t[ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Vg(t){return t[zd]||null}var zx=[],zl=-1;function Po(t){return{current:t}}function ht(t){0>zl||(t.current=zx[zl],zx[zl]=null,zl--)}function rt(t,e){zl++,zx[zl]=t.current,t.current=e}var mo={},Cn=Po(mo),Kn=Po(!1),xa=mo;function vc(t,e){var n=t.type.contextTypes;if(!n)return mo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qn(t){return t=t.childContextTypes,t!=null}function fm(){ht(Kn),ht(Cn)}function fS(t,e,n){if(Cn.current!==mo)throw Error(te(168));rt(Cn,e),rt(Kn,n)}function V2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(te(108,_U(t)||"Unknown",s));return Tt({},n,r)}function pm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mo,xa=Cn.current,rt(Cn,t),rt(Kn,Kn.current),!0}function pS(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=V2(t,e,xa),r.__reactInternalMemoizedMergedChildContext=t,ht(Kn),ht(Cn),rt(Cn,t)):ht(Kn),rt(Kn,n)}var Os=null,Lg=!1,Jv=!1;function L2(t){Os===null?Os=[t]:Os.push(t)}function L8(t){Lg=!0,L2(t)}function Ao(){if(!Jv&&Os!==null){Jv=!0;var t=0,e=Je;try{var n=Os;for(Je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Os=null,Lg=!1}catch(s){throw Os!==null&&(Os=Os.slice(t+1)),c2(W_,Ao),s}finally{Je=e,Jv=!1}}return null}var ql=[],Gl=0,mm=null,gm=0,Sr=[],Cr=0,wa=null,Fs=1,Us="";function Wo(t,e){ql[Gl++]=gm,ql[Gl++]=mm,mm=t,gm=e}function $2(t,e,n){Sr[Cr++]=Fs,Sr[Cr++]=Us,Sr[Cr++]=wa,wa=t;var r=Fs;t=Us;var s=32-Qr(r)-1;r&=~(1<<s),n+=1;var i=32-Qr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fs=1<<32-Qr(e)+s|n<<s|r,Us=i+t}else Fs=1<<i|n<<s|r,Us=t}function t1(t){t.return!==null&&(Wo(t,1),$2(t,1,0))}function n1(t){for(;t===mm;)mm=ql[--Gl],ql[Gl]=null,gm=ql[--Gl],ql[Gl]=null;for(;t===wa;)wa=Sr[--Cr],Sr[Cr]=null,Us=Sr[--Cr],Sr[Cr]=null,Fs=Sr[--Cr],Sr[Cr]=null}var ur=null,lr=null,gt=!1,Hr=null;function F2(t,e){var n=Pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ur=t,lr=no(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ur=t,lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wa!==null?{id:Fs,overflow:Us}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ur=t,lr=null,!0):!1;default:return!1}}function qx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gx(t){if(gt){var e=lr;if(e){var n=e;if(!mS(t,e)){if(qx(t))throw Error(te(418));e=no(n.nextSibling);var r=ur;e&&mS(t,e)?F2(r,n):(t.flags=t.flags&-4097|2,gt=!1,ur=t)}}else{if(qx(t))throw Error(te(418));t.flags=t.flags&-4097|2,gt=!1,ur=t}}}function gS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function zf(t){if(t!==ur)return!1;if(!gt)return gS(t),gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fx(t.type,t.memoizedProps)),e&&(e=lr)){if(qx(t))throw U2(),Error(te(418));for(;e;)F2(t,e),e=no(e.nextSibling)}if(gS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){lr=no(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}lr=null}}else lr=ur?no(t.stateNode.nextSibling):null;return!0}function U2(){for(var t=lr;t;)t=no(t.nextSibling)}function xc(){lr=ur=null,gt=!1}function r1(t){Hr===null?Hr=[t]:Hr.push(t)}var $8=fi.ReactCurrentBatchConfig;function Vu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function qf(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yS(t){var e=t._init;return e(t._payload)}function B2(t){function e(x,_){if(t){var b=x.deletions;b===null?(x.deletions=[_],x.flags|=16):b.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=oo(x,_),x.index=0,x.sibling=null,x}function i(x,_,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<_?(x.flags|=2,_):b):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,_,b,S){return _===null||_.tag!==6?(_=i0(b,x.mode,S),_.return=x,_):(_=s(_,b),_.return=x,_)}function l(x,_,b,S){var k=b.type;return k===Ll?u(x,_,b.props.children,S,b.key):_!==null&&(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vi&&yS(k)===_.type)?(S=s(_,b.props),S.ref=Vu(x,_,b),S.return=x,S):(S=Vp(b.type,b.key,b.props,null,x.mode,S),S.ref=Vu(x,_,b),S.return=x,S)}function c(x,_,b,S){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=o0(b,x.mode,S),_.return=x,_):(_=s(_,b.children||[]),_.return=x,_)}function u(x,_,b,S,k){return _===null||_.tag!==7?(_=pa(b,x.mode,S,k),_.return=x,_):(_=s(_,b),_.return=x,_)}function d(x,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=i0(""+_,x.mode,b),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Df:return b=Vp(_.type,_.key,_.props,null,x.mode,b),b.ref=Vu(x,null,_),b.return=x,b;case Vl:return _=o0(_,x.mode,b),_.return=x,_;case Vi:var S=_._init;return d(x,S(_._payload),b)}if(Ju(_)||ku(_))return _=pa(_,x.mode,b,null),_.return=x,_;qf(x,_)}return null}function f(x,_,b,S){var k=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(x,_,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Df:return b.key===k?l(x,_,b,S):null;case Vl:return b.key===k?c(x,_,b,S):null;case Vi:return k=b._init,f(x,_,k(b._payload),S)}if(Ju(b)||ku(b))return k!==null?null:u(x,_,b,S,null);qf(x,b)}return null}function g(x,_,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(b)||null,a(_,x,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Df:return x=x.get(S.key===null?b:S.key)||null,l(_,x,S,k);case Vl:return x=x.get(S.key===null?b:S.key)||null,c(_,x,S,k);case Vi:var R=S._init;return g(x,_,b,R(S._payload),k)}if(Ju(S)||ku(S))return x=x.get(b)||null,u(_,x,S,k,null);qf(_,S)}return null}function v(x,_,b,S){for(var k=null,R=null,C=_,E=_=0,I=null;C!==null&&E<b.length;E++){C.index>E?(I=C,C=null):I=C.sibling;var P=f(x,C,b[E],S);if(P===null){C===null&&(C=I);break}t&&C&&P.alternate===null&&e(x,C),_=i(P,_,E),R===null?k=P:R.sibling=P,R=P,C=I}if(E===b.length)return n(x,C),gt&&Wo(x,E),k;if(C===null){for(;E<b.length;E++)C=d(x,b[E],S),C!==null&&(_=i(C,_,E),R===null?k=C:R.sibling=C,R=C);return gt&&Wo(x,E),k}for(C=r(x,C);E<b.length;E++)I=g(C,x,E,b[E],S),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?E:I.key),_=i(I,_,E),R===null?k=I:R.sibling=I,R=I);return t&&C.forEach(function(D){return e(x,D)}),gt&&Wo(x,E),k}function y(x,_,b,S){var k=ku(b);if(typeof k!="function")throw Error(te(150));if(b=k.call(b),b==null)throw Error(te(151));for(var R=k=null,C=_,E=_=0,I=null,P=b.next();C!==null&&!P.done;E++,P=b.next()){C.index>E?(I=C,C=null):I=C.sibling;var D=f(x,C,P.value,S);if(D===null){C===null&&(C=I);break}t&&C&&D.alternate===null&&e(x,C),_=i(D,_,E),R===null?k=D:R.sibling=D,R=D,C=I}if(P.done)return n(x,C),gt&&Wo(x,E),k;if(C===null){for(;!P.done;E++,P=b.next())P=d(x,P.value,S),P!==null&&(_=i(P,_,E),R===null?k=P:R.sibling=P,R=P);return gt&&Wo(x,E),k}for(C=r(x,C);!P.done;E++,P=b.next())P=g(C,x,E,P.value,S),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?E:P.key),_=i(P,_,E),R===null?k=P:R.sibling=P,R=P);return t&&C.forEach(function(j){return e(x,j)}),gt&&Wo(x,E),k}function w(x,_,b,S){if(typeof b=="object"&&b!==null&&b.type===Ll&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Df:e:{for(var k=b.key,R=_;R!==null;){if(R.key===k){if(k=b.type,k===Ll){if(R.tag===7){n(x,R.sibling),_=s(R,b.props.children),_.return=x,x=_;break e}}else if(R.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vi&&yS(k)===R.type){n(x,R.sibling),_=s(R,b.props),_.ref=Vu(x,R,b),_.return=x,x=_;break e}n(x,R);break}else e(x,R);R=R.sibling}b.type===Ll?(_=pa(b.props.children,x.mode,S,b.key),_.return=x,x=_):(S=Vp(b.type,b.key,b.props,null,x.mode,S),S.ref=Vu(x,_,b),S.return=x,x=S)}return o(x);case Vl:e:{for(R=b.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(x,_.sibling),_=s(_,b.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=o0(b,x.mode,S),_.return=x,x=_}return o(x);case Vi:return R=b._init,w(x,_,R(b._payload),S)}if(Ju(b))return v(x,_,b,S);if(ku(b))return y(x,_,b,S);qf(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,b),_.return=x,x=_):(n(x,_),_=i0(b,x.mode,S),_.return=x,x=_),o(x)):n(x,_)}return w}var wc=B2(!0),z2=B2(!1),ym=Po(null),vm=null,Wl=null,s1=null;function i1(){s1=Wl=vm=null}function o1(t){var e=ym.current;ht(ym),t._currentValue=e}function Wx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rc(t,e){vm=t,s1=Wl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qn=!0),t.firstContext=null)}function Dr(t){var e=t._currentValue;if(s1!==t)if(t={context:t,memoizedValue:e,next:null},Wl===null){if(vm===null)throw Error(te(308));Wl=t,vm.dependencies={lanes:0,firstContext:t}}else Wl=Wl.next=t;return e}var ia=null;function a1(t){ia===null?ia=[t]:ia.push(t)}function q2(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,a1(e)):(n.next=s.next,s.next=n),e.interleaved=n,ti(t,r)}function ti(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Li=!1;function l1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ro(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ti(t,n)}return s=r.interleaved,s===null?(e.next=e,a1(r)):(e.next=s.next,s.next=e),r.interleaved=e,ti(t,n)}function Np(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H_(t,n)}}function vS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xm(t,e,n,r){var s=t.updateQueue;Li=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(f=e,g=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=Tt({},d,f);break e;case 2:Li=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=d):u=u.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ba|=o,t.lanes=o,t.memoizedState=d}}function xS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(te(191,s));s.call(r)}}}var Ah={},ys=Po(Ah),qd=Po(Ah),Gd=Po(Ah);function oa(t){if(t===Ah)throw Error(te(174));return t}function c1(t,e){switch(rt(Gd,e),rt(qd,t),rt(ys,Ah),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sx(e,t)}ht(ys),rt(ys,e)}function _c(){ht(ys),ht(qd),ht(Gd)}function W2(t){oa(Gd.current);var e=oa(ys.current),n=Sx(e,t.type);e!==n&&(rt(qd,t),rt(ys,n))}function u1(t){qd.current===t&&(ht(ys),ht(qd))}var xt=Po(0);function wm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zv=[];function d1(){for(var t=0;t<Zv.length;t++)Zv[t]._workInProgressVersionPrimary=null;Zv.length=0}var kp=fi.ReactCurrentDispatcher,e0=fi.ReactCurrentBatchConfig,_a=0,_t=null,qt=null,Yt=null,_m=!1,pd=!1,Wd=0,F8=0;function xn(){throw Error(te(321))}function h1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jr(t[n],e[n]))return!1;return!0}function f1(t,e,n,r,s,i){if(_a=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kp.current=t===null||t.memoizedState===null?q8:G8,t=n(r,s),pd){i=0;do{if(pd=!1,Wd=0,25<=i)throw Error(te(301));i+=1,Yt=qt=null,e.updateQueue=null,kp.current=W8,t=n(r,s)}while(pd)}if(kp.current=bm,e=qt!==null&&qt.next!==null,_a=0,Yt=qt=_t=null,_m=!1,e)throw Error(te(300));return t}function p1(){var t=Wd!==0;return Wd=0,t}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?_t.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function jr(){if(qt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var e=Yt===null?_t.memoizedState:Yt.next;if(e!==null)Yt=e,qt=t;else{if(t===null)throw Error(te(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Yt===null?_t.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Hd(t,e){return typeof e=="function"?e(t):e}function t0(t){var e=jr(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=qt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((_a&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,_t.lanes|=u,ba|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Jr(r,e.memoizedState)||(qn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_t.lanes|=i,ba|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function n0(t){var e=jr(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jr(i,e.memoizedState)||(qn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function H2(){}function K2(t,e){var n=_t,r=jr(),s=e(),i=!Jr(r.memoizedState,s);if(i&&(r.memoizedState=s,qn=!0),r=r.queue,m1(X2.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,Kd(9,Y2.bind(null,n,r,s,e),void 0,null),nn===null)throw Error(te(349));_a&30||Q2(n,e,s)}return s}function Q2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Y2(t,e,n,r){e.value=n,e.getSnapshot=r,J2(e)&&Z2(t)}function X2(t,e,n){return n(function(){J2(e)&&Z2(t)})}function J2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jr(t,n)}catch{return!0}}function Z2(t){var e=ti(t,1);e!==null&&Yr(e,t,1,-1)}function wS(t){var e=us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hd,lastRenderedState:t},e.queue=t,t=t.dispatch=z8.bind(null,_t,t),[e.memoizedState,t]}function Kd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ek(){return jr().memoizedState}function Dp(t,e,n,r){var s=us();_t.flags|=t,s.memoizedState=Kd(1|e,n,void 0,r===void 0?null:r)}function $g(t,e,n,r){var s=jr();r=r===void 0?null:r;var i=void 0;if(qt!==null){var o=qt.memoizedState;if(i=o.destroy,r!==null&&h1(r,o.deps)){s.memoizedState=Kd(e,n,i,r);return}}_t.flags|=t,s.memoizedState=Kd(1|e,n,i,r)}function _S(t,e){return Dp(8390656,8,t,e)}function m1(t,e){return $g(2048,8,t,e)}function tk(t,e){return $g(4,2,t,e)}function nk(t,e){return $g(4,4,t,e)}function rk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sk(t,e,n){return n=n!=null?n.concat([t]):null,$g(4,4,rk.bind(null,e,t),n)}function g1(){}function ik(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&h1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ok(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&h1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ak(t,e,n){return _a&21?(Jr(n,e)||(n=h2(),_t.lanes|=n,ba|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qn=!0),t.memoizedState=n)}function U8(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var r=e0.transition;e0.transition={};try{t(!1),e()}finally{Je=n,e0.transition=r}}function lk(){return jr().memoizedState}function B8(t,e,n){var r=io(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ck(t))uk(e,n);else if(n=q2(t,e,n,r),n!==null){var s=jn();Yr(n,t,r,s),dk(n,e,r)}}function z8(t,e,n){var r=io(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ck(t))uk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Jr(a,o)){var l=e.interleaved;l===null?(s.next=s,a1(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=q2(t,e,s,r),n!==null&&(s=jn(),Yr(n,t,r,s),dk(n,e,r))}}function ck(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function uk(t,e){pd=_m=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H_(t,n)}}var bm={readContext:Dr,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},q8={readContext:Dr,useCallback:function(t,e){return us().memoizedState=[t,e===void 0?null:e],t},useContext:Dr,useEffect:_S,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dp(4194308,4,rk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dp(4,2,t,e)},useMemo:function(t,e){var n=us();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=us();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B8.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=us();return t={current:t},e.memoizedState=t},useState:wS,useDebugValue:g1,useDeferredValue:function(t){return us().memoizedState=t},useTransition:function(){var t=wS(!1),e=t[0];return t=U8.bind(null,t[1]),us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,s=us();if(gt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),nn===null)throw Error(te(349));_a&30||Q2(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_S(X2.bind(null,r,i,t),[t]),r.flags|=2048,Kd(9,Y2.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=us(),e=nn.identifierPrefix;if(gt){var n=Us,r=Fs;n=(r&~(1<<32-Qr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=F8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G8={readContext:Dr,useCallback:ik,useContext:Dr,useEffect:m1,useImperativeHandle:sk,useInsertionEffect:tk,useLayoutEffect:nk,useMemo:ok,useReducer:t0,useRef:ek,useState:function(){return t0(Hd)},useDebugValue:g1,useDeferredValue:function(t){var e=jr();return ak(e,qt.memoizedState,t)},useTransition:function(){var t=t0(Hd)[0],e=jr().memoizedState;return[t,e]},useMutableSource:H2,useSyncExternalStore:K2,useId:lk,unstable_isNewReconciler:!1},W8={readContext:Dr,useCallback:ik,useContext:Dr,useEffect:m1,useImperativeHandle:sk,useInsertionEffect:tk,useLayoutEffect:nk,useMemo:ok,useReducer:n0,useRef:ek,useState:function(){return n0(Hd)},useDebugValue:g1,useDeferredValue:function(t){var e=jr();return qt===null?e.memoizedState=t:ak(e,qt.memoizedState,t)},useTransition:function(){var t=n0(Hd)[0],e=jr().memoizedState;return[t,e]},useMutableSource:H2,useSyncExternalStore:K2,useId:lk,unstable_isNewReconciler:!1};function Gr(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fg={isMounted:function(t){return(t=t._reactInternals)?Ha(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jn(),s=io(t),i=Hs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ro(t,i,s),e!==null&&(Yr(e,t,s,r),Np(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jn(),s=io(t),i=Hs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ro(t,i,s),e!==null&&(Yr(e,t,s,r),Np(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),r=io(t),s=Hs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ro(t,s,r),e!==null&&(Yr(e,t,r,n),Np(e,t,r))}};function bS(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Fd(n,r)||!Fd(s,i):!0}function hk(t,e,n){var r=!1,s=mo,i=e.contextType;return typeof i=="object"&&i!==null?i=Dr(i):(s=Qn(e)?xa:Cn.current,r=e.contextTypes,i=(r=r!=null)?vc(t,s):mo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ES(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fg.enqueueReplaceState(e,e.state,null)}function Kx(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},l1(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Dr(i):(i=Qn(e)?xa:Cn.current,s.context=vc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hx(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fg.enqueueReplaceState(s,s.state,null),xm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bc(t,e){try{var n="",r=e;do n+=wU(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function r0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H8=typeof WeakMap=="function"?WeakMap:Map;function fk(t,e,n){n=Hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Tm||(Tm=!0,iw=r),Qx(t,e)},n}function pk(t,e,n){n=Hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qx(t,e),typeof r!="function"&&(so===null?so=new Set([this]):so.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function TS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H8;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=a9.bind(null,t,e,n),e.then(t,t))}function IS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function SS(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hs(-1,1),e.tag=2,ro(n,e,1))),n.lanes|=1),t)}var K8=fi.ReactCurrentOwner,qn=!1;function Dn(t,e,n,r){e.child=t===null?z2(e,null,n,r):wc(e,t.child,n,r)}function CS(t,e,n,r,s){n=n.render;var i=e.ref;return rc(e,s),r=f1(t,e,n,r,i,s),n=p1(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(gt&&n&&t1(e),e.flags|=1,Dn(t,e,r,s),e.child)}function PS(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!T1(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mk(t,e,i,r,s)):(t=Vp(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Fd,n(o,r)&&t.ref===e.ref)return ni(t,e,s)}return e.flags|=1,t=oo(i,r),t.ref=e.ref,t.return=e,e.child=t}function mk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Fd(i,r)&&t.ref===e.ref)if(qn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(qn=!0);else return e.lanes=t.lanes,ni(t,e,s)}return Yx(t,e,n,r,s)}function gk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Kl,or),or|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(Kl,or),or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,rt(Kl,or),or|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,rt(Kl,or),or|=r;return Dn(t,e,s,n),e.child}function yk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yx(t,e,n,r,s){var i=Qn(n)?xa:Cn.current;return i=vc(e,i),rc(e,s),n=f1(t,e,n,r,i,s),r=p1(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(gt&&r&&t1(e),e.flags|=1,Dn(t,e,n,s),e.child)}function AS(t,e,n,r,s){if(Qn(n)){var i=!0;pm(e)}else i=!1;if(rc(e,s),e.stateNode===null)jp(t,e),hk(e,n,r),Kx(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dr(c):(c=Qn(n)?xa:Cn.current,c=vc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ES(e,o,r,c),Li=!1;var f=e.memoizedState;o.state=f,xm(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Kn.current||Li?(typeof u=="function"&&(Hx(e,n,u,r),l=e.memoizedState),(a=Li||bS(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,G2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Gr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dr(l):(l=Qn(n)?xa:Cn.current,l=vc(e,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&ES(e,o,r,l),Li=!1,f=e.memoizedState,o.state=f,xm(e,r,o,s);var v=e.memoizedState;a!==d||f!==v||Kn.current||Li?(typeof g=="function"&&(Hx(e,n,g,r),v=e.memoizedState),(c=Li||bS(e,n,c,r,f,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Xx(t,e,n,r,i,s)}function Xx(t,e,n,r,s,i){yk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&pS(e,n,!1),ni(t,e,i);r=e.stateNode,K8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wc(e,t.child,null,i),e.child=wc(e,null,a,i)):Dn(t,e,a,i),e.memoizedState=r.state,s&&pS(e,n,!0),e.child}function vk(t){var e=t.stateNode;e.pendingContext?fS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fS(t,e.context,!1),c1(t,e.containerInfo)}function RS(t,e,n,r,s){return xc(),r1(s),e.flags|=256,Dn(t,e,n,r),e.child}var Jx={dehydrated:null,treeContext:null,retryLane:0};function Zx(t){return{baseLanes:t,cachePool:null,transitions:null}}function xk(t,e,n){var r=e.pendingProps,s=xt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rt(xt,s&1),t===null)return Gx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=zg(o,r,0,null),t=pa(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Zx(n),e.memoizedState=Jx,t):y1(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Q8(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=oo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=oo(a,i):(i=pa(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Zx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Jx,r}return i=t.child,t=i.sibling,r=oo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function y1(t,e){return e=zg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gf(t,e,n,r){return r!==null&&r1(r),wc(e,t.child,null,n),t=y1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q8(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=r0(Error(te(422))),Gf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=zg({mode:"visible",children:r.children},s,0,null),i=pa(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wc(e,t.child,null,o),e.child.memoizedState=Zx(o),e.memoizedState=Jx,i);if(!(e.mode&1))return Gf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(te(419)),r=r0(i,r,void 0),Gf(t,e,o,r)}if(a=(o&t.childLanes)!==0,qn||a){if(r=nn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ti(t,s),Yr(r,t,s,-1))}return E1(),r=r0(Error(te(421))),Gf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=l9.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,lr=no(s.nextSibling),ur=e,gt=!0,Hr=null,t!==null&&(Sr[Cr++]=Fs,Sr[Cr++]=Us,Sr[Cr++]=wa,Fs=t.id,Us=t.overflow,wa=e),e=y1(e,r.children),e.flags|=4096,e)}function NS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wx(t.return,e,n)}function s0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Dn(t,e,r.children,n),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&NS(t,n,e);else if(t.tag===19)NS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(xt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),s0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}s0(e,!0,n,null,i);break;case"together":s0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ba|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=oo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y8(t,e,n){switch(e.tag){case 3:vk(e),xc();break;case 5:W2(e);break;case 1:Qn(e.type)&&pm(e);break;case 4:c1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;rt(ym,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?xk(t,e,n):(rt(xt,xt.current&1),t=ni(t,e,n),t!==null?t.sibling:null);rt(xt,xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,gk(t,e,n)}return ni(t,e,n)}var _k,ew,bk,Ek;_k=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ew=function(){};bk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,oa(ys.current);var i=null;switch(n){case"input":s=bx(t,s),r=bx(t,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=Ix(t,s),r=Ix(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hm)}Cx(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Ek=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lu(t,e){if(!gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X8(t,e,n){var r=e.pendingProps;switch(n1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(e),null;case 1:return Qn(e.type)&&fm(),wn(e),null;case 3:return r=e.stateNode,_c(),ht(Kn),ht(Cn),d1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hr!==null&&(lw(Hr),Hr=null))),ew(t,e),wn(e),null;case 5:u1(e);var s=oa(Gd.current);if(n=e.type,t!==null&&e.stateNode!=null)bk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return wn(e),null}if(t=oa(ys.current),zf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hs]=e,r[zd]=i,t=(e.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(s=0;s<ed.length;s++)ct(ed[s],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":FI(r,i),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ct("invalid",r);break;case"textarea":BI(r,i),ct("invalid",r)}Cx(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bf(r.textContent,a,t),s=["children",""+a]):Dd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ct("scroll",r)}switch(n){case"input":jf(r),UI(r,i,!0);break;case"textarea":jf(r),zI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hs]=e,t[zd]=r,_k(t,e,!1,!1),e.stateNode=t;e:{switch(o=Px(n,r),n){case"dialog":ct("cancel",t),ct("close",t),s=r;break;case"iframe":case"object":case"embed":ct("load",t),s=r;break;case"video":case"audio":for(s=0;s<ed.length;s++)ct(ed[s],t);s=r;break;case"source":ct("error",t),s=r;break;case"img":case"image":case"link":ct("error",t),ct("load",t),s=r;break;case"details":ct("toggle",t),s=r;break;case"input":FI(t,r),s=bx(t,r),ct("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),ct("invalid",t);break;case"textarea":BI(t,r),s=Ix(t,r),ct("invalid",t);break;default:s=r}Cx(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?e2(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&JN(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&jd(t,l):typeof l=="number"&&jd(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Dd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ct("scroll",t):l!=null&&U_(t,i,l,o))}switch(n){case"input":jf(t),UI(t,r,!1);break;case"textarea":jf(t),zI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+po(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Zl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Zl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=hm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wn(e),null;case 6:if(t&&e.stateNode!=null)Ek(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=oa(Gd.current),oa(ys.current),zf(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(i=r.nodeValue!==n)&&(t=ur,t!==null))switch(t.tag){case 3:Bf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return wn(e),null;case 13:if(ht(xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gt&&lr!==null&&e.mode&1&&!(e.flags&128))U2(),xc(),e.flags|=98560,i=!1;else if(i=zf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[hs]=e}else xc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wn(e),i=!1}else Hr!==null&&(lw(Hr),Hr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Gt===0&&(Gt=3):E1())),e.updateQueue!==null&&(e.flags|=4),wn(e),null);case 4:return _c(),ew(t,e),t===null&&Ud(e.stateNode.containerInfo),wn(e),null;case 10:return o1(e.type._context),wn(e),null;case 17:return Qn(e.type)&&fm(),wn(e),null;case 19:if(ht(xt),i=e.memoizedState,i===null)return wn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Lu(i,!1);else{if(Gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wm(t),o!==null){for(e.flags|=128,Lu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(xt,xt.current&1|2),e.child}t=t.sibling}i.tail!==null&&jt()>Ec&&(e.flags|=128,r=!0,Lu(i,!1),e.lanes=4194304)}else{if(!r)if(t=wm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gt)return wn(e),null}else 2*jt()-i.renderingStartTime>Ec&&n!==1073741824&&(e.flags|=128,r=!0,Lu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=jt(),e.sibling=null,n=xt.current,rt(xt,r?n&1|2:n&1),e):(wn(e),null);case 22:case 23:return b1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?or&1073741824&&(wn(e),e.subtreeFlags&6&&(e.flags|=8192)):wn(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function J8(t,e){switch(n1(e),e.tag){case 1:return Qn(e.type)&&fm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _c(),ht(Kn),ht(Cn),d1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return u1(e),null;case 13:if(ht(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));xc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(xt),null;case 4:return _c(),null;case 10:return o1(e.type._context),null;case 22:case 23:return b1(),null;case 24:return null;default:return null}}var Wf=!1,Tn=!1,Z8=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Hl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function tw(t,e,n){try{n()}catch(r){At(t,e,r)}}var kS=!1;function e9(t,e){if(Lx=cm,t=P2(),e1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($x={focusedElem:t,selectionRange:n},cm=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:Gr(e.type,y),w);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(S){At(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return v=kS,kS=!1,v}function md(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tw(e,n,i)}s=s.next}while(s!==r)}}function Ug(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Tk(t){var e=t.alternate;e!==null&&(t.alternate=null,Tk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[zd],delete e[Bx],delete e[M8],delete e[V8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ik(t){return t.tag===5||t.tag===3||t.tag===4}function DS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ik(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hm));else if(r!==4&&(t=t.child,t!==null))for(rw(t,e,n),t=t.sibling;t!==null;)rw(t,e,n),t=t.sibling}function sw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sw(t,e,n),t=t.sibling;t!==null;)sw(t,e,n),t=t.sibling}var ln=null,Wr=!1;function Pi(t,e,n){for(n=n.child;n!==null;)Sk(t,e,n),n=n.sibling}function Sk(t,e,n){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(Dg,n)}catch{}switch(n.tag){case 5:Tn||Hl(n,e);case 6:var r=ln,s=Wr;ln=null,Pi(t,e,n),ln=r,Wr=s,ln!==null&&(Wr?(t=ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ln.removeChild(n.stateNode));break;case 18:ln!==null&&(Wr?(t=ln,n=n.stateNode,t.nodeType===8?Xv(t.parentNode,n):t.nodeType===1&&Xv(t,n),Ld(t)):Xv(ln,n.stateNode));break;case 4:r=ln,s=Wr,ln=n.stateNode.containerInfo,Wr=!0,Pi(t,e,n),ln=r,Wr=s;break;case 0:case 11:case 14:case 15:if(!Tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tw(n,e,o),s=s.next}while(s!==r)}Pi(t,e,n);break;case 1:if(!Tn&&(Hl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){At(n,e,a)}Pi(t,e,n);break;case 21:Pi(t,e,n);break;case 22:n.mode&1?(Tn=(r=Tn)||n.memoizedState!==null,Pi(t,e,n),Tn=r):Pi(t,e,n);break;default:Pi(t,e,n)}}function jS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z8),e.forEach(function(r){var s=c9.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ln=a.stateNode,Wr=!1;break e;case 3:ln=a.stateNode.containerInfo,Wr=!0;break e;case 4:ln=a.stateNode.containerInfo,Wr=!0;break e}a=a.return}if(ln===null)throw Error(te(160));Sk(i,o,s),ln=null,Wr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){At(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ck(e,t),e=e.sibling}function Ck(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(e,t),ls(t),r&4){try{md(3,t,t.return),Ug(3,t)}catch(y){At(t,t.return,y)}try{md(5,t,t.return)}catch(y){At(t,t.return,y)}}break;case 1:zr(e,t),ls(t),r&512&&n!==null&&Hl(n,n.return);break;case 5:if(zr(e,t),ls(t),r&512&&n!==null&&Hl(n,n.return),t.flags&32){var s=t.stateNode;try{jd(s,"")}catch(y){At(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&QN(s,i),Px(a,o);var c=Px(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?e2(s,d):u==="dangerouslySetInnerHTML"?JN(s,d):u==="children"?jd(s,d):U_(s,u,d,c)}switch(a){case"input":Ex(s,i);break;case"textarea":YN(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Zl(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Zl(s,!!i.multiple,i.defaultValue,!0):Zl(s,!!i.multiple,i.multiple?[]:"",!1))}s[zd]=i}catch(y){At(t,t.return,y)}}break;case 6:if(zr(e,t),ls(t),r&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){At(t,t.return,y)}}break;case 3:if(zr(e,t),ls(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ld(e.containerInfo)}catch(y){At(t,t.return,y)}break;case 4:zr(e,t),ls(t);break;case 13:zr(e,t),ls(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(w1=jt())),r&4&&jS(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Tn=(c=Tn)||u,zr(e,t),Tn=c):zr(e,t),ls(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(pe=t,u=t.child;u!==null;){for(d=pe=u;pe!==null;){switch(f=pe,g=f.child,f.tag){case 0:case 11:case 14:case 15:md(4,f,f.return);break;case 1:Hl(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){At(r,n,y)}}break;case 5:Hl(f,f.return);break;case 22:if(f.memoizedState!==null){MS(d);continue}}g!==null?(g.return=f,pe=g):MS(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ZN("display",o))}catch(y){At(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){At(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zr(e,t),ls(t),r&4&&jS(t);break;case 21:break;default:zr(e,t),ls(t)}}function ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ik(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(jd(s,""),r.flags&=-33);var i=DS(t);sw(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=DS(t);rw(t,a,o);break;default:throw Error(te(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function t9(t,e,n){pe=t,Pk(t)}function Pk(t,e,n){for(var r=(t.mode&1)!==0;pe!==null;){var s=pe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Tn;a=Wf;var c=Tn;if(Wf=o,(Tn=l)&&!c)for(pe=s;pe!==null;)o=pe,l=o.child,o.tag===22&&o.memoizedState!==null?VS(s):l!==null?(l.return=o,pe=l):VS(s);for(;i!==null;)pe=i,Pk(i),i=i.sibling;pe=s,Wf=a,Tn=c}OS(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,pe=i):OS(t)}}function OS(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tn||Ug(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xS(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ld(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Tn||e.flags&512&&nw(e)}catch(f){At(e,e.return,f)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function MS(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function VS(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ug(4,e)}catch(l){At(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){At(e,s,l)}}var i=e.return;try{nw(e)}catch(l){At(e,i,l)}break;case 5:var o=e.return;try{nw(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pe=a;break}pe=e.return}}var n9=Math.ceil,Em=fi.ReactCurrentDispatcher,v1=fi.ReactCurrentOwner,Ar=fi.ReactCurrentBatchConfig,qe=0,nn=null,Bt=null,dn=0,or=0,Kl=Po(0),Gt=0,Qd=null,ba=0,Bg=0,x1=0,gd=null,Bn=null,w1=0,Ec=1/0,ks=null,Tm=!1,iw=null,so=null,Hf=!1,Yi=null,Im=0,yd=0,ow=null,Op=-1,Mp=0;function jn(){return qe&6?jt():Op!==-1?Op:Op=jt()}function io(t){return t.mode&1?qe&2&&dn!==0?dn&-dn:$8.transition!==null?(Mp===0&&(Mp=h2()),Mp):(t=Je,t!==0||(t=window.event,t=t===void 0?16:x2(t.type)),t):1}function Yr(t,e,n,r){if(50<yd)throw yd=0,ow=null,Error(te(185));Sh(t,n,r),(!(qe&2)||t!==nn)&&(t===nn&&(!(qe&2)&&(Bg|=n),Gt===4&&Ui(t,dn)),Yn(t,r),n===1&&qe===0&&!(e.mode&1)&&(Ec=jt()+500,Lg&&Ao()))}function Yn(t,e){var n=t.callbackNode;$U(t,e);var r=lm(t,t===nn?dn:0);if(r===0)n!==null&&WI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WI(n),e===1)t.tag===0?L8(LS.bind(null,t)):L2(LS.bind(null,t)),j8(function(){!(qe&6)&&Ao()}),n=null;else{switch(f2(r)){case 1:n=W_;break;case 4:n=u2;break;case 16:n=am;break;case 536870912:n=d2;break;default:n=am}n=Mk(n,Ak.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ak(t,e){if(Op=-1,Mp=0,qe&6)throw Error(te(327));var n=t.callbackNode;if(sc()&&t.callbackNode!==n)return null;var r=lm(t,t===nn?dn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sm(t,r);else{e=r;var s=qe;qe|=2;var i=Nk();(nn!==t||dn!==e)&&(ks=null,Ec=jt()+500,fa(t,e));do try{i9();break}catch(a){Rk(t,a)}while(1);i1(),Em.current=i,qe=s,Bt!==null?e=0:(nn=null,dn=0,e=Gt)}if(e!==0){if(e===2&&(s=Dx(t),s!==0&&(r=s,e=aw(t,s))),e===1)throw n=Qd,fa(t,0),Ui(t,r),Yn(t,jt()),n;if(e===6)Ui(t,r);else{if(s=t.current.alternate,!(r&30)&&!r9(s)&&(e=Sm(t,r),e===2&&(i=Dx(t),i!==0&&(r=i,e=aw(t,i))),e===1))throw n=Qd,fa(t,0),Ui(t,r),Yn(t,jt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:Ho(t,Bn,ks);break;case 3:if(Ui(t,r),(r&130023424)===r&&(e=w1+500-jt(),10<e)){if(lm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ux(Ho.bind(null,t,Bn,ks),e);break}Ho(t,Bn,ks);break;case 4:if(Ui(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Qr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*n9(r/1960))-r,10<r){t.timeoutHandle=Ux(Ho.bind(null,t,Bn,ks),r);break}Ho(t,Bn,ks);break;case 5:Ho(t,Bn,ks);break;default:throw Error(te(329))}}}return Yn(t,jt()),t.callbackNode===n?Ak.bind(null,t):null}function aw(t,e){var n=gd;return t.current.memoizedState.isDehydrated&&(fa(t,e).flags|=256),t=Sm(t,e),t!==2&&(e=Bn,Bn=n,e!==null&&lw(e)),t}function lw(t){Bn===null?Bn=t:Bn.push.apply(Bn,t)}function r9(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e){for(e&=~x1,e&=~Bg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qr(e),r=1<<n;t[n]=-1,e&=~r}}function LS(t){if(qe&6)throw Error(te(327));sc();var e=lm(t,0);if(!(e&1))return Yn(t,jt()),null;var n=Sm(t,e);if(t.tag!==0&&n===2){var r=Dx(t);r!==0&&(e=r,n=aw(t,r))}if(n===1)throw n=Qd,fa(t,0),Ui(t,e),Yn(t,jt()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ho(t,Bn,ks),Yn(t,jt()),null}function _1(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(Ec=jt()+500,Lg&&Ao())}}function Ea(t){Yi!==null&&Yi.tag===0&&!(qe&6)&&sc();var e=qe;qe|=1;var n=Ar.transition,r=Je;try{if(Ar.transition=null,Je=1,t)return t()}finally{Je=r,Ar.transition=n,qe=e,!(qe&6)&&Ao()}}function b1(){or=Kl.current,ht(Kl)}function fa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,D8(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(n1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fm();break;case 3:_c(),ht(Kn),ht(Cn),d1();break;case 5:u1(r);break;case 4:_c();break;case 13:ht(xt);break;case 19:ht(xt);break;case 10:o1(r.type._context);break;case 22:case 23:b1()}n=n.return}if(nn=t,Bt=t=oo(t.current,null),dn=or=e,Gt=0,Qd=null,x1=Bg=ba=0,Bn=gd=null,ia!==null){for(e=0;e<ia.length;e++)if(n=ia[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ia=null}return t}function Rk(t,e){do{var n=Bt;try{if(i1(),kp.current=bm,_m){for(var r=_t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_m=!1}if(_a=0,Yt=qt=_t=null,pd=!1,Wd=0,v1.current=null,n===null||n.return===null){Gt=1,Qd=e,Bt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=dn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=IS(o);if(g!==null){g.flags&=-257,SS(g,o,a,i,e),g.mode&1&&TS(i,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){TS(i,c,e),E1();break e}l=Error(te(426))}}else if(gt&&a.mode&1){var w=IS(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),SS(w,o,a,i,e),r1(bc(l,a));break e}}i=l=bc(l,a),Gt!==4&&(Gt=2),gd===null?gd=[i]:gd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=fk(i,l,e);vS(i,x);break e;case 1:a=l;var _=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(so===null||!so.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=pk(i,a,e);vS(i,S);break e}}i=i.return}while(i!==null)}Dk(n)}catch(k){e=k,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(1)}function Nk(){var t=Em.current;return Em.current=bm,t===null?bm:t}function E1(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),nn===null||!(ba&268435455)&&!(Bg&268435455)||Ui(nn,dn)}function Sm(t,e){var n=qe;qe|=2;var r=Nk();(nn!==t||dn!==e)&&(ks=null,fa(t,e));do try{s9();break}catch(s){Rk(t,s)}while(1);if(i1(),qe=n,Em.current=r,Bt!==null)throw Error(te(261));return nn=null,dn=0,Gt}function s9(){for(;Bt!==null;)kk(Bt)}function i9(){for(;Bt!==null&&!RU();)kk(Bt)}function kk(t){var e=Ok(t.alternate,t,or);t.memoizedProps=t.pendingProps,e===null?Dk(t):Bt=e,v1.current=null}function Dk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=J8(n,e),n!==null){n.flags&=32767,Bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Gt=6,Bt=null;return}}else if(n=X8(n,e,or),n!==null){Bt=n;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=t}while(e!==null);Gt===0&&(Gt=5)}function Ho(t,e,n){var r=Je,s=Ar.transition;try{Ar.transition=null,Je=1,o9(t,e,n,r)}finally{Ar.transition=s,Je=r}return null}function o9(t,e,n,r){do sc();while(Yi!==null);if(qe&6)throw Error(te(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(FU(t,i),t===nn&&(Bt=nn=null,dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hf||(Hf=!0,Mk(am,function(){return sc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ar.transition,Ar.transition=null;var o=Je;Je=1;var a=qe;qe|=4,v1.current=null,e9(t,n),Ck(n,t),S8($x),cm=!!Lx,$x=Lx=null,t.current=n,t9(n),NU(),qe=a,Je=o,Ar.transition=i}else t.current=n;if(Hf&&(Hf=!1,Yi=t,Im=s),i=t.pendingLanes,i===0&&(so=null),jU(n.stateNode),Yn(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Tm)throw Tm=!1,t=iw,iw=null,t;return Im&1&&t.tag!==0&&sc(),i=t.pendingLanes,i&1?t===ow?yd++:(yd=0,ow=t):yd=0,Ao(),null}function sc(){if(Yi!==null){var t=f2(Im),e=Ar.transition,n=Je;try{if(Ar.transition=null,Je=16>t?16:t,Yi===null)var r=!1;else{if(t=Yi,Yi=null,Im=0,qe&6)throw Error(te(331));var s=qe;for(qe|=4,pe=t.current;pe!==null;){var i=pe,o=i.child;if(pe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(pe=c;pe!==null;){var u=pe;switch(u.tag){case 0:case 11:case 15:md(8,u,i)}var d=u.child;if(d!==null)d.return=u,pe=d;else for(;pe!==null;){u=pe;var f=u.sibling,g=u.return;if(Tk(u),u===c){pe=null;break}if(f!==null){f.return=g,pe=f;break}pe=g}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}pe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,pe=o;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:md(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,pe=x;break e}pe=i.return}}var _=t.current;for(pe=_;pe!==null;){o=pe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,pe=b;else e:for(o=_;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ug(9,a)}}catch(k){At(a,a.return,k)}if(a===o){pe=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,pe=S;break e}pe=a.return}}if(qe=s,Ao(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(Dg,t)}catch{}r=!0}return r}finally{Je=n,Ar.transition=e}}return!1}function $S(t,e,n){e=bc(n,e),e=fk(t,e,1),t=ro(t,e,1),e=jn(),t!==null&&(Sh(t,1,e),Yn(t,e))}function At(t,e,n){if(t.tag===3)$S(t,t,n);else for(;e!==null;){if(e.tag===3){$S(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(so===null||!so.has(r))){t=bc(n,t),t=pk(e,t,1),e=ro(e,t,1),t=jn(),e!==null&&(Sh(e,1,t),Yn(e,t));break}}e=e.return}}function a9(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(dn&n)===n&&(Gt===4||Gt===3&&(dn&130023424)===dn&&500>jt()-w1?fa(t,0):x1|=n),Yn(t,e)}function jk(t,e){e===0&&(t.mode&1?(e=Vf,Vf<<=1,!(Vf&130023424)&&(Vf=4194304)):e=1);var n=jn();t=ti(t,e),t!==null&&(Sh(t,e,n),Yn(t,n))}function l9(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jk(t,n)}function c9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),jk(t,n)}var Ok;Ok=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kn.current)qn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qn=!1,Y8(t,e,n);qn=!!(t.flags&131072)}else qn=!1,gt&&e.flags&1048576&&$2(e,gm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jp(t,e),t=e.pendingProps;var s=vc(e,Cn.current);rc(e,n),s=f1(null,e,r,t,s,n);var i=p1();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(r)?(i=!0,pm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,l1(e),s.updater=Fg,e.stateNode=s,s._reactInternals=e,Kx(e,r,t,n),e=Xx(null,e,r,!0,i,n)):(e.tag=0,gt&&i&&t1(e),Dn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jp(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=d9(r),t=Gr(r,t),s){case 0:e=Yx(null,e,r,t,n);break e;case 1:e=AS(null,e,r,t,n);break e;case 11:e=CS(null,e,r,t,n);break e;case 14:e=PS(null,e,r,Gr(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),Yx(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),AS(t,e,r,s,n);case 3:e:{if(vk(e),t===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,G2(t,e),xm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bc(Error(te(423)),e),e=RS(t,e,r,n,s);break e}else if(r!==s){s=bc(Error(te(424)),e),e=RS(t,e,r,n,s);break e}else for(lr=no(e.stateNode.containerInfo.firstChild),ur=e,gt=!0,Hr=null,n=z2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xc(),r===s){e=ni(t,e,n);break e}Dn(t,e,r,n)}e=e.child}return e;case 5:return W2(e),t===null&&Gx(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Fx(r,s)?o=null:i!==null&&Fx(r,i)&&(e.flags|=32),yk(t,e),Dn(t,e,o,n),e.child;case 6:return t===null&&Gx(e),null;case 13:return xk(t,e,n);case 4:return c1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wc(e,null,r,n):Dn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),CS(t,e,r,s,n);case 7:return Dn(t,e,e.pendingProps,n),e.child;case 8:return Dn(t,e,e.pendingProps.children,n),e.child;case 12:return Dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,rt(ym,r._currentValue),r._currentValue=o,i!==null)if(Jr(i.value,o)){if(i.children===s.children&&!Kn.current){e=ni(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Hs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Wx(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wx(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Dn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,rc(e,n),s=Dr(s),r=r(s),e.flags|=1,Dn(t,e,r,n),e.child;case 14:return r=e.type,s=Gr(r,e.pendingProps),s=Gr(r.type,s),PS(t,e,r,s,n);case 15:return mk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),jp(t,e),e.tag=1,Qn(r)?(t=!0,pm(e)):t=!1,rc(e,n),hk(e,r,s),Kx(e,r,s,n),Xx(null,e,r,!0,t,n);case 19:return wk(t,e,n);case 22:return gk(t,e,n)}throw Error(te(156,e.tag))};function Mk(t,e){return c2(t,e)}function u9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(t,e,n,r){return new u9(t,e,n,r)}function T1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function d9(t){if(typeof t=="function")return T1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===z_)return 11;if(t===q_)return 14}return 2}function oo(t,e){var n=t.alternate;return n===null?(n=Pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vp(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")T1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ll:return pa(n.children,s,i,e);case B_:o=8,s|=8;break;case vx:return t=Pr(12,n,e,s|2),t.elementType=vx,t.lanes=i,t;case xx:return t=Pr(13,n,e,s),t.elementType=xx,t.lanes=i,t;case wx:return t=Pr(19,n,e,s),t.elementType=wx,t.lanes=i,t;case WN:return zg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qN:o=10;break e;case GN:o=9;break e;case z_:o=11;break e;case q_:o=14;break e;case Vi:o=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Pr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function pa(t,e,n,r){return t=Pr(7,t,r,e),t.lanes=n,t}function zg(t,e,n,r){return t=Pr(22,t,r,e),t.elementType=WN,t.lanes=n,t.stateNode={isHidden:!1},t}function i0(t,e,n){return t=Pr(6,t,null,e),t.lanes=n,t}function o0(t,e,n){return e=Pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function h9(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fv(0),this.expirationTimes=Fv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function I1(t,e,n,r,s,i,o,a,l){return t=new h9(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},l1(i),t}function f9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Vk(t){if(!t)return mo;t=t._reactInternals;e:{if(Ha(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(Qn(n))return V2(t,n,e)}return e}function Lk(t,e,n,r,s,i,o,a,l){return t=I1(n,r,!0,t,s,i,o,a,l),t.context=Vk(null),n=t.current,r=jn(),s=io(n),i=Hs(r,s),i.callback=e??null,ro(n,i,s),t.current.lanes=s,Sh(t,s,r),Yn(t,r),t}function qg(t,e,n,r){var s=e.current,i=jn(),o=io(s);return n=Vk(n),e.context===null?e.context=n:e.pendingContext=n,e=Hs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ro(s,e,o),t!==null&&(Yr(t,s,o,i),Np(t,s,o)),o}function Cm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function S1(t,e){FS(t,e),(t=t.alternate)&&FS(t,e)}function p9(){return null}var $k=typeof reportError=="function"?reportError:function(t){console.error(t)};function C1(t){this._internalRoot=t}Gg.prototype.render=C1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));qg(t,e,null,null)};Gg.prototype.unmount=C1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ea(function(){qg(null,t,null,null)}),e[ei]=null}};function Gg(t){this._internalRoot=t}Gg.prototype.unstable_scheduleHydration=function(t){if(t){var e=g2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fi.length&&e!==0&&e<Fi[n].priority;n++);Fi.splice(n,0,t),n===0&&v2(t)}};function P1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function US(){}function m9(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Cm(o);i.call(c)}}var o=Lk(e,r,t,0,null,!1,!1,"",US);return t._reactRootContainer=o,t[ei]=o.current,Ud(t.nodeType===8?t.parentNode:t),Ea(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Cm(l);a.call(c)}}var l=I1(t,0,!1,null,null,!1,!1,"",US);return t._reactRootContainer=l,t[ei]=l.current,Ud(t.nodeType===8?t.parentNode:t),Ea(function(){qg(e,l,n,r)}),l}function Hg(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Cm(o);a.call(l)}}qg(e,o,t,s)}else o=m9(n,e,t,s,r);return Cm(o)}p2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zu(e.pendingLanes);n!==0&&(H_(e,n|1),Yn(e,jt()),!(qe&6)&&(Ec=jt()+500,Ao()))}break;case 13:Ea(function(){var r=ti(t,1);if(r!==null){var s=jn();Yr(r,t,1,s)}}),S1(t,1)}};K_=function(t){if(t.tag===13){var e=ti(t,134217728);if(e!==null){var n=jn();Yr(e,t,134217728,n)}S1(t,134217728)}};m2=function(t){if(t.tag===13){var e=io(t),n=ti(t,e);if(n!==null){var r=jn();Yr(n,t,e,r)}S1(t,e)}};g2=function(){return Je};y2=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};Rx=function(t,e,n){switch(e){case"input":if(Ex(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vg(r);if(!s)throw Error(te(90));KN(r),Ex(r,s)}}}break;case"textarea":YN(t,n);break;case"select":e=n.value,e!=null&&Zl(t,!!n.multiple,e,!1)}};r2=_1;s2=Ea;var g9={usingClientEntryPoint:!1,Events:[Ph,Bl,Vg,t2,n2,_1]},$u={findFiberByHostInstance:sa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y9={bundleType:$u.bundleType,version:$u.version,rendererPackageName:$u.rendererPackageName,rendererConfig:$u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=a2(t),t===null?null:t.stateNode},findFiberByHostInstance:$u.findFiberByHostInstance||p9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{Dg=Kf.inject(y9),gs=Kf}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g9;yr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P1(e))throw Error(te(200));return f9(t,e,null,n)};yr.createRoot=function(t,e){if(!P1(t))throw Error(te(299));var n=!1,r="",s=$k;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=I1(t,1,!1,null,null,n,!1,r,s),t[ei]=e.current,Ud(t.nodeType===8?t.parentNode:t),new C1(e)};yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=a2(e),t=t===null?null:t.stateNode,t};yr.flushSync=function(t){return Ea(t)};yr.hydrate=function(t,e,n){if(!Wg(e))throw Error(te(200));return Hg(null,t,e,!0,n)};yr.hydrateRoot=function(t,e,n){if(!P1(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$k;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Lk(e,null,t,1,n??null,s,!1,i,o),t[ei]=e.current,Ud(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gg(e)};yr.render=function(t,e,n){if(!Wg(e))throw Error(te(200));return Hg(null,t,e,!1,n)};yr.unmountComponentAtNode=function(t){if(!Wg(t))throw Error(te(40));return t._reactRootContainer?(Ea(function(){Hg(null,null,t,!1,function(){t._reactRootContainer=null,t[ei]=null})}),!0):!1};yr.unstable_batchedUpdates=_1;yr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wg(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return Hg(t,e,n,!1,r)};yr.version="18.3.1-next-f1338f8080-20240426";function Fk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fk)}catch(t){console.error(t)}}Fk(),FN.exports=yr;var ns=FN.exports;const Kg=PN(ns);var BS=ns;gx.createRoot=BS.createRoot,gx.hydrateRoot=BS.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yd.apply(this,arguments)}var Xi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xi||(Xi={}));const zS="popstate";function v9(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return cw("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Pm(s)}return w9(e,n,null,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x9(){return Math.random().toString(36).substr(2,8)}function qS(t,e){return{usr:t.state,key:t.key,idx:e}}function cw(t,e,n,r){return n===void 0&&(n=null),Yd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zc(e):e,{state:n,key:e&&e.key||r||x9()})}function Pm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function w9(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Xi.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Yd({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Xi.Pop;let w=u(),x=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:x})}function f(w,x){a=Xi.Push;let _=cw(y.location,w,x);n&&n(_,w),c=u()+1;let b=qS(_,c),S=y.createHref(_);try{o.pushState(b,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(S)}i&&l&&l({action:a,location:y.location,delta:1})}function g(w,x){a=Xi.Replace;let _=cw(y.location,w,x);n&&n(_,w),c=u();let b=qS(_,c),S=y.createHref(_);o.replaceState(b,"",S),i&&l&&l({action:a,location:y.location,delta:0})}function v(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof w=="string"?w:Pm(w);return _=_.replace(/ $/,"%20"),bt(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let y={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(zS,d),l=w,()=>{s.removeEventListener(zS,d),l=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let x=v(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:g,go(w){return o.go(w)}};return y}var GS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(GS||(GS={}));function _9(t,e,n){return n===void 0&&(n="/"),b9(t,e,n,!1)}function b9(t,e,n,r){let s=typeof e=="string"?Zc(e):e,i=Tc(s.pathname||"/",n);if(i==null)return null;let o=Bk(t);E9(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=j9(i);a=k9(o[l],c,r)}return a}function Bk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(bt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ao([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Bk(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:R9(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of zk(i.path))s(i,o,l)}),e}function zk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function E9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:N9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const T9=/^:[\w-]+$/,I9=3,S9=2,C9=1,P9=10,A9=-2,WS=t=>t==="*";function R9(t,e){let n=t.split("/"),r=n.length;return n.some(WS)&&(r+=A9),e&&(r+=S9),n.filter(s=>!WS(s)).reduce((s,i)=>s+(T9.test(i)?I9:i===""?C9:P9),r)}function N9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function k9(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Am({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Am({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ao([i,d.pathname]),pathnameBase:L9(ao([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=ao([i,d.pathnameBase]))}return o}function Am(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=D9(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:g}=u;if(f==="*"){let y=a[d]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[d];return g&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function D9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Uk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function j9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Tc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function O9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Zc(t):t;return{pathname:n?n.startsWith("/")?n:M9(n,e):e,search:$9(r),hash:F9(s)}}function M9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function a0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function A1(t,e){let n=V9(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function R1(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Zc(t):(s=Yd({},t),bt(!s.pathname||!s.pathname.includes("?"),a0("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),a0("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),a0("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=O9(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ao=t=>t.join("/").replace(/\/\/+/g,"/"),L9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qk=["post","put","patch","delete"];new Set(qk);const B9=["get",...qk];new Set(B9);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xd(){return Xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xd.apply(this,arguments)}const Qg=m.createContext(null),Gk=m.createContext(null),pi=m.createContext(null),Yg=m.createContext(null),Ss=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Wk=m.createContext(null);function z9(t,e){let{relative:n}=e===void 0?{}:e;eu()||bt(!1);let{basename:r,navigator:s}=m.useContext(pi),{hash:i,pathname:o,search:a}=Xg(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ao([r,o])),s.createHref({pathname:l,search:a,hash:i})}function eu(){return m.useContext(Yg)!=null}function Ro(){return eu()||bt(!1),m.useContext(Yg).location}function Hk(t){m.useContext(pi).static||m.useLayoutEffect(t)}function er(){let{isDataRoute:t}=m.useContext(Ss);return t?sB():q9()}function q9(){eu()||bt(!1);let t=m.useContext(Qg),{basename:e,future:n,navigator:r}=m.useContext(pi),{matches:s}=m.useContext(Ss),{pathname:i}=Ro(),o=JSON.stringify(A1(s,n.v7_relativeSplatPath)),a=m.useRef(!1);return Hk(()=>{a.current=!0}),m.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=R1(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ao([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}const G9=m.createContext(null);function W9(t){let e=m.useContext(Ss).outlet;return e&&m.createElement(G9.Provider,{value:t},e)}function N1(){let{matches:t}=m.useContext(Ss),e=t[t.length-1];return e?e.params:{}}function Xg(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=m.useContext(pi),{matches:s}=m.useContext(Ss),{pathname:i}=Ro(),o=JSON.stringify(A1(s,r.v7_relativeSplatPath));return m.useMemo(()=>R1(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function H9(t,e){return K9(t,e)}function K9(t,e,n,r){eu()||bt(!1);let{navigator:s}=m.useContext(pi),{matches:i}=m.useContext(Ss),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ro(),u;if(e){var d;let w=typeof e=="string"?Zc(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||bt(!1),u=w}else u=c;let f=u.pathname||"/",g=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=_9(t,{pathname:g}),y=Z9(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:ao([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:ao([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&y?m.createElement(Yg.Provider,{value:{location:Xd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xi.Pop}},y):y}function Q9(){let t=rB(),e=U9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,i)}const Y9=m.createElement(Q9,null);class X9 extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(Ss.Provider,{value:this.props.routeContext},m.createElement(Wk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J9(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(Qg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Ss.Provider,{value:e},r)}function Z9(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||bt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:g}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let g,v=!1,y=null,w=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||Y9,l&&(c<0&&f===0?(iB("route-fallback",!1),v=!0,w=null):c===f&&(v=!0,w=d.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,f+1)),_=()=>{let b;return g?b=y:v?b=w:d.route.Component?b=m.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,m.createElement(J9,{match:d,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?m.createElement(X9,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var Kk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Kk||{}),Rm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rm||{});function eB(t){let e=m.useContext(Qg);return e||bt(!1),e}function tB(t){let e=m.useContext(Gk);return e||bt(!1),e}function nB(t){let e=m.useContext(Ss);return e||bt(!1),e}function Qk(t){let e=nB(),n=e.matches[e.matches.length-1];return n.route.id||bt(!1),n.route.id}function rB(){var t;let e=m.useContext(Wk),n=tB(Rm.UseRouteError),r=Qk(Rm.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sB(){let{router:t}=eB(Kk.UseNavigateStable),e=Qk(Rm.UseNavigateStable),n=m.useRef(!1);return Hk(()=>{n.current=!0}),m.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xd({fromRouteId:e},i)))},[t,e])}const HS={};function iB(t,e,n){!e&&!HS[t]&&(HS[t]=!0)}function oB(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function KS(t){let{to:e,replace:n,state:r,relative:s}=t;eu()||bt(!1);let{future:i,static:o}=m.useContext(pi),{matches:a}=m.useContext(Ss),{pathname:l}=Ro(),c=er(),u=R1(e,A1(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return m.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function k1(t){return W9(t.context)}function Ze(t){bt(!1)}function aB(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Xi.Pop,navigator:i,static:o=!1,future:a}=t;eu()&&bt(!1);let l=e.replace(/^\/*/,"/"),c=m.useMemo(()=>({basename:l,navigator:i,static:o,future:Xd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Zc(r));let{pathname:u="/",search:d="",hash:f="",state:g=null,key:v="default"}=r,y=m.useMemo(()=>{let w=Tc(u,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:g,key:v},navigationType:s}},[l,u,d,f,g,v,s]);return y==null?null:m.createElement(pi.Provider,{value:c},m.createElement(Yg.Provider,{children:n,value:y}))}function lB(t){let{children:e,location:n}=t;return H9(uw(e),n)}new Promise(()=>{});function uw(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let i=[...e,s];if(r.type===m.Fragment){n.push.apply(n,uw(r.props.children,i));return}r.type!==Ze&&bt(!1),!r.props.index||!r.props.children||bt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nm.apply(this,arguments)}function Yk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uB(t,e){return t.button===0&&(!e||e==="_self")&&!cB(t)}const dB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hB=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],fB="6";try{window.__reactRouterVersion=fB}catch{}const pB=m.createContext({isTransitioning:!1}),mB="startTransition",QS=Ih[mB];function gB(t){let{basename:e,children:n,future:r,window:s}=t,i=m.useRef();i.current==null&&(i.current=v9({window:s,v5Compat:!0}));let o=i.current,[a,l]=m.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=m.useCallback(d=>{c&&QS?QS(()=>l(d)):l(d)},[l,c]);return m.useLayoutEffect(()=>o.listen(u),[o,u]),m.useEffect(()=>oB(r),[r]),m.createElement(aB,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const yB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=m.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=Yk(e,dB),{basename:g}=m.useContext(pi),v,y=!1;if(typeof c=="string"&&vB.test(c)&&(v=c,yB))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),k=Tc(S.pathname,g);S.origin===b.origin&&k!=null?c=k+S.search+S.hash:y=!0}catch{}let w=z9(c,{relative:s}),x=wB(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function _(b){r&&r(b),b.defaultPrevented||x(b)}return m.createElement("a",Nm({},f,{href:v||w,onClick:y||i?r:_,ref:n,target:l}))}),Bi=m.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,d=Yk(e,hB),f=Xg(l,{relative:d.relative}),g=Ro(),v=m.useContext(Gk),{navigator:y,basename:w}=m.useContext(pi),x=v!=null&&_B(f)&&c===!0,_=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,b=g.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(b=b.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase()),S&&w&&(S=Tc(S,w)||S);const k=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let R=b===_||!o&&b.startsWith(_)&&b.charAt(k)==="/",C=S!=null&&(S===_||!o&&S.startsWith(_)&&S.charAt(_.length)==="/"),E={isActive:R,isPending:C,isTransitioning:x},I=R?r:void 0,P;typeof i=="function"?P=i(E):P=[i,R?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(E):a;return m.createElement(Le,Nm({},d,{"aria-current":I,className:P,ref:n,style:D,to:l,viewTransition:c}),typeof u=="function"?u(E):u)});var dw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dw||(dw={}));var YS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(YS||(YS={}));function xB(t){let e=m.useContext(Qg);return e||bt(!1),e}function wB(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=er(),c=Ro(),u=Xg(t,{relative:o});return m.useCallback(d=>{if(uB(d,n)){d.preventDefault();let f=r!==void 0?r:Pm(c)===Pm(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function _B(t,e){e===void 0&&(e={});let n=m.useContext(pB);n==null&&bt(!1);let{basename:r}=xB(dw.useViewTransitionState),s=Xg(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Tc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Tc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Am(s.pathname,o)!=null||Am(s.pathname,i)!=null}const Xk=m.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Jg=m.createContext({}),Zg=m.createContext(null),ey=typeof document<"u",D1=ey?m.useLayoutEffect:m.useEffect,Jk=m.createContext({strict:!1}),j1=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),bB="framerAppearId",Zk="data-"+j1(bB);function EB(t,e,n,r){const{visualElement:s}=m.useContext(Jg),i=m.useContext(Jk),o=m.useContext(Zg),a=m.useContext(Xk).reducedMotion,l=m.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;m.useInsertionEffect(()=>{c&&c.update(n,o)});const u=m.useRef(!!(n[Zk]&&!window.HandoffComplete));return D1(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),m.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ql(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function TB(t,e,n){return m.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ql(n)&&(n.current=r))},[e])}function Jd(t){return typeof t=="string"||Array.isArray(t)}function ty(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const O1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],M1=["initial",...O1];function ny(t){return ty(t.animate)||M1.some(e=>Jd(t[e]))}function eD(t){return!!(ny(t)||t.variants)}function IB(t,e){if(ny(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Jd(n)?n:void 0,animate:Jd(r)?r:void 0}}return t.inherit!==!1?e:{}}function SB(t){const{initial:e,animate:n}=IB(t,m.useContext(Jg));return m.useMemo(()=>({initial:e,animate:n}),[XS(e),XS(n)])}function XS(t){return Array.isArray(t)?t.join(" "):t}const JS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zd={};for(const t in JS)Zd[t]={isEnabled:e=>JS[t].some(n=>!!e[n])};function CB(t){for(const e in t)Zd[e]={...Zd[e],...t[e]}}const V1=m.createContext({}),tD=m.createContext({}),PB=Symbol.for("motionComponentSymbol");function AB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&CB(t);function i(a,l){let c;const u={...m.useContext(Xk),...a,layoutId:RB(a)},{isStatic:d}=u,f=SB(a),g=r(a,d);if(!d&&ey){f.visualElement=EB(s,g,u,e);const v=m.useContext(tD),y=m.useContext(Jk).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,y,t,v))}return m.createElement(Jg.Provider,{value:f},c&&f.visualElement?m.createElement(c,{visualElement:f.visualElement,...u}):null,n(s,a,TB(g,f.visualElement,l),g,d,f.visualElement))}const o=m.forwardRef(i);return o[PB]=s,o}function RB({layoutId:t}){const e=m.useContext(V1).id;return e&&t!==void 0?e+"-"+t:t}function NB(t){function e(r,s={}){return AB(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const kB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function L1(t){return typeof t!="string"||t.includes("-")?!1:!!(kB.indexOf(t)>-1||/[A-Z]/.test(t))}const km={};function DB(t){Object.assign(km,t)}const Rh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ka=new Set(Rh);function nD(t,{layout:e,layoutId:n}){return Ka.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!km[t]||t==="opacity")}const Zn=t=>!!(t&&t.getVelocity),jB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OB=Rh.length;function MB(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<OB;o++){const a=Rh[o];if(t[a]!==void 0){const l=jB[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const rD=t=>e=>typeof e=="string"&&e.startsWith(t),sD=rD("--"),hw=rD("var(--"),VB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,LB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,go=(t,e,n)=>Math.min(Math.max(n,t),e),Qa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},vd={...Qa,transform:t=>go(0,1,t)},Qf={...Qa,default:1},xd=t=>Math.round(t*1e5)/1e5,ry=/(-)?([\d]*\.?[\d])+/g,iD=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$B=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Nh(t){return typeof t=="string"}const kh=t=>({test:e=>Nh(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Di=kh("deg"),vs=kh("%"),be=kh("px"),FB=kh("vh"),UB=kh("vw"),ZS={...vs,parse:t=>vs.parse(t)/100,transform:t=>vs.transform(t*100)},eC={...Qa,transform:Math.round},oD={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,size:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,rotate:Di,rotateX:Di,rotateY:Di,rotateZ:Di,scale:Qf,scaleX:Qf,scaleY:Qf,scaleZ:Qf,skew:Di,skewX:Di,skewY:Di,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:vd,originX:ZS,originY:ZS,originZ:be,zIndex:eC,fillOpacity:vd,strokeOpacity:vd,numOctaves:eC};function $1(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const d in e){const f=e[d];if(sD(d)){i[d]=f;continue}const g=oD[d],v=LB(f,g);if(Ka.has(d)){if(l=!0,o[d]=v,!u)continue;f!==(g.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=v):s[d]=v}if(e.transform||(l||r?s.transform=MB(t.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:g=0}=a;s.transformOrigin=`${d} ${f} ${g}`}}const F1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function aD(t,e,n){for(const r in e)!Zn(e[r])&&!nD(r,n)&&(t[r]=e[r])}function BB({transformTemplate:t},e,n){return m.useMemo(()=>{const r=F1();return $1(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function zB(t,e,n){const r=t.style||{},s={};return aD(s,r,t),Object.assign(s,BB(t,e,n)),t.transformValues?t.transformValues(s):s}function qB(t,e,n){const r={},s=zB(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const GB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||GB.has(t)}let lD=t=>!Dm(t);function WB(t){t&&(lD=e=>e.startsWith("on")?!Dm(e):t(e))}try{WB(require("@emotion/is-prop-valid").default)}catch{}function HB(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(lD(s)||n===!0&&Dm(s)||!e&&!Dm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function tC(t,e,n){return typeof t=="string"?t:be.transform(e+n*t)}function KB(t,e,n){const r=tC(e,t.x,t.width),s=tC(n,t.y,t.height);return`${r} ${s}`}const QB={offset:"stroke-dashoffset",array:"stroke-dasharray"},YB={offset:"strokeDashoffset",array:"strokeDasharray"};function XB(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?QB:YB;t[i.offset]=be.transform(-r);const o=be.transform(e),a=be.transform(n);t[i.array]=`${o} ${a}`}function U1(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,f){if($1(t,c,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v,dimensions:y}=t;g.transform&&(y&&(v.transform=g.transform),delete g.transform),y&&(s!==void 0||i!==void 0||v.transform)&&(v.transformOrigin=KB(y,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&XB(g,o,a,l,!1)}const cD=()=>({...F1(),attrs:{}}),B1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function JB(t,e,n,r){const s=m.useMemo(()=>{const i=cD();return U1(i,e,{enableHardwareAcceleration:!1},B1(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};aD(i,t.style,t),s.style={...i,...s.style}}return s}function ZB(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(L1(n)?JB:qB)(r,i,o,n),u={...HB(r,typeof n=="string",t),...l,ref:s},{children:d}=r,f=m.useMemo(()=>Zn(d)?d.get():d,[d]);return m.createElement(n,{...u,children:f})}}function uD(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const dD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hD(t,e,n,r){uD(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(dD.has(s)?s:j1(s),e.attrs[s])}function z1(t,e){const{style:n}=t,r={};for(const s in n)(Zn(n[s])||e.style&&Zn(e.style[s])||nD(s,t))&&(r[s]=n[s]);return r}function fD(t,e){const n=z1(t,e);for(const r in t)if(Zn(t[r])||Zn(e[r])){const s=Rh.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function q1(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function pD(t){const e=m.useRef(null);return e.current===null&&(e.current=t()),e.current}const jm=t=>Array.isArray(t),e7=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),t7=t=>jm(t)?t[t.length-1]||0:t;function Lp(t){const e=Zn(t)?t.get():t;return e7(e)?e.toValue():e}function n7({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:r7(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const mD=t=>(e,n)=>{const r=m.useContext(Jg),s=m.useContext(Zg),i=()=>n7(t,e,r,s);return n?i():pD(i)};function r7(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=Lp(i[f]);let{initial:o,animate:a}=t;const l=ny(t),c=eD(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!ty(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const v=q1(t,g);if(!v)return;const{transitionEnd:y,transition:w,...x}=v;for(const _ in x){let b=x[_];if(Array.isArray(b)){const S=u?b.length-1:0;b=b[S]}b!==null&&(s[_]=b)}for(const _ in y)s[_]=y[_]}),s}const Rt=t=>t;class nC{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function s7(t){let e=new nC,n=new nC,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&s,f=d?e:n;return c&&o.add(l),f.add(l)&&d&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Yf=["prepare","read","update","preRender","render","postRender"],i7=40;function o7(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Yf.reduce((d,f)=>(d[f]=s7(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,i7),1),s.timestamp=d,s.isProcessing=!0,Yf.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Yf.reduce((d,f)=>{const g=i[f];return d[f]=(v,y=!1,w=!1)=>(n||l(),g.schedule(v,y,w)),d},{}),cancel:d=>Yf.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:st,cancel:ri,state:bn,steps:l0}=o7(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rt,!0),a7={useVisualState:mD({scrapeMotionValuesFromProps:fD,createRenderState:cD,onMount:(t,e,{renderState:n,latestValues:r})=>{st.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),st.render(()=>{U1(n,r,{enableHardwareAcceleration:!1},B1(e.tagName),t.transformTemplate),hD(e,n)})}})},l7={useVisualState:mD({scrapeMotionValuesFromProps:z1,createRenderState:F1})};function c7(t,{forwardMotionProps:e=!1},n,r){return{...L1(t)?a7:l7,preloadedFeatures:n,useRender:ZB(e),createVisualElement:r,Component:t}}function Bs(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const gD=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function sy(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const u7=t=>e=>gD(e)&&t(e,sy(e));function Ks(t,e,n,r){return Bs(t,e,u7(n),r)}const d7=(t,e)=>n=>e(t(n)),lo=(...t)=>t.reduce(d7);function yD(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const rC=yD("dragHorizontal"),sC=yD("dragVertical");function vD(t){let e=!1;if(t==="y")e=sC();else if(t==="x")e=rC();else{const n=rC(),r=sC();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function xD(){const t=vD(!0);return t?(t(),!1):!0}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}function iC(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||xD())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&st.update(()=>a[r](i,o))};return Ks(t.current,n,s,{passive:!t.getProps()[r]})}class h7 extends No{mount(){this.unmount=lo(iC(this.node,!0),iC(this.node,!1))}unmount(){}}class f7 extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lo(Bs(this.node.current,"focus",()=>this.onFocus()),Bs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const wD=(t,e)=>e?t===e?!0:wD(t,e.parentElement):!1;function c0(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,sy(n))}class p7 extends No{constructor(){super(...arguments),this.removeStartListeners=Rt,this.removeEndListeners=Rt,this.removeAccessibleListeners=Rt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Ks(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();st.update(()=>{!d&&!wD(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ks(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=lo(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||c0("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&st.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Bs(this.node.current,"keyup",o),c0("down",(a,l)=>{this.startPress(a,l)})},n=Bs(this.node.current,"keydown",e),r=()=>{this.isPressing&&c0("cancel",(i,o)=>this.cancelPress(i,o))},s=Bs(this.node.current,"blur",r);this.removeAccessibleListeners=lo(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&st.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!xD()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&st.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Ks(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Bs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=lo(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const fw=new WeakMap,u0=new WeakMap,m7=t=>{const e=fw.get(t.target);e&&e(t)},g7=t=>{t.forEach(m7)};function y7({root:t,...e}){const n=t||document;u0.has(n)||u0.set(n,{});const r=u0.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(g7,{root:t,...e})),r[s]}function v7(t,e,n){const r=y7(e);return fw.set(t,n),r.observe(t),()=>{fw.delete(t),r.unobserve(t)}}const x7={some:0,all:1};class w7 extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:x7[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return v7(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_7(e,n))&&this.startObserver()}unmount(){}}function _7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const b7={inView:{Feature:w7},tap:{Feature:p7},focus:{Feature:f7},hover:{Feature:h7}};function _D(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function E7(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function T7(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function iy(t,e,n){const r=t.getProps();return q1(r,e,n!==void 0?n:r.custom,E7(t),T7(t))}let I7=Rt,G1=Rt;const co=t=>t*1e3,Qs=t=>t/1e3,S7={current:!1},bD=t=>Array.isArray(t)&&typeof t[0]=="number";function ED(t){return!!(!t||typeof t=="string"&&TD[t]||bD(t)||Array.isArray(t)&&t.every(ED))}const td=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,TD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:td([0,.65,.55,1]),circOut:td([.55,0,1,.45]),backIn:td([.31,.01,.66,-.59]),backOut:td([.33,1.53,.69,.99])};function ID(t){if(t)return bD(t)?td(t):Array.isArray(t)?t.map(ID):TD[t]}function C7(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=ID(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function P7(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const SD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,A7=1e-7,R7=12;function N7(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=SD(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>A7&&++a<R7);return o}function Dh(t,e,n,r){if(t===e&&n===r)return Rt;const s=i=>N7(i,0,1,t,n);return i=>i===0||i===1?i:SD(s(i),e,r)}const k7=Dh(.42,0,1,1),D7=Dh(0,0,.58,1),CD=Dh(.42,0,.58,1),j7=t=>Array.isArray(t)&&typeof t[0]!="number",PD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,AD=t=>e=>1-t(1-e),W1=t=>1-Math.sin(Math.acos(t)),RD=AD(W1),O7=PD(W1),ND=Dh(.33,1.53,.69,.99),H1=AD(ND),M7=PD(H1),V7=t=>(t*=2)<1?.5*H1(t):.5*(2-Math.pow(2,-10*(t-1))),L7={linear:Rt,easeIn:k7,easeInOut:CD,easeOut:D7,circIn:W1,circInOut:O7,circOut:RD,backIn:H1,backInOut:M7,backOut:ND,anticipate:V7},oC=t=>{if(Array.isArray(t)){G1(t.length===4);const[e,n,r,s]=t;return Dh(e,n,r,s)}else if(typeof t=="string")return L7[t];return t},K1=(t,e)=>n=>!!(Nh(n)&&$B.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),kD=(t,e,n)=>r=>{if(!Nh(r))return r;const[s,i,o,a]=r.match(ry);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},$7=t=>go(0,255,t),d0={...Qa,transform:t=>Math.round($7(t))},aa={test:K1("rgb","red"),parse:kD("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+d0.transform(t)+", "+d0.transform(e)+", "+d0.transform(n)+", "+xd(vd.transform(r))+")"};function F7(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const pw={test:K1("#"),parse:F7,transform:aa.transform},Yl={test:K1("hsl","hue"),parse:kD("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vs.transform(xd(e))+", "+vs.transform(xd(n))+", "+xd(vd.transform(r))+")"},kn={test:t=>aa.test(t)||pw.test(t)||Yl.test(t),parse:t=>aa.test(t)?aa.parse(t):Yl.test(t)?Yl.parse(t):pw.parse(t),transform:t=>Nh(t)?t:t.hasOwnProperty("red")?aa.transform(t):Yl.transform(t)},wt=(t,e,n)=>-n*t+n*e+t;function h0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function U7({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=h0(l,a,t+1/3),i=h0(l,a,t),o=h0(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const f0=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},B7=[pw,aa,Yl],z7=t=>B7.find(e=>e.test(t));function aC(t){const e=z7(t);let n=e.parse(t);return e===Yl&&(n=U7(n)),n}const DD=(t,e)=>{const n=aC(t),r=aC(e),s={...n};return i=>(s.red=f0(n.red,r.red,i),s.green=f0(n.green,r.green,i),s.blue=f0(n.blue,r.blue,i),s.alpha=wt(n.alpha,r.alpha,i),aa.transform(s))};function q7(t){var e,n;return isNaN(t)&&Nh(t)&&(((e=t.match(ry))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(iD))===null||n===void 0?void 0:n.length)||0)>0}const jD={regex:VB,countKey:"Vars",token:"${v}",parse:Rt},OD={regex:iD,countKey:"Colors",token:"${c}",parse:kn.parse},MD={regex:ry,countKey:"Numbers",token:"${n}",parse:Qa.parse};function p0(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Om(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&p0(n,jD),p0(n,OD),p0(n,MD),n}function VD(t){return Om(t).values}function LD(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Om(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(jD.token,o[l]):l<r+n?a=a.replace(OD.token,kn.transform(o[l])):a=a.replace(MD.token,xd(o[l]));return a}}const G7=t=>typeof t=="number"?0:t;function W7(t){const e=VD(t);return LD(t)(e.map(G7))}const yo={test:q7,parse:VD,createTransformer:LD,getAnimatableNone:W7},$D=(t,e)=>n=>`${n>0?e:t}`;function FD(t,e){return typeof t=="number"?n=>wt(t,e,n):kn.test(t)?DD(t,e):t.startsWith("var(")?$D(t,e):BD(t,e)}const UD=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>FD(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},H7=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=FD(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},BD=(t,e)=>{const n=yo.createTransformer(e),r=Om(t),s=Om(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?lo(UD(r.values,s.values),n):$D(t,e)},eh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},lC=(t,e)=>n=>wt(t,e,n);function K7(t){return typeof t=="number"?lC:typeof t=="string"?kn.test(t)?DD:BD:Array.isArray(t)?UD:typeof t=="object"?H7:lC}function Q7(t,e,n){const r=[],s=n||K7(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Rt:e;a=lo(l,a)}r.push(a)}return r}function zD(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(G1(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Q7(e,r,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=eh(t[u],t[u+1],c);return o[u](d)};return n?c=>l(go(t[0],t[i-1],c)):l}function Y7(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=eh(0,e,r);t.push(wt(n,1,s))}}function X7(t){const e=[0];return Y7(e,t.length-1),e}function J7(t,e){return t.map(n=>n*e)}function Z7(t,e){return t.map(()=>e||CD).splice(0,t.length-1)}function Mm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=j7(r)?r.map(oC):oC(r),i={done:!1,value:e[0]},o=J7(n&&n.length===e.length?n:X7(e),t),a=zD(o,e,{ease:Array.isArray(s)?s:Z7(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function qD(t,e){return e?t*(1e3/e):0}const ez=5;function GD(t,e,n){const r=Math.max(e-ez,0);return qD(n-t(r),e-r)}const m0=.001,tz=.01,cC=10,nz=.05,rz=1;function sz({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;I7(t<=co(cC));let o=1-e;o=go(nz,rz,o),t=go(tz,cC,Qs(t)),o<1?(s=c=>{const u=c*o,d=u*t,f=u-n,g=mw(c,o),v=Math.exp(-d);return m0-f/g*v},i=c=>{const d=c*o*t,f=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-d),y=mw(Math.pow(c,2),o);return(-s(c)+m0>0?-1:1)*((f-g)*v)/y}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-m0+u*d},i=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=oz(s,i,a);if(t=co(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const iz=12;function oz(t,e,n){let r=n;for(let s=1;s<iz;s++)r=r-t(r)/e(r);return r}function mw(t,e){return t*Math.sqrt(1-e*e)}const az=["duration","bounce"],lz=["stiffness","damping","mass"];function uC(t,e){return e.some(n=>t[n]!==void 0)}function cz(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!uC(t,lz)&&uC(t,az)){const n=sz(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function WD({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:f}=cz({...r,velocity:-Qs(r.velocity||0)}),g=d||0,v=l/(2*Math.sqrt(a*c)),y=i-s,w=Qs(Math.sqrt(a/c)),x=Math.abs(y)<5;n||(n=x?.01:2),e||(e=x?.005:.5);let _;if(v<1){const b=mw(w,v);_=S=>{const k=Math.exp(-v*w*S);return i-k*((g+v*w*y)/b*Math.sin(b*S)+y*Math.cos(b*S))}}else if(v===1)_=b=>i-Math.exp(-w*b)*(y+(g+w*y)*b);else{const b=w*Math.sqrt(v*v-1);_=S=>{const k=Math.exp(-v*w*S),R=Math.min(b*S,300);return i-k*((g+v*w*y)*Math.sinh(R)+b*y*Math.cosh(R))/b}}return{calculatedDuration:f&&u||null,next:b=>{const S=_(b);if(f)o.done=b>=u;else{let k=g;b!==0&&(v<1?k=GD(_,b,S):k=0);const R=Math.abs(k)<=n,C=Math.abs(i-S)<=e;o.done=R&&C}return o.value=o.done?i:S,o}}}function dC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},g=E=>a!==void 0&&E<a||l!==void 0&&E>l,v=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let y=n*e;const w=d+y,x=o===void 0?w:o(w);x!==w&&(y=x-d);const _=E=>-y*Math.exp(-E/r),b=E=>x+_(E),S=E=>{const I=_(E),P=b(E);f.done=Math.abs(I)<=c,f.value=f.done?x:P};let k,R;const C=E=>{g(f.value)&&(k=E,R=WD({keyframes:[f.value,v(f.value)],velocity:GD(b,E,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:E=>{let I=!1;return!R&&k===void 0&&(I=!0,S(E),C(E)),k!==void 0&&E>k?R.next(E-k):(!I&&S(E),f)}}}const uz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>st.update(e,!0),stop:()=>ri(e),now:()=>bn.isProcessing?bn.timestamp:performance.now()}},hC=2e4;function fC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<hC;)e+=n,r=t.next(e);return e>=hC?1/0:e}const dz={decay:dC,inertia:dC,tween:Mm,keyframes:Mm,spring:WD};function Vm({autoplay:t=!0,delay:e=0,driver:n=uz,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...f}){let g=1,v=!1,y,w;const x=()=>{w=new Promise(z=>{y=z})};x();let _;const b=dz[s]||Mm;let S;b!==Mm&&typeof r[0]!="number"&&(S=zD([0,100],r,{clamp:!1}),r=[0,100]);const k=b({...f,keyframes:r});let R;a==="mirror"&&(R=b({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",E=null,I=null,P=null;k.calculatedDuration===null&&i&&(k.calculatedDuration=fC(k));const{calculatedDuration:D}=k;let j=1/0,N=1/0;D!==null&&(j=D+o,N=j*(i+1)-o);let L=0;const B=z=>{if(I===null)return;g>0&&(I=Math.min(I,z)),g<0&&(I=Math.min(z-N/g,I)),E!==null?L=E:L=Math.round(z-I)*g;const q=L-e*(g>=0?1:-1),W=g>=0?q<0:q>N;L=Math.max(q,0),C==="finished"&&E===null&&(L=N);let Y=L,K=k;if(i){const ae=Math.min(L,N)/j;let le=Math.floor(ae),ue=ae%1;!ue&&ae>=1&&(ue=1),ue===1&&le--,le=Math.min(le,i+1),!!(le%2)&&(a==="reverse"?(ue=1-ue,o&&(ue-=o/j)):a==="mirror"&&(K=R)),Y=go(0,1,ue)*j}const ne=W?{done:!1,value:r[0]}:K.next(Y);S&&(ne.value=S(ne.value));let{done:ee}=ne;!W&&D!==null&&(ee=g>=0?L>=N:L<=0);const he=E===null&&(C==="finished"||C==="running"&&ee);return d&&d(ne.value),he&&U(),ne},O=()=>{_&&_.stop(),_=void 0},M=()=>{C="idle",O(),y(),x(),I=P=null},U=()=>{C="finished",u&&u(),O(),y()},$=()=>{if(v)return;_||(_=n(B));const z=_.now();l&&l(),E!==null?I=z-E:(!I||C==="finished")&&(I=z),C==="finished"&&x(),P=I,E=null,C="running",_.start()};t&&$();const F={then(z,q){return w.then(z,q)},get time(){return Qs(L)},set time(z){z=co(z),L=z,E!==null||!_||g===0?E=z:I=_.now()-z/g},get duration(){const z=k.calculatedDuration===null?fC(k):k.calculatedDuration;return Qs(z)},get speed(){return g},set speed(z){z===g||!_||(g=z,F.time=Qs(L))},get state(){return C},play:$,pause:()=>{C="paused",E=L},stop:()=>{v=!0,C!=="idle"&&(C="idle",c&&c(),M())},cancel:()=>{P!==null&&B(P),M()},complete:()=>{C="finished"},sample:z=>(I=0,B(z))};return F}function hz(t){let e;return()=>(e===void 0&&(e=t()),e)}const fz=hz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),pz=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Xf=10,mz=2e4,gz=(t,e)=>e.type==="spring"||t==="backgroundColor"||!ED(e.ease);function yz(t,e,{onUpdate:n,onComplete:r,...s}){if(!(fz()&&pz.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(b=>{a=b})};u();let{keyframes:d,duration:f=300,ease:g,times:v}=s;if(gz(e,s)){const b=Vm({...s,repeat:0,delay:0});let S={done:!1,value:d[0]};const k=[];let R=0;for(;!S.done&&R<mz;)S=b.sample(R),k.push(S.value),R+=Xf;v=void 0,d=k,f=R-Xf,g="linear"}const y=C7(t.owner.current,e,d,{...s,duration:f,ease:g,times:v}),w=()=>{c=!1,y.cancel()},x=()=>{c=!0,st.update(w),a(),u()};return y.onfinish=()=>{c||(t.set(P7(d,s)),r&&r(),x())},{then(b,S){return l.then(b,S)},attachTimeline(b){return y.timeline=b,y.onfinish=null,Rt},get time(){return Qs(y.currentTime||0)},set time(b){y.currentTime=co(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return Qs(f)},play:()=>{o||(y.play(),ri(w))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const S=Vm({...s,autoplay:!1});t.setWithVelocity(S.sample(b-Xf).value,S.sample(b).value,Xf)}x()},complete:()=>{c||y.finish()},cancel:x}}function vz({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Rt,pause:Rt,stop:Rt,then:i=>(i(),Promise.resolve()),cancel:Rt,complete:Rt});return e?Vm({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const xz={type:"spring",stiffness:500,damping:25,restSpeed:10},wz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_z={type:"keyframes",duration:.8},bz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ez=(t,{keyframes:e})=>e.length>2?_z:Ka.has(t)?t.startsWith("scale")?wz(e[1]):xz:bz,gw=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(yo.test(e)||e==="0")&&!e.startsWith("url(")),Tz=new Set(["brightness","contrast","saturate","opacity"]);function Iz(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ry)||[];if(!r)return t;const s=n.replace(r,"");let i=Tz.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Sz=/([a-z-]*)\(.*?\)/g,yw={...yo,getAnimatableNone:t=>{const e=t.match(Sz);return e?e.map(Iz).join(" "):t}},Cz={...oD,color:kn,backgroundColor:kn,outlineColor:kn,fill:kn,stroke:kn,borderColor:kn,borderTopColor:kn,borderRightColor:kn,borderBottomColor:kn,borderLeftColor:kn,filter:yw,WebkitFilter:yw},Q1=t=>Cz[t];function HD(t,e){let n=Q1(t);return n!==yw&&(n=yo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const KD=t=>/^0[^.\s]+$/.test(t);function Pz(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||KD(t)}function Az(t,e,n,r){const s=gw(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),Pz(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];i[u]=HD(e,a)}return i}function Rz({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function Y1(t,e){return t[e]||t.default||t}const Nz={skipAnimations:!1},X1=(t,e,n,r={})=>s=>{const i=Y1(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-co(o);const l=Az(e,t,n,i),c=l[0],u=l[l.length-1],d=gw(t,c),f=gw(t,u);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:v=>{e.set(v),i.onUpdate&&i.onUpdate(v)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Rz(i)||(g={...g,...Ez(t,g)}),g.duration&&(g.duration=co(g.duration)),g.repeatDelay&&(g.repeatDelay=co(g.repeatDelay)),!d||!f||S7.current||i.type===!1||Nz.skipAnimations)return vz(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=yz(e,t,g);if(v)return v}return Vm(g)};function Lm(t){return!!(Zn(t)&&t.add)}const QD=t=>/^\-?\d*\.?\d+$/.test(t);function J1(t,e){t.indexOf(e)===-1&&t.push(e)}function Z1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class eb{constructor(){this.subscriptions=[]}add(e){return J1(this.subscriptions,e),()=>Z1(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const kz=t=>!isNaN(parseFloat(t));class Dz{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=bn;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,st.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>st.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=kz(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new eb);const r=this.events[e].add(n);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?qD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ic(t,e){return new Dz(t,e)}const YD=t=>e=>e.test(t),jz={test:t=>t==="auto",parse:t=>t},XD=[Qa,be,vs,Di,UB,FB,jz],Fu=t=>XD.find(YD(t)),Oz=[...XD,kn,yo],Mz=t=>Oz.find(YD(t));function Vz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ic(n))}function Lz(t,e){const n=iy(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=t7(i[o]);Vz(t,o,a)}}function $z(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),u!=null&&(typeof u=="string"&&(QD(u)||KD(u))?u=parseFloat(u):!Mz(u)&&yo.test(c)&&(u=HD(l,c)),t.addValue(l,Ic(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function Fz(t,e){return e?(e[t]||e.default||e).from:void 0}function Uz(t,e,n){const r={};for(const s in t){const i=Fz(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Bz({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function zz(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function JD(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const f=t.getValue(d),g=a[d];if(!f||g===void 0||u&&Bz(u,d))continue;const v={delay:n,elapsed:0,...Y1(i||{},d)};if(window.HandoffAppearAnimations){const x=t.getProps()[Zk];if(x){const _=window.HandoffAppearAnimations(x,d,f,st);_!==null&&(v.elapsed=_,v.isHandoff=!0)}}let y=!v.isHandoff&&!zz(f,g);if(v.type==="spring"&&(f.getVelocity()||v.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(X1(d,f,g,t.shouldReduceMotion&&Ka.has(d)?{type:!1}:v));const w=f.animation;Lm(l)&&(l.add(d),w.then(()=>l.remove(d))),c.push(w)}return o&&Promise.all(c).then(()=>{o&&Lz(t,o)}),c}function vw(t,e,n={}){const r=iy(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(JD(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=s;return qz(t,e,c+l,u,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function qz(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Gz).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(vw(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Gz(t,e){return t.sortNodePosition(e)}function Wz(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>vw(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=vw(t,e,n);else{const s=typeof e=="function"?iy(t,e,n.custom):e;r=Promise.all(JD(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const Hz=[...O1].reverse(),Kz=O1.length;function Qz(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Wz(t,n,r)))}function Yz(t){let e=Qz(t);const n=Jz();let r=!0;const s=(l,c)=>{const u=iy(t,c);if(u){const{transition:d,transitionEnd:f,...g}=u;l={...l,...g,...f}}return l};function i(l){e=l(t)}function o(l,c){const u=t.getProps(),d=t.getVariantContext(!0)||{},f=[],g=new Set;let v={},y=1/0;for(let x=0;x<Kz;x++){const _=Hz[x],b=n[_],S=u[_]!==void 0?u[_]:d[_],k=Jd(S),R=_===c?b.isActive:null;R===!1&&(y=x);let C=S===d[_]&&S!==u[_]&&k;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...v},!b.isActive&&R===null||!S&&!b.prevProp||ty(S)||typeof S=="boolean")continue;let I=Xz(b.prevProp,S)||_===c&&b.isActive&&!C&&k||x>y&&k,P=!1;const D=Array.isArray(S)?S:[S];let j=D.reduce(s,{});R===!1&&(j={});const{prevResolvedValues:N={}}=b,L={...N,...j},B=O=>{I=!0,g.has(O)&&(P=!0,g.delete(O)),b.needsAnimating[O]=!0};for(const O in L){const M=j[O],U=N[O];if(v.hasOwnProperty(O))continue;let $=!1;jm(M)&&jm(U)?$=!_D(M,U):$=M!==U,$?M!==void 0?B(O):g.add(O):M!==void 0&&g.has(O)?B(O):b.protectedKeys[O]=!0}b.prevProp=S,b.prevResolvedValues=j,b.isActive&&(v={...v,...j}),r&&t.blockInitialAnimation&&(I=!1),I&&(!C||P)&&f.push(...D.map(O=>({animation:O,options:{type:_,...l}})))}if(g.size){const x={};g.forEach(_=>{const b=t.getBaseTarget(_);b!==void 0&&(x[_]=b)}),f.push({animation:x})}let w=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(f):Promise.resolve()}function a(l,c,u){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(l,c)}),n[l].isActive=c;const f=o(u,l);for(const g in n)n[g].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function Xz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_D(e,t):!1}function qo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jz(){return{animate:qo(!0),whileInView:qo(),whileHover:qo(),whileTap:qo(),whileDrag:qo(),whileFocus:qo(),exit:qo()}}class Zz extends No{constructor(e){super(e),e.animationState||(e.animationState=Yz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ty(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let eq=0;class tq extends No{constructor(){super(...arguments),this.id=eq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const nq={animation:{Feature:Zz},exit:{Feature:tq}},pC=(t,e)=>Math.abs(t-e);function rq(t,e){const n=pC(t.x,e.x),r=pC(t.y,e.y);return Math.sqrt(n**2+r**2)}class ZD{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=y0(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=rq(d.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:v}=d,{timestamp:y}=bn;this.history.push({...v,timestamp:y});const{onStart:w,onMove:x}=this.handlers;f||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=g0(f,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=y0(d.type==="pointercancel"?this.lastMoveEventInfo:g0(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,w),v&&v(d,w)},!gD(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=sy(e),a=g0(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=bn;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,y0(a,this.history)),this.removeListeners=lo(Ks(this.contextWindow,"pointermove",this.handlePointerMove),Ks(this.contextWindow,"pointerup",this.handlePointerUp),Ks(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ri(this.updatePoint)}}function g0(t,e){return e?{point:e(t.point)}:t}function mC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function y0({point:t},e){return{point:t,delta:mC(t,ej(e)),offset:mC(t,sq(e)),velocity:iq(e,.1)}}function sq(t){return t[0]}function ej(t){return t[t.length-1]}function iq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=ej(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>co(e)));)n--;if(!r)return{x:0,y:0};const i=Qs(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mr(t){return t.max-t.min}function xw(t,e=0,n=.01){return Math.abs(t-e)<=n}function gC(t,e,n,r=.5){t.origin=r,t.originPoint=wt(e.min,e.max,t.origin),t.scale=mr(n)/mr(e),(xw(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=wt(n.min,n.max,t.origin)-t.originPoint,(xw(t.translate)||isNaN(t.translate))&&(t.translate=0)}function wd(t,e,n,r){gC(t.x,e.x,n.x,r?r.originX:void 0),gC(t.y,e.y,n.y,r?r.originY:void 0)}function yC(t,e,n){t.min=n.min+e.min,t.max=t.min+mr(e)}function oq(t,e,n){yC(t.x,e.x,n.x),yC(t.y,e.y,n.y)}function vC(t,e,n){t.min=e.min-n.min,t.max=t.min+mr(e)}function _d(t,e,n){vC(t.x,e.x,n.x),vC(t.y,e.y,n.y)}function aq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?wt(n,t,r.max):Math.min(t,n)),t}function xC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function lq(t,{top:e,left:n,bottom:r,right:s}){return{x:xC(t.x,n,s),y:xC(t.y,e,r)}}function wC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function cq(t,e){return{x:wC(t.x,e.x),y:wC(t.y,e.y)}}function uq(t,e){let n=.5;const r=mr(t),s=mr(e);return s>r?n=eh(e.min,e.max-r,t.min):r>s&&(n=eh(t.min,t.max-s,e.min)),go(0,1,n)}function dq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ww=.35;function hq(t=ww){return t===!1?t=0:t===!0&&(t=ww),{x:_C(t,"left","right"),y:_C(t,"top","bottom")}}function _C(t,e,n){return{min:bC(t,e),max:bC(t,n)}}function bC(t,e){return typeof t=="number"?t:t[e]||0}const EC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xl=()=>({x:EC(),y:EC()}),TC=()=>({min:0,max:0}),Ut=()=>({x:TC(),y:TC()});function Ir(t){return[t("x"),t("y")]}function tj({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function fq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function pq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function v0(t){return t===void 0||t===1}function _w({scale:t,scaleX:e,scaleY:n}){return!v0(t)||!v0(e)||!v0(n)}function Ko(t){return _w(t)||nj(t)||t.z||t.rotate||t.rotateX||t.rotateY}function nj(t){return IC(t.x)||IC(t.y)}function IC(t){return t&&t!=="0%"}function $m(t,e,n){const r=t-n,s=e*r;return n+s}function SC(t,e,n,r,s){return s!==void 0&&(t=$m(t,s,r)),$m(t,n,r)+e}function bw(t,e=0,n=1,r,s){t.min=SC(t.min,e,n,r,s),t.max=SC(t.max,e,n,r,s)}function rj(t,{x:e,y:n}){bw(t.x,e.translate,e.scale,e.originPoint),bw(t.y,n.translate,n.scale,n.originPoint)}function mq(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Jl(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,rj(t,o)),r&&Ko(i.latestValues)&&Jl(t,i.latestValues))}e.x=CC(e.x),e.y=CC(e.y)}function CC(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function $i(t,e){t.min=t.min+e,t.max=t.max+e}function PC(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=wt(t.min,t.max,i);bw(t,e[n],e[r],o,e.scale)}const gq=["x","scaleX","originX"],yq=["y","scaleY","originY"];function Jl(t,e){PC(t.x,e,gq),PC(t.y,e,yq)}function sj(t,e){return tj(pq(t.getBoundingClientRect(),e))}function vq(t,e,n){const r=sj(t,n),{scroll:s}=e;return s&&($i(r.x,s.offset.x),$i(r.y,s.offset.y)),r}const ij=({current:t})=>t?t.ownerDocument.defaultView:null,xq=new WeakMap;class wq{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ut(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sy(u,"page").point)},i=(u,d)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=vD(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ir(w=>{let x=this.getAxisMotionValue(w).get()||0;if(vs.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const b=_.layout.layoutBox[w];b&&(x=mr(b)*(parseFloat(x)/100))}}this.originPoint[w]=x}),v&&st.update(()=>v(u,d),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=d;if(g&&this.currentDirection===null){this.currentDirection=_q(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),y&&y(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Ir(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new ZD(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ij(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&st.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Jf(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=aq(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Ql(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=lq(s.layoutBox,n):this.constraints=!1,this.elastic=hq(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ir(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=dq(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ql(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=vq(r,s.root,this.visualElement.getTransformPagePoint());let o=cq(s.layout.layoutBox,i);if(n){const a=n(fq(o));this.hasMutatedConstraints=!!a,a&&(o=tj(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ir(u=>{if(!Jf(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=s?200:1e6,g=s?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(X1(e,r,0,n))}stopAnimation(){Ir(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ir(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ir(n=>{const{drag:r}=this.getProps();if(!Jf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-wt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ql(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ir(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=uq({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ir(o=>{if(!Jf(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(wt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;xq.set(this.visualElement,this);const e=this.visualElement.current,n=Ks(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ql(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Bs(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ir(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=ww,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Jf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function _q(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class bq extends No{constructor(e){super(e),this.removeGroupControls=Rt,this.removeListeners=Rt,this.controls=new wq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rt}unmount(){this.removeGroupControls(),this.removeListeners()}}const AC=t=>(e,n)=>{t&&st.update(()=>t(e,n))};class Eq extends No{constructor(){super(...arguments),this.removePointerDownListener=Rt}onPointerDown(e){this.session=new ZD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ij(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:AC(e),onStart:AC(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&st.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ks(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Tq(){const t=m.useContext(Zg);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=m.useId();return m.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const $p={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Uu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(be.test(t))t=parseFloat(t);else return t;const n=RC(t,e.target.x),r=RC(t,e.target.y);return`${n}% ${r}%`}},Iq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=yo.parse(t);if(s.length>5)return r;const i=yo.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=wt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class Sq extends oe.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;DB(Cq),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),$p.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||st.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oj(t){const[e,n]=Tq(),r=m.useContext(V1);return oe.createElement(Sq,{...t,layoutGroup:r,switchLayoutGroup:m.useContext(tD),isPresent:e,safeToRemove:n})}const Cq={borderRadius:{...Uu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uu,borderTopRightRadius:Uu,borderBottomLeftRadius:Uu,borderBottomRightRadius:Uu,boxShadow:Iq},aj=["TopLeft","TopRight","BottomLeft","BottomRight"],Pq=aj.length,NC=t=>typeof t=="string"?parseFloat(t):t,kC=t=>typeof t=="number"||be.test(t);function Aq(t,e,n,r,s,i){s?(t.opacity=wt(0,n.opacity!==void 0?n.opacity:1,Rq(r)),t.opacityExit=wt(e.opacity!==void 0?e.opacity:1,0,Nq(r))):i&&(t.opacity=wt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Pq;o++){const a=`border${aj[o]}Radius`;let l=DC(e,a),c=DC(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||kC(l)===kC(c)?(t[a]=Math.max(wt(NC(l),NC(c),r),0),(vs.test(c)||vs.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=wt(e.rotate||0,n.rotate||0,r))}function DC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Rq=lj(0,.5,RD),Nq=lj(.5,.95,Rt);function lj(t,e,n){return r=>r<t?0:r>e?1:n(eh(t,e,r))}function jC(t,e){t.min=e.min,t.max=e.max}function Tr(t,e){jC(t.x,e.x),jC(t.y,e.y)}function OC(t,e,n,r,s){return t-=e,t=$m(t,1/n,r),s!==void 0&&(t=$m(t,1/s,r)),t}function kq(t,e=0,n=1,r=.5,s,i=t,o=t){if(vs.test(e)&&(e=parseFloat(e),e=wt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=wt(i.min,i.max,r);t===i&&(a-=e),t.min=OC(t.min,e,n,a,s),t.max=OC(t.max,e,n,a,s)}function MC(t,e,[n,r,s],i,o){kq(t,e[n],e[r],e[s],e.scale,i,o)}const Dq=["x","scaleX","originX"],jq=["y","scaleY","originY"];function VC(t,e,n,r){MC(t.x,e,Dq,n?n.x:void 0,r?r.x:void 0),MC(t.y,e,jq,n?n.y:void 0,r?r.y:void 0)}function LC(t){return t.translate===0&&t.scale===1}function cj(t){return LC(t.x)&&LC(t.y)}function Oq(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function uj(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function $C(t){return mr(t.x)/mr(t.y)}class Mq{constructor(){this.members=[]}add(e){J1(this.members,e),e.scheduleRender()}remove(e){if(Z1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FC(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Vq=(t,e)=>t.depth-e.depth;class Lq{constructor(){this.children=[],this.isDirty=!1}add(e){J1(this.children,e),this.isDirty=!0}remove(e){Z1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Vq),this.isDirty=!1,this.children.forEach(e)}}function $q(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(ri(r),t(i-e))};return st.read(r,!0),()=>ri(r)}function Fq(t){window.MotionDebug&&window.MotionDebug.record(t)}function Uq(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Bq(t,e,n){const r=Zn(t)?t:Ic(t);return r.start(X1("",r,e,n)),r.animation}const UC=["","X","Y","Z"],zq={visibility:"hidden"},BC=1e3;let qq=0;const Qo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function dj({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=qq++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qo.totalNodes=Qo.resolvedTargetDeltas=Qo.recalculatedProjection=0,this.nodes.forEach(Hq),this.nodes.forEach(Jq),this.nodes.forEach(Zq),this.nodes.forEach(Kq),Fq(Qo)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lq)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new eb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Uq(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=$q(f,250),$p.hasAnimatedSinceResize&&($p.hasAnimatedSinceResize=!1,this.nodes.forEach(qC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||sG,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=u.getProps(),_=!this.targetLayout||!uj(this.targetLayout,v)||g,b=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const S={...Y1(y,"layout"),onPlay:w,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||qC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ri(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zC);return}this.isUpdating||this.nodes.forEach(Yq),this.isUpdating=!1,this.nodes.forEach(Xq),this.nodes.forEach(Gq),this.nodes.forEach(Wq),this.clearAllSnapshots();const a=performance.now();bn.delta=go(0,1e3/60,a-bn.timestamp),bn.timestamp=a,bn.isProcessing=!0,l0.update.process(bn),l0.preRender.process(bn),l0.render.process(bn),bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Qq),this.sharedNodes.forEach(tG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!cj(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Ko(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),iG(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ut();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&($i(a.x,l.offset.x),$i(a.y,l.offset.y)),a}removeElementScroll(o){const a=Ut();Tr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){Tr(a,o);const{scroll:f}=this.root;f&&($i(a.x,-f.offset.x),$i(a.y,-f.offset.y))}$i(a.x,u.offset.x),$i(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=Ut();Tr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Jl(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ko(u.latestValues)&&Jl(l,u.latestValues)}return Ko(this.latestValues)&&Jl(l,this.latestValues),l}removeTransform(o){const a=Ut();Tr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ko(c.latestValues))continue;_w(c.latestValues)&&c.updateSnapshot();const u=Ut(),d=c.measurePageBox();Tr(u,d),VC(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ko(this.latestValues)&&VC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=bn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),_d(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ut(),this.targetWithTransforms=Ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),rj(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),_d(this.relativeTargetOrigin,this.target,g.target),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_w(this.parent.latestValues)||nj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===bn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Tr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;mq(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=Xl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Xl(),this.projectionDeltaWithTransform=Xl());const y=this.projectionTransform;wd(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=FC(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Qo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Xl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ut(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=g!==v,w=this.getStack(),x=!w||w.members.length<=1,_=!!(y&&!x&&this.options.crossfade===!0&&!this.path.some(rG));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const k=S/1e3;GC(d.x,o.x,k),GC(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_d(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nG(this.relativeTarget,this.relativeTargetOrigin,f,k),b&&Oq(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ut()),Tr(b,this.relativeTarget)),y&&(this.animationValues=u,Aq(u,c,this.latestValues,k,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ri(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{$p.hasAnimatedSinceResize=!0,this.currentAnimation=Bq(0,BC,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&hj(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ut();const d=mr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=mr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Tr(a,l),Jl(a,u),wd(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Mq),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<UC.length;u++){const d="rotate"+UC[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zq;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Lp(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Lp(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ko(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=FC(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:g,y:v}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in km){if(f[y]===void 0)continue;const{correct:w,applyTo:x}=km[y],_=c.transform==="none"?f[y]:w(f[y],d);if(x){const b=x.length;for(let S=0;S<b;S++)c[x[S]]=_}else c[y]=_}return this.options.layoutId&&(c.pointerEvents=d===this?Lp(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(zC),this.root.sharedNodes.clear()}}}function Gq(t){t.updateLayout()}function Wq(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Ir(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],g=mr(f);f.min=r[d].min,f.max=f.min+g}):hj(i,n.layoutBox,r)&&Ir(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],g=mr(r[d]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=Xl();wd(a,r,n.layoutBox);const l=Xl();o?wd(l,t.applyTransform(s,!0),n.measuredBox):wd(l,r,n.layoutBox);const c=!cj(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const v=Ut();_d(v,n.layoutBox,f.layoutBox);const y=Ut();_d(y,r,g.layoutBox),uj(v,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Hq(t){Qo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Kq(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Qq(t){t.clearSnapshot()}function zC(t){t.clearMeasurements()}function Yq(t){t.isLayoutDirty=!1}function Xq(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function qC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Jq(t){t.resolveTargetDelta()}function Zq(t){t.calcProjection()}function eG(t){t.resetRotation()}function tG(t){t.removeLeadSnapshot()}function GC(t,e,n){t.translate=wt(e.translate,0,n),t.scale=wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function WC(t,e,n,r){t.min=wt(e.min,n.min,r),t.max=wt(e.max,n.max,r)}function nG(t,e,n,r){WC(t.x,e.x,n.x,r),WC(t.y,e.y,n.y,r)}function rG(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const sG={duration:.45,ease:[.4,0,.1,1]},HC=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),KC=HC("applewebkit/")&&!HC("chrome/")?Math.round:Rt;function QC(t){t.min=KC(t.min),t.max=KC(t.max)}function iG(t){QC(t.x),QC(t.y)}function hj(t,e,n){return t==="position"||t==="preserve-aspect"&&!xw($C(e),$C(n),.2)}const oG=dj({attachResizeListener:(t,e)=>Bs(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),x0={current:void 0},fj=dj({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!x0.current){const t=new oG({});t.mount(window),t.setOptions({layoutScroll:!0}),x0.current=t}return x0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),aG={pan:{Feature:Eq},drag:{Feature:bq,ProjectionNode:fj,MeasureLayout:oj}},lG=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cG(t){const e=lG.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Ew(t,e,n=1){const[r,s]=cG(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return QD(o)?parseFloat(o):o}else return hw(s)?Ew(s,e,n+1):s}function uG(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!hw(i))return;const o=Ew(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!hw(i))continue;const o=Ew(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const dG=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),pj=t=>dG.has(t),hG=t=>Object.keys(t).some(pj),YC=t=>t===Qa||t===be,XC=(t,e)=>parseFloat(t.split(", ")[e]),JC=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return XC(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?XC(i[1],t):0}},fG=new Set(["x","y","z"]),pG=Rh.filter(t=>!fG.has(t));function mG(t){const e=[];return pG.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Sc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:JC(4,13),y:JC(5,14)};Sc.translateX=Sc.x;Sc.translateY=Sc.y;const gG=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Sc[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Sc[c](l,i)}),t},yG=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(pj);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],d=Fu(u);const f=e[l];let g;if(jm(f)){const v=f.length,y=f[0]===null?1:0;u=f[y],d=Fu(u);for(let w=y;w<v&&f[w]!==null;w++)g?G1(Fu(f[w])===g):g=Fu(f[w])}else g=Fu(f);if(d!==g)if(YC(d)&&YC(g)){const v=c.get();typeof v=="string"&&c.set(parseFloat(v)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&g===be&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(u===0||f===0)?u===0?c.set(g.transform(u)):e[l]=d.transform(f):(o||(i=mG(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=gG(e,t,a);return i.length&&i.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),ey&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function vG(t,e,n,r){return hG(e)?yG(t,e,n,r):{target:e,transitionEnd:r}}const xG=(t,e,n,r)=>{const s=uG(t,e,r);return e=s.target,r=s.transitionEnd,vG(t,e,n,r)},Tw={current:null},mj={current:!1};function wG(){if(mj.current=!0,!!ey)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tw.current=t.matches;t.addListener(e),e()}else Tw.current=!1}function _G(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Zn(i))t.addValue(s,i),Lm(r)&&r.add(s);else if(Zn(o))t.addValue(s,Ic(i,{owner:t})),Lm(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Ic(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const ZC=new WeakMap,gj=Object.keys(Zd),bG=gj.length,eP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],EG=M1.length;class TG{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>st.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=ny(n),this.isVariantNode=eD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const f=u[d];a[d]!==void 0&&Zn(f)&&(f.set(a[d],!1),Lm(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,ZC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),mj.current||wG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ZC.delete(this.current),this.projection&&this.projection.unmount(),ri(this.notifyUpdate),ri(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Ka.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&st.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<bG;l++){const c=gj[l],{isEnabled:u,Feature:d,ProjectionNode:f,MeasureLayout:g}=Zd[c];f&&(o=f),u(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&Ql(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<eP.length;r++){const s=eP[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=_G(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<EG;r++){const s=M1[r],i=this.props[s];(Jd(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ic(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=q1(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new eb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class yj extends TG{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=Uz(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){$z(this,r,o);const a=xG(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function IG(t){return window.getComputedStyle(t)}class SG extends yj{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ka.has(n)){const r=Q1(n);return r&&r.default||0}else{const r=IG(e),s=(sD(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sj(e,n)}build(e,n,r,s){$1(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return z1(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){uD(e,n,r,s)}}class CG extends yj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ka.has(n)){const r=Q1(n);return r&&r.default||0}return n=dD.has(n)?n:j1(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ut()}scrapeMotionValuesFromProps(e,n){return fD(e,n)}build(e,n,r,s){U1(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){hD(e,n,r,s)}mount(e){this.isSVGTag=B1(e.tagName),super.mount(e)}}const PG=(t,e)=>L1(t)?new CG(e,{enableHardwareAcceleration:!1}):new SG(e,{enableHardwareAcceleration:!0}),AG={layout:{ProjectionNode:fj,MeasureLayout:oj}},RG={...nq,...b7,...aG,...AG},me=NB((t,e)=>c7(t,e,RG,PG));function vj(){const t=m.useRef(!1);return D1(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function NG(){const t=vj(),[e,n]=m.useState(0),r=m.useCallback(()=>{t.current&&n(e+1)},[e]);return[m.useCallback(()=>st.postRender(r),[r]),e]}class kG extends m.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DG({children:t,isPresent:e}){const n=m.useId(),r=m.useRef(null),s=m.useRef({width:0,height:0,top:0,left:0});return m.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),m.createElement(kG,{isPresent:e,childRef:r,sizeRef:s},m.cloneElement(t,{ref:r}))}const w0=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=pD(jG),l=m.useId(),c=m.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),i?void 0:[n]);return m.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),m.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=m.createElement(DG,{isPresent:n},t)),m.createElement(Zg.Provider,{value:c},t)};function jG(){return new Map}function OG(t){return m.useEffect(()=>()=>t(),[])}const Yo=t=>t.key||"";function MG(t,e){t.forEach(n=>{const r=Yo(n);e.set(r,n)})}function VG(t){const e=[];return m.Children.forEach(t,n=>{m.isValidElement(n)&&e.push(n)}),e}const xj=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=m.useContext(V1).forceRender||NG()[0],l=vj(),c=VG(t);let u=c;const d=m.useRef(new Map).current,f=m.useRef(u),g=m.useRef(new Map).current,v=m.useRef(!0);if(D1(()=>{v.current=!1,MG(c,g),f.current=u}),OG(()=>{v.current=!0,g.clear(),d.clear()}),v.current)return m.createElement(m.Fragment,null,u.map(_=>m.createElement(w0,{key:Yo(_),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},_)));u=[...u];const y=f.current.map(Yo),w=c.map(Yo),x=y.length;for(let _=0;_<x;_++){const b=y[_];w.indexOf(b)===-1&&!d.has(b)&&d.set(b,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((_,b)=>{if(w.indexOf(b)!==-1)return;const S=g.get(b);if(!S)return;const k=y.indexOf(b);let R=_;if(!R){const C=()=>{d.delete(b);const E=Array.from(g.keys()).filter(I=>!w.includes(I));if(E.forEach(I=>g.delete(I)),f.current=c.filter(I=>{const P=Yo(I);return P===b||E.includes(P)}),!d.size){if(l.current===!1)return;a(),r&&r()}};R=m.createElement(w0,{key:Yo(S),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:i,mode:o},S),d.set(b,R)}u.splice(k,0,R)}),u=u.map(_=>{const b=_.key;return d.has(b)?_:m.createElement(w0,{key:Yo(_),isPresent:!0,presenceAffectsLayout:i,mode:o},_)}),m.createElement(m.Fragment,null,d.size?u:u.map(_=>m.cloneElement(_)))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LG=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_j={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[u],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new $G;const f=i<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $G extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FG=function(t){const e=wj(t);return _j.encodeByteArray(e,!0)},Fm=function(t){return FG(t).replace(/\./g,"")},bj=function(t){try{return _j.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG=()=>UG().__FIREBASE_DEFAULTS__,zG=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bj(t[1]);return e&&JSON.parse(e)},oy=()=>{try{return BG()||zG()||qG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ej=t=>{var e,n;return(n=(e=oy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Tj=t=>{const e=Ej(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ij=()=>{var t;return(t=oy())===null||t===void 0?void 0:t.config},Sj=t=>{var e;return(e=oy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Fm(JSON.stringify(n)),Fm(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function HG(){var t;const e=(t=oy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YG(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Aj(){return!HG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tb(){try{return typeof indexedDB=="object"}catch{return!1}}function Rj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function XG(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG="FirebaseError";class Fr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JG,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ZG(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Fr(s,a,r)}}function ZG(t,e){return t.replace(eW,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const eW=/\{\$([^}]+)}/g;function tW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function si(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(tP(i)&&tP(o)){if(!si(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function rd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nW(t,e){const n=new rW(t,e);return n.subscribe.bind(n)}class rW{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sW(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_0),s.error===void 0&&(s.error=_0),s.complete===void 0&&(s.complete=_0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sW(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW=1e3,oW=2,aW=4*60*60*1e3,lW=.5;function nP(t,e=iW,n=oW){const r=e*Math.pow(n,t),s=Math.round(lW*r*(Math.random()-.5)*2);return Math.min(aW,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cW=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GG;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dW(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uW(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uW(t){return t===Xo?void 0:t}function dW(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cW(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const fW={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},pW=je.INFO,mW={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},gW=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mW[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ay{constructor(e){this.name=e,this._logLevel=pW,this._logHandler=gW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const yW=(t,e)=>e.some(n=>t instanceof n);let rP,sP;function vW(){return rP||(rP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xW(){return sP||(sP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nj=new WeakMap,Iw=new WeakMap,kj=new WeakMap,b0=new WeakMap,nb=new WeakMap;function wW(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(uo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nj.set(n,t)}).catch(()=>{}),nb.set(e,t),e}function _W(t){if(Iw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Iw.set(t,e)}let Sw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Iw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bW(t){Sw=t(Sw)}function EW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(E0(this),e,...n);return kj.set(r,e.sort?e.sort():[e]),uo(r)}:xW().includes(t)?function(...e){return t.apply(E0(this),e),uo(Nj.get(this))}:function(...e){return uo(t.apply(E0(this),e))}}function TW(t){return typeof t=="function"?EW(t):(t instanceof IDBTransaction&&_W(t),yW(t,vW())?new Proxy(t,Sw):t)}function uo(t){if(t instanceof IDBRequest)return wW(t);if(b0.has(t))return b0.get(t);const e=TW(t);return e!==t&&(b0.set(t,e),nb.set(e,t)),e}const E0=t=>nb.get(t);function Dj(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=uo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(uo(o.result),l.oldVersion,l.newVersion,uo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const IW=["get","getKey","getAll","getAllKeys","count"],SW=["put","add","delete","clear"],T0=new Map;function iP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T0.get(e))return T0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=SW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||IW.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return T0.set(e,i),i}bW(t=>({...t,get:(e,n,r)=>iP(e,n)||t.get(e,n,r),has:(e,n)=>!!iP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PW(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PW(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cw="@firebase/app",oP="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new ay("@firebase/app"),AW="@firebase/app-compat",RW="@firebase/analytics-compat",NW="@firebase/analytics",kW="@firebase/app-check-compat",DW="@firebase/app-check",jW="@firebase/auth",OW="@firebase/auth-compat",MW="@firebase/database",VW="@firebase/data-connect",LW="@firebase/database-compat",$W="@firebase/functions",FW="@firebase/functions-compat",UW="@firebase/installations",BW="@firebase/installations-compat",zW="@firebase/messaging",qW="@firebase/messaging-compat",GW="@firebase/performance",WW="@firebase/performance-compat",HW="@firebase/remote-config",KW="@firebase/remote-config-compat",QW="@firebase/storage",YW="@firebase/storage-compat",XW="@firebase/firestore",JW="@firebase/vertexai-preview",ZW="@firebase/firestore-compat",eH="firebase",tH="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",nH={[Cw]:"fire-core",[AW]:"fire-core-compat",[NW]:"fire-analytics",[RW]:"fire-analytics-compat",[DW]:"fire-app-check",[kW]:"fire-app-check-compat",[jW]:"fire-auth",[OW]:"fire-auth-compat",[MW]:"fire-rtdb",[VW]:"fire-data-connect",[LW]:"fire-rtdb-compat",[$W]:"fire-fn",[FW]:"fire-fn-compat",[UW]:"fire-iid",[BW]:"fire-iid-compat",[zW]:"fire-fcm",[qW]:"fire-fcm-compat",[GW]:"fire-perf",[WW]:"fire-perf-compat",[HW]:"fire-rc",[KW]:"fire-rc-compat",[QW]:"fire-gcs",[YW]:"fire-gcs-compat",[XW]:"fire-fst",[ZW]:"fire-fst-compat",[JW]:"fire-vertex","fire-js":"fire-js",[eH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map,rH=new Map,Pw=new Map;function aP(t,e){try{t.container.addComponent(e)}catch(n){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zr(t){const e=t.name;if(Pw.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;Pw.set(e,t);for(const n of Bm.values())aP(n,t);for(const n of rH.values())aP(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sH(t,e,n=Um){Cs(t,e).clearInstance(n)}function Kr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ho=new Ya("app","Firebase",iH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=tH;function jj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Um,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ho.create("bad-app-name",{appName:String(s)});if(n||(n=Ij()),!n)throw ho.create("no-options");const i=Bm.get(s);if(i){if(si(n,i.options)&&si(r,i.config))return i;throw ho.create("duplicate-app",{appName:s})}const o=new hW(s);for(const l of Pw.values())o.addComponent(l);const a=new oH(n,r,o);return Bm.set(s,a),a}function ly(t=Um){const e=Bm.get(t);if(!e&&t===Um&&Ij())return jj();if(!e)throw ho.create("no-app",{appName:t});return e}function Xn(t,e,n){var r;let s=(r=nH[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(a.join(" "));return}Zr(new Or(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH="firebase-heartbeat-database",lH=1,th="firebase-heartbeat-store";let I0=null;function Oj(){return I0||(I0=Dj(aH,lH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(th)}catch(n){console.warn(n)}}}}).catch(t=>{throw ho.create("idb-open",{originalErrorMessage:t.message})})),I0}async function cH(t){try{const n=(await Oj()).transaction(th),r=await n.objectStore(th).get(Mj(t));return await n.done,r}catch(e){if(e instanceof Fr)ii.warn(e.message);else{const n=ho.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ii.warn(n.message)}}}async function lP(t,e){try{const r=(await Oj()).transaction(th,"readwrite");await r.objectStore(th).put(e,Mj(t)),await r.done}catch(n){if(n instanceof Fr)ii.warn(n.message);else{const r=ho.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ii.warn(r.message)}}}function Mj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=1024,dH=30*24*60*60*1e3;class hH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cP();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=dH}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ii.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cP(),{heartbeatsToSend:r,unsentEntries:s}=fH(this._heartbeatsCache.heartbeats),i=Fm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ii.warn(n),""}}}function cP(){return new Date().toISOString().substring(0,10)}function fH(t,e=uH){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),uP(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tb()?Rj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cH(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uP(t){return Fm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t){Zr(new Or("platform-logger",e=>new CW(e),"PRIVATE")),Zr(new Or("heartbeat",e=>new hH(e),"PRIVATE")),Xn(Cw,oP,t),Xn(Cw,oP,"esm2017"),Xn("fire-js","")}mH("");var Nt=function(){return Nt=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Nt.apply(this,arguments)};function Ja(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function rb(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Vj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gH=Vj,Lj=new Ya("auth","Firebase",Vj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new ay("@firebase/auth");function yH(t,...e){zm.logLevel<=je.WARN&&zm.warn(`Auth (${Xa}): ${t}`,...e)}function Fp(t,...e){zm.logLevel<=je.ERROR&&zm.error(`Auth (${Xa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,...e){throw ib(t,...e)}function Xr(t,...e){return ib(t,...e)}function sb(t,e,n){const r=Object.assign(Object.assign({},gH()),{[e]:n});return new Ya("auth","Firebase",r).create(e,{appName:t.name})}function Ys(t){return sb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vH(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mr(t,"argument-error"),sb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ib(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Lj.create(t,...e)}function _e(t,e,...n){if(!t)throw ib(e,...n)}function zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fp(e),new Error(e)}function oi(t,e){t||zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xH(){return dP()==="http:"||dP()==="https:"}function dP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xH()||Pj()||"connection"in navigator)?navigator.onLine:!0}function _H(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=WG()||QG()}get(){return wH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t,e){oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=new Oh(3e4,6e4);function mi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function rs(t,e,n,r,s={}){return Fj(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=jh(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return KG()||(c.referrerPolicy="no-referrer"),$j.fetch()(Uj(t,t.config.apiHost,n,a),c)})}async function Fj(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},bH),e);try{const s=new IH(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Zf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zf(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sb(t,u,c);Mr(t,u)}}catch(s){if(s instanceof Fr)throw s;Mr(t,"network-request-failed",{message:String(s)})}}async function Mh(t,e,n,r,s={}){const i=await rs(t,e,n,r,s);return"mfaPendingCredential"in i&&Mr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Uj(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ob(t.config,s):`${t.config.apiScheme}://${s}`}function TH(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IH{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),EH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Xr(t,e,r);return s.customData._tokenResponse=n,s}function hP(t){return t!==void 0&&t.enterprise!==void 0}class SH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TH(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function CH(t,e){return rs(t,"GET","/v2/recaptchaConfig",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PH(t,e){return rs(t,"POST","/v1/accounts:delete",e)}async function Bj(t,e){return rs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AH(t,e=!1){const n=Ce(t),r=await n.getIdToken(e),s=ab(r);_e(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:bd(S0(s.auth_time)),issuedAtTime:bd(S0(s.iat)),expirationTime:bd(S0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function S0(t){return Number(t)*1e3}function ab(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fp("JWT malformed, contained fewer than 3 sections"),null;try{const s=bj(n);return s?JSON.parse(s):(Fp("Failed to decode base64 JWT payload"),null)}catch(s){return Fp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fP(t){const e=ab(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fr&&RH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function RH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bd(this.lastLoginAt),this.creationTime=bd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ta(t,Bj(n,{idToken:r}));_e(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?zj(i.providerUserInfo):[],a=DH(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Rw(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function kH(t){const e=Ce(t);await qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DH(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function zj(t){return t.map(e=>{var{providerId:n}=e,r=Ja(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jH(t,e){const n=await Fj(t,{},async()=>{const r=jh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Uj(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$j.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OH(t,e){return rs(t,"POST","/v2/accounts:revokeToken",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=fP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await jH(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ic;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(_e(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(_e(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ic,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ja(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Rw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ta(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AH(this,e)}reload(){return kH(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kr(this.auth.app))return Promise.reject(Ys(this.auth));const e=await this.getIdToken();return await Ta(this,PH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:S,isAnonymous:k,providerData:R,stsTokenManager:C}=n;_e(b&&C,e,"internal-error");const E=ic.fromJSON(this.name,C);_e(typeof b=="string",e,"internal-error"),Ai(d,e.name),Ai(f,e.name),_e(typeof S=="boolean",e,"internal-error"),_e(typeof k=="boolean",e,"internal-error"),Ai(g,e.name),Ai(v,e.name),Ai(y,e.name),Ai(w,e.name),Ai(x,e.name),Ai(_,e.name);const I=new qs({uid:b,auth:e,email:f,emailVerified:S,displayName:d,isAnonymous:k,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:E,createdAt:x,lastLoginAt:_});return R&&Array.isArray(R)&&(I.providerData=R.map(P=>Object.assign({},P))),w&&(I._redirectEventId=w),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new ic;s.updateFromServerResponse(n);const i=new qs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await qm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];_e(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ic;a.updateFromIdToken(r);const l=new qs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Rw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=new Map;function Gs(t){oi(t instanceof Function,"Expected a class definition");let e=pP.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qj.type="NONE";const mP=qj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t,e,n){return`firebase:${t}:${e}:${n}`}class oc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Up(this.userKey,s.apiKey,i),this.fullPersistenceKey=Up("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oc(Gs(mP),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Gs(mP);const o=Up(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=qs._fromJSON(e,u);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new oc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new oc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yj(e))return"Blackberry";if(Xj(e))return"Webos";if(Wj(e))return"Safari";if((e.includes("chrome/")||Hj(e))&&!e.includes("edge/"))return"Chrome";if(Qj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gj(t=Wt()){return/firefox\//i.test(t)}function Wj(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hj(t=Wt()){return/crios\//i.test(t)}function Kj(t=Wt()){return/iemobile/i.test(t)}function Qj(t=Wt()){return/android/i.test(t)}function Yj(t=Wt()){return/blackberry/i.test(t)}function Xj(t=Wt()){return/webos/i.test(t)}function lb(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MH(t=Wt()){var e;return lb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VH(){return YG()&&document.documentMode===10}function Jj(t=Wt()){return lb(t)||Qj(t)||Xj(t)||Yj(t)||/windows phone/i.test(t)||Kj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t,e=[]){let n;switch(t){case"Browser":n=gP(Wt());break;case"Worker":n=`${gP(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $H(t,e={}){return rs(t,"GET","/v2/passwordPolicy",mi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=6;class UH{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:FH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yP(this),this.idTokenSubscription=new yP(this),this.beforeStateQueue=new LH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await oc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bj(this,{idToken:e}),r=await qs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_H()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kr(this.app))return Promise.reject(Ys(this));const n=e?Ce(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kr(this.app)?Promise.reject(Ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kr(this.app)?Promise.reject(Ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $H(this),n=new UH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gs(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await oc.create(this,[Gs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yH(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gi(t){return Ce(t)}class yP{constructor(e){this.auth=e,this.observer=null,this.addObserver=nW(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zH(t){cy=t}function eO(t){return cy.loadJS(t)}function qH(){return cy.recaptchaEnterpriseScript}function GH(){return cy.gapiScript}function WH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const HH="recaptcha-enterprise",KH="NO_RECAPTCHA";class QH{constructor(e){this.type=HH,this.auth=gi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{CH(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new SH(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;hP(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(KH)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&hP(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=qH();l.length!==0&&(l+=a),eO(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function vP(t,e,n,r=!1){const s=new QH(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Gm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await vP(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await vP(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(si(i,e??{}))return s;Mr(s,"already-initialized")}return n.initialize({options:e})}function XH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JH(t,e,n){const r=gi(t);_e(r._canInitEmulator,r,"emulator-config-failed"),_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=tO(e),{host:o,port:a}=ZH(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||eK()}function tO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZH(t){const e=tO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:xP(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:xP(o)}}}function xP(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,n){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}async function tK(t,e){return rs(t,"POST","/v1/accounts:update",e)}async function nK(t,e){return rs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rK(t,e){return Mh(t,"POST","/v1/accounts:signInWithPassword",mi(t,e))}async function sK(t,e){return rs(t,"POST","/v1/accounts:sendOobCode",mi(t,e))}async function iK(t,e){return sK(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oK(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}async function aK(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends cb{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new nh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,n,"signInWithPassword",rK);case"emailLink":return oK(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,r,"signUpPassword",nK);case"emailLink":return aK(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t,e){return Mh(t,"POST","/v1/accounts:signInWithIdp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK="http://localhost";class Ia extends cb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ja(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ia(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ac(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ac(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ac(e,n)}buildRequest(){const e={requestUri:lK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uK(t){const e=nd(rd(t)).link,n=e?nd(rd(e)).deep_link_id:null,r=nd(rd(t)).deep_link_id;return(r?nd(rd(r)).link:null)||r||n||e||t}class ub{constructor(e){var n,r,s,i,o,a;const l=nd(rd(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=cK((s=l.mode)!==null&&s!==void 0?s:null);_e(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=uK(e);try{return new ub(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,n){return nh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ub.parseLink(n);return _e(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends db{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Vh{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Vh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ia._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vs.credential(n,r)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Vh{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Vh{constructor(){super("twitter.com")}static credential(e,n){return Ia._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ls.credential(n,r)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dK(t,e){return Mh(t,"POST","/v1/accounts:signUp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qs._fromIdTokenResponse(e,r,s),o=wP(r);return new Sa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=wP(r);return new Sa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function wP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends Fr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wm(e,n,r,s)}}function nO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wm._fromErrorAndOperation(t,i,e,r):i})}async function hK(t,e,n=!1){const r=await Ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e,n=!1){const{auth:r}=t;if(Kr(r.app))return Promise.reject(Ys(r));const s="reauthenticate";try{const i=await Ta(t,nO(r,s,e,t),n);_e(i.idToken,r,"internal-error");const o=ab(i.idToken);_e(o,r,"internal-error");const{sub:a}=o;return _e(t.uid===a,r,"user-mismatch"),Sa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(t,e,n=!1){if(Kr(t.app))return Promise.reject(Ys(t));const r="signIn",s=await nO(t,r,e),i=await Sa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function fK(t,e){return sO(gi(t),e)}async function iO(t,e){return rO(Ce(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(t,e,n){var r;_e(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),_e(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_e(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(_e(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(t){const e=gi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hb(t,e,n){const r=gi(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&pK(r,s,n),await Gm(r,s,"getOobCode",iK)}async function fb(t,e,n){if(Kr(t.app))return Promise.reject(Ys(t));const r=gi(t),o=await Gm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dK).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oO(t),l}),a=await Sa._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function pb(t,e,n){return Kr(t.app)?Promise.reject(Ys(t)):fK(Ce(t),ko.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oO(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mK(t,e){return rs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ce(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ta(r,mK(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function aO(t,e){return gK(Ce(t),null,e)}async function gK(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await Ta(t,tK(r,i));await t._updateTokensIfNecessary(o,!0)}function yK(t,e,n,r){return Ce(t).onIdTokenChanged(e,n,r)}function vK(t,e,n){return Ce(t).beforeAuthStateChanged(e,n)}function lO(t,e,n,r){return Ce(t).onAuthStateChanged(e,n,r)}function cO(t){return Ce(t).signOut()}const Hm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hm,"1"),this.storage.removeItem(Hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=1e3,wK=10;class dO extends uO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);VH()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,wK):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dO.type="LOCAL";const _K=dO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO extends uO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hO.type="SESSION";const fO=hO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new uy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await bK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=mb("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function TK(t){xs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function IK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CK(){return pO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="firebaseLocalStorageDb",PK=1,Km="firebaseLocalStorage",gO="fbase_key";class Lh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dy(t,e){return t.transaction([Km],e?"readwrite":"readonly").objectStore(Km)}function AK(){const t=indexedDB.deleteDatabase(mO);return new Lh(t).toPromise()}function Nw(){const t=indexedDB.open(mO,PK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Km,{keyPath:gO})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Km)?e(r):(r.close(),await AK(),e(await Nw()))})})}async function _P(t,e,n){const r=dy(t,!0).put({[gO]:e,value:n});return new Lh(r).toPromise()}async function RK(t,e){const n=dy(t,!1).get(e),r=await new Lh(n).toPromise();return r===void 0?null:r.value}function bP(t,e){const n=dy(t,!0).delete(e);return new Lh(n).toPromise()}const NK=800,kK=3;class yO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uy._getInstance(CK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IK(),!this.activeServiceWorker)return;this.sender=new EK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nw();return await _P(e,Hm,"1"),await bP(e,Hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_P(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=dy(s,!1).getAll();return new Lh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yO.type="LOCAL";const DK=yO;new Oh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t,e){return e?Gs(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb extends cb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ac(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ac(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ac(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jK(t){return sO(t.auth,new gb(t),t.bypassAuthState)}function OK(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),rO(n,new gb(t),t.bypassAuthState)}async function MK(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),hK(n,new gb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jK;case"linkViaPopup":case"linkViaRedirect":return MK;case"reauthViaPopup":case"reauthViaRedirect":return OK;default:Mr(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK=new Oh(2e3,1e4);async function wO(t,e,n){if(Kr(t.app))return Promise.reject(Xr(t,"operation-not-supported-in-this-environment"));const r=gi(t);vH(t,e,db);const s=vO(r,n);return new la(r,"signInViaPopup",e,s).executeNotNull()}class la extends xO{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=mb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VK.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK="pendingRedirect",Bp=new Map;class $K extends xO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bp.get(this.auth._key());if(!e){try{const r=await FK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bp.set(this.auth._key(),e)}return this.bypassAuthState||Bp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FK(t,e){const n=zK(e),r=BK(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function UK(t,e){Bp.set(t._key(),e)}function BK(t){return Gs(t._redirectPersistence)}function zK(t){return Up(LK,t.config.apiKey,t.name)}async function qK(t,e,n=!1){if(Kr(t.app))return Promise.reject(Ys(t));const r=gi(t),s=vO(r,e),o=await new $K(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GK=10*60*1e3;class WK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_O(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GK&&this.cachedEventUids.clear(),this.cachedEventUids.has(EP(e))}saveEventToCache(e){this.cachedEventUids.add(EP(e)),this.lastProcessedEventTime=Date.now()}}function EP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _O({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _O(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KK(t,e={}){return rs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YK=/^https?/;async function XK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KK(t);for(const n of e)try{if(JK(n))return}catch{}Mr(t,"unauthorized-domain")}function JK(t){const e=Aw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YK.test(n))return!1;if(QK.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=new Oh(3e4,6e4);function TP(){const t=xs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eQ(t){return new Promise((e,n)=>{var r,s,i;function o(){TP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TP(),n(Xr(t,"network-request-failed"))},timeout:ZK.get()})}if(!((s=(r=xs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=xs().gapi)===null||i===void 0)&&i.load)o();else{const a=WH("iframefcb");return xs()[a]=()=>{gapi.load?o():n(Xr(t,"network-request-failed"))},eO(`${GH()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zp=null,e})}let zp=null;function tQ(t){return zp=zp||eQ(t),zp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ=new Oh(5e3,15e3),rQ="__/auth/iframe",sQ="emulator/auth/iframe",iQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aQ(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ob(e,sQ):`https://${t.config.authDomain}/${rQ}`,r={apiKey:e.apiKey,appName:t.name,v:Xa},s=oQ.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${jh(r).slice(1)}`}async function lQ(t){const e=await tQ(t),n=xs().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:aQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iQ,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Xr(t,"network-request-failed"),a=xs().setTimeout(()=>{i(o)},nQ.get());function l(){xs().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uQ=500,dQ=600,hQ="_blank",fQ="http://localhost";class IP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pQ(t,e,n,r=uQ,s=dQ){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},cQ),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Wt().toLowerCase();n&&(a=Hj(c)?hQ:n),Gj(c)&&(e=e||fQ,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(MH(c)&&a!=="_self")return mQ(e||"",a),new IP(null);const d=window.open(e||"",a,u);_e(d,t,"popup-blocked");try{d.focus()}catch{}return new IP(d)}function mQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ="__/auth/handler",yQ="emulator/auth/handler",vQ=encodeURIComponent("fac");async function SP(t,e,n,r,s,i){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xa,eventId:s};if(e instanceof db){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",tW(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(i||{}))o[u]=d}if(e instanceof Vh){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${vQ}=${encodeURIComponent(l)}`:"";return`${xQ(t)}?${jh(a).slice(1)}${c}`}function xQ({config:t}){return t.emulator?ob(t,yQ):`https://${t.authDomain}/${gQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="webStorageSupport";class wQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fO,this._completeRedirectFn=qK,this._overrideRedirectResult=UK}async _openPopup(e,n,r,s){var i;oi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await SP(e,n,r,Aw(),s);return pQ(e,o,mb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await SP(e,n,r,Aw(),s);return TK(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(oi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lQ(e),r=new WK(e);return n.register("authEvent",s=>(_e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(C0,{type:C0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[C0];o!==void 0&&n(!!o),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Jj()||Wj()||lb()}}const _Q=wQ;var CP="@firebase/auth",PP="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TQ(t){Zr(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zj(t)},c=new BH(r,s,i,l);return XH(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zr(new Or("auth-internal",e=>{const n=gi(e.getProvider("auth").getImmediate());return(r=>new bQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(CP,PP,EQ(t)),Xn(CP,PP,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ=5*60,SQ=Sj("authIdTokenMaxAge")||IQ;let AP=null;const CQ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SQ)return;const s=n==null?void 0:n.token;AP!==s&&(AP=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bO(t=ly()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YH(t,{popupRedirectResolver:_Q,persistence:[DK,_K,fO]}),r=Sj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=CQ(i.toString());vK(n,o,()=>o(n.currentUser)),yK(n,a=>o(a))}}const s=Ej("auth");return s&&JH(n,`http://${s}`),n}function PQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zH({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Xr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",PQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TQ("Browser");var RP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ma,EO;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function I(){}I.prototype=E.prototype,C.D=E.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(P,D,j){for(var N=Array(arguments.length-2),L=2;L<arguments.length;L++)N[L-2]=arguments[L];return E.prototype[D].apply(P,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,E,I){I||(I=0);var P=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)P[D]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(D=0;16>D;++D)P[D]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=C.g[0],I=C.g[1],D=C.g[2];var j=C.g[3],N=E+(j^I&(D^j))+P[0]+3614090360&4294967295;E=I+(N<<7&4294967295|N>>>25),N=j+(D^E&(I^D))+P[1]+3905402710&4294967295,j=E+(N<<12&4294967295|N>>>20),N=D+(I^j&(E^I))+P[2]+606105819&4294967295,D=j+(N<<17&4294967295|N>>>15),N=I+(E^D&(j^E))+P[3]+3250441966&4294967295,I=D+(N<<22&4294967295|N>>>10),N=E+(j^I&(D^j))+P[4]+4118548399&4294967295,E=I+(N<<7&4294967295|N>>>25),N=j+(D^E&(I^D))+P[5]+1200080426&4294967295,j=E+(N<<12&4294967295|N>>>20),N=D+(I^j&(E^I))+P[6]+2821735955&4294967295,D=j+(N<<17&4294967295|N>>>15),N=I+(E^D&(j^E))+P[7]+4249261313&4294967295,I=D+(N<<22&4294967295|N>>>10),N=E+(j^I&(D^j))+P[8]+1770035416&4294967295,E=I+(N<<7&4294967295|N>>>25),N=j+(D^E&(I^D))+P[9]+2336552879&4294967295,j=E+(N<<12&4294967295|N>>>20),N=D+(I^j&(E^I))+P[10]+4294925233&4294967295,D=j+(N<<17&4294967295|N>>>15),N=I+(E^D&(j^E))+P[11]+2304563134&4294967295,I=D+(N<<22&4294967295|N>>>10),N=E+(j^I&(D^j))+P[12]+1804603682&4294967295,E=I+(N<<7&4294967295|N>>>25),N=j+(D^E&(I^D))+P[13]+4254626195&4294967295,j=E+(N<<12&4294967295|N>>>20),N=D+(I^j&(E^I))+P[14]+2792965006&4294967295,D=j+(N<<17&4294967295|N>>>15),N=I+(E^D&(j^E))+P[15]+1236535329&4294967295,I=D+(N<<22&4294967295|N>>>10),N=E+(D^j&(I^D))+P[1]+4129170786&4294967295,E=I+(N<<5&4294967295|N>>>27),N=j+(I^D&(E^I))+P[6]+3225465664&4294967295,j=E+(N<<9&4294967295|N>>>23),N=D+(E^I&(j^E))+P[11]+643717713&4294967295,D=j+(N<<14&4294967295|N>>>18),N=I+(j^E&(D^j))+P[0]+3921069994&4294967295,I=D+(N<<20&4294967295|N>>>12),N=E+(D^j&(I^D))+P[5]+3593408605&4294967295,E=I+(N<<5&4294967295|N>>>27),N=j+(I^D&(E^I))+P[10]+38016083&4294967295,j=E+(N<<9&4294967295|N>>>23),N=D+(E^I&(j^E))+P[15]+3634488961&4294967295,D=j+(N<<14&4294967295|N>>>18),N=I+(j^E&(D^j))+P[4]+3889429448&4294967295,I=D+(N<<20&4294967295|N>>>12),N=E+(D^j&(I^D))+P[9]+568446438&4294967295,E=I+(N<<5&4294967295|N>>>27),N=j+(I^D&(E^I))+P[14]+3275163606&4294967295,j=E+(N<<9&4294967295|N>>>23),N=D+(E^I&(j^E))+P[3]+4107603335&4294967295,D=j+(N<<14&4294967295|N>>>18),N=I+(j^E&(D^j))+P[8]+1163531501&4294967295,I=D+(N<<20&4294967295|N>>>12),N=E+(D^j&(I^D))+P[13]+2850285829&4294967295,E=I+(N<<5&4294967295|N>>>27),N=j+(I^D&(E^I))+P[2]+4243563512&4294967295,j=E+(N<<9&4294967295|N>>>23),N=D+(E^I&(j^E))+P[7]+1735328473&4294967295,D=j+(N<<14&4294967295|N>>>18),N=I+(j^E&(D^j))+P[12]+2368359562&4294967295,I=D+(N<<20&4294967295|N>>>12),N=E+(I^D^j)+P[5]+4294588738&4294967295,E=I+(N<<4&4294967295|N>>>28),N=j+(E^I^D)+P[8]+2272392833&4294967295,j=E+(N<<11&4294967295|N>>>21),N=D+(j^E^I)+P[11]+1839030562&4294967295,D=j+(N<<16&4294967295|N>>>16),N=I+(D^j^E)+P[14]+4259657740&4294967295,I=D+(N<<23&4294967295|N>>>9),N=E+(I^D^j)+P[1]+2763975236&4294967295,E=I+(N<<4&4294967295|N>>>28),N=j+(E^I^D)+P[4]+1272893353&4294967295,j=E+(N<<11&4294967295|N>>>21),N=D+(j^E^I)+P[7]+4139469664&4294967295,D=j+(N<<16&4294967295|N>>>16),N=I+(D^j^E)+P[10]+3200236656&4294967295,I=D+(N<<23&4294967295|N>>>9),N=E+(I^D^j)+P[13]+681279174&4294967295,E=I+(N<<4&4294967295|N>>>28),N=j+(E^I^D)+P[0]+3936430074&4294967295,j=E+(N<<11&4294967295|N>>>21),N=D+(j^E^I)+P[3]+3572445317&4294967295,D=j+(N<<16&4294967295|N>>>16),N=I+(D^j^E)+P[6]+76029189&4294967295,I=D+(N<<23&4294967295|N>>>9),N=E+(I^D^j)+P[9]+3654602809&4294967295,E=I+(N<<4&4294967295|N>>>28),N=j+(E^I^D)+P[12]+3873151461&4294967295,j=E+(N<<11&4294967295|N>>>21),N=D+(j^E^I)+P[15]+530742520&4294967295,D=j+(N<<16&4294967295|N>>>16),N=I+(D^j^E)+P[2]+3299628645&4294967295,I=D+(N<<23&4294967295|N>>>9),N=E+(D^(I|~j))+P[0]+4096336452&4294967295,E=I+(N<<6&4294967295|N>>>26),N=j+(I^(E|~D))+P[7]+1126891415&4294967295,j=E+(N<<10&4294967295|N>>>22),N=D+(E^(j|~I))+P[14]+2878612391&4294967295,D=j+(N<<15&4294967295|N>>>17),N=I+(j^(D|~E))+P[5]+4237533241&4294967295,I=D+(N<<21&4294967295|N>>>11),N=E+(D^(I|~j))+P[12]+1700485571&4294967295,E=I+(N<<6&4294967295|N>>>26),N=j+(I^(E|~D))+P[3]+2399980690&4294967295,j=E+(N<<10&4294967295|N>>>22),N=D+(E^(j|~I))+P[10]+4293915773&4294967295,D=j+(N<<15&4294967295|N>>>17),N=I+(j^(D|~E))+P[1]+2240044497&4294967295,I=D+(N<<21&4294967295|N>>>11),N=E+(D^(I|~j))+P[8]+1873313359&4294967295,E=I+(N<<6&4294967295|N>>>26),N=j+(I^(E|~D))+P[15]+4264355552&4294967295,j=E+(N<<10&4294967295|N>>>22),N=D+(E^(j|~I))+P[6]+2734768916&4294967295,D=j+(N<<15&4294967295|N>>>17),N=I+(j^(D|~E))+P[13]+1309151649&4294967295,I=D+(N<<21&4294967295|N>>>11),N=E+(D^(I|~j))+P[4]+4149444226&4294967295,E=I+(N<<6&4294967295|N>>>26),N=j+(I^(E|~D))+P[11]+3174756917&4294967295,j=E+(N<<10&4294967295|N>>>22),N=D+(E^(j|~I))+P[2]+718787259&4294967295,D=j+(N<<15&4294967295|N>>>17),N=I+(j^(D|~E))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var I=E-this.blockSize,P=this.B,D=this.h,j=0;j<E;){if(D==0)for(;j<=I;)s(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<E;)if(P[D++]=C.charCodeAt(j++),D==this.blockSize){s(this,P),D=0;break}}else for(;j<E;)if(P[D++]=C[j++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var I=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=I&255,I/=256;for(this.u(C),C=Array(16),E=I=0;4>E;++E)for(var P=0;32>P;P+=8)C[I++]=this.g[E]>>>P&255;return C};function i(C,E){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=E(C)}function o(C,E){this.h=E;for(var I=[],P=!0,D=C.length-1;0<=D;D--){var j=C[D]|0;P&&j==E||(I[D]=j,P=!1)}this.g=I}var a={};function l(C){return-128<=C&&128>C?i(C,function(E){return new o([E|0],0>E?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return w(c(-C));for(var E=[],I=1,P=0;C>=I;P++)E[P]=C/I|0,I*=4294967296;return new o(E,0)}function u(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return w(u(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(E,8)),P=d,D=0;D<C.length;D+=8){var j=Math.min(8,C.length-D),N=parseInt(C.substring(D,D+j),E);8>j?(j=c(Math.pow(E,j)),P=P.j(j).add(c(N))):(P=P.j(I),P=P.add(c(N)))}return P}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();for(var C=0,E=1,I=0;I<this.g.length;I++){var P=this.i(I);C+=(0<=P?P:4294967296+P)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(y(this))return"-"+w(this).toString(C);for(var E=c(Math.pow(C,6)),I=this,P="";;){var D=S(I,E).g;I=x(I,D.j(E));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=D,v(I))return j+P;for(;6>j.length;)j="0"+j;P=j+P}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=x(this,C),y(C)?-1:v(C)?0:1};function w(C){for(var E=C.g.length,I=[],P=0;P<E;P++)I[P]=~C.g[P];return new o(I,~C.h).add(f)}t.abs=function(){return y(this)?w(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),I=[],P=0,D=0;D<=E;D++){var j=P+(this.i(D)&65535)+(C.i(D)&65535),N=(j>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);P=N>>>16,j&=65535,N&=65535,I[D]=N<<16|j}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(C,E){return C.add(w(E))}t.j=function(C){if(v(this)||v(C))return d;if(y(this))return y(C)?w(this).j(w(C)):w(w(this).j(C));if(y(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var E=this.g.length+C.g.length,I=[],P=0;P<2*E;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<C.g.length;D++){var j=this.i(P)>>>16,N=this.i(P)&65535,L=C.i(D)>>>16,B=C.i(D)&65535;I[2*P+2*D]+=N*B,_(I,2*P+2*D),I[2*P+2*D+1]+=j*B,_(I,2*P+2*D+1),I[2*P+2*D+1]+=N*L,_(I,2*P+2*D+1),I[2*P+2*D+2]+=j*L,_(I,2*P+2*D+2)}for(P=0;P<E;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=E;P<2*E;P++)I[P]=0;return new o(I,0)};function _(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function b(C,E){this.g=C,this.h=E}function S(C,E){if(v(E))throw Error("division by zero");if(v(C))return new b(d,d);if(y(C))return E=S(w(C),E),new b(w(E.g),w(E.h));if(y(E))return E=S(C,w(E)),new b(w(E.g),E.h);if(30<C.g.length){if(y(C)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var I=f,P=E;0>=P.l(C);)I=k(I),P=k(P);var D=R(I,1),j=R(P,1);for(P=R(P,2),I=R(I,2);!v(P);){var N=j.add(P);0>=N.l(C)&&(D=D.add(I),j=N),P=R(P,1),I=R(I,1)}return E=x(C,D.j(E)),new b(D,E)}for(D=d;0<=C.l(E);){for(I=Math.max(1,Math.floor(C.m()/E.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),j=c(I),N=j.j(E);y(N)||0<N.l(C);)I-=P,j=c(I),N=j.j(E);v(j)&&(j=f),D=D.add(j),C=x(C,N)}return new b(D,C)}t.A=function(C){return S(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)&C.i(P);return new o(I,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)|C.i(P);return new o(I,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)^C.i(P);return new o(I,this.h^C.h)};function k(C){for(var E=C.g.length+1,I=[],P=0;P<E;P++)I[P]=C.i(P)<<1|C.i(P-1)>>>31;return new o(I,C.h)}function R(C,E){var I=E>>5;E%=32;for(var P=C.g.length-I,D=[],j=0;j<P;j++)D[j]=0<E?C.i(j+I)>>>E|C.i(j+I+1)<<32-E:C.i(j+I);return new o(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,EO=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,ma=o}).apply(typeof RP<"u"?RP:typeof self<"u"?self:typeof window<"u"?window:{});var ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TO,sd,IO,qp,kw,SO,CO,PO;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,T,A){return p==Array.prototype||p==Object.prototype||(p[T]=A.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof ep=="object"&&ep];for(var T=0;T<p.length;++T){var A=p[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function s(p,T){if(T)e:{var A=r;p=p.split(".");for(var V=0;V<p.length-1;V++){var G=p[V];if(!(G in A))break e;A=A[G]}p=p[p.length-1],V=A[p],T=T(V),T!=V&&T!=null&&e(A,p,{configurable:!0,writable:!0,value:T})}}function i(p,T){p instanceof String&&(p+="");var A=0,V=!1,G={next:function(){if(!V&&A<p.length){var X=A++;return{value:T(X,p[X]),done:!1}}return V=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(p){return p||function(){return i(this,function(T,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(p){var T=typeof p;return T=T!="object"?T:p?Array.isArray(p)?"array":T:"null",T=="array"||T=="object"&&typeof p.length=="number"}function c(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function u(p,T,A){return p.call.apply(p.bind,arguments)}function d(p,T,A){if(!p)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,V),p.apply(T,G)}}return function(){return p.apply(T,arguments)}}function f(p,T,A){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function g(p,T){var A=Array.prototype.slice.call(arguments,1);return function(){var V=A.slice();return V.push.apply(V,arguments),p.apply(this,V)}}function v(p,T){function A(){}A.prototype=T.prototype,p.aa=T.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function(V,G,X){for(var se=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)se[tt-2]=arguments[tt];return T.prototype[G].apply(V,se)}}function y(p){const T=p.length;if(0<T){const A=Array(T);for(let V=0;V<T;V++)A[V]=p[V];return A}return[]}function w(p,T){for(let A=1;A<arguments.length;A++){const V=arguments[A];if(l(V)){const G=p.length||0,X=V.length||0;p.length=G+X;for(let se=0;se<X;se++)p[G+se]=V[se]}else p.push(V)}}class x{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function _(p){return/^[\s\xa0]*$/.test(p)}function b(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function S(p){return S[" "](p),p}S[" "]=function(){};var k=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function R(p,T,A){for(const V in p)T.call(A,p[V],V,p)}function C(p,T){for(const A in p)T.call(void 0,p[A],A,p)}function E(p){const T={};for(const A in p)T[A]=p[A];return T}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(p,T){let A,V;for(let G=1;G<arguments.length;G++){V=arguments[G];for(A in V)p[A]=V[A];for(let X=0;X<I.length;X++)A=I[X],Object.prototype.hasOwnProperty.call(V,A)&&(p[A]=V[A])}}function D(p){var T=1;p=p.split(":");const A=[];for(;0<T&&p.length;)A.push(p.shift()),T--;return p.length&&A.push(p.join(":")),A}function j(p){a.setTimeout(()=>{throw p},0)}function N(){var p=$;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class L{constructor(){this.h=this.g=null}add(T,A){const V=B.get();V.set(T,A),this.h?this.h.next=V:this.g=V,this.h=V}}var B=new x(()=>new O,p=>p.reset());class O{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let M,U=!1,$=new L,F=()=>{const p=a.Promise.resolve(void 0);M=()=>{p.then(z)}};var z=()=>{for(var p;p=N();){try{p.h.call(p.g)}catch(A){j(A)}var T=B;T.j(p),100>T.h&&(T.h++,p.next=T.g,T.g=p)}U=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};a.addEventListener("test",A,T),a.removeEventListener("test",A,T)}catch{}return p}();function K(p,T){if(W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,V=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget){if(k){e:{try{S(T.nodeName);var G=!0;break e}catch{}G=!1}G||(T=null)}}else A=="mouseover"?T=p.fromElement:A=="mouseout"&&(T=p.toElement);this.relatedTarget=T,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ne[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&K.aa.h.call(this)}}v(K,W);var ne={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),he=0;function ae(p,T,A,V,G){this.listener=p,this.proxy=null,this.src=T,this.type=A,this.capture=!!V,this.ha=G,this.key=++he,this.da=this.fa=!1}function le(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ue(p){this.src=p,this.g={},this.h=0}ue.prototype.add=function(p,T,A,V,G){var X=p.toString();p=this.g[X],p||(p=this.g[X]=[],this.h++);var se=Pe(p,T,V,G);return-1<se?(T=p[se],A||(T.fa=!1)):(T=new ae(T,this.src,X,!!V,G),T.fa=A,p.push(T)),T};function ve(p,T){var A=T.type;if(A in p.g){var V=p.g[A],G=Array.prototype.indexOf.call(V,T,void 0),X;(X=0<=G)&&Array.prototype.splice.call(V,G,1),X&&(le(T),p.g[A].length==0&&(delete p.g[A],p.h--))}}function Pe(p,T,A,V){for(var G=0;G<p.length;++G){var X=p[G];if(!X.da&&X.listener==T&&X.capture==!!A&&X.ha==V)return G}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),Se={};function Ke(p,T,A,V,G){if(V&&V.once)return Ge(p,T,A,V,G);if(Array.isArray(T)){for(var X=0;X<T.length;X++)Ke(p,T[X],A,V,G);return null}return A=wr(A),p&&p[ee]?p.K(T,A,c(V)?!!V.capture:!!V,G):Ae(p,T,A,!1,V,G)}function Ae(p,T,A,V,G,X){if(!T)throw Error("Invalid event type");var se=c(G)?!!G.capture:!!G,tt=Ye(p);if(tt||(p[$e]=tt=new ue(p)),A=tt.add(T,A,V,se,X),A.proxy)return A;if(V=Be(),A.proxy=V,V.src=p,V.listener=A,p.addEventListener)Y||(G=se),G===void 0&&(G=!1),p.addEventListener(T.toString(),V,G);else if(p.attachEvent)p.attachEvent(gn(T.toString()),V);else if(p.addListener&&p.removeListener)p.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Be(){function p(A){return T.call(p.src,p.listener,A)}const T=Ct;return p}function Ge(p,T,A,V,G){if(Array.isArray(T)){for(var X=0;X<T.length;X++)Ge(p,T[X],A,V,G);return null}return A=wr(A),p&&p[ee]?p.L(T,A,c(V)?!!V.capture:!!V,G):Ae(p,T,A,!0,V,G)}function $t(p,T,A,V,G){if(Array.isArray(T))for(var X=0;X<T.length;X++)$t(p,T[X],A,V,G);else V=c(V)?!!V.capture:!!V,A=wr(A),p&&p[ee]?(p=p.i,T=String(T).toString(),T in p.g&&(X=p.g[T],A=Pe(X,A,V,G),-1<A&&(le(X[A]),Array.prototype.splice.call(X,A,1),X.length==0&&(delete p.g[T],p.h--)))):p&&(p=Ye(p))&&(T=p.g[T.toString()],p=-1,T&&(p=Pe(T,A,V,G)),(A=-1<p?T[p]:null)&&Qe(A))}function Qe(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[ee])ve(T.i,p);else{var A=p.type,V=p.proxy;T.removeEventListener?T.removeEventListener(A,V,p.capture):T.detachEvent?T.detachEvent(gn(A),V):T.addListener&&T.removeListener&&T.removeListener(V),(A=Ye(T))?(ve(A,p),A.h==0&&(A.src=null,T[$e]=null)):le(p)}}}function gn(p){return p in Se?Se[p]:Se[p]="on"+p}function Ct(p,T){if(p.da)p=!0;else{T=new K(T,this);var A=p.listener,V=p.ha||p.src;p.fa&&Qe(p),p=A.call(V,T)}return p}function Ye(p){return p=p[$e],p instanceof ue?p:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function wr(p){return typeof p=="function"?p:(p[on]||(p[on]=function(T){return p.handleEvent(T)}),p[on])}function Dt(){q.call(this),this.i=new ue(this),this.M=this,this.F=null}v(Dt,q),Dt.prototype[ee]=!0,Dt.prototype.removeEventListener=function(p,T,A,V){$t(this,p,T,A,V)};function We(p,T){var A,V=p.F;if(V)for(A=[];V;V=V.F)A.push(V);if(p=p.M,V=T.type||T,typeof T=="string")T=new W(T,p);else if(T instanceof W)T.target=T.target||p;else{var G=T;T=new W(V,p),P(T,G)}if(G=!0,A)for(var X=A.length-1;0<=X;X--){var se=T.g=A[X];G=_r(se,V,!0,T)&&G}if(se=T.g=p,G=_r(se,V,!0,T)&&G,G=_r(se,V,!1,T)&&G,A)for(X=0;X<A.length;X++)se=T.g=A[X],G=_r(se,V,!1,T)&&G}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var p=this.i,T;for(T in p.g){for(var A=p.g[T],V=0;V<A.length;V++)le(A[V]);delete p.g[T],p.h--}}this.F=null},Dt.prototype.K=function(p,T,A,V){return this.i.add(String(p),T,!1,A,V)},Dt.prototype.L=function(p,T,A,V){return this.i.add(String(p),T,!0,A,V)};function _r(p,T,A,V){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();for(var G=!0,X=0;X<T.length;++X){var se=T[X];if(se&&!se.da&&se.capture==A){var tt=se.listener,an=se.ha||se.src;se.fa&&ve(p.i,se),G=tt.call(an,V)!==!1&&G}}return G&&!V.defaultPrevented}function Kt(p,T,A){if(typeof p=="function")A&&(p=f(p,A));else if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:a.setTimeout(p,T||0)}function Ln(p){p.g=Kt(()=>{p.g=null,p.i&&(p.i=!1,Ln(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class $n extends q{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ln(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function An(p){q.call(this),this.h=p,this.g={}}v(An,q);var nr=[];function is(p){R(p.g,function(T,A){this.g.hasOwnProperty(A)&&Qe(T)},p),p.g={}}An.prototype.N=function(){An.aa.N.call(this),is(this)},An.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fo=a.JSON.stringify,bv=a.JSON.parse,xu=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function fl(){}fl.prototype.h=null;function Ti(p){return p.h||(p.h=p.i())}function yf(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){W.call(this,"d")}v(br,W);function os(){W.call(this,"c")}v(os,W);var rr={},wu=null;function Er(){return wu=wu||new Dt}rr.La="serverreachability";function as(p){W.call(this,rr.La,p)}v(as,W);function _u(p){const T=Er();We(T,new as(T))}rr.STAT_EVENT="statevent";function HT(p,T){W.call(this,rr.STAT_EVENT,p),this.stat=T}v(HT,W);function Rn(p){const T=Er();We(T,new HT(T,p))}rr.Ma="timingevent";function KT(p,T){W.call(this,rr.Ma,p),this.size=T}v(KT,W);function bu(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},T)}function Eu(){this.g=!0}Eu.prototype.xa=function(){this.g=!1};function E6(p,T,A,V,G,X){p.info(function(){if(p.g)if(X)for(var se="",tt=X.split("&"),an=0;an<tt.length;an++){var He=tt[an].split("=");if(1<He.length){var yn=He[0];He=He[1];var vn=yn.split("_");se=2<=vn.length&&vn[1]=="type"?se+(yn+"="+He+"&"):se+(yn+"=redacted&")}}else se=null;else se=X;return"XMLHTTP REQ ("+V+") [attempt "+G+"]: "+T+`
`+A+`
`+se})}function T6(p,T,A,V,G,X,se){p.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+G+"]: "+T+`
`+A+`
`+X+" "+se})}function pl(p,T,A,V){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+S6(p,A)+(V?" "+V:"")})}function I6(p,T){p.info(function(){return"TIMEOUT: "+T})}Eu.prototype.info=function(){};function S6(p,T){if(!p.g)return T;if(!T)return null;try{var A=JSON.parse(T);if(A){for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var V=A[p];if(!(2>V.length)){var G=V[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var se=1;se<G.length;se++)G[se]=""}}}}return Fo(A)}catch{return T}}var vf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},QT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ev;function xf(){}v(xf,fl),xf.prototype.g=function(){return new XMLHttpRequest},xf.prototype.i=function(){return{}},Ev=new xf;function Ii(p,T,A,V){this.j=p,this.i=T,this.l=A,this.R=V||1,this.U=new An(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new YT}function YT(){this.i=null,this.g="",this.h=!1}var XT={},Tv={};function Iv(p,T,A){p.L=1,p.v=Ef(As(T)),p.m=A,p.P=!0,JT(p,null)}function JT(p,T){p.F=Date.now(),wf(p),p.A=As(p.v);var A=p.A,V=p.R;Array.isArray(V)||(V=[String(V)]),hI(A.i,"t",V),p.C=0,A=p.j.J,p.h=new YT,p.g=RI(p.j,A?T:null,!p.m),0<p.O&&(p.M=new $n(f(p.Y,p,p.g),p.O)),T=p.U,A=p.g,V=p.ca;var G="readystatechange";Array.isArray(G)||(G&&(nr[0]=G.toString()),G=nr);for(var X=0;X<G.length;X++){var se=Ke(A,G[X],V||T.handleEvent,!1,T.h||T);if(!se)break;T.g[se.key]=se}T=p.H?E(p.H):{},p.m?(p.u||(p.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,T)):(p.u="GET",p.g.ea(p.A,p.u,null,T)),_u(),E6(p.i,p.u,p.A,p.l,p.R,p.m)}Ii.prototype.ca=function(p){p=p.target;const T=this.M;T&&Rs(p)==3?T.j():this.Y(p)},Ii.prototype.Y=function(p){try{if(p==this.g)e:{const vn=Rs(this.g);var T=this.g.Ba();const yl=this.g.Z();if(!(3>vn)&&(vn!=3||this.g&&(this.h.h||this.g.oa()||xI(this.g)))){this.J||vn!=4||T==7||(T==8||0>=yl?_u(3):_u(2)),Sv(this);var A=this.g.Z();this.X=A;t:if(ZT(this)){var V=xI(this.g);p="";var G=V.length,X=Rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Uo(this),Tu(this);var se="";break t}this.h.i=new a.TextDecoder}for(T=0;T<G;T++)this.h.h=!0,p+=this.h.i.decode(V[T],{stream:!(X&&T==G-1)});V.length=0,this.h.g+=p,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=A==200,T6(this.i,this.u,this.A,this.l,this.R,vn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,an=this.g;if((tt=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(tt)){var He=tt;break t}}He=null}if(A=He)pl(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cv(this,A);else{this.o=!1,this.s=3,Rn(12),Uo(this),Tu(this);break e}}if(this.P){A=!0;let Br;for(;!this.J&&this.C<se.length;)if(Br=C6(this,se),Br==Tv){vn==4&&(this.s=4,Rn(14),A=!1),pl(this.i,this.l,null,"[Incomplete Response]");break}else if(Br==XT){this.s=4,Rn(15),pl(this.i,this.l,se,"[Invalid Chunk]"),A=!1;break}else pl(this.i,this.l,Br,null),Cv(this,Br);if(ZT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||se.length!=0||this.h.h||(this.s=1,Rn(16),A=!1),this.o=this.o&&A,!A)pl(this.i,this.l,se,"[Invalid Chunked Response]"),Uo(this),Tu(this);else if(0<se.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Dv(yn),yn.M=!0,Rn(11))}}else pl(this.i,this.l,se,null),Cv(this,se);vn==4&&Uo(this),this.o&&!this.J&&(vn==4?SI(this.j,this):(this.o=!1,wf(this)))}else q6(this.g),A==400&&0<se.indexOf("Unknown SID")?(this.s=3,Rn(12)):(this.s=0,Rn(13)),Uo(this),Tu(this)}}}catch{}finally{}};function ZT(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function C6(p,T){var A=p.C,V=T.indexOf(`
`,A);return V==-1?Tv:(A=Number(T.substring(A,V)),isNaN(A)?XT:(V+=1,V+A>T.length?Tv:(T=T.slice(V,V+A),p.C=V+A,T)))}Ii.prototype.cancel=function(){this.J=!0,Uo(this)};function wf(p){p.S=Date.now()+p.I,eI(p,p.I)}function eI(p,T){if(p.B!=null)throw Error("WatchDog timer not null");p.B=bu(f(p.ba,p),T)}function Sv(p){p.B&&(a.clearTimeout(p.B),p.B=null)}Ii.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(I6(this.i,this.A),this.L!=2&&(_u(),Rn(17)),Uo(this),this.s=2,Tu(this)):eI(this,this.S-p)};function Tu(p){p.j.G==0||p.J||SI(p.j,p)}function Uo(p){Sv(p);var T=p.M;T&&typeof T.ma=="function"&&T.ma(),p.M=null,is(p.U),p.g&&(T=p.g,p.g=null,T.abort(),T.ma())}function Cv(p,T){try{var A=p.j;if(A.G!=0&&(A.g==p||Pv(A.h,p))){if(!p.K&&Pv(A.h,p)&&A.G==3){try{var V=A.Da.g.parse(T)}catch{V=null}if(Array.isArray(V)&&V.length==3){var G=V;if(G[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<p.F)Af(A),Cf(A);else break e;kv(A),Rn(18)}}else A.za=G[1],0<A.za-A.T&&37500>G[2]&&A.F&&A.v==0&&!A.C&&(A.C=bu(f(A.Za,A),6e3));if(1>=rI(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else zo(A,11)}else if((p.K||A.g==p)&&Af(A),!_(T))for(G=A.Da.g.parse(T),T=0;T<G.length;T++){let He=G[T];if(A.T=He[0],He=He[1],A.G==2)if(He[0]=="c"){A.K=He[1],A.ia=He[2];const yn=He[3];yn!=null&&(A.la=yn,A.j.info("VER="+A.la));const vn=He[4];vn!=null&&(A.Aa=vn,A.j.info("SVER="+A.Aa));const yl=He[5];yl!=null&&typeof yl=="number"&&0<yl&&(V=1.5*yl,A.L=V,A.j.info("backChannelRequestTimeoutMs_="+V)),V=A;const Br=p.g;if(Br){const Nf=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nf){var X=V.h;X.g||Nf.indexOf("spdy")==-1&&Nf.indexOf("quic")==-1&&Nf.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Av(X,X.h),X.h=null))}if(V.D){const jv=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;jv&&(V.ya=jv,at(V.I,V.D,jv))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms")),V=A;var se=p;if(V.qa=AI(V,V.J?V.ia:null,V.W),se.K){sI(V.h,se);var tt=se,an=V.L;an&&(tt.I=an),tt.B&&(Sv(tt),wf(tt)),V.g=se}else TI(V);0<A.i.length&&Pf(A)}else He[0]!="stop"&&He[0]!="close"||zo(A,7);else A.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?zo(A,7):Nv(A):He[0]!="noop"&&A.l&&A.l.ta(He),A.v=0)}}_u(4)}catch{}}var P6=class{constructor(p,T){this.g=p,this.map=T}};function tI(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nI(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function rI(p){return p.h?1:p.g?p.g.size:0}function Pv(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function Av(p,T){p.g?p.g.add(T):p.h=T}function sI(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}tI.prototype.cancel=function(){if(this.i=iI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function iI(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const A of p.g.values())T=T.concat(A.D);return T}return y(p.i)}function A6(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var T=[],A=p.length,V=0;V<A;V++)T.push(p[V]);return T}T=[],A=0;for(V in p)T[A++]=p[V];return T}function R6(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var T=[];p=p.length;for(var A=0;A<p;A++)T.push(A);return T}T=[],A=0;for(const V in p)T[A++]=V;return T}}}function oI(p,T){if(p.forEach&&typeof p.forEach=="function")p.forEach(T,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,T,void 0);else for(var A=R6(p),V=A6(p),G=V.length,X=0;X<G;X++)T.call(void 0,V[X],A&&A[X],p)}var aI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function N6(p,T){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var V=p[A].indexOf("="),G=null;if(0<=V){var X=p[A].substring(0,V);G=p[A].substring(V+1)}else X=p[A];T(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Bo(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Bo){this.h=p.h,_f(this,p.j),this.o=p.o,this.g=p.g,bf(this,p.s),this.l=p.l;var T=p.i,A=new Cu;A.i=T.i,T.g&&(A.g=new Map(T.g),A.h=T.h),lI(this,A),this.m=p.m}else p&&(T=String(p).match(aI))?(this.h=!1,_f(this,T[1]||"",!0),this.o=Iu(T[2]||""),this.g=Iu(T[3]||"",!0),bf(this,T[4]),this.l=Iu(T[5]||"",!0),lI(this,T[6]||"",!0),this.m=Iu(T[7]||"")):(this.h=!1,this.i=new Cu(null,this.h))}Bo.prototype.toString=function(){var p=[],T=this.j;T&&p.push(Su(T,cI,!0),":");var A=this.g;return(A||T=="file")&&(p.push("//"),(T=this.o)&&p.push(Su(T,cI,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&p.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(Su(A,A.charAt(0)=="/"?j6:D6,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",Su(A,M6)),p.join("")};function As(p){return new Bo(p)}function _f(p,T,A){p.j=A?Iu(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function bf(p,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);p.s=T}else p.s=null}function lI(p,T,A){T instanceof Cu?(p.i=T,V6(p.i,p.h)):(A||(T=Su(T,O6)),p.i=new Cu(T,p.h))}function at(p,T,A){p.i.set(T,A)}function Ef(p){return at(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Iu(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Su(p,T,A){return typeof p=="string"?(p=encodeURI(p).replace(T,k6),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function k6(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var cI=/[#\/\?@]/g,D6=/[#\?:]/g,j6=/[#\?]/g,O6=/[#\?@]/g,M6=/#/g;function Cu(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function Si(p){p.g||(p.g=new Map,p.h=0,p.i&&N6(p.i,function(T,A){p.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}t=Cu.prototype,t.add=function(p,T){Si(this),this.i=null,p=ml(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(T),this.h+=1,this};function uI(p,T){Si(p),T=ml(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function dI(p,T){return Si(p),T=ml(p,T),p.g.has(T)}t.forEach=function(p,T){Si(this),this.g.forEach(function(A,V){A.forEach(function(G){p.call(T,G,V,this)},this)},this)},t.na=function(){Si(this);const p=Array.from(this.g.values()),T=Array.from(this.g.keys()),A=[];for(let V=0;V<T.length;V++){const G=p[V];for(let X=0;X<G.length;X++)A.push(T[V])}return A},t.V=function(p){Si(this);let T=[];if(typeof p=="string")dI(this,p)&&(T=T.concat(this.g.get(ml(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)T=T.concat(p[A])}return T},t.set=function(p,T){return Si(this),this.i=null,p=ml(this,p),dI(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},t.get=function(p,T){return p?(p=this.V(p),0<p.length?String(p[0]):T):T};function hI(p,T,A){uI(p,T),0<A.length&&(p.i=null,p.g.set(ml(p,T),y(A)),p.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(var A=0;A<T.length;A++){var V=T[A];const X=encodeURIComponent(String(V)),se=this.V(V);for(V=0;V<se.length;V++){var G=X;se[V]!==""&&(G+="="+encodeURIComponent(String(se[V]))),p.push(G)}}return this.i=p.join("&")};function ml(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function V6(p,T){T&&!p.j&&(Si(p),p.i=null,p.g.forEach(function(A,V){var G=V.toLowerCase();V!=G&&(uI(this,V),hI(this,G,A))},p)),p.j=T}function L6(p,T){const A=new Eu;if(a.Image){const V=new Image;V.onload=g(Ci,A,"TestLoadImage: loaded",!0,T,V),V.onerror=g(Ci,A,"TestLoadImage: error",!1,T,V),V.onabort=g(Ci,A,"TestLoadImage: abort",!1,T,V),V.ontimeout=g(Ci,A,"TestLoadImage: timeout",!1,T,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=p}else T(!1)}function $6(p,T){const A=new Eu,V=new AbortController,G=setTimeout(()=>{V.abort(),Ci(A,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:V.signal}).then(X=>{clearTimeout(G),X.ok?Ci(A,"TestPingServer: ok",!0,T):Ci(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(G),Ci(A,"TestPingServer: error",!1,T)})}function Ci(p,T,A,V,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),V(A)}catch{}}function F6(){this.g=new xu}function U6(p,T,A){const V=A||"";try{oI(p,function(G,X){let se=G;c(G)&&(se=Fo(G)),T.push(V+X+"="+encodeURIComponent(se))})}catch(G){throw T.push(V+"type="+encodeURIComponent("_badmap")),G}}function Tf(p){this.l=p.Ub||null,this.j=p.eb||!1}v(Tf,fl),Tf.prototype.g=function(){return new If(this.l,this.j)},Tf.prototype.i=function(p){return function(){return p}}({});function If(p,T){Dt.call(this),this.D=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(If,Dt),t=If.prototype,t.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=T,this.readyState=1,Au(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(T.body=p),(this.D||a).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pu(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Au(this)),this.g&&(this.readyState=3,Au(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fI(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function fI(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?Pu(this):Au(this),this.readyState==3&&fI(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Pu(this))},t.Qa=function(p){this.g&&(this.response=p,Pu(this))},t.ga=function(){this.g&&Pu(this)};function Pu(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Au(p)}t.setRequestHeader=function(p,T){this.u.append(p,T)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=T.next();return p.join(`\r
`)};function Au(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(If.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function pI(p){let T="";return R(p,function(A,V){T+=V,T+=":",T+=A,T+=`\r
`}),T}function Rv(p,T,A){e:{for(V in A){var V=!1;break e}V=!0}V||(A=pI(A),typeof p=="string"?A!=null&&encodeURIComponent(String(A)):at(p,T,A))}function Pt(p){Dt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Pt,Dt);var B6=/^https?$/i,z6=["POST","PUT"];t=Pt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,T,A,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ev.g(),this.v=this.o?Ti(this.o):Ti(Ev),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(X){mI(this,X);return}if(p=A||"",A=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var G in V)A.set(G,V[G]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const X of V.keys())A.set(X,V.get(X));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(A.keys()).find(X=>X.toLowerCase()=="content-type"),G=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(z6,T,void 0))||V||G||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,se]of A)this.g.setRequestHeader(X,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vI(this),this.u=!0,this.g.send(p),this.u=!1}catch(X){mI(this,X)}};function mI(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.m=5,gI(p),Sf(p)}function gI(p){p.A||(p.A=!0,We(p,"complete"),We(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,We(this,"complete"),We(this,"abort"),Sf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sf(this,!0)),Pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yI(this):this.bb())},t.bb=function(){yI(this)};function yI(p){if(p.h&&typeof o<"u"&&(!p.v[1]||Rs(p)!=4||p.Z()!=2)){if(p.u&&Rs(p)==4)Kt(p.Ea,0,p);else if(We(p,"readystatechange"),Rs(p)==4){p.h=!1;try{const se=p.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var V;if(V=se===0){var G=String(p.D).match(aI)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),V=!B6.test(G?G.toLowerCase():"")}A=V}if(A)We(p,"complete"),We(p,"success");else{p.m=6;try{var X=2<Rs(p)?p.g.statusText:""}catch{X=""}p.l=X+" ["+p.Z()+"]",gI(p)}}finally{Sf(p)}}}}function Sf(p,T){if(p.g){vI(p);const A=p.g,V=p.v[0]?()=>{}:null;p.g=null,p.v=null,T||We(p,"ready");try{A.onreadystatechange=V}catch{}}}function vI(p){p.I&&(a.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Rs(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Rs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),bv(T)}};function xI(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function q6(p){const T={};p=(p.g&&2<=Rs(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<p.length;V++){if(_(p[V]))continue;var A=D(p[V]);const G=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const X=T[G]||[];T[G]=X,X.push(A)}C(T,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ru(p,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||T}function wI(p){this.Aa=0,this.i=[],this.j=new Eu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ru("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ru("baseRetryDelayMs",5e3,p),this.cb=Ru("retryDelaySeedMs",1e4,p),this.Wa=Ru("forwardChannelMaxRetries",2,p),this.wa=Ru("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new tI(p&&p.concurrentRequestLimit),this.Da=new F6,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wI.prototype,t.la=8,t.G=1,t.connect=function(p,T,A,V){Rn(0),this.W=p,this.H=T||{},A&&V!==void 0&&(this.H.OSID=A,this.H.OAID=V),this.F=this.X,this.I=AI(this,null,this.W),Pf(this)};function Nv(p){if(_I(p),p.G==3){var T=p.U++,A=As(p.I);if(at(A,"SID",p.K),at(A,"RID",T),at(A,"TYPE","terminate"),Nu(p,A),T=new Ii(p,p.j,T),T.L=2,T.v=Ef(As(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(T.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=T.v,A=!0),A||(T.g=RI(T.j,null),T.g.ea(T.v)),T.F=Date.now(),wf(T)}PI(p)}function Cf(p){p.g&&(Dv(p),p.g.cancel(),p.g=null)}function _I(p){Cf(p),p.u&&(a.clearTimeout(p.u),p.u=null),Af(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function Pf(p){if(!nI(p.h)&&!p.s){p.s=!0;var T=p.Ga;M||F(),U||(M(),U=!0),$.add(T,p),p.B=0}}function G6(p,T){return rI(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=T.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=bu(f(p.Ga,p,T),CI(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const G=new Ii(this,this.j,p);let X=this.o;if(this.S&&(X?(X=E(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var V=this.i[A];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(T+=V,4096<T){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=EI(this,G,T),A=As(this.I),at(A,"RID",p),at(A,"CVER",22),this.D&&at(A,"X-HTTP-Session-Id",this.D),Nu(this,A),X&&(this.O?T="headers="+encodeURIComponent(String(pI(X)))+"&"+T:this.m&&Rv(A,this.m,X)),Av(this.h,G),this.Ua&&at(A,"TYPE","init"),this.P?(at(A,"$req",T),at(A,"SID","null"),G.T=!0,Iv(G,A,null)):Iv(G,A,T),this.G=2}}else this.G==3&&(p?bI(this,p):this.i.length==0||nI(this.h)||bI(this))};function bI(p,T){var A;T?A=T.l:A=p.U++;const V=As(p.I);at(V,"SID",p.K),at(V,"RID",A),at(V,"AID",p.T),Nu(p,V),p.m&&p.o&&Rv(V,p.m,p.o),A=new Ii(p,p.j,A,p.B+1),p.m===null&&(A.H=p.o),T&&(p.i=T.D.concat(p.i)),T=EI(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Av(p.h,A),Iv(A,V,T)}function Nu(p,T){p.H&&R(p.H,function(A,V){at(T,V,A)}),p.l&&oI({},function(A,V){at(T,V,A)})}function EI(p,T,A){A=Math.min(p.i.length,A);var V=p.l?f(p.l.Na,p.l,p):null;e:{var G=p.i;let X=-1;for(;;){const se=["count="+A];X==-1?0<A?(X=G[0].g,se.push("ofs="+X)):X=0:se.push("ofs="+X);let tt=!0;for(let an=0;an<A;an++){let He=G[an].g;const yn=G[an].map;if(He-=X,0>He)X=Math.max(0,G[an].g-100),tt=!1;else try{U6(yn,se,"req"+He+"_")}catch{V&&V(yn)}}if(tt){V=se.join("&");break e}}}return p=p.i.splice(0,A),T.D=p,V}function TI(p){if(!p.g&&!p.u){p.Y=1;var T=p.Fa;M||F(),U||(M(),U=!0),$.add(T,p),p.v=0}}function kv(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=bu(f(p.Fa,p),CI(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,II(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=bu(f(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rn(10),Cf(this),II(this))};function Dv(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function II(p){p.g=new Ii(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var T=As(p.qa);at(T,"RID","rpc"),at(T,"SID",p.K),at(T,"AID",p.T),at(T,"CI",p.F?"0":"1"),!p.F&&p.ja&&at(T,"TO",p.ja),at(T,"TYPE","xmlhttp"),Nu(p,T),p.m&&p.o&&Rv(T,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=Ef(As(T)),A.m=null,A.P=!0,JT(A,p)}t.Za=function(){this.C!=null&&(this.C=null,Cf(this),kv(this),Rn(19))};function Af(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function SI(p,T){var A=null;if(p.g==T){Af(p),Dv(p),p.g=null;var V=2}else if(Pv(p.h,T))A=T.D,sI(p.h,T),V=1;else return;if(p.G!=0){if(T.o)if(V==1){A=T.m?T.m.length:0,T=Date.now()-T.F;var G=p.B;V=Er(),We(V,new KT(V,A)),Pf(p)}else TI(p);else if(G=T.s,G==3||G==0&&0<T.X||!(V==1&&G6(p,T)||V==2&&kv(p)))switch(A&&0<A.length&&(T=p.h,T.i=T.i.concat(A)),G){case 1:zo(p,5);break;case 4:zo(p,10);break;case 3:zo(p,6);break;default:zo(p,2)}}}function CI(p,T){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*T}function zo(p,T){if(p.j.info("Error code "+T),T==2){var A=f(p.fb,p),V=p.Xa;const G=!V;V=new Bo(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_f(V,"https"),Ef(V),G?L6(V.toString(),A):$6(V.toString(),A)}else Rn(2);p.G=0,p.l&&p.l.sa(T),PI(p),_I(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Rn(2)):(this.j.info("Failed to ping google.com"),Rn(1))};function PI(p){if(p.G=0,p.ka=[],p.l){const T=iI(p.h);(T.length!=0||p.i.length!=0)&&(w(p.ka,T),w(p.ka,p.i),p.h.i.length=0,y(p.i),p.i.length=0),p.l.ra()}}function AI(p,T,A){var V=A instanceof Bo?As(A):new Bo(A);if(V.g!="")T&&(V.g=T+"."+V.g),bf(V,V.s);else{var G=a.location;V=G.protocol,T=T?T+"."+G.hostname:G.hostname,G=+G.port;var X=new Bo(null);V&&_f(X,V),T&&(X.g=T),G&&bf(X,G),A&&(X.l=A),V=X}return A=p.D,T=p.ya,A&&T&&at(V,A,T),at(V,"VER",p.la),Nu(p,V),V}function RI(p,T,A){if(T&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Ca&&!p.pa?new Pt(new Tf({eb:A})):new Pt(p.pa),T.Ha(p.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function NI(){}t=NI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Rf(){}Rf.prototype.g=function(p,T){return new sr(p,T)};function sr(p,T){Dt.call(this),this.g=new wI(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(p?p["X-WebChannel-Client-Profile"]=T.va:p={"X-WebChannel-Client-Profile":T.va}),this.g.S=p,(p=T&&T.Sb)&&!_(p)&&(this.g.m=p),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!_(T)&&(this.g.D=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new gl(this)}v(sr,Dt),sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sr.prototype.close=function(){Nv(this.g)},sr.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.u&&(A={},A.__data__=Fo(p),p=A);T.i.push(new P6(T.Ya++,p)),T.G==3&&Pf(T)},sr.prototype.N=function(){this.g.l=null,delete this.j,Nv(this.g),delete this.g,sr.aa.N.call(this)};function kI(p){br.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const A in T){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}v(kI,br);function DI(){os.call(this),this.status=1}v(DI,os);function gl(p){this.g=p}v(gl,NI),gl.prototype.ua=function(){We(this.g,"a")},gl.prototype.ta=function(p){We(this.g,new kI(p))},gl.prototype.sa=function(p){We(this.g,new DI)},gl.prototype.ra=function(){We(this.g,"b")},Rf.prototype.createWebChannel=Rf.prototype.g,sr.prototype.send=sr.prototype.o,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,PO=function(){return new Rf},CO=function(){return Er()},SO=rr,kw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vf.NO_ERROR=0,vf.TIMEOUT=8,vf.HTTP_ERROR=6,qp=vf,QT.COMPLETE="complete",IO=QT,yf.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,sd=yf,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,TO=Pt}).apply(typeof ep<"u"?ep:typeof self<"u"?self:typeof window<"u"?window:{});const NP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new ay("@firebase/firestore");function Nl(){return vo.logLevel}function Lpe(t){vo.setLogLevel(t)}function J(t,...e){if(vo.logLevel<=je.DEBUG){const n=e.map(yb);vo.debug(`Firestore (${tu}): ${t}`,...n)}}function Ot(t,...e){if(vo.logLevel<=je.ERROR){const n=e.map(yb);vo.error(`Firestore (${tu}): ${t}`,...n)}}function Vr(t,...e){if(vo.logLevel<=je.WARN){const n=e.map(yb);vo.warn(`Firestore (${tu}): ${t}`,...n)}}function yb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: `+t;throw Ot(e),new Error(e)}function ye(t,e){t||de()}function $pe(t,e){t||de()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class RQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NQ{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new AO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Xt(e)}}class kQ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DQ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kQ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new RO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class Fpe{getToken(){return Promise.resolve(new RO(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=OQ(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Cc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function kO(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new it(0,0))}static max(){return new xe(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(),r===void 0?r=e.length-n:r>e.length-n&&de(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends sh{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const MQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends sh{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return MQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Z(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Z(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Oe.fromString(e))}static fromName(e){return new ie(Oe.fromString(e).popFirst(5))}static empty(){return new ie(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Dw(t){return t.fields.find(e=>e.kind===2)}function Jo(t){return t.fields.filter(e=>e.kind!==2)}function VQ(t,e){let n=Ee(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=LQ(t.fields[r],e.fields[r]),n!==0)return n;return Ee(t.fields.length,e.fields.length)}Pc.UNKNOWN_ID=-1;class ga{constructor(e,n){this.fieldPath=e,this.kind=n}}function LQ(t,e){const n=yt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Ee(t.kind,e.kind)}class Ac{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ac(0,gr.min())}}function DO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new gr(s,ie.empty(),e)}function jO(t){return new gr(t.readTime,t.key,-1)}class gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gr(xe.min(),ie.empty(),-1)}static max(){return new gr(xe.max(),ie.empty(),-1)}}function vb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==OO)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new H((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new rn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ed(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=xb(r.target.error);this.V.reject(new Ed(e,s))}}static open(e,n,r,s){try{return new hy(n,e.transaction(s,r))}catch(i){throw new Ed(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(J("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new FQ(n)}}class ws{constructor(e,n,r){this.name=e,this.version=n,this.p=r,ws.S(Wt())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return J("SimpleDb","Removing database:",e),ea(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!tb())return!1;if(ws.v())return!0;const e=Wt(),n=ws.S(e),r=0<n&&n<10,s=VO(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(J("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ed(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Z(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Z(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ed(e,o))},s.onupgradeneeded=i=>{J("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{J("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=hy.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),H.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(J("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function VO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class $Q{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ea(this.B.delete())}}class Ed extends Z{constructor(e,n){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function jo(t){return t.name==="IndexedDbTransactionError"}class FQ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(J("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ea(r)}add(e){return J("SimpleDb","ADD",this.store.name,e,e),ea(this.store.add(e))}get(e){return ea(this.store.get(e)).next(n=>(n===void 0&&(n=null),J("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return J("SimpleDb","DELETE",this.store.name,e),ea(this.store.delete(e))}count(){return J("SimpleDb","COUNT",this.store.name),ea(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new H((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new H((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){J("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new H((r,s)=>{n.onerror=i=>{const o=xb(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new H((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new $Q(a),c=n(a.primaryKey,a.value,l);if(c instanceof H){const u=c.catch(d=>(l.done(),H.reject(d)));r.push(u)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>H.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ea(t){return new H((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=xb(r.target.error);n(s)}})}let kP=!1;function xb(t){const e=ws.S(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kP||(kP=!0,setTimeout(()=>{throw r},0)),r}}return t}class UQ{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){J("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{J("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){jo(n)?J("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Do(n)}await this.X(6e4)})}}class BQ{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return H.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return J("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(J("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=jO(i);vb(o,r)>0&&(r=o)}),new gr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gn.oe=-1;function $h(t){return t==null}function ih(t){return t===0&&1/t==-1/0}function LO(t){return typeof t=="number"&&Number.isInteger(t)&&!ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=DP(e)),e=zQ(t.get(n),e);return DP(e)}function zQ(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function DP(t){return t+""}function fs(t){const e=t.length;if(ye(e>=2),e===2)return ye(t.charAt(0)===""&&t.charAt(1)===""),Oe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&de(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:de()}i=o+2}return new Oe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){return[t,In(e)]}function $O(t,e,n){return[t,In(e),n]}const qQ={},GQ=["prefixPath","collectionGroup","readTime","documentId"],WQ=["prefixPath","collectionGroup","documentId"],HQ=["collectionGroup","readTime","prefixPath","documentId"],KQ=["canonicalId","targetId"],QQ=["targetId","path"],YQ=["path","targetId"],XQ=["collectionId","parent"],JQ=["indexId","uid"],ZQ=["uid","sequenceNumber"],eY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tY=["indexId","uid","orderedDocumentKey"],nY=["userId","collectionPath","documentId"],rY=["userId","collectionPath","largestBatchId"],sY=["userId","collectionGroup","largestBatchId"],FO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iY=[...FO,"documentOverlays"],UO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BO=UO,wb=[...BO,"indexConfiguration","indexState","indexEntries"],oY=wb,aY=[...wb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw extends MO{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Ht(t,e){const n=re(t);return ws.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zO(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function qO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tp(this.root,e,this.comparator,!1)}getReverseIterator(){return new tp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tp(this.root,e,this.comparator,!0)}}class tp{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??cn.RED,this.left=s??cn.EMPTY,this.right=i??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new cn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return cn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,r,s,i){return this}insert(e,n,r){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MP(this.data.getIterator())}getIteratorFrom(e){return new MP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class MP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new et(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bpe(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new GO("Invalid base64 string: "+i):i}}(e);return new kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const lY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(t){if(ye(!!t),typeof t=="string"){let e=0;const n=lY.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function py(t){const e=t.mapValue.fields.__previous_value__;return fy(e)?py(e):e}function oh(t){const e=ai(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ca{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wp={nullValue:"NULL_VALUE"};function xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fy(t)?4:WO(t)?9007199254740991:my(t)?10:11:de()}function Ts(t,e){if(t===e)return!0;const n=xo(t);if(n!==xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oh(t).isEqual(oh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ai(s.timestampValue),a=ai(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return li(s.bytesValue).isEqual(li(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return mt(s.geoPointValue.latitude)===mt(i.geoPointValue.latitude)&&mt(s.geoPointValue.longitude)===mt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return mt(s.integerValue)===mt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=mt(s.doubleValue),a=mt(i.doubleValue);return o===a?ih(o)===ih(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Cc(t.arrayValue.values||[],e.arrayValue.values||[],Ts);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(OP(o)!==OP(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ts(o[l],a[l])))return!1;return!0}(t,e);default:return de()}}function ah(t,e){return(t.values||[]).find(n=>Ts(n,e))!==void 0}function wo(t,e){if(t===e)return 0;const n=xo(t),r=xo(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=mt(i.integerValue||i.doubleValue),l=mt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return VP(t.timestampValue,e.timestampValue);case 4:return VP(oh(t),oh(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=li(i),l=li(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ee(a[c],l[c]);if(u!==0)return u}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(mt(i.latitude),mt(o.latitude));return a!==0?a:Ee(mt(i.longitude),mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return LP(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const d=i.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,y=Ee(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:LP(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ji.mapValue&&o===Ji.mapValue)return 0;if(i===Ji.mapValue)return 1;if(o===Ji.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Ee(l[d],u[d]);if(f!==0)return f;const g=wo(a[l[d]],c[u[d]]);if(g!==0)return g}return Ee(l.length,u.length)}(t.mapValue,e.mapValue);default:throw de()}}function VP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=ai(t),r=ai(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function LP(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=wo(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function Rc(t){return Ow(t)}function Ow(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ow(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ow(n.fields[o])}`;return s+"}"}(t.mapValue):de()}function Hp(t){switch(xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=py(t);return e?16+Hp(e):16;case 5:return 2*t.stringValue.length;case 6:return li(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Hp(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Oo(r.fields,(i,o)=>{s+=i.length+Hp(o)}),s}(t.mapValue);default:throw de()}}function Pa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mw(t){return!!t&&"integerValue"in t}function lh(t){return!!t&&"arrayValue"in t}function $P(t){return!!t&&"nullValue"in t}function FP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kp(t){return!!t&&"mapValue"in t}function my(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Td(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Oo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Td(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Td(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const HO={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function uY(t){return"nullValue"in t?Wp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Pa(Ca.empty(),ie.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?my(t)?HO:{mapValue:{}}:de()}function dY(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Pa(Ca.empty(),ie.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?HO:"mapValue"in t?my(t)?{mapValue:{}}:Ji:de()}function UP(t,e){const n=wo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function BP(t,e){const n=wo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Td(n)}setAll(e){let n=yt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Td(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Kp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Kp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Oo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(Td(this.value))}}function KO(t){const e=[];return Oo(t.fields,(n,r)=>{const s=new yt([n]);if(Kp(r)){const i=KO(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ut(e,0,xe.min(),xe.min(),xe.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,xe.min(),xe.min(),un.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,xe.min(),xe.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.position=e,this.inclusive=n}}function zP(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=wo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n="asc"){this.field=e,this.dir=n}}function hY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QO=class{};class Me extends QO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fY(e,n,r):n==="array-contains"?new gY(e,r):n==="in"?new tM(e,r):n==="not-in"?new yY(e,r):n==="array-contains-any"?new vY(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pY(e,r):new mY(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wo(n,this.value)):n!==null&&xo(this.value)===xo(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xe extends QO{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Xe(e,n)}matches(e){return Nc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nc(t){return t.op==="and"}function Vw(t){return t.op==="or"}function _b(t){return YO(t)&&Nc(t)}function YO(t){for(const e of t.filters)if(e instanceof Xe)return!1;return!0}function Lw(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Rc(t.value);if(_b(t))return t.filters.map(e=>Lw(e)).join(",");{const e=t.filters.map(n=>Lw(n)).join(",");return`${t.op}(${e})`}}function XO(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&Ts(r.value,s.value)}(t,e):t instanceof Xe?function(r,s){return s instanceof Xe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&XO(o,s.filters[a]),!0):!1}(t,e):void de()}function JO(t,e){const n=t.filters.concat(e);return Xe.create(n,t.op)}function ZO(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Rc(n.value)}`}(t):t instanceof Xe?function(n){return n.op.toString()+" {"+n.getFilters().map(ZO).join(" ,")+"}"}(t):"Filter"}class fY extends Me{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class pY extends Me{constructor(e,n){super(e,"in",n),this.keys=eM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mY extends Me{constructor(e,n){super(e,"not-in",n),this.keys=eM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class gY extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lh(n)&&ah(n.arrayValue,this.value)}}class tM extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ah(this.value.arrayValue,n)}}class yY extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ah(this.value.arrayValue,n)}}class vY extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function $w(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xY(t,e,n,r,s,i,o)}function Aa(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rc(r)).join(",")),e.ue=n}return e.ue}function Fh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hY(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qP(t.startAt,e.startAt)&&qP(t.endAt,e.endAt)}function Qm(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ym(t,e){return t.filters.filter(n=>n instanceof Me&&n.field.isEqual(e))}function GP(t,e,n){let r=Wp,s=!0;for(const i of Ym(t,e)){let o=Wp,a=!0;switch(i.op){case"<":case"<=":o=uY(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Wp}UP({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];UP({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function WP(t,e,n){let r=Ji,s=!0;for(const i of Ym(t,e)){let o=Ji,a=!0;switch(i.op){case">=":case">":o=dY(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ji}BP({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];BP({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nM(t,e,n,r,s,i,o,a){return new yi(t,e,n,r,s,i,o,a)}function nu(t){return new yi(t)}function HP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bb(t){return t.collectionGroup!==null}function lc(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new et(yt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ch(i,r))}),n.has(yt.keyField().canonicalString())||e.ce.push(new ch(yt.keyField(),r))}return e.ce}function Sn(t){const e=re(t);return e.le||(e.le=sM(e,lc(t))),e.le}function rM(t){const e=re(t);return e.he||(e.he=sM(e,t.explicitOrderBy)),e.he}function sM(t,e){if(t.limitType==="F")return $w(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ch(s.field,i)});const n=t.endAt?new _o(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _o(t.startAt.position,t.startAt.inclusive):null;return $w(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fw(t,e){const n=t.filters.concat([e]);return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xm(t,e,n){return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uh(t,e){return Fh(Sn(t),Sn(e))&&t.limitType===e.limitType}function iM(t){return`${Aa(Sn(t))}|lt:${t.limitType}`}function kl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ZO(s)).join(", ")}]`),$h(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Rc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Rc(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function Bh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of lc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=zP(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,lc(r),s)||r.endAt&&!function(o,a,l){const c=zP(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,lc(r),s))}(t,e)}function oM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aM(t){return(e,n)=>{let r=!1;for(const s of lc(t)){const i=wY(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wY(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?wo(l,c):de()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=new ot(ie.comparator);function Hn(){return _Y}const lM=new ot(ie.comparator);function id(...t){let e=lM;for(const n of t)e=e.insert(n.key,n);return e}function cM(t){let e=lM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ps(){return Id()}function uM(){return Id()}function Id(){return new vi(t=>t.toString(),(t,e)=>t.isEqual(e))}const bY=new ot(ie.comparator),EY=new et(ie.comparator);function Ie(...t){let e=EY;for(const n of t)e=e.add(n);return e}const TY=new et(Ee);function Eb(){return TY}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function dM(t){return{integerValue:""+t}}function hM(t,e){return LO(e)?dM(e):Tb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this._=void 0}}function IY(t,e,n){return t instanceof kc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&fy(i)&&(i=py(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ra?pM(t,e):t instanceof Na?mM(t,e):function(s,i){const o=fM(s,i),a=KP(o)+KP(s.Pe);return Mw(o)&&Mw(s.Pe)?dM(a):Tb(s.serializer,a)}(t,e)}function SY(t,e,n){return t instanceof Ra?pM(t,e):t instanceof Na?mM(t,e):n}function fM(t,e){return t instanceof Dc?function(r){return Mw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class kc extends gy{}class Ra extends gy{constructor(e){super(),this.elements=e}}function pM(t,e){const n=gM(e);for(const r of t.elements)n.some(s=>Ts(s,r))||n.push(r);return{arrayValue:{values:n}}}class Na extends gy{constructor(e){super(),this.elements=e}}function mM(t,e){let n=gM(e);for(const r of t.elements)n=n.filter(s=>!Ts(s,r));return{arrayValue:{values:n}}}class Dc extends gy{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function KP(t){return mt(t.integerValue||t.doubleValue)}function gM(t){return lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.field=e,this.transform=n}}function CY(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ra&&s instanceof Ra||r instanceof Na&&s instanceof Na?Cc(r.elements,s.elements,Ts):r instanceof Dc&&s instanceof Dc?Ts(r.Pe,s.Pe):r instanceof kc&&s instanceof kc}(t.transform,e.transform)}class PY{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yy{}function yM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new su(t.key,vt.none()):new ru(t.key,t.data,vt.none());{const n=t.data,r=un.empty();let s=new et(yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xi(t.key,r,new Wn(s.toArray()),vt.none())}}function AY(t,e,n){t instanceof ru?function(s,i,o){const a=s.value.clone(),l=YP(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xi?function(s,i,o){if(!Qp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=YP(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(vM(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sd(t,e,n,r){return t instanceof ru?function(i,o,a,l){if(!Qp(i.precondition,o))return a;const c=i.value.clone(),u=XP(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof xi?function(i,o,a,l){if(!Qp(i.precondition,o))return a;const c=XP(i.fieldTransforms,l,o),u=o.data;return u.setAll(vM(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Qp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function RY(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=fM(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function QP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cc(r,s,(i,o)=>CY(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ru extends yy{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xi extends yy{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function vM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YP(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,SY(o,a,n[s]))}return r}function XP(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,IY(i,o,e))}return r}class su extends yy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ib extends yy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&AY(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uM();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=yM(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Cc(this.mutations,e.mutations,(n,r)=>QP(n,r))&&Cc(this.baseMutations,e.baseMutations,(n,r)=>QP(n,r))}}class Cb{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return bY}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cb(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pb=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Fe;function wM(t){switch(t){default:return de();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function _M(t){if(t===void 0)return Ot("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Ft.OK:return Q.OK;case Ft.CANCELLED:return Q.CANCELLED;case Ft.UNKNOWN:return Q.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return Q.INTERNAL;case Ft.UNAVAILABLE:return Q.UNAVAILABLE;case Ft.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ft.NOT_FOUND:return Q.NOT_FOUND;case Ft.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ft.ABORTED:return Q.ABORTED;case Ft.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ft.DATA_LOSS:return Q.DATA_LOSS;default:return de()}}(Fe=Ft||(Ft={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY=new ma([4294967295,4294967295],0);function JP(t){const e=bM().encode(t),n=new EO;return n.update(e),new Uint8Array(n.digest())}function ZP(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ma([n,r],0),new ma([s,i],0)]}class Ab{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new od(`Invalid padding: ${n}`);if(r<0)throw new od(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new od(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new od(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ma.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ma.fromNumber(r)));return s.compare(kY)===1&&(s=new ma([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=JP(e),[r,s]=ZP(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ab(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=JP(e),[r,s]=ZP(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class od extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Gh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qh(xe.min(),s,new ot(Ee),Hn(),Ie())}}class Gh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gh(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class EM{constructor(e,n){this.targetId=e,this.me=n}}class TM{constructor(e,n,r=kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class eA{constructor(){this.fe=0,this.ge=nA(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:de()}}),new Gh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DY{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hn(),this.qe=tA(),this.Qe=new ot(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Qm(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,ut.newNoDocument(o,xe.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}Jm==null||Jm.et(function(u,d,f,g,v){var y,w,x,_,b,S;const k={localCacheCount:u,existenceFilterCount:d.count,databaseId:f.database,projectId:f.projectId},R=d.unchangedNames;return R&&(k.bloomFilter={applied:v===0,hashCount:(y=R==null?void 0:R.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(_=(x=(w=R==null?void 0:R.bits)===null||w===void 0?void 0:w.bitmap)===null||x===void 0?void 0:x.length)!==null&&_!==void 0?_:0,padding:(S=(b=R==null?void 0:R.bits)===null||b===void 0?void 0:b.padding)!==null&&S!==void 0?S:0,mightContain:C=>{var E;return(E=g==null?void 0:g.mightContain(C))!==null&&E!==void 0&&E}}),k}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=li(r).toUint8Array()}catch(l){if(l instanceof GO)return Vr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ab(o,s,i)}catch(l){return Vr(l instanceof od?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Qm(a.target)){const l=new ie(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ut.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ie();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new qh(e,n,this.Qe,this.ke,r);return this.ke=Hn(),this.qe=tA(),this.Qe=new ot(Ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new eA,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eA),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function tA(){return new ot(ie.comparator)}function nA(){return new ot(ie.comparator)}const jY=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),OY=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),MY=(()=>({and:"AND",or:"OR"}))();class VY{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uw(t,e){return t.useProto3Json||$h(e)?e:{value:e}}function jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LY(t,e){return jc(t,e.toTimestamp())}function Mt(t){return ye(!!t),xe.fromTimestamp(function(n){const r=ai(n);return new it(r.seconds,r.nanos)}(t))}function Rb(t,e){return Bw(t,e).canonicalString()}function Bw(t,e){const n=function(s){return new Oe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SM(t){const e=Oe.fromString(t);return ye(MM(e)),e}function uh(t,e){return Rb(t.databaseId,e.path)}function _s(t,e){const n=SM(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(AM(n))}function CM(t,e){return Rb(t.databaseId,e)}function PM(t){const e=SM(t);return e.length===4?Oe.emptyPath():AM(e)}function zw(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AM(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rA(t,e,n){return{name:uh(t,e),fields:n.value.mapValue.fields}}function RM(t,e,n){const r=_s(t,e.name),s=Mt(e.updateTime),i=e.createTime?Mt(e.createTime):xe.min(),o=new un({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function $Y(t,e){return"found"in e?function(r,s){ye(!!s.found),s.found.name,s.found.updateTime;const i=_s(r,s.found.name),o=Mt(s.found.updateTime),a=s.found.createTime?Mt(s.found.createTime):xe.min(),l=new un({mapValue:{fields:s.found.fields}});return ut.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){ye(!!s.missing),ye(!!s.readTime);const i=_s(r,s.missing),o=Mt(s.readTime);return ut.newNoDocument(i,o)}(t,e):de()}function FY(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ye(u===void 0||typeof u=="string"),kt.fromBase64String(u||"")):(ye(u===void 0||u instanceof Buffer||u instanceof Uint8Array),kt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Q.UNKNOWN:_M(c.code);return new Z(u,c.message||"")}(o);n=new TM(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_s(t,r.document.name),i=Mt(r.document.updateTime),o=r.document.createTime?Mt(r.document.createTime):xe.min(),a=new un({mapValue:{fields:r.document.fields}}),l=ut.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yp(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_s(t,r.document),i=r.readTime?Mt(r.readTime):xe.min(),o=ut.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Yp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_s(t,r.document),i=r.removedTargetIds||[];n=new Yp([],i,s,null)}else{if(!("filter"in e))return de();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new NY(s,i),a=r.targetId;n=new EM(a,o)}}return n}function dh(t,e){let n;if(e instanceof ru)n={update:rA(t,e.key,e.value)};else if(e instanceof su)n={delete:uh(t,e.key)};else if(e instanceof xi)n={update:rA(t,e.key,e.data),updateMask:WY(e.fieldMask)};else{if(!(e instanceof Ib))return de();n={verify:uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ra)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Na)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw de()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:LY(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de()}(t,e.precondition)),n}function qw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?vt.updateTime(Mt(i.updateTime)):i.exists!==void 0?vt.exists(i.exists):vt.none()}(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ye(a.setToServerValue==="REQUEST_TIME"),l=new kc;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new Ra(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new Na(u)}else"increment"in a?l=new Dc(o,a.increment):de();const c=yt.fromServerFormat(a.fieldPath);return new zh(c,l)}(t,s)):[];if(e.update){e.update.name;const s=_s(t,e.update.name),i=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Wn(c.map(u=>yt.fromServerFormat(u)))}(e.updateMask);return new xi(s,i,o,n,r)}return new ru(s,i,n,r)}if(e.delete){const s=_s(t,e.delete);return new su(s,n)}if(e.verify){const s=_s(t,e.verify);return new Ib(s,n)}return de()}function UY(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Mt(s.updateTime):Mt(i);return o.isEqual(xe.min())&&(o=Mt(i)),new PY(o,s.transformResults||[])}(n,e))):[]}function NM(t,e){return{documents:[CM(t,e.path)]}}function vy(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CM(t,s);const i=function(c){if(c.length!==0)return OM(Xe.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:qi(f.field),direction:zY(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Uw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function kM(t,e,n,r){const{_t:s,parent:i}=vy(t,e),o={},a=[];let l=0;return n.forEach(c=>{const u=r?c.alias:"aggregate_"+l++;o[u]=c.alias,c.aggregateType==="count"?a.push({alias:u,count:{}}):c.aggregateType==="avg"?a.push({alias:u,avg:{field:qi(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:u,sum:{field:qi(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function DM(t){let e=PM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(d){const f=jM(d);return f instanceof Xe&&_b(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new ch(Dl(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,$h(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new _o(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new _o(g,f)}(n.endAt)),nM(e,s,o,i,a,"F",l,c)}function BY(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Dl(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Dl(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dl(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Dl(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Dl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xe.create(n.compositeFilter.filters.map(r=>jM(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function zY(t){return jY[t]}function qY(t){return OY[t]}function GY(t){return MY[t]}function qi(t){return{fieldPath:t.canonicalString()}}function Dl(t){return yt.fromServerFormat(t.fieldPath)}function OM(t){return t instanceof Me?function(n){if(n.op==="=="){if(FP(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NAN"}};if($P(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(FP(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NAN"}};if($P(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(n.field),op:qY(n.op),value:n.value}}}(t):t instanceof Xe?function(n){const r=n.getFilters().map(s=>OM(s));return r.length===1?r[0]:{compositeFilter:{op:GY(n.op),filters:r}}}(t):de()}function WY(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,r,s,i=xe.min(),o=xe.min(),a=kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.ct=e}}function HY(t,e){let n;if(e.document)n=RM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ie.fromSegments(e.noDocument.path),s=Da(e.noDocument.readTime);n=ut.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return de();{const r=ie.fromSegments(e.unknownDocument.path),s=Da(e.unknownDocument.version);n=ut.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new it(s[0],s[1]);return xe.fromTimestamp(i)}(e.readTime)),n}function sA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:uh(i,o.key),fields:o.data.value.mapValue.fields,updateTime:jc(i,o.version.toTimestamp()),createTime:jc(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ka(e.version)};else{if(!e.isUnknownDocument())return de();r.unknownDocument={path:n.path.toArray(),version:ka(e.version)}}return r}function Zm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ka(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Da(t){const e=new it(t.seconds,t.nanoseconds);return xe.fromTimestamp(e)}function ta(t,e){const n=(e.baseMutations||[]).map(i=>qw(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>qw(t.ct,i)),s=it.fromMillis(e.localWriteTimeMs);return new Sb(e.batchId,s,n,r)}function ad(t){const e=Da(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Da(t.lastLimboFreeSnapshotVersion):xe.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ye(i.documents.length===1),Sn(nu(PM(i.documents[0])))}(t.query):function(i){return Sn(DM(i))}(t.query),new Ws(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,kt.fromBase64String(t.resumeToken))}function LM(t,e){const n=ka(e.snapshotVersion),r=ka(e.lastLimboFreeSnapshotVersion);let s;s=Qm(e.target)?NM(t.ct,e.target):vy(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Nb(t){const e=DM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xm(e,e.limit,"L"):e}function P0(t,e){return new Pb(e.largestBatchId,qw(t.ct,e.overlayMutation))}function iA(t,e){const n=e.path.lastSegment();return[t,In(e.path.popLast()),n]}function oA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ka(r.readTime),documentKey:In(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{getBundleMetadata(e,n){return aA(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Da(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return aA(e).put(function(s){return{bundleId:s.id,createTime:ka(Mt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return lA(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Nb(i.bundledQuery),readTime:Da(i.readTime)}}(r)})}saveNamedQuery(e,n){return lA(e).put(function(s){return{name:s.name,readTime:ka(Mt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function aA(t){return Ht(t,"bundles")}function lA(t){return Ht(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new xy(e,r)}getOverlay(e,n){return Bu(e).get(iA(this.userId,n)).next(r=>r?P0(this.serializer,r):null)}getOverlays(e,n){const r=ps();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Pb(n,o);s.push(this.ht(e,a))}),H.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(In(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Bu(e).j("collectionPathOverlayIndex",a))}),H.waitFor(i)}getOverlaysForCollection(e,n,r){const s=ps(),i=In(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Bu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=P0(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=ps();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Bu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=P0(this.serializer,c);i.size()<s||d.largestBatchId===o?(i.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>i)}ht(e,n){return Bu(e).put(function(s,i,o){const[a,l,c]=iA(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:dh(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Bu(t){return Ht(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{Pt(e){return Ht(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?kt.fromUint8Array(r):kt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ih(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ai(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(li(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?WO(e)?this.dt(n,Number.MAX_SAFE_INTEGER):my(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):de()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(mt(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),ie.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}na.vt=new na;function YY(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function cA(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=YY(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class XY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=cA(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=cA(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class JY{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class ZY{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class zu{constructor(){this.jt=new XY,this.Ht=new JY(this.jt),this.Jt=new ZY(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ra(this.indexId,this.documentKey,this.arrayValue,r)}}function Ri(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=uA(t.arrayValue,e.arrayValue),n!==0?n:(n=uA(t.directionalValue,e.directionalValue),n!==0?n:ie.comparator(t.documentKey,e.documentKey)))}function uA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.Xt=new et((n,r)=>yt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ye(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Dw(e);if(n!==void 0&&!this.sn(n))return!1;const r=Jo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new et(yt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ga(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ga(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ga(r.field,r.dir==="asc"?0:1)));return new Pc(Pc.UNKNOWN_ID,this.collectionId,n,Ac.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){var e,n;if(ye(t instanceof Me||t instanceof Xe),t instanceof Me){if(t instanceof tM){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Me.create(t.field,"==",i)))||[];return Xe.create(s,"or")}return t}const r=t.filters.map(s=>$M(s));return Xe.create(r,t.op)}function eX(t){if(t.getFilters().length===0)return[];const e=Hw($M(t));return ye(FM(e)),Gw(e)||Ww(e)?[e]:e.getFilters()}function Gw(t){return t instanceof Me}function Ww(t){return t instanceof Xe&&_b(t)}function FM(t){return Gw(t)||Ww(t)||function(n){if(n instanceof Xe&&Vw(n)){for(const r of n.getFilters())if(!Gw(r)&&!Ww(r))return!1;return!0}return!1}(t)}function Hw(t){if(ye(t instanceof Me||t instanceof Xe),t instanceof Me)return t;if(t.filters.length===1)return Hw(t.filters[0]);const e=t.filters.map(r=>Hw(r));let n=Xe.create(e,t.op);return n=eg(n),FM(n)?n:(ye(n instanceof Xe),ye(Nc(n)),ye(n.filters.length>1),n.filters.reduce((r,s)=>kb(r,s)))}function kb(t,e){let n;return ye(t instanceof Me||t instanceof Xe),ye(e instanceof Me||e instanceof Xe),n=t instanceof Me?e instanceof Me?function(s,i){return Xe.create([s,i],"and")}(t,e):hA(t,e):e instanceof Me?hA(e,t):function(s,i){if(ye(s.filters.length>0&&i.filters.length>0),Nc(s)&&Nc(i))return JO(s,i.getFilters());const o=Vw(s)?s:i,a=Vw(s)?i:s,l=o.filters.map(c=>kb(c,a));return Xe.create(l,"or")}(t,e),eg(n)}function hA(t,e){if(Nc(e))return JO(e,t.getFilters());{const n=e.filters.map(r=>kb(t,r));return Xe.create(n,"or")}}function eg(t){if(ye(t instanceof Me||t instanceof Xe),t instanceof Me)return t;const e=t.getFilters();if(e.length===1)return eg(e[0]);if(YO(t))return t;const n=e.map(s=>eg(s)),r=[];return n.forEach(s=>{s instanceof Me?r.push(s):s instanceof Xe&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Xe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(){this.un=new Db}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(gr.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class Db{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=new Uint8Array(0);class nX{constructor(e,n){this.databaseId=n,this.cn=new Db,this.ln=new vi(r=>Aa(r),(r,s)=>Fh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:In(s)};return fA(e).put(i)}return H.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[kO(n),""],!1,!0);return fA(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(fs(o.parent))}return r})}addFieldIndex(e,n){const r=qu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=_l(e);return i.next(a=>{o.put(oA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=qu(e),s=_l(e),i=wl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=qu(e),r=wl(e),s=_l(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return H.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new dA(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=wl(e);let s=!0;const i=new Map;return H.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ie();const a=[];return H.forEach(i,(l,c)=>{J("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(l)} to execute ${Aa(n)}`);const u=function(b,S){const k=Dw(S);if(k===void 0)return null;for(const R of Ym(b,k.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null}(c,l),d=function(b,S){const k=new Map;for(const R of Jo(S))for(const C of Ym(b,R.fieldPath))switch(C.op){case"==":case"in":k.set(R.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return k.set(R.fieldPath.canonicalString(),C.value),Array.from(k.values())}return null}(c,l),f=function(b,S){const k=[];let R=!0;for(const C of Jo(S)){const E=C.kind===0?GP(b,C.fieldPath,b.startAt):WP(b,C.fieldPath,b.startAt);k.push(E.value),R&&(R=E.inclusive)}return new _o(k,R)}(c,l),g=function(b,S){const k=[];let R=!0;for(const C of Jo(S)){const E=C.kind===0?WP(b,C.fieldPath,b.endAt):GP(b,C.fieldPath,b.endAt);k.push(E.value),R&&(R=E.inclusive)}return new _o(k,R)}(c,l),v=this.In(l,c,f),y=this.In(l,c,g),w=this.Tn(l,c,d),x=this.En(l.indexId,u,v,f.inclusive,y,g.inclusive,w);return H.forEach(x,_=>r.G(_,n.limit).next(b=>{b.forEach(S=>{const k=ie.fromSegments(S.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return H.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=eX(Xe.create(e.filters,"and")).map(r=>$w(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const f=n?this.dn(n[d/c]):np,g=this.An(e,f,r[d%c],s),v=this.Rn(e,f,i[d%c],o),y=a.map(w=>this.An(e,f,w,!0));u.push(...this.createRange(g,v,y))}return u}An(e,n,r,s){const i=new ra(e,ie.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new ra(e,ie.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new dA(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return H.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new et(yt.comparator),u=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new zu;for(const s of Jo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);na.vt.It(i,o)}return r.zt()}dn(e){const n=new zu;return na.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new zu;return na.vt.It(Pa(this.databaseId,n),r.Yt(function(i){const o=Jo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new zu);let i=0;for(const o of Jo(e)){const a=r[i++];for(const l of s)if(this.fn(n,o.fieldPath)&&lh(a))s=this.gn(s,o,a);else{const c=l.Yt(o.kind);na.vt.It(a,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new zu;l.seed(a.zt()),na.vt.It(o,l.Yt(n.kind)),i.push(l)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=qu(e),s=_l(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return H.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){const f=d?new Ac(d.sequenceNumber,new gr(Da(d.readTime),new ie(fs(d.documentKey)),d.largestBatchId)):Ac.empty(),g=u.fields.map(([v,y])=>new ga(yt.fromServerFormat(v),y));return new Pc(u.indexId,u.collectionGroup,g,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ee(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=qu(e),i=_l(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>H.forEach(a,l=>i.put(oA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return H.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),H.forEach(a,l=>this.wn(e,s,l).next(c=>{const u=this.Sn(i,l);return c.isEqual(u)?H.resolve():this.bn(e,i,l,c,u)}))))})}Dn(e,n,r,s){return wl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return wl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=wl(e);let i=new et(Ri);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new ra(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new et(Ri);const s=this.Vn(n,e);if(s==null)return r;const i=Dw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(lh(o))for(const a of o.arrayValue.values||[])r=r.add(new ra(n.indexId,e.key,this.dn(a),s))}else r=r.add(new ra(n.indexId,e.key,np,s));return r}bn(e,n,r,s,i){J("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,d,f){const g=l.getIterator(),v=c.getIterator();let y=xl(g),w=xl(v);for(;y||w;){let x=!1,_=!1;if(y&&w){const b=u(y,w);b<0?_=!0:b>0&&(x=!0)}else y!=null?_=!0:x=!0;x?(d(w),w=xl(v)):_?(f(y),y=xl(g)):(y=xl(g),w=xl(v))}}(s,i,Ri,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),H.waitFor(o)}yn(e){let n=1;return _l(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ri(o,a)).filter((o,a,l)=>!a||Ri(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Ri(o,e),l=Ri(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&l<0)s.push(o),s.push(o.Zt());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,np,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,np,[]];i.push(IDBKeyRange.bound(a,l))}return i}Cn(e,n){return Ri(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(pA)}getMinOffset(e,n){return H.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||de())).next(pA)}}function fA(t){return Ht(t,"collectionParents")}function wl(t){return Ht(t,"indexEntries")}function qu(t){return Ht(t,"indexConfiguration")}function _l(t){return Ht(t,"indexState")}function pA(t){ye(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;vb(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new gr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class En{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(u,d,f)=>(a++,f.delete()));i.push(l.next(()=>{ye(a===1)}));const c=[];for(const u of n.mutations){const d=$O(e,u.key.path,n.batchId);i.push(s.delete(d)),c.push(u.key)}return H.waitFor(i).next(()=>c)}function tg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw de();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(41943040,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);class wy{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){ye(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new wy(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ni(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=jl(e),o=Ni(e);return o.add({}).next(a=>{ye(typeof a=="number");const l=new Sb(a,n,r,s),c=function(g,v,y){const w=y.baseMutations.map(_=>dh(g.ct,_)),x=y.mutations.map(_=>dh(g.ct,_));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:w,mutations:x}}(this.serializer,this.userId,l),u=[];let d=new et((f,g)=>Ee(f.canonicalString(),g.canonicalString()));for(const f of s){const g=$O(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),u.push(o.put(c)),u.push(i.put(g,qQ))}return d.forEach(f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),H.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Ni(e).get(n).next(r=>r?(ye(r.userId===this.userId),ta(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?H.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ni(e).J({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(ye(a.batchId>=r),i=ta(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ni(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ni(e).U("userMutationsIndex",n).next(r=>r.map(s=>ta(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gp(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return jl(e).J({range:s},(o,a,l)=>{const[c,u,d]=o,f=fs(u);if(c===this.userId&&n.path.isEqual(f))return Ni(e).get(d).next(g=>{if(!g)throw de();ye(g.userId===this.userId),i.push(ta(this.serializer,g))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(Ee);const s=[];return n.forEach(i=>{const o=Gp(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=jl(e).J({range:a},(c,u,d)=>{const[f,g,v]=c,y=fs(g);f===this.userId&&i.path.isEqual(y)?r=r.add(v):d.done()});s.push(l)}),H.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Gp(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new et(Ee);return jl(e).J({range:o},(l,c,u)=>{const[d,f,g]=l,v=fs(f);d===this.userId&&r.isPrefixOf(v)?v.length===s&&(a=a.add(g)):u.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ni(e).get(i).next(o=>{if(o===null)throw de();ye(o.userId===this.userId),r.push(ta(this.serializer,o))}))}),H.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return UM(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),H.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return H.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return jl(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=fs(i[1]);s.push(l)}else a.done()}).next(()=>{ye(s.length===0)})})}containsKey(e,n){return BM(e,this.userId,n)}Nn(e){return zM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function BM(t,e,n){const r=Gp(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return jl(t).J({range:i,H:!0},(a,l,c)=>{const[u,d,f]=a;u===e&&d===s&&(o=!0),c.done()}).next(()=>o)}function Ni(t){return Ht(t,"mutations")}function jl(t){return Ht(t,"documentMutations")}function zM(t){return Ht(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ja(0)}static kn(){return new ja(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rX{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new ja(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>xe.fromTimestamp(new it(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>bl(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return bl(e).J((o,a)=>{const l=ad(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>H.waitFor(i)).next(()=>s)}forEachTarget(e,n){return bl(e).J((r,s)=>{const i=ad(s);n(i)})}qn(e){return gA(e).get("targetGlobalKey").next(n=>(ye(n!==null),n))}Qn(e,n){return gA(e).put("targetGlobalKey",n)}Kn(e,n){return bl(e).put(LM(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Aa(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return bl(e).J({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const c=ad(a);Fh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Gi(e);return n.forEach(o=>{const a=In(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),H.waitFor(s)}removeMatchingKeys(e,n,r){const s=Gi(e);return H.forEach(n,i=>{const o=In(i.path);return H.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Gi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Gi(e);let i=Ie();return s.J({range:r,H:!0},(o,a,l)=>{const c=fs(o[1]),u=new ie(c);i=i.add(u)}).next(()=>i)}containsKey(e,n){const r=In(n.path),s=IDBKeyRange.bound([r],[kO(r)],!1,!0);let i=0;return Gi(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,n){return bl(e).get(n).next(r=>r?ad(r):null)}}function bl(t){return Ht(t,"targets")}function gA(t){return Ht(t,"targetGlobal")}function Gi(t){return Ht(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA([t,e],[n,r]){const s=Ee(t,n);return s===0?Ee(e,r):s}class sX{constructor(e){this.Un=e,this.buffer=new et(yA),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){J("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jo(n)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Do(n)}await this.Hn(3e5)})}}class iX{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return H.resolve(Gn.oe);const r=new sX(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(mA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mA):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Nl()<=je.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function GM(t,e){return new iX(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{constructor(e,n){this.db=e,this.garbageCollector=GM(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return rp(e,r)}removeReference(e,n,r){return rp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return rp(e,n)}nr(e,n){return function(s,i){let o=!1;return zM(s).Y(a=>BM(s,a,i).next(l=>(l&&(o=!0),H.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,xe.min()),Gi(e).delete(function(d){return[0,In(d.path)]}(o))))});s.push(l)}}).next(()=>H.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return rp(e,n)}tr(e,n){const r=Gi(e);let s,i=Gn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Gn.oe&&n(new ie(fs(s)),i),i=c,s=l):i=Gn.oe}).next(()=>{i!==Gn.oe&&n(new ie(fs(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rp(t,e){return Gi(t).put(function(r,s){return{targetId:0,path:In(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.changes=new vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Go(e).put(r)}removeEntry(e,n,r){return Go(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Zm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=ut.newInvalidDocument(n);return Go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:ut.newInvalidDocument(n)};return Go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(n))},(s,i)=>{r={document:this.ir(n,i),size:tg(i)}}).next(()=>r)}getEntries(e,n){let r=Hn();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Hn(),s=new ot(ie.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,tg(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return H.resolve();let s=new et(wA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Gu(s.first()),Gu(s.last())),o=s.getIterator();let a=o.getNext();return Go(e).J({index:"documentKeyIndex",range:i},(l,c,u)=>{const d=ie.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&wA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(Gu(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Zm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Go(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=Hn();for(const d of c){const f=this.ir(ie.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Bh(n,f)||s.has(f.key))&&(u=u.insert(f.key,f))}return u})}getAllFromCollectionGroup(e,n,r,s){let i=Hn();const o=xA(n,r),a=xA(n,gr.max());return Go(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.ir(ie.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(d.key,d),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new lX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return vA(e).get("remoteDocumentGlobalKey").next(n=>(ye(!!n),n))}rr(e,n){return vA(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=HY(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return ut.newInvalidDocument(e)}}function HM(t){return new aX(t)}class lX extends WM{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new vi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new et((i,o)=>Ee(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=sA(this.cr.serializer,o);s=s.add(i.path.popLast());const c=tg(l);r+=c-a.size,n.push(this.cr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=sA(this.cr.serializer,o.convertToNoDocument(xe.min()));n.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),H.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function vA(t){return Ht(t,"remoteDocumentGlobal")}function Go(t){return Ht(t,"remoteDocumentsV14")}function Gu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xA(t,e){const n=e.documentKey.path.toArray();return[t,Zm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function wA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ee(n[i],r[i]),s)return s;return s=Ee(n.length,r.length),s||(s=Ee(n[n.length-2],r[r.length-2]),s||Ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Sd(r.mutation,s,Wn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=ps();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=id();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ps();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Hn();const o=Id(),a=function(){return Id()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof xi)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Sd(u.mutation,c,u.mutation.getFieldMask(),it.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new cX(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Id();let s=new ot((o,a)=>o-a),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Wn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(s.get(a.batchId)||Ie()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=uM();u.forEach(f=>{if(!i.has(f)){const g=yM(n.get(f),r.get(f));g!==null&&d.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):H.resolve(ps());let a=-1,l=i;return o.next(c=>H.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ie())).next(u=>({batchId:a,changes:cM(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=id();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=id();return this.indexManager.getCollectionParents(e,i).next(a=>H.forEach(a,l=>{const c=function(d,f){return new yi(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ut.newInvalidDocument(u)))});let a=id();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Sd(u.mutation,c,Wn.empty(),it.now()),Bh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Mt(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Nb(s.bundledQuery),readTime:Mt(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(){this.overlays=new ot(ie.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ps();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=ps(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ot((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=ps(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ps(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return H.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Pb(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hX{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.Tr=new et(Qt.Er),this.dr=new et(Qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Qt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Qt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Oe([])),r=new Qt(n,e),s=new Qt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Oe([])),r=new Qt(n,e),s=new Qt(n,e+1);let i=Ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(Qt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sb(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Qt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qt(n,0),s=new Qt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(Ee);return n.forEach(s=>{const i=new Qt(s,0),o=new Qt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new Qt(new ie(i),0);let a=new et(Ee);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,s=>{const i=new Qt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Qt(n,0),s=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pX{constructor(e){this.Mr=e,this.docs=function(){return new ot(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Hn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hn();const o=n.path,a=new ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||vb(jO(u),r)<=0||(s.has(u.key)||Bh(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,r,s){de()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mX(this)}getSize(e){return H.resolve(this.size)}}class mX extends WM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gX{constructor(e){this.persistence=e,this.Nr=new vi(n=>Aa(n),Fh),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jb,this.targetCount=0,this.kr=ja.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ja(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Gn(0),this.Kr=!1,this.Kr=!0,this.$r=new hX,this.referenceDelegate=e(this),this.Ur=new gX(this),this.indexManager=new tX,this.remoteDocumentCache=function(s){return new pX(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new VM(n),this.Gr=new uX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dX,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fX(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new yX(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class yX extends MO{constructor(e){super(),this.currentSequenceNumber=e}}class _y{constructor(e){this.persistence=e,this.Jr=new jb,this.Yr=null}static Zr(e){return new _y(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class ng{constructor(e,n){this.persistence=e,this.ti=new vi(r=>In(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=GM(this,n)}static Zr(e,n){return new ng(e,n)}zr(){}jr(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}Zn(e,n){return H.forEach(this.ti,(r,s)=>this.nr(e,r,s).next(i=>i?H.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Or(e,o=>this.nr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),H.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hp(e.data.value)),n}nr(e,n,r){return H.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.ti.get(n);return H.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vX{constructor(e){this.serializer=e}O(e,n,r,s){const i=new hy("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jP,{unique:!0}),l.createObjectStore("documentMutations")}(e),_A(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),_A(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jP,{unique:!0});const d=c.store("mutations"),f=u.map(g=>d.put(g));return H.waitFor(f)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:nY});c.createIndex("collectionPathOverlayIndex",rY,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",sY,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:GQ});c.createIndex("documentKeyIndex",WQ),c.createIndex("collectionGroupIndex",HQ)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:JQ}).createIndex("sequenceNumberIndex",ZQ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:eY}).createIndex("documentKeyIndex",tY,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=tg(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>H.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>H.forEach(a,l=>{ye(l.userId===i.userId);const c=ta(this.serializer,l);return UM(e,i.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const l=new Oe(o),c=function(d){return[0,In(d)]}(l);i.push(n.get(c).next(u=>u?H.resolve():(d=>n.put({targetId:0,path:In(d),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>H.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:XQ});const r=n.store("collectionParents"),s=new Db,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:In(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Oe(o);return i(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=fs(a);return i(u.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=ad(s),o=LM(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new ie(Oe.fromString(d.document.name).popFirst(5)):d.noDocument?ie.fromSegments(d.noDocument.path):d.unknownDocument?ie.fromSegments(d.unknownDocument.path):de()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>H.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=HM(this.serializer),i=new Ob(_y.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:Ie();ta(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),H.forEach(a,(l,c)=>{const u=new Xt(c),d=xy.lt(this.serializer,u),f=i.getIndexManager(u),g=wy.lt(u,this.serializer,f,i.referenceDelegate);return new KM(s,g,d,f).recalculateAndSaveOverlaysForDocumentKeys(new jw(n,Gn.oe),l).next()})})}}function _A(t){t.createObjectStore("targetDocuments",{keyPath:QQ}).createIndex("documentTargetsIndex",YQ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KQ,{unique:!0}),t.createObjectStore("targetGlobal")}const A0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mb{constructor(e,n,r,s,i,o,a,l,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Mb.D())throw new Z(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oX(this,s),this.Ai=n+"main",this.serializer=new VM(l),this.Ri=new ws(this.Ai,this.hi,new vX(this.serializer)),this.$r=new QY,this.Ur=new rX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HM(this.serializer),this.Gr=new KY,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(Q.FAILED_PRECONDITION,A0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Gn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(jo(e))return J("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Wu(e).get("owner").next(n=>H.resolve(this.vi(n)))}Ci(e){return sp(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ht(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return H.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):Wu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Z(Q.FAILED_PRECONDITION,A0);return!1}}return!(!this.networkEnabled||!this.inForeground)||sp(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&J("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new jw(e,Gn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>sp(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return wy.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nX(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xy.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===17?aY:l===16?oY:l===15?wb:l===14?BO:l===13?UO:l===12?iY:l===11?FO:void de()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new jw(a,this.Qr?this.Qr.next():Gn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Z(Q.FAILED_PRECONDITION,OO);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Wu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Z(Q.FAILED_PRECONDITION,A0)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wu(e).put("owner",n)}static D(){return ws.D()}bi(e){const n=Wu(e);return n.get("owner").next(r=>this.vi(r)?(J("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):H.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ot(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;Aj()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return J("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ot("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wu(t){return Ht(t,"owner")}function sp(t){return Ht(t,"clientMetadata")}function Vb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Lb(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Aj()?8:VO(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xX;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Nl()<=je.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Nl()<=je.DEBUG&&J("QueryEngine","Query:",kl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Nl()<=je.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):H.resolve())}Yi(e,n){if(HP(n))return H.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xm(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Xm(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return HP(n)||s.isEqual(xe.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?H.resolve(null):(Nl()<=je.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),kl(n)),this.rs(e,o,n,DO(s,-1)).next(a=>a))})}ts(e,n){let r=new et(aM(e));return n.forEach((s,i)=>{Bh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Nl()<=je.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",kl(n)),this.Ji.getDocumentsMatchingQuery(e,n,gr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ot(Ee),this._s=new vi(i=>Aa(i),Fh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function YM(t,e,n,r){return new wX(t,e,n,r)}async function XM(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ie();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function _X(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let g=H.resolve();return f.forEach(v=>{g=g.next(()=>u.getEntry(l,v)).next(y=>{const w=c.docVersions.get(v);ye(w!==null),y.version.compareTo(w)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function JM(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function bX(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,u.addedDocuments,d)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(kt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(d,g),function(y,w,x){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,g,u)&&a.push(n.Ur.updateTargetData(i,g))});let l=Hn(),c=Ie();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(ZM(i,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(xe.min())){const u=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return H.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function ZM(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Hn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(xe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function EX(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oc(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Mc(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!jo(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function rg(t,e,n){const r=re(t);let s=xe.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=re(l),f=d._s.get(u);return f!==void 0?H.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(r,o,Sn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:xe.min(),n?i:Ie())).next(a=>(nV(r,oM(e),a),{documents:a,Ts:i})))}function eV(t,e){const n=re(t),r=re(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function tV(t,e){const n=re(t),r=n.us.get(e)||xe.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,DO(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(nV(n,e,s),s))}function nV(t,e,n){let r=t.us.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}async function TX(t,e,n,r){const s=re(t);let i=Ie(),o=Hn();for(const c of n){const u=e.Es(c.metadata.name);c.document&&(i=i.add(u));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,d)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),l=await Oc(s,function(u){return Sn(nu(Oe.fromString(`__bundle__/docs/${u}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>ZM(c,a,o).next(u=>(a.apply(c),u)).next(u=>s.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Ur.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))}async function IX(t,e,n=Ie()){const r=await Oc(t,Sn(Nb(e.bundledQuery))),s=re(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Mt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Gr.saveNamedQuery(i,e);const a=r.withResumeToken(kt.EMPTY_BYTE_STRING,o);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(i,a).next(()=>s.Ur.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Ur.addMatchingKeys(i,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(i,e))})}function bA(t,e){return`firestore_clients_${t}_${e}`}function EA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function R0(t,e){return`firestore_targets_${t}_${e}`}class sg{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Z(s.error.code,s.error.message))),o?new sg(e,n,s.state,i):(Ot("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Z(r.error.code,r.error.message))),i?new Cd(e,r.state,s):(Ot("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ig{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Eb();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=LO(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new ig(e,i):(Ot("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class $b{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new $b(n.clientId,n.onlineState):(Ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kw{constructor(){this.activeTargetIds=Eb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N0{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ot(Ee),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=bA(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Kw),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(bA(this.persistenceKey,r));if(s){const i=ig.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(R0(this.persistenceKey,e));if(s){const i=Cd.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(R0(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J("SharedClientState","READ",e,n),n}setItem(e,n){J("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){J("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(J("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=Gn.oe;if(i!=null)try{const a=JSON.parse(i);ye(typeof a=="number"),o=a}catch(a){Ot("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Gn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new sg(this.currentUser,e,n,r),i=EA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=EA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=R0(this.persistenceKey,e),i=new Cd(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return ig.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return sg.Rs(new Xt(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return Cd.Rs(s,n)}Ls(e){return $b.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);J("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Eb();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class rV{constructor(){this.so=new Kw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Kw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip=null;function k0(){return ip===null?ip=function(){return 268435456+Math.round(2147483648*Math.random())}():ip++,"0x"+ip.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class AX extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=k0(),l=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(u=>(J("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Vr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=CX[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=k0();return new Promise((o,a)=>{const l=new TO;l.setWithCredentials(!0),l.listenOnce(IO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qp.NO_ERROR:const u=l.getResponseJson();J(_n,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case qp.TIMEOUT:J(_n,`RPC '${e}' ${i} timed out`),a(new Z(Q.DEADLINE_EXCEEDED,"Request time out"));break;case qp.HTTP_ERROR:const d=l.getStatus();if(J(_n,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const v=function(w){const x=w.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(x)>=0?x:Q.UNKNOWN}(g.status);a(new Z(v,g.message))}else a(new Z(Q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Z(Q.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{J(_n,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(_n,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=k0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PO(),a=CO(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");J(_n,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,g=!1;const v=new PX({Io:w=>{g?J(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(f||(J(_n,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),J(_n,`RPC '${e}' stream ${s} sending:`,w),d.send(w))},To:()=>d.close()}),y=(w,x,_)=>{w.listen(x,b=>{try{_(b)}catch(S){setTimeout(()=>{throw S},0)}})};return y(d,sd.EventType.OPEN,()=>{g||(J(_n,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),y(d,sd.EventType.CLOSE,()=>{g||(g=!0,J(_n,`RPC '${e}' stream ${s} transport closed`),v.So())}),y(d,sd.EventType.ERROR,w=>{g||(g=!0,Vr(_n,`RPC '${e}' stream ${s} transport errored:`,w),v.So(new Z(Q.UNAVAILABLE,"The operation could not be completed")))}),y(d,sd.EventType.MESSAGE,w=>{var x;if(!g){const _=w.data[0];ye(!!_);const b=_,S=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(S){J(_n,`RPC '${e}' stream ${s} received error:`,S);const k=S.status;let R=function(I){const P=Ft[I];if(P!==void 0)return _M(P)}(k),C=S.message;R===void 0&&(R=Q.INTERNAL,C="Unknown error status: "+k+" with message "+S.message),g=!0,v.So(new Z(R,C)),d.close()}else J(_n,`RPC '${e}' stream ${s} received:`,_),v.bo(_)}}),y(a,SO.STAT_EVENT,w=>{w.stat===kw.PROXY?J(_n,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===kw.NOPROXY&&J(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(){return typeof window<"u"?window:null}function Xp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){return new VY(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Z(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RX extends iV{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=FY(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?Mt(o.readTime):xe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Qm(l)?{documents:NM(i,l)}:{query:vy(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=IM(i,o.resumeToken);const c=Uw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=jc(i,o.snapshotVersion.toTimestamp());const c=Uw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=BY(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zw(this.serializer),n.removeTarget=e,this.a_(n)}}class NX extends iV{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UY(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dh(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kX extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Bw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(Q.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Bw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(Q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class DX{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ot(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Mo(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=re(l);c.L_.add(4),await iu(c),c.q_.set("Unknown"),c.L_.delete(4),await Hh(c)}(this))})}),this.q_=new DX(r,s)}}async function Hh(t){if(Mo(t))for(const e of t.B_)await e(!0)}async function iu(t){for(const e of t.B_)await e(!1)}function by(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),zb(n)?Bb(n):au(n).r_()&&Ub(n,e))}function Vc(t,e){const n=re(t),r=au(n);n.N_.delete(e),r.r_()&&oV(n,e),n.N_.size===0&&(r.r_()?r.o_():Mo(n)&&n.q_.set("Unknown"))}function Ub(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}au(t).A_(e)}function oV(t,e){t.Q_.xe(e),au(t).R_(e)}function Bb(t){t.Q_=new DY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),au(t).start(),t.q_.v_()}function zb(t){return Mo(t)&&!au(t).n_()&&t.N_.size>0}function Mo(t){return re(t).L_.size===0}function aV(t){t.Q_=void 0}async function OX(t){t.q_.set("Online")}async function MX(t){t.N_.forEach((e,n)=>{Ub(t,e)})}async function VX(t,e){aV(t),zb(t)?(t.q_.M_(e),Bb(t)):t.q_.set("Unknown")}async function LX(t,e,n){if(t.q_.set("Online"),e instanceof TM&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await og(t,r)}else if(e instanceof Yp?t.Q_.Ke(e):e instanceof EM?t.Q_.He(e):t.Q_.We(e),!n.isEqual(xe.min()))try{const r=await JM(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(kt.EMPTY_BYTE_STRING,u.snapshotVersion)),oV(i,l);const d=new Ws(u.target,l,c,u.sequenceNumber);Ub(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await og(t,r)}}async function og(t,e,n){if(!jo(e))throw e;t.L_.add(1),await iu(t),t.q_.set("Offline"),n||(n=()=>JM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Hh(t)})}function lV(t,e){return e().catch(n=>og(t,n,e))}async function ou(t){const e=re(t),n=bo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$X(e);)try{const s=await EX(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,FX(e,s)}catch(s){await og(e,s)}cV(e)&&uV(e)}function $X(t){return Mo(t)&&t.O_.length<10}function FX(t,e){t.O_.push(e);const n=bo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cV(t){return Mo(t)&&!bo(t).n_()&&t.O_.length>0}function uV(t){bo(t).start()}async function UX(t){bo(t).p_()}async function BX(t){const e=bo(t);for(const n of t.O_)e.m_(n.mutations)}async function zX(t,e,n){const r=t.O_.shift(),s=Cb.from(r,e,n);await lV(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ou(t)}async function qX(t,e){e&&bo(t).V_&&await async function(r,s){if(function(o){return wM(o)&&o!==Q.ABORTED}(s.code)){const i=r.O_.shift();bo(r).s_(),await lV(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ou(r)}}(t,e),cV(t)&&uV(t)}async function IA(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Mo(n);n.L_.add(3),await iu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Hh(n)}async function Qw(t,e){const n=re(t);e?(n.L_.delete(2),await Hh(n)):e||(n.L_.add(2),await iu(n),n.q_.set("Unknown"))}function au(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new RX(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:OX.bind(null,t),Ro:MX.bind(null,t),mo:VX.bind(null,t),d_:LX.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),zb(t)?Bb(t):t.q_.set("Unknown")):(await t.K_.stop(),aV(t))})),t.K_}function bo(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new NX(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UX.bind(null,t),mo:qX.bind(null,t),f_:BX.bind(null,t),g_:zX.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ou(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new qb(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lu(t,e){if(Ot("AsyncQueue",`${e}: ${t}`),jo(t))return new Z(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=id(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new cc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.W_=new ot(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Lc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Lc(e,n,cc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WX{constructor(){this.queries=CA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=CA(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Z(Q.ABORTED,"Firestore shutting down"))}}function CA(){return new vi(t=>iM(t),Uh)}async function Gb(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new GX,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=lu(o,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Hb(n)}async function Wb(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HX(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Hb(n)}function KX(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Hb(t){t.Y_.forEach(e=>{e.next()})}var Yw,PA;(PA=Yw||(Yw={})).ea="default",PA.Cache="cache";class Kb{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.serializer=e}Es(e){return _s(this.serializer,e)}ds(e){return e.metadata.exists?RM(this.serializer,e.document,!1):ut.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Mt(e)}}class YX{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dV(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Oe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new AA(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Es(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Ie()).add(i);n.set(o,a)}}return n}async complete(){const e=await TX(this.localStore,new AA(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await IX(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function dV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.key=e}}class fV{constructor(e){this.key=e}}class pV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=aM(e),this.Ra=new cc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new SA,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const f=s.get(u),g=Bh(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?v!==y&&(r.track({type:3,doc:g}),w=!0):this.ga(f,g)||(r.track({type:2,doc:g}),w=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),w=!0):f&&!g&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(g?(o=o.add(g),i=y?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(g,v){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return y(g)-y(v)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Lc(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new SA,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new fV(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hV(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Lc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XX{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JX{constructor(e){this.key=e,this.va=!1}}class ZX{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vi(a=>iM(a),Uh),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ie.comparator),this.Na=new Map,this.La=new jb,this.Ba={},this.ka=new Map,this.qa=ja.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eJ(t,e,n=!0){const r=Ey(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await mV(r,e,n,!0),s}async function tJ(t,e){const n=Ey(t);await mV(n,e,!0,!1)}async function mV(t,e,n,r){const s=await Oc(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Qb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&by(t.remoteStore,s),a}async function Qb(t,e,n,r,s){t.Ka=(d,f,g)=>async function(y,w,x,_){let b=w.view.ma(x);b.ns&&(b=await rg(y.localStore,w.query,!1).then(({documents:C})=>w.view.ma(C,b)));const S=_&&_.targetChanges.get(w.targetId),k=_&&_.targetMismatches.get(w.targetId)!=null,R=w.view.applyChanges(b,y.isPrimaryClient,S,k);return Xw(y,w.targetId,R.wa),R.snapshot}(t,d,f,g);const i=await rg(t.localStore,e,!0),o=new pV(e,i.Ts),a=o.ma(i.documents),l=Gh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Xw(t,n,c.wa);const u=new XX(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function nJ(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Uh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Vc(r.remoteStore,s.targetId),$c(r,s.targetId)}).catch(Do)):($c(r,s.targetId),await Mc(r.localStore,s.targetId,!0))}async function rJ(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vc(n.remoteStore,r.targetId))}async function sJ(t,e,n){const r=Zb(t);try{const s=await function(o,a){const l=re(o),c=it.now(),u=a.reduce((g,v)=>g.add(v.key),Ie());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Hn(),y=Ie();return l.cs.getEntries(g,u).next(w=>{v=w,v.forEach((x,_)=>{_.isValidDocument()||(y=y.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(w=>{d=w;const x=[];for(const _ of a){const b=RY(_,d.get(_.key).overlayedDocument);b!=null&&x.push(new xi(_.key,b,KO(b.value.mapValue),vt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,x,a)}).next(w=>{f=w;const x=w.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(g,w.batchId,x)})}).then(()=>({batchId:f.batchId,changes:cM(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ot(Ee)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await wi(r,s.changes),await ou(r.remoteStore)}catch(s){const i=lu(s,"Failed to persist write");n.reject(i)}}async function gV(t,e){const n=re(t);try{const r=await bX(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ye(o.va):s.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await wi(n,r,e)}catch(r){await Do(r)}}function RA(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&Hb(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iJ(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new ot(ie.comparator);o=o.insert(i,ut.newNoDocument(i,xe.min()));const a=Ie().add(i),l=new qh(xe.min(),new Map,new ot(Ee),o,a);await gV(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Jb(r)}else await Mc(r.localStore,e,!1).then(()=>$c(r,e,n)).catch(Do)}async function oJ(t,e){const n=re(t),r=e.batch.batchId;try{const s=await _X(n.localStore,e);Xb(n,r,null),Yb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wi(n,s)}catch(s){await Do(s)}}async function aJ(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ye(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);Xb(r,e,n),Yb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wi(r,s)}catch(s){await Do(s)}}async function lJ(t,e){const n=re(t);Mo(n.remoteStore)||J("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=re(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=lu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Yb(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Xb(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $c(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yV(t,r)})}function yV(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Vc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Jb(t))}function Xw(t,e,n){for(const r of n)r instanceof hV?(t.La.addReference(r.key,e),cJ(t,r)):r instanceof fV?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yV(t,r.key)):de()}function cJ(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),Jb(t))}function Jb(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new JX(n)),t.Oa=t.Oa.insert(n,r),by(t.remoteStore,new Ws(Sn(nu(n.path)),r,"TargetPurposeLimboResolution",Gn.oe))}}async function wi(t,e,n){const r=re(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Lb.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const u=re(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>H.forEach(c,f=>H.forEach(f.$i,g=>u.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>H.forEach(f.Ui,g=>u.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!jo(d))throw d;J("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=u.os.get(f),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(f,y)}}}(r.localStore,i))}async function uJ(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await XM(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Z(Q.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wi(n,r.hs)}}function dJ(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let s=Ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function hJ(t,e){const n=re(t),r=await rg(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&Xw(n,e.targetId,s.wa),s}async function fJ(t,e){const n=re(t);return tV(n.localStore,e).then(r=>wi(n,r))}async function pJ(t,e,n,r){const s=re(t),i=await function(a,l){const c=re(a),u=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):H.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await ou(s.remoteStore):n==="acknowledged"||n==="rejected"?(Xb(s,e,r||null),Yb(s,e),function(a,l){re(re(a).mutationQueue).On(l)}(s.localStore,e)):de(),await wi(s,i)):J("SyncEngine","Cannot apply mutation batch with id: "+e)}async function mJ(t,e){const n=re(t);if(Ey(n),Zb(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await NA(n,r.toArray());n.Qa=!0,await Qw(n.remoteStore,!0);for(const i of s)by(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>($c(n,o),Mc(n.localStore,o,!0))),Vc(n.remoteStore,o)}),await s,await NA(n,r),function(o){const a=re(o);a.Na.forEach((l,c)=>{Vc(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new ot(ie.comparator)}(n),n.Qa=!1,await Qw(n.remoteStore,!1)}}async function NA(t,e,n){const r=re(t),s=[],i=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Oc(r.localStore,Sn(l[0]));for(const c of l){const u=r.Fa.get(c),d=await hJ(r,u);d.snapshot&&i.push(d.snapshot)}}else{const c=await eV(r.localStore,o);a=await Oc(r.localStore,c),await Qb(r,vV(c),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function vV(t){return nM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gJ(t){return function(n){return re(re(n).persistence).Qi()}(re(t).localStore)}async function yJ(t,e,n,r){const s=re(t);if(s.Qa)return void J("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await tV(s.localStore,oM(i[0])),a=qh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",kt.EMPTY_BYTE_STRING);await wi(s,o,a);break}case"rejected":await Mc(s.localStore,e,!0),$c(s,e,r);break;default:de()}}async function vJ(t,e,n){const r=Ey(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){J("SyncEngine","Adding an already active target "+s);continue}const i=await eV(r.localStore,s),o=await Oc(r.localStore,i);await Qb(r,vV(i),o.targetId,!1,o.resumeToken),by(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await Mc(r.localStore,s,!1).then(()=>{Vc(r.remoteStore,s),$c(r,s)}).catch(Do)}}function Ey(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iJ.bind(null,e),e.Ca.d_=HX.bind(null,e.eventManager),e.Ca.$a=KX.bind(null,e.eventManager),e}function Zb(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aJ.bind(null,e),e}function xJ(t,e,n){const r=re(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(g,v){const y=re(g),w=Mt(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",x=>y.Gr.getBundleMetadata(x,v.id)).then(x=>!!x&&x.createTime.compareTo(w)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(dV(l));const c=new YX(l,i.localStore,o.serializer);let u=await o.Ua();for(;u;){const f=await c.la(u);f&&a._updateProgress(f),u=await o.Ua()}const d=await c.complete();return await wi(i,d.Ia,void 0),await function(g,v){const y=re(g);return y.persistence.runTransaction("Save bundle","readwrite",w=>y.Gr.saveBundleMetadata(w,v))}(i.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return Vr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Eo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return YM(this.persistence,new QM,e.initialUser,this.serializer)}Ga(e){return new Ob(_y.Zr,this.serializer)}Wa(e){return new rV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eo.provider={build:()=>new Eo};class wJ extends Eo{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){ye(this.persistence.referenceDelegate instanceof ng);const r=this.persistence.referenceDelegate.garbageCollector;return new qM(r,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Ob(r=>ng.Zr(r,n),this.serializer)}}class eE extends Eo{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Zb(this.Ja.syncEngine),await ou(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return YM(this.persistence,new QM,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new qM(r,e.asyncQueue,n)}Ha(e,n){const r=new BQ(n,this.persistence);return new UQ(e.asyncQueue,r)}Ga(e){const n=Vb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Mb(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,sV(),Xp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new rV}}class xV extends eE{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof N0&&(this.sharedClientState.syncEngine={no:pJ.bind(null,n),ro:yJ.bind(null,n),io:vJ.bind(null,n),Qi:gJ.bind(null,n),eo:fJ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await mJ(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=sV();if(!N0.D(n))throw new Z(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new N0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class To{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uJ.bind(null,this.syncEngine),await Qw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WX}()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),r=function(i){return new AX(i)}(e.databaseInfo);return function(i,o,a,l){return new kX(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new jX(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>RA(this.syncEngine,n,0),function(){return TA.D()?new TA:new SX}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const d=new ZX(s,i,o,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);J("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await iu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}To.provider={build:()=>new To};function kA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new rn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new QX(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=re(s),a={documents:i.map(d=>uh(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Oe.emptyPath(),a,i.length),c=new Map;l.forEach(d=>{const f=$Y(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return i.forEach(d=>{const f=c.get(d.toString());ye(!!f),u.push(f)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=ie.fromPath(r);this.mutations.push(new Ib(s,this.precondition(s)))}),await async function(r,s){const i=re(r),o={writes:s.map(a=>dh(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,Oe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw de();n=xe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Z(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(xe.min())?vt.exists(!1):vt.updateTime(n):vt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(xe.min()))throw new Z(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(n)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJ{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new Fb(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new bJ(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!$h(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!wM(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJ{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Xt.UNAUTHENTICATED,this.clientId=NO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function D0(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XM(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function DA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tE(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>IA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>IA(e.remoteStore,s)),t._onlineComponents=e}async function tE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await D0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Q.FAILED_PRECONDITION||s.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Vr("Error using user provided cache. Falling back to memory cache: "+n),await D0(t,new Eo)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await D0(t,new Eo);return t._offlineComponents}async function Iy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await DA(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await DA(t,new To))),t._onlineComponents}function wV(t){return tE(t).then(e=>e.persistence)}function cu(t){return tE(t).then(e=>e.localStore)}function _V(t){return Iy(t).then(e=>e.remoteStore)}function nE(t){return Iy(t).then(e=>e.syncEngine)}function bV(t){return Iy(t).then(e=>e.datastore)}async function Fc(t){const e=await Iy(t),n=e.eventManager;return n.onListen=eJ.bind(null,e.syncEngine),n.onUnlisten=nJ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tJ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rJ.bind(null,e.syncEngine),n}function IJ(t){return t.asyncQueue.enqueue(async()=>{const e=await wV(t),n=await _V(t);return e.setNetworkEnabled(!0),function(s){const i=re(s);return i.L_.delete(0),Hh(i)}(n)})}function SJ(t){return t.asyncQueue.enqueue(async()=>{const e=await wV(t),n=await _V(t);return e.setNetworkEnabled(!1),async function(s){const i=re(s);i.L_.add(0),await iu(i),i.q_.set("Offline")}(n)})}function CJ(t,e){const n=new rn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,u){const d=re(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,u))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Z(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=lu(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await cu(t),e,n)),n.promise}function EV(t,e,n={}){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Ty({next:f=>{u.Za(),o.enqueueAndForget(()=>Wb(i,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new Z(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new Z(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Kb(nu(a.path),u,{includeMetadataChanges:!0,_a:!0});return Gb(i,d)}(await Fc(t),t.asyncQueue,e,n,r)),r.promise}function PJ(t,e){const n=new rn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await rg(s,i,!0),l=new pV(i,a.Ts),c=l.ma(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=lu(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await cu(t),e,n)),n.promise}function TV(t,e,n={}){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Ty({next:f=>{u.Za(),o.enqueueAndForget(()=>Wb(i,d)),f.fromCache&&l.source==="server"?c.reject(new Z(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Kb(a,u,{includeMetadataChanges:!0,_a:!0});return Gb(i,d)}(await Fc(t),t.asyncQueue,e,n,r)),r.promise}function AJ(t,e,n){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await bV(t);r.resolve(async function(o,a,l){var c;const u=re(o),{request:d,ut:f,parent:g}=kM(u.serializer,rM(a),l);u.connection.Fo||delete d.parent;const v=(await u.Lo("RunAggregationQuery",u.serializer.databaseId,g,d,1)).filter(w=>!!w.result);ye(v.length===1);const y=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(y).reduce((w,x)=>(w[f[x]]=y[x],w),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function RJ(t,e){const n=new Ty(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){re(s).Y_.add(i),i.next()}(await Fc(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){re(s).Y_.delete(i)}(await Fc(t),n))}}function NJ(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?bM().encode(o):o,function(u,d){return new _J(u,d)}(function(u,d){if(u instanceof Uint8Array)return kA(u,d);if(u instanceof ArrayBuffer)return kA(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Wh(e));t.asyncQueue.enqueueAndForget(async()=>{xJ(await nE(t),s,r)})}function kJ(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=re(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Gr.getNamedQuery(o,s))}(await cu(t),e))}function DJ(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=re(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(d,f,g,v,y){d=[...d],f=[...f],d.sort(g),f.sort(g);const w=d.length,x=f.length;let _=0,b=0;for(;_<x&&b<w;){const S=g(d[b],f[_]);S<0?y(d[b++]):S>0?v(f[_++]):(_++,b++)}for(;_<x;)v(f[_++]);for(;b<w;)y(d[b++])}(c,s,VQ,u=>{a.push(o.addFieldIndex(l,u))},u=>{a.push(o.deleteFieldIndex(l,u))})).next(()=>H.waitFor(a)))}(await cu(t),e))}function jJ(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){re(r).ss.zi=s}(await cu(t),e))}function OJ(t){return t.asyncQueue.enqueue(async()=>function(n){const r=re(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await cu(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e,n){if(!n)throw new Z(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MJ(t,e,n,r){if(e===!0&&r===!0)throw new Z(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OA(t){if(!ie.isDocumentKey(t))throw new Z(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function MA(t){if(ie.isDocumentKey(t))throw new Z(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function Re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sy(t);throw new Z(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function SV(t,e){if(e<=0)throw new Z(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VA(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AQ;switch(r.type){case"firstParty":return new DQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jA.get(n);r&&(J("ComponentProvider","Removing Datastore"),jA.delete(n),r.terminate())}(this),Promise.resolve()}}function VJ(t,e,n,r={}){var s;const i=(t=Re(t,Kh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Xt.MOCK_USER;else{a=Cj(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Z(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Xt(c)}t._authCredentials=new RQ(new AO(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fn(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}}class bs extends fn{constructor(e,n,r){super(e,n,nu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new ie(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Rr(t,e,...n){if(t=Ce(t),rE("collection","path",e),t instanceof Kh){const r=Oe.fromString(e,...n);return MA(r),new bs(t,null,r)}{if(!(t instanceof Vt||t instanceof bs))throw new Z(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return MA(r),new bs(t.firestore,null,r)}}function Hpe(t,e){if(t=Re(t,Kh),rE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fn(t,null,function(r){return new yi(Oe.emptyPath(),r)}(e))}function dr(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=NO.newId()),rE("doc","path",e),t instanceof Kh){const r=Oe.fromString(e,...n);return OA(r),new Vt(t,null,new ie(r))}{if(!(t instanceof Vt||t instanceof bs))throw new Z(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return OA(r),new Vt(t.firestore,t instanceof bs?t.converter:null,new ie(r))}}function Kpe(t,e){return t=Ce(t),e=Ce(e),(t instanceof Vt||t instanceof bs)&&(e instanceof Vt||e instanceof bs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function CV(t,e){return t=Ce(t),e=Ce(e),t instanceof fn&&e instanceof fn&&t.firestore===e.firestore&&Uh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fb(this,"async_queue_retry"),this.Vu=()=>{const r=Xp();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Xp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Xp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new rn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jo(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ot("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=qb.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&de()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Jw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class LJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpe=-1;class nt extends Kh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new LA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LA(e),this._firestoreClient=void 0,await e}}}function Ype(t,e,n){n||(n="(default)");const r=Cs(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(si(i,e))return s;throw new Z(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Z(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function $J(t,e){const n=typeof t=="object"?t:ly(),r=typeof t=="string"?t:e||"(default)",s=Cs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Tj("firestore");i&&VJ(s,...i)}return s}function It(t){if(t._terminated)throw new Z(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PV(t),t._firestoreClient}function PV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new cY(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,IV(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TJ(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Xpe(t,e){Vr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return AV(t,To.provider,{build:r=>new eE(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Jpe(t){Vr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();AV(t,To.provider,{build:n=>new xV(n,e.cacheSizeBytes)})}function AV(t,e,n){if((t=Re(t,nt))._firestoreClient||t._terminated)throw new Z(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Z(Q.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},PV(t)}function Zpe(t){if(t._initialized&&!t._terminated)throw new Z(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new rn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ws.D())return Promise.resolve();const s=r+"main";await ws.delete(s)}(Vb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function eme(t){return function(n){const r=new rn;return n.asyncQueue.enqueueAndForget(async()=>lJ(await nE(n),r)),r.promise}(It(t=Re(t,nt)))}function tme(t){return IJ(It(t=Re(t,nt)))}function nme(t){return SJ(It(t=Re(t,nt)))}function rme(t){return sH(t.app,"firestore",t._databaseId.database),t._delete()}function sme(t,e){const n=It(t=Re(t,nt)),r=new LJ;return NJ(n,t._databaseId,e,r),r}function ime(t,e){return kJ(It(t=Re(t,nt)),e).then(n=>n?new fn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class FJ{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa(kt.fromBase64String(e))}catch(n){throw new Z(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Oa(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function ome(){return new Za("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UJ=/^__.*__$/;class BJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}class RV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Py{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Py(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ag(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NV(this.Cu)&&UJ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zJ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wh(e)}Qu(e,n,r,s=!1){return new Py({Cu:e,methodName:n,qu:r,path:yt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tl(t){const e=t._freezeSettings(),n=Wh(t._databaseId);return new zJ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ay(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);dE("Data must be an object, but it was:",o,r);const a=jV(r,o);let l,c;if(i.merge)l=new Wn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const f=fh(e,d,n);if(!o.contains(f))throw new Z(Q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);MV(u,f)||u.push(f)}l=new Wn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new BJ(new un(a),l,c)}class Qh extends el{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qh}}function kV(t,e,n){return new Py({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iE extends el{_toFieldTransform(e){return new zh(e.path,new kc)}isEqual(e){return e instanceof iE}}class oE extends el{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=kV(this,e,!0),r=this.Ku.map(i=>nl(i,n)),s=new Ra(r);return new zh(e.path,s)}isEqual(e){return e instanceof oE&&si(this.Ku,e.Ku)}}class aE extends el{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=kV(this,e,!0),r=this.Ku.map(i=>nl(i,n)),s=new Na(r);return new zh(e.path,s)}isEqual(e){return e instanceof aE&&si(this.Ku,e.Ku)}}class lE extends el{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Dc(e.serializer,hM(e.serializer,this.$u));return new zh(e.path,n)}isEqual(e){return e instanceof lE&&this.$u===e.$u}}function cE(t,e,n,r){const s=t.Qu(1,e,n);dE("Data must be an object, but it was:",s,r);const i=[],o=un.empty();Oo(r,(l,c)=>{const u=Ry(e,l,n);c=Ce(c);const d=s.Nu(u);if(c instanceof Qh)i.push(u);else{const f=nl(c,d);f!=null&&(i.push(u),o.set(u,f))}});const a=new Wn(i);return new RV(o,a,s.fieldTransforms)}function uE(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[fh(e,r,n)],l=[s];if(i.length%2!=0)throw new Z(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(fh(e,i[f])),l.push(i[f+1]);const c=[],u=un.empty();for(let f=a.length-1;f>=0;--f)if(!MV(c,a[f])){const g=a[f];let v=l[f];v=Ce(v);const y=o.Nu(g);if(v instanceof Qh)c.push(g);else{const w=nl(v,y);w!=null&&(c.push(g),u.set(g,w))}}const d=new Wn(c);return new RV(u,d,o.fieldTransforms)}function DV(t,e,n,r=!1){return nl(n,t.Qu(r?4:3,e))}function nl(t,e){if(OV(t=Ce(t)))return dE("Unsupported field value:",e,t),jV(t,e);if(t instanceof el)return function(r,s){if(!NV(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=nl(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:jc(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jc(s.serializer,i)}}if(r instanceof sE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oa)return{bytesValue:IM(s.serializer,r._byteString)};if(r instanceof Vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rb(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Tb(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Sy(r)}`)}(t,e)}function jV(t,e){const n={};return qO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(t,(r,s)=>{const i=nl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function OV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof sE||t instanceof Oa||t instanceof Vt||t instanceof el||t instanceof Cy)}function dE(t,e,n){if(!OV(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Sy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function fh(t,e,n){if((e=Ce(e))instanceof Za)return e._internalPath;if(typeof e=="string")return Ry(t,e);throw ag("Field path arguments must be of type string or ",t,!1,void 0,n)}const qJ=new RegExp("[~\\*/\\[\\]]");function Ry(t,e,n){if(e.search(qJ)>=0)throw ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Za(...e.split("."))._internalPath}catch{throw ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ag(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Z(Q.INVALID_ARGUMENT,a+t+l)}function MV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ny("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GJ extends ph{data(){return super.data()}}function Ny(t,e){return typeof e=="string"?Ry(t,e):e instanceof Za?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hE{}class Yh extends hE{}function Uc(t,e,...n){let r=[];e instanceof hE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof uu).length,a=i.filter(l=>l instanceof Xh).length;if(o>1||o>0&&a>0)throw new Z(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Xh extends Yh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xh(e,n,r)}_apply(e){const n=this._parse(e);return $V(e._query,n),new fn(e.firestore,e.converter,Fw(e._query,n))}_parse(e){const n=tl(e.firestore);return function(i,o,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Z(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){FA(d,u);const g=[];for(const v of d)g.push($A(l,i,v));f={arrayValue:{values:g}}}else f=$A(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||FA(d,u),f=DV(a,o,d,u==="in"||u==="not-in");return Me.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fE(t,e,n){const r=e,s=Ny("where",t);return Xh._create(s,r,n)}class uu extends hE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)$V(o,l),o=Fw(o,l)}(e._query,n),new fn(e.firestore,e.converter,Fw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ame(...t){return t.forEach(e=>FV("or",e)),uu._create("or",t)}function lme(...t){return t.forEach(e=>FV("and",e)),uu._create("and",t)}class pE extends Yh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pE(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Z(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ch(i,o)}(e._query,this._field,this._direction);return new fn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new yi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ma(t,e="asc"){const n=e,r=Ny("orderBy",t);return pE._create(r,n)}class ky extends Yh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ky(e,n,r)}_apply(e){return new fn(e.firestore,e.converter,Xm(e._query,this._limit,this._limitType))}}function WJ(t){return SV("limit",t),ky._create("limit",t,"F")}function cme(t){return SV("limitToLast",t),ky._create("limitToLast",t,"L")}class Dy extends Yh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Dy(e,n,r)}_apply(e){const n=LV(e,this.type,this._docOrFields,this._inclusive);return new fn(e.firestore,e.converter,function(s,i){return new yi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function ume(...t){return Dy._create("startAt",t,!0)}function dme(...t){return Dy._create("startAfter",t,!1)}class jy extends Yh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jy(e,n,r)}_apply(e){const n=LV(e,this.type,this._docOrFields,this._inclusive);return new fn(e.firestore,e.converter,function(s,i){return new yi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function hme(...t){return jy._create("endBefore",t,!1)}function fme(...t){return jy._create("endAt",t,!0)}function LV(t,e,n,r){if(n[0]=Ce(n[0]),n[0]instanceof ph)return function(i,o,a,l,c){if(!l)throw new Z(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of lc(i))if(d.field.isKeyField())u.push(Pa(o,l.key));else{const f=l.data.field(d.field);if(fy(f))throw new Z(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const g=d.field.canonicalString();throw new Z(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}u.push(f)}return new _o(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=tl(t.firestore);return function(o,a,l,c,u,d){const f=o.explicitOrderBy;if(u.length>f.length)throw new Z(Q.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<u.length;v++){const y=u[v];if(f[v].field.isKeyField()){if(typeof y!="string")throw new Z(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!bb(o)&&y.indexOf("/")!==-1)throw new Z(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const w=o.path.child(Oe.fromString(y));if(!ie.isDocumentKey(w))throw new Z(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const x=new ie(w);g.push(Pa(a,x))}else{const w=DV(l,c,y);g.push(w)}}return new _o(g,d)}(t._query,t.firestore._databaseId,s,e,n,r)}}function $A(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new Z(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bb(e)&&n.indexOf("/")!==-1)throw new Z(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!ie.isDocumentKey(r))throw new Z(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pa(t,new ie(r))}if(n instanceof Vt)return Pa(t,n._key);throw new Z(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sy(n)}.`)}function FA(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $V(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function FV(t,e){if(!(e instanceof Xh||e instanceof uu))throw new Z(Q.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class UV{convertValue(e,n="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Oo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>mt(o.doubleValue));return new Cy(i)}convertGeoPoint(e){return new sE(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=py(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const n=ai(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);ye(MM(r));const s=new Ca(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Ot(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class HJ extends UV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pme(t){return new hh("sum",fh("sum",t))}function mme(t){return new hh("avg",fh("average",t))}function KJ(){return new hh("count")}function gme(t,e){var n,r;return t instanceof hh&&e instanceof hh&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function yme(t,e){return CV(t.query,e.query)&&si(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bc extends ph{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ny("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jp extends Bc{data(e={}){return super.data(e)}}class zc{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ca(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jp(this._firestore,this._userDataWriter,r.key,r,new ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Jp(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Jp(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ca(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:QJ(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}function vme(t,e){return t instanceof Bc&&e instanceof Bc?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof zc&&e instanceof zc&&t._firestore===e._firestore&&CV(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t){t=Re(t,Vt);const e=Re(t.firestore,nt);return EV(It(e),t._key).then(n=>xE(e,t,n))}class Vo extends UV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function xme(t){t=Re(t,Vt);const e=Re(t.firestore,nt),n=It(e),r=new Vo(e);return CJ(n,t._key).then(s=>new Bc(e,r,t._key,s,new ca(s!==null&&s.hasLocalMutations,!0),t.converter))}function wme(t){t=Re(t,Vt);const e=Re(t.firestore,nt);return EV(It(e),t._key,{source:"server"}).then(n=>xE(e,t,n))}function gE(t){t=Re(t,fn);const e=Re(t.firestore,nt),n=It(e),r=new Vo(e);return VV(t._query),TV(n,t._query).then(s=>new zc(e,r,t,s))}function _me(t){t=Re(t,fn);const e=Re(t.firestore,nt),n=It(e),r=new Vo(e);return PJ(n,t._query).then(s=>new zc(e,r,t,s))}function bme(t){t=Re(t,fn);const e=Re(t.firestore,nt),n=It(e),r=new Vo(e);return TV(n,t._query,{source:"server"}).then(s=>new zc(e,r,t,s))}function BV(t,e,n){t=Re(t,Vt);const r=Re(t.firestore,nt),s=Oy(t.converter,e,n);return Zh(r,[Ay(tl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,vt.none())])}function My(t,e,n,...r){t=Re(t,Vt);const s=Re(t.firestore,nt),i=tl(s);let o;return o=typeof(e=Ce(e))=="string"||e instanceof Za?uE(i,"updateDoc",t._key,e,n,r):cE(i,"updateDoc",t._key,e),Zh(s,[o.toMutation(t._key,vt.exists(!0))])}function yE(t){return Zh(Re(t.firestore,nt),[new su(t._key,vt.none())])}function vE(t,e){const n=Re(t.firestore,nt),r=dr(t),s=Oy(t.converter,e);return Zh(n,[Ay(tl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function Jh(t,...e){var n,r,s;t=Ce(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Jw(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Jw(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(t instanceof Vt)c=Re(t.firestore,nt),u=nu(t._key.path),l={next:d=>{e[o]&&e[o](xE(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Re(t,fn);c=Re(d.firestore,nt),u=d._query;const f=new Vo(c);l={next:g=>{e[o]&&e[o](new zc(c,f,d,g))},error:e[o+1],complete:e[o+2]},VV(t._query)}return function(f,g,v,y){const w=new Ty(y),x=new Kb(g,w,v);return f.asyncQueue.enqueueAndForget(async()=>Gb(await Fc(f),x)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>Wb(await Fc(f),x))}}(It(c),u,a,l)}function Eme(t,e){return RJ(It(t=Re(t,nt)),Jw(e)?e:{next:e})}function Zh(t,e){return function(r,s){const i=new rn;return r.asyncQueue.enqueueAndForget(async()=>sJ(await nE(r),s,i)),i.promise}(It(t),e)}function xE(t,e,n){const r=n.docs.get(e._key),s=new Vo(t);return new Bc(t,s,e._key,r,new ca(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tme(t){return YJ(t,{count:KJ()})}function YJ(t,e){const n=Re(t.firestore,nt),r=It(n),s=zO(e,(i,o)=>new xM(o,i.aggregateType,i._internalFieldPath));return AJ(r,t._query,s).then(i=>function(a,l,c){const u=new Vo(a);return new FJ(l,u,c)}(n,t,i))}class XJ{constructor(e){this.kind="memory",this._onlineComponentProvider=To.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Eo.provider}toJSON(){return{kind:this.kind}}}class JJ{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=rZ(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class ZJ{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Eo.provider}toJSON(){return{kind:this.kind}}}class eZ{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new wJ(e)}}toJSON(){return{kind:this.kind}}}function Ime(){return new ZJ}function Sme(t){return new eZ(t==null?void 0:t.cacheSizeBytes)}function Cme(t){return new XJ(t)}function Pme(t){return new JJ(t)}class tZ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=To.provider,this._offlineComponentProvider={build:n=>new eE(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class nZ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=To.provider,this._offlineComponentProvider={build:n=>new xV(n,e==null?void 0:e.cacheSizeBytes)}}}function rZ(t){return new tZ(t==null?void 0:t.forceOwnership)}function Ame(){return new nZ}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sZ={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tl(e)}set(e,n,r){this._verifyNotCommitted();const s=Wi(e,this._firestore),i=Oy(s.converter,n,r),o=Ay(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,vt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Wi(e,this._firestore);let o;return o=typeof(n=Ce(n))=="string"||n instanceof Za?uE(this._dataReader,"WriteBatch.update",i._key,n,r,s):cE(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Wi(e,this._firestore);return this._mutations=this._mutations.concat(new su(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wi(t,e){if((t=Ce(t)).firestore!==e)throw new Z(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=tl(n)}get(n){const r=Wi(n,this._firestore),s=new HJ(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return de();const o=i[0];if(o.isFoundDocument())return new ph(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new ph(this._firestore,s,r._key,null,r.converter);throw de()})}set(n,r,s){const i=Wi(n,this._firestore),o=Oy(i.converter,r,s),a=Ay(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=Wi(n,this._firestore);let a;return a=typeof(r=Ce(r))=="string"||r instanceof Za?uE(this._dataReader,"Transaction.update",o._key,r,s,i):cE(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Wi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Wi(e,this._firestore),r=new Vo(this._firestore);return super.get(e).then(s=>new Bc(this._firestore,r,n._key,s._document,new ca(!1,!1),n.converter))}}function Nme(t,e,n){t=Re(t,nt);const r=Object.assign(Object.assign({},sZ),n);return function(i){if(i.maxAttempts<1)throw new Z(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new rn;return i.asyncQueue.enqueueAndForget(async()=>{const c=await bV(i);new EJ(i.asyncQueue,c,a,o,l).au()}),l.promise}(It(t),s=>e(new oZ(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kme(){return new Qh("deleteField")}function zV(){return new iE("serverTimestamp")}function Dme(...t){return new oE("arrayUnion",t)}function jme(...t){return new aE("arrayRemove",t)}function qV(t){return new lE("increment",t)}function Ome(t){return new Cy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){return It(t=Re(t,nt)),new iZ(t,e=>Zh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mme(t,e){const n=It(t=Re(t,nt));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Vr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(u){throw new Z(Q.INVALID_ARGUMENT,"Failed to parse JSON: "+(u==null?void 0:u.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=UA(l,"collectionGroup"),u=[];if(Array.isArray(l.fields))for(const d of l.fields){const f=Ry("setIndexConfiguration",UA(d,"fieldPath"));d.arrayConfig==="CONTAINS"?u.push(new ga(f,2)):d.order==="ASCENDING"?u.push(new ga(f,0)):d.order==="DESCENDING"&&u.push(new ga(f,1))}a.push(new Pc(Pc.UNKNOWN_ID,c,u,Ac.empty()))}return a}(e);return DJ(n,r)}function UA(t,e){if(typeof t[e]!="string")throw new Z(Q.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Vme(t){var e;t=Re(t,nt);const n=BA.get(t);if(n)return n;if(((e=It(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new aZ(t);return BA.set(t,r),r}function Lme(t){GV(t,!0)}function $me(t){GV(t,!1)}function Fme(t){OJ(It(t._firestore)).then(e=>J("deleting all persistent cache indexes succeeded")).catch(e=>Vr("deleting all persistent cache indexes failed",e))}function GV(t,e){jJ(It(t._firestore),e).then(n=>J(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>Vr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const BA=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ume(t){var e;const n=(e=It(Re(t.firestore,nt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:vy(n,Sn(t._query))._t}function Bme(t,e){var n;const r=zO(e,(i,o)=>new xM(o,i.aggregateType,i._internalFieldPath)),s=(n=It(Re(t.firestore,nt))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return s===void 0?null:kM(s,rM(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zme{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return _E.instance.onExistenceFilterMismatch(e)}}class _E{constructor(){this.Uu=new Map}static get instance(){return op||(op=new _E,function(n){if(Jm)throw new Error("a TestingHooksSpi instance is already set");Jm=n}(op)),op}et(e){this.Uu.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Uu;return r.set(n,e),()=>r.delete(n)}}let op=null;(function(e,n=!0){(function(s){tu=s})(Xa),Zr(new Or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new nt(new NQ(r.getProvider("auth-internal")),new jQ(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Z(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Xn(NP,"4.7.3",e),Xn(NP,"4.7.3","esm2017")})();var lZ="firebase",cZ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(lZ,cZ,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="firebasestorage.googleapis.com",HV="storageBucket",uZ=2*60*1e3,dZ=10*60*1e3,hZ=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends Fr{constructor(e,n,r=0){super(j0(e),`Firebase Storage: ${n} (${j0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return j0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function j0(t){return"storage/"+t}function bE(){const t="An unknown error occurred, please check the error payload for server response.";return new St(pt.UNKNOWN,t)}function fZ(t){return new St(pt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function pZ(t){return new St(pt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mZ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(pt.UNAUTHENTICATED,t)}function gZ(){return new St(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yZ(t){return new St(pt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function KV(){return new St(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QV(){return new St(pt.CANCELED,"User canceled the upload/download.")}function vZ(t){return new St(pt.INVALID_URL,"Invalid URL '"+t+"'.")}function xZ(t){return new St(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function wZ(){return new St(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HV+"' property when initializing the app?")}function YV(){return new St(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _Z(){return new St(pt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function bZ(){return new St(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EZ(t){return new St(pt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zw(t){return new St(pt.INVALID_ARGUMENT,t)}function XV(){return new St(pt.APP_DELETED,"The Firebase app was deleted.")}function TZ(t){return new St(pt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pd(t,e){return new St(pt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Hu(t){throw new St(pt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=cr.makeFromUrl(e,n)}catch{return new cr(e,"")}if(r.path==="")return r;throw xZ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${u}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},y=n===WV?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",x=new RegExp(`^https?://${y}/${s}/${w}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:g,indices:v,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<b.length;S++){const k=b[S],R=k.regex.exec(e);if(R){const C=R[k.indices.bucket];let E=R[k.indices.path];E||(E=""),r=new cr(C,E),k.postModify(r);break}}if(r==null)throw vZ(e);return r}}class IZ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SZ(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function d(w){s=setTimeout(()=>{s=null,t(g,l())},w)}function f(){i&&clearTimeout(i)}function g(w,...x){if(c){f();return}if(w){f(),u.call(null,w,...x);return}if(l()||o){f(),u.call(null,w,...x);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let v=!1;function y(w){v||(v=!0,f(),!c&&(s!==null?(w||(a=2),clearTimeout(s),d(0)):w||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function CZ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PZ(t){return t!==void 0}function AZ(t){return typeof t=="function"}function RZ(t){return typeof t=="object"&&!Array.isArray(t)}function Vy(t){return typeof t=="string"||t instanceof String}function zA(t){return EE()&&t instanceof Blob}function EE(){return typeof Blob<"u"}function qA(t,e,n,r){if(r<e)throw Zw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function JV(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ya;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ya||(ya={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(e,n,r,s,i,o,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ap(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ya.NO_ERROR,l=i.getStatus();if(!a||ZV(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===ya.ABORT;r(!1,new ap(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ap(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());PZ(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=bE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?XV():QV();o(l)}else{const l=KV();o(l)}};this.canceled_?n(!1,new ap(!1,null,!0)):this.backoffId_=SZ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CZ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ap{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kZ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function DZ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jZ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function OZ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function MZ(t,e,n,r,s,i,o=!0){const a=JV(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return jZ(c,e),kZ(c,n),DZ(c,i),OZ(c,r),new NZ(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VZ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LZ(...t){const e=VZ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(EE())return new Blob(t);throw new St(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $Z(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FZ(t){if(typeof atob>"u")throw EZ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class O0{constructor(e,n){this.data=e,this.contentType=n||null}}function UZ(t,e){switch(t){case ms.RAW:return new O0(eL(e));case ms.BASE64:case ms.BASE64URL:return new O0(tL(t,e));case ms.DATA_URL:return new O0(zZ(e),qZ(e))}throw bE()}function eL(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function BZ(t){let e;try{e=decodeURIComponent(t)}catch{throw Pd(ms.DATA_URL,"Malformed data URL.")}return eL(e)}function tL(t,e){switch(t){case ms.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Pd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ms.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Pd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FZ(e)}catch(s){throw s.message.includes("polyfill")?s:Pd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class nL{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Pd(ms.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=GZ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function zZ(t){const e=new nL(t);return e.base64?tL(ms.BASE64,e.rest):BZ(e.rest)}function qZ(t){return new nL(t).contentType}function GZ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){let r=0,s="";zA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(zA(this.data_)){const r=this.data_,s=$Z(r,e,n);return s===null?null:new $s(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new $s(r,!0)}}static getBlob(...e){if(EE()){const n=e.map(r=>r instanceof $s?r.data_:r);return new $s(LZ.apply(null,n))}else{const n=e.map(o=>Vy(o)?UZ(ms.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new $s(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t){let e;try{e=JSON.parse(t)}catch{return null}return RZ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WZ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function HZ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function sL(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KZ(t,e){return e}class Nn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||KZ}}let lp=null;function QZ(t){return!Vy(t)||t.length<2?t:sL(t)}function TE(){if(lp)return lp;const t=[];t.push(new Nn("bucket")),t.push(new Nn("generation")),t.push(new Nn("metageneration")),t.push(new Nn("name","fullPath",!0));function e(i,o){return QZ(o)}const n=new Nn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Nn("size");return s.xform=r,t.push(s),t.push(new Nn("timeCreated")),t.push(new Nn("updated")),t.push(new Nn("md5Hash",null,!0)),t.push(new Nn("cacheControl",null,!0)),t.push(new Nn("contentDisposition",null,!0)),t.push(new Nn("contentEncoding",null,!0)),t.push(new Nn("contentLanguage",null,!0)),t.push(new Nn("contentType",null,!0)),t.push(new Nn("metadata","customMetadata",!0)),lp=t,lp}function YZ(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new cr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function XZ(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return YZ(r,t),r}function iL(t,e,n){const r=rL(e);return r===null?null:XZ(t,r,n)}function JZ(t,e,n,r){const s=rL(e);if(s===null||!Vy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+o(u)+"/o/"+o(d),g=du(f,n,r),v=JV({alt:"media",token:c});return g+v})[0]}function oL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class rl{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){if(!t)throw bE()}function IE(t,e){function n(r,s){const i=iL(t,s,e);return Xs(i!==null),i}return n}function ZZ(t,e){function n(r,s){const i=iL(t,s,e);return Xs(i!==null),JZ(i,s,t.host,t._protocol)}return n}function ef(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=gZ():s=mZ():n.getStatus()===402?s=pZ(t.bucket):n.getStatus()===403?s=yZ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function SE(t){const e=ef(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=fZ(t.path)),i.serverResponse=s.serverResponse,i}return n}function eee(t,e,n){const r=e.fullServerUrl(),s=du(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new rl(s,i,IE(t,n),o);return a.errorHandler=SE(e),a}function tee(t,e,n){const r=e.fullServerUrl(),s=du(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new rl(s,i,ZZ(t,n),o);return a.errorHandler=SE(e),a}function nee(t,e){const n=e.fullServerUrl(),r=du(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new rl(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=SE(e),a}function ree(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function aL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ree(null,e)),r}function lL(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let S=0;S<2;S++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=aL(e,r,s),u=oL(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",g=$s.getBlob(d,r,f);if(g===null)throw YV();const v={name:c.fullPath},y=du(i,t.host,t._protocol),w="POST",x=t.maxUploadRetryTime,_=new rl(y,w,IE(t,n),x);return _.urlParams=v,_.headers=o,_.body=g.uploadData(),_.errorHandler=ef(e),_}class lg{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function CE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Xs(!1)}return Xs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function see(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=aL(e,r,s),a={name:o.fullPath},l=du(i,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=oL(o,n),f=t.maxUploadRetryTime;function g(y){CE(y);let w;try{w=y.getResponseHeader("X-Goog-Upload-URL")}catch{Xs(!1)}return Xs(Vy(w)),w}const v=new rl(l,c,g,f);return v.urlParams=a,v.headers=u,v.body=d,v.errorHandler=ef(e),v}function iee(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const u=CE(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xs(!1)}d||Xs(!1);const f=Number(d);return Xs(!isNaN(f)),new lg(f,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new rl(n,o,i,a);return l.headers=s,l.errorHandler=ef(e),l}const GA=256*1024;function oee(t,e,n,r,s,i,o,a){const l=new lg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw _Z();const c=l.total-l.current;let u=c;s>0&&(u=Math.min(u,s));const d=l.current,f=d+u;let g="";u===0?g="finalize":c===u?g="upload, finalize":g="upload";const v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(d,f);if(y===null)throw YV();function w(S,k){const R=CE(S,["active","final"]),C=l.current+u,E=r.size();let I;return R==="final"?I=IE(e,i)(S,k):I=null,new lg(C,E,R==="final",I)}const x="POST",_=e.maxUploadRetryTime,b=new rl(n,x,w,_);return b.headers=v,b.body=y.uploadData(),b.progressCallback=a||null,b.errorHandler=ef(t),b}const Un={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function M0(t){switch(t){case"running":case"pausing":case"canceling":return Un.RUNNING;case"paused":return Un.PAUSED;case"success":return Un.SUCCESS;case"canceled":return Un.CANCELED;case"error":return Un.ERROR;default:return Un.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(e,n,r){if(AZ(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class lee{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ya.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ya.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ya.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Hu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class cee extends lee{initXhr(){this.xhr_.responseType="text"}}function Hi(){return new cee}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=TE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(pt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(ZV(s.status,[]))if(i)s=KV();else{this.sleepTime=Math.max(this.sleepTime*2,hZ),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(pt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=see(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Hi,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=iee(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Hi,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=GA*this._chunkMultiplier,n=new lg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=oee(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Hi,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){GA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=eee(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Hi,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=lL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Hi,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=QV(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=M0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new aee(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(M0(this._state)){case Un.SUCCESS:El(this._resolve.bind(null,this.snapshot))();break;case Un.CANCELED:case Un.ERROR:const n=this._reject;El(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(M0(this._state)){case Un.RUNNING:case Un.PAUSED:e.next&&El(e.next.bind(e,this.snapshot))();break;case Un.SUCCESS:e.complete&&El(e.complete.bind(e))();break;case Un.CANCELED:case Un.ERROR:e.error&&El(e.error.bind(e,this._error))();break;default:e.error&&El(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this._service=e,n instanceof cr?this._location=n:this._location=cr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Va(e,n)}get root(){const e=new cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sL(this._location.path)}get storage(){return this._service}get parent(){const e=WZ(this._location.path);if(e===null)return null;const n=new cr(this._location.bucket,e);return new Va(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TZ(e)}}function dee(t,e,n){t._throwIfRoot("uploadBytes");const r=lL(t.storage,t._location,TE(),new $s(e,!0),n);return t.storage.makeRequestWithTokens(r,Hi).then(s=>({metadata:s,ref:t}))}function hee(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new uee(t,new $s(e),n)}function fee(t){t._throwIfRoot("getDownloadURL");const e=tee(t.storage,t._location,TE());return t.storage.makeRequestWithTokens(e,Hi).then(n=>{if(n===null)throw bZ();return n})}function pee(t){t._throwIfRoot("deleteObject");const e=nee(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Hi)}function mee(t,e){const n=HZ(t._location.path,e),r=new cr(t._location.bucket,n);return new Va(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gee(t){return/^[A-Za-z]+:\/\//.test(t)}function yee(t,e){return new Va(t,e)}function cL(t,e){if(t instanceof PE){const n=t;if(n._bucket==null)throw wZ();const r=new Va(n,n._bucket);return e!=null?cL(r,e):r}else return e!==void 0?mee(t,e):t}function vee(t,e){if(e&&gee(e)){if(t instanceof PE)return yee(t,e);throw Zw("To use ref(service, url), the first argument must be a Storage instance.")}else return cL(t,e)}function WA(t,e){const n=e==null?void 0:e[HV];return n==null?null:cr.makeFromBucketSpec(n,t)}function xee(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Cj(s,t.app.options.projectId))}class PE{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=WV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uZ,this._maxUploadRetryTime=dZ,this._requests=new Set,s!=null?this._bucket=cr.makeFromBucketSpec(s,this._host):this._bucket=WA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cr.makeFromBucketSpec(this._url,e):this._bucket=WA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Va(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new IZ(XV());{const o=MZ(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const HA="@firebase/storage",KA="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL="storage";function wee(t,e,n){return t=Ce(t),dee(t,e,n)}function _ee(t,e,n){return t=Ce(t),hee(t,e,n)}function dL(t){return t=Ce(t),fee(t)}function bee(t){return t=Ce(t),pee(t)}function hL(t,e){return t=Ce(t),vee(t,e)}function Eee(t=ly(),e){t=Ce(t);const r=Cs(t,uL).getImmediate({identifier:e}),s=Tj("storage");return s&&Tee(r,...s),r}function Tee(t,e,n,r={}){xee(t,e,n,r)}function Iee(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new PE(n,r,s,e,Xa)}function See(){Zr(new Or(uL,Iee,"PUBLIC").setMultipleInstances(!0)),Xn(HA,KA,""),Xn(HA,KA,"esm2017")}See();const fL="@firebase/installations",AE="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=1e4,mL=`w:${AE}`,gL="FIS_v2",Cee="https://firebaseinstallations.googleapis.com/v1",Pee=60*60*1e3,Aee="installations",Ree="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nee={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},La=new Ya(Aee,Ree,Nee);function yL(t){return t instanceof Fr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL({projectId:t}){return`${Cee}/projects/${t}/installations`}function xL(t){return{token:t.token,requestStatus:2,expiresIn:Dee(t.expiresIn),creationTime:Date.now()}}async function wL(t,e){const r=(await e.json()).error;return La.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function _L({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kee(t,{refreshToken:e}){const n=_L(t);return n.append("Authorization",jee(e)),n}async function bL(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Dee(t){return Number(t.replace("s","000"))}function jee(t){return`${gL} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oee({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=vL(t),s=_L(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:gL,appId:t.appId,sdkVersion:mL},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await bL(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:xL(c.authToken)}}else throw await wL("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mee(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vee=/^[cdef][\w-]{21}$/,e_="";function Lee(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$ee(t);return Vee.test(n)?n:e_}catch{return e_}}function $ee(t){return Mee(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Map;function IL(t,e){const n=Ly(t);SL(n,e),Fee(n,e)}function SL(t,e){const n=TL.get(t);if(n)for(const r of n)r(e)}function Fee(t,e){const n=Uee();n&&n.postMessage({key:t,fid:e}),Bee()}let ua=null;function Uee(){return!ua&&"BroadcastChannel"in self&&(ua=new BroadcastChannel("[Firebase] FID Change"),ua.onmessage=t=>{SL(t.data.key,t.data.fid)}),ua}function Bee(){TL.size===0&&ua&&(ua.close(),ua=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zee="firebase-installations-database",qee=1,$a="firebase-installations-store";let V0=null;function RE(){return V0||(V0=Dj(zee,qee,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($a)}}})),V0}async function cg(t,e){const n=Ly(t),s=(await RE()).transaction($a,"readwrite"),i=s.objectStore($a),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&IL(t,e.fid),e}async function CL(t){const e=Ly(t),r=(await RE()).transaction($a,"readwrite");await r.objectStore($a).delete(e),await r.done}async function $y(t,e){const n=Ly(t),s=(await RE()).transaction($a,"readwrite"),i=s.objectStore($a),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&IL(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(t){let e;const n=await $y(t.appConfig,r=>{const s=Gee(r),i=Wee(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===e_?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Gee(t){const e=t||{fid:Lee(),registrationStatus:0};return PL(e)}function Wee(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(La.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Hee(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Kee(t)}:{installationEntry:e}}async function Hee(t,e){try{const n=await Oee(t,e);return cg(t.appConfig,n)}catch(n){throw yL(n)&&n.customData.serverCode===409?await CL(t.appConfig):await cg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Kee(t){let e=await QA(t.appConfig);for(;e.registrationStatus===1;)await EL(100),e=await QA(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await NE(t);return r||n}return e}function QA(t){return $y(t,e=>{if(!e)throw La.create("installation-not-found");return PL(e)})}function PL(t){return Qee(t)?{fid:t.fid,registrationStatus:0}:t}function Qee(t){return t.registrationStatus===1&&t.registrationTime+pL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yee({appConfig:t,heartbeatServiceProvider:e},n){const r=Xee(t,n),s=kee(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:mL,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await bL(()=>fetch(r,a));if(l.ok){const c=await l.json();return xL(c)}else throw await wL("Generate Auth Token",l)}function Xee(t,{fid:e}){return`${vL(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(t,e=!1){let n;const r=await $y(t.appConfig,i=>{if(!AL(i))throw La.create("not-registered");const o=i.authToken;if(!e&&ete(o))return i;if(o.requestStatus===1)return n=Jee(t,e),i;{if(!navigator.onLine)throw La.create("app-offline");const a=nte(i);return n=Zee(t,a),a}});return n?await n:r.authToken}async function Jee(t,e){let n=await YA(t.appConfig);for(;n.authToken.requestStatus===1;)await EL(100),n=await YA(t.appConfig);const r=n.authToken;return r.requestStatus===0?kE(t,e):r}function YA(t){return $y(t,e=>{if(!AL(e))throw La.create("not-registered");const n=e.authToken;return rte(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Zee(t,e){try{const n=await Yee(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await cg(t.appConfig,r),n}catch(n){if(yL(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await CL(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await cg(t.appConfig,r)}throw n}}function AL(t){return t!==void 0&&t.registrationStatus===2}function ete(t){return t.requestStatus===2&&!tte(t)}function tte(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Pee}function nte(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function rte(t){return t.requestStatus===1&&t.requestTime+pL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ste(t){const e=t,{installationEntry:n,registrationPromise:r}=await NE(e);return r?r.catch(console.error):kE(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ite(t,e=!1){const n=t;return await ote(n),(await kE(n,e)).token}async function ote(t){const{registrationPromise:e}=await NE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ate(t){if(!t||!t.options)throw L0("App Configuration");if(!t.name)throw L0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw L0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function L0(t){return La.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="installations",lte="installations-internal",cte=t=>{const e=t.getProvider("app").getImmediate(),n=ate(e),r=Cs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ute=t=>{const e=t.getProvider("app").getImmediate(),n=Cs(e,RL).getImmediate();return{getId:()=>ste(n),getToken:s=>ite(n,s)}};function dte(){Zr(new Or(RL,cte,"PUBLIC")),Zr(new Or(lte,ute,"PRIVATE"))}dte();Xn(fL,AE);Xn(fL,AE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="analytics",hte="firebase_id",fte="origin",pte=60*1e3,mte="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",DE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new ay("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gte={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hr=new Ya("analytics","Analytics",gte);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yte(t){if(!t.startsWith(DE)){const e=hr.create("invalid-gtag-resource",{gtagURL:t});return Jn.warn(e.message),""}return t}function NL(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function vte(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xte(t,e){const n=vte("firebase-js-sdk-policy",{createScriptURL:yte}),r=document.createElement("script"),s=`${DE}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function wte(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _te(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await NL(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Jn.error(a)}t("config",s,i)}async function bte(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await NL(n);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Jn.error(i)}}function Ete(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await bte(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await _te(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Jn.error(a)}}return s}function Tte(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=Ete(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function Ite(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(DE)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ste=30,Cte=1e3;class Pte{constructor(e={},n=Cte){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const kL=new Pte;function Ate(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Rte(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Ate(r)},i=mte.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw hr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Nte(t,e=kL,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw hr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw hr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new jte;return setTimeout(async()=>{a.abort()},n!==void 0?n:pte),DL({appId:r,apiKey:s,measurementId:i},o,a,e)}async function DL(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=kL){var i;const{appId:o,measurementId:a}=t;try{await kte(r,e)}catch(l){if(a)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await Rte(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Dte(c)){if(s.deleteThrottleMetadata(o),a)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?nP(n,s.intervalMillis,Ste):nP(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,d),Jn.debug(`Calling attemptFetch again in ${u} millis`),DL(t,d,r,s)}}function kte(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(hr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Dte(t){if(!(t instanceof Fr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class jte{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ote(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mte(){if(tb())try{await Rj()}catch(t){return Jn.warn(hr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Jn.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Vte(t,e,n,r,s,i,o){var a;const l=Nte(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Jn.error(g)),e.push(l);const c=Mte().then(g=>{if(g)return r.getId()}),[u,d]=await Promise.all([l,c]);Ite(i)||xte(i,u.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[fte]="firebase",f.update=!0,d!=null&&(f[hte]=d),s("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lte{constructor(e){this.app=e}_delete(){return delete Ad[this.app.options.appId],Promise.resolve()}}let Ad={},XA=[];const JA={};let $0="dataLayer",$te="gtag",ZA,jL,eR=!1;function Fte(){const t=[];if(Pj()&&t.push("This is a browser extension environment."),XG()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=hr.create("invalid-analytics-context",{errorInfo:e});Jn.warn(n.message)}}function Ute(t,e,n){Fte();const r=t.options.appId;if(!r)throw hr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hr.create("no-api-key");if(Ad[r]!=null)throw hr.create("already-exists",{id:r});if(!eR){wte($0);const{wrappedGtag:i,gtagCore:o}=Tte(Ad,XA,JA,$0,$te);jL=i,ZA=o,eR=!0}return Ad[r]=Vte(t,XA,JA,e,ZA,$0,n),new Lte(t)}function Bte(t=ly()){t=Ce(t);const e=Cs(t,ug);return e.isInitialized()?e.getImmediate():zte(t)}function zte(t,e={}){const n=Cs(t,ug);if(n.isInitialized()){const s=n.getImmediate();if(si(e,n.getOptions()))return s;throw hr.create("already-initialized")}return n.initialize({options:e})}function qte(t,e,n,r){t=Ce(t),Ote(jL,Ad[t.app.options.appId],e,n,r).catch(s=>Jn.error(s))}const tR="@firebase/analytics",nR="0.10.8";function Gte(){Zr(new Or(ug,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Ute(r,s,n)},"PUBLIC")),Zr(new Or("analytics-internal",t,"PRIVATE")),Xn(tR,nR),Xn(tR,nR,"esm2017");function t(e){try{const n=e.getProvider(ug).getImmediate();return{logEvent:(r,s,i)=>qte(n,r,s,i)}}catch(n){throw hr.create("interop-component-reg-failed",{reason:n})}}}Gte();const Wte={apiKey:"AIzaSyBVkdyjJi3l-QB1KpSQJle_P9ujHQ2LTn0",authDomain:"right-water.firebaseapp.com",projectId:"right-water",storageBucket:"right-water.appspot.com",messagingSenderId:"134412024932",appId:"1:134412024932:web:be47e36b50f087e2a87371",measurementId:"G-0RZ3XYPXR7"},Fy=jj(Wte),ds=bO(Fy),dt=$J(Fy),OL=Eee(Fy),Hte=Bte(Fy),ML=new Vs,VL=new Ms,LL=new Ls,Kte=Object.freeze(Object.defineProperty({__proto__:null,EmailAuthProvider:ko,Timestamp:it,addDoc:vE,analytics:Hte,auth:ds,collection:Rr,createUserWithEmailAndPassword:fb,db:dt,deleteDoc:yE,deleteObject:bee,doc:dr,facebookProvider:VL,getDoc:mE,getDocs:gE,getDownloadURL:dL,googleProvider:ML,increment:qV,limit:WJ,onAuthStateChanged:lO,onSnapshot:Jh,orderBy:Ma,query:Uc,reauthenticateWithCredential:iO,ref:hL,sendPasswordResetEmail:hb,serverTimestamp:zV,signInWithEmailAndPassword:pb,signInWithPopup:wO,signOut:cO,storage:OL,twitterProvider:LL,updateDoc:My,updatePassword:aO,updateProfile:rh,uploadBytes:wee,where:fE,writeBatch:wE},Symbol.toStringTag,{value:"Module"}));var Qte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Yte=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ce=(t,e)=>{const n=m.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},c)=>m.createElement("svg",{ref:c,...Qte,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Yte(t)}`,...l},[...e.map(([u,d])=>m.createElement(u,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},jE=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$L=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),hu=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Xte=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Jte=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Zte=ce("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ene=ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),tne=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Uy=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),FL=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),rR=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),t_=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),nne=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),sR=ce("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),iR=ce("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),rne=ce("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),sne=ce("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),ine=ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),one=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ane=ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),lne=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),mh=ce("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),cne=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),UL=ce("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),F0=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),une=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),dne=ce("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),hne=ce("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),fne=ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),pne=ce("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Fa=ce("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),mne=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),gne=ce("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),yne=ce("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),n_=ce("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),tn=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),vne=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),BL=ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),zL=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),tf=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),xne=ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),wne=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),_ne=ce("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),qL=ce("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),bne=ce("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),GL=ce("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),gh=ce("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ene=ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),WL=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),HL=ce("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Tne=ce("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),nf=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),KL=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),OE=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),rf=ce("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ine=ce("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),qc=ce("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ol=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Sne=ce("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Cne=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ME=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),QL=ce("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Pne=ce("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),Ane=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Rne=ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Nne=ce("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),By=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Gc=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),YL=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),XL=ce("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),JL=m.createContext();function _i(){return m.useContext(JL)}function kne({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!1),[i,o]=m.useState(!0);m.useEffect(()=>{const v=lO(ds,async y=>{if(o(!0),y){n(y);try{const w=await y.getIdTokenResult(!0);s(!!w.claims.admin)}catch(w){console.error("خطأ في التحقق من صلاحيات الأدمن:",w),s(!1)}}else n(null),s(!1);o(!1)});return()=>v()},[]);const g={currentUser:e,isAdmin:r,loading:i,signUp:async(v,y,w)=>{const _=(await fb(ds,v,y)).user;return await rh(_,{displayName:w}),await BV(dr(dt,"users",_.uid),{uid:_.uid,displayName:w,email:_.email,createdAt:zV(),role:"user"}),_},signIn:(v,y)=>pb(ds,v,y),signOut:()=>cO(ds),sendPasswordReset:v=>hb(ds,v,{url:`${window.location.origin}/login`}),updateUserProfile:async v=>{if(!e)return Promise.reject(new Error("No user is currently signed in."));await rh(e,v),n({...ds.currentUser})},reauthenticateAndChangePassword:async(v,y)=>{if(!e)throw new Error("No user is currently signed in.");const w=ko.credential(e.email,v);await iO(e,w),await aO(e,y)}};return i&&!e?h.jsxs("div",{className:"flex items-center justify-center h-screen bg-background",children:[h.jsx(tn,{className:"h-16 w-16 animate-spin text-primary"}),h.jsx("p",{className:"ml-4 text-xl text-foreground",children:"جاري التحميل..."})]}):h.jsx(JL.Provider,{value:g,children:!i&&t})}const Dne=10;let U0=0;function jne(){return U0=(U0+1)%Number.MAX_SAFE_INTEGER,U0.toString()}const B0=new Map,One=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Dne)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return B0.has(n)&&(clearTimeout(B0.get(n)),B0.delete(n)),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Zp=[];let em={toasts:[]};function tm(t){em=One(em,t),Zp.forEach(e=>{e(em)})}function Mne(t){const e=jne(),n=s=>tm({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>tm({type:"DISMISS_TOAST",toastId:e});return tm({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function pn(){const[t,e]=m.useState(em);return m.useEffect(()=>(Zp.push(e),()=>{const n=Zp.indexOf(e);n>-1&&Zp.splice(n,1)}),[t]),{...t,toast:Mne,dismiss:n=>tm({type:"DISMISS_TOAST",toastId:n})}}const ZL=m.createContext(),zy=()=>m.useContext(ZL),Vne=({children:t})=>{const[e,n]=m.useState([]),{toast:r}=pn();m.useEffect(()=>{const d=localStorage.getItem("cartItems");n(d?JSON.parse(d):[])},[]);const s=d=>{localStorage.setItem("cartItems",JSON.stringify(d)),n(d),window.dispatchEvent(new CustomEvent("cartUpdated"))},i=m.useCallback(d=>{n(f=>{const g=f.find(y=>y.id===d.id);let v;if(g)if(g.quantity<d.stock)v=f.map(y=>y.id===d.id?{...y,quantity:y.quantity+1}:y);else return r({title:"كمية غير كافية",description:`لا يمكن إضافة المزيد من منتج "${d.name}". الكمية القصوى في المخزون هي ${d.stock}.`,variant:"destructive"}),f;else if(d.stock>0)v=[...f,{...d,quantity:1}];else return r({title:"نفذ المخزون",description:`عفواً، منتج "${d.name}" غير متوفر حالياً.`,variant:"destructive"}),f;return s(v),r({title:"🛒 أضيف إلى السلة!",description:`${d.name} أصبح الآن في سلة التسوق الخاصة بك.`,className:"bg-green-500 text-white"}),v})},[r]),o=m.useCallback((d,f)=>{n(g=>{const v=g.map(y=>y.id===d?f<1?y:f>y.stock?(r({title:"كمية غير متوفرة",description:`الكمية المطلوبة لـ ${y.name} تتجاوز المخزون المتاح (${y.stock}).`,variant:"destructive"}),y):{...y,quantity:f}:y);return s(v),v})},[r]),a=m.useCallback(d=>{n(f=>{const g=f.filter(v=>v.id!==d);return s(g),r({title:"🗑️ تم الحذف من السلة",description:"تمت إزالة المنتج من سلة التسوق الخاصة بك.",className:"bg-red-500 text-white"}),g})},[r]),l=m.useCallback(()=>{s([])},[]),c=e.reduce((d,f)=>d+(f.price||0)*(f.quantity||0),0),u=e.reduce((d,f)=>d+(f.quantity||0),0);return h.jsx(ZL.Provider,{value:{cartItems:e,addItemToCart:i,updateItemQuantity:o,removeItemFromCart:a,clearCart:l,cartTotal:c,cartCount:u},children:t})};function e4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=e4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function t4(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=e4(t))&&(r&&(r+=" "),r+=e);return r}function Lne(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=n4(e))&&(r&&(r+=" "),r+=n);return r}function n4(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=n4(t[r]))&&(n&&(n+=" "),n+=e);return n}var VE="-";function $ne(t){var e=Une(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(a){var l=a.split(VE);return l[0]===""&&l.length!==1&&l.shift(),r4(l,e)||Fne(a)}function o(a,l){var c=n[a]||[];return l&&s[a]?[].concat(c,s[a]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function r4(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),s=r?r4(t.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(VE);return(o=e.validators.find(function(a){var l=a.validator;return l(i)}))==null?void 0:o.classGroupId}}var oR=/^\[(.+)\]$/;function Fne(t){if(oR.test(t)){var e=oR.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function Une(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},s=zne(Object.entries(t.classGroups),n);return s.forEach(function(i){var o=i[0],a=i[1];r_(a,r,o,e)}),r}function r_(t,e,n,r){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:aR(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Bne(s)){r_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(o){var a=o[0],l=o[1];r_(l,aR(e,a),n,r)})})}function aR(t,e){var n=t;return e.split(VE).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function Bne(t){return t.isThemeGetter}function zne(t,e){return e?t.map(function(n){var r=n[0],s=n[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,i]}):t}function qne(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function s(i,o){n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):s(o,a)}}}var s4="!";function Gne(t){var e=t.separator||":",n=e.length===1,r=e[0],s=e.length;return function(o){for(var a=[],l=0,c=0,u,d=0;d<o.length;d++){var f=o[d];if(l===0){if(f===r&&(n||o.slice(d,d+s)===e)){a.push(o.slice(c,d)),c=d+s;continue}if(f==="/"){u=d;continue}}f==="["?l++:f==="]"&&l--}var g=a.length===0?o:o.substring(c),v=g.startsWith(s4),y=v?g.substring(1):g,w=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:w}}}function Wne(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function Hne(t){return{cache:qne(t.cacheSize),splitModifiers:Gne(t),...$ne(t)}}var Kne=/\s+/;function Qne(t,e){var n=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(Kne).map(function(o){var a=n(o),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,d=a.maybePostfixModifierPosition,f=r(d?u.substring(0,d):u),g=!!d;if(!f){if(!d)return{isTailwindClass:!1,originalClassName:o};if(f=r(u),!f)return{isTailwindClass:!1,originalClassName:o};g=!1}var v=Wne(l).join(":"),y=c?v+s4:v;return{isTailwindClass:!0,modifierId:y,classGroupId:f,originalClassName:o,hasPostfixModifier:g}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,u=a+l;return i.has(u)?!1:(i.add(u),s(l,c).forEach(function(d){return i.add(a+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Yne(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,s,i,o=a;function a(c){var u=e[0],d=e.slice(1),f=d.reduce(function(g,v){return v(g)},u());return r=Hne(f),s=r.cache.get,i=r.cache.set,o=l,l(c)}function l(c){var u=s(c);if(u)return u;var d=Qne(c,r);return i(c,d),d}return function(){return o(Lne.apply(null,arguments))}}function lt(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var i4=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xne=/^\d+\/\d+$/,Jne=new Set(["px","full","screen"]),Zne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ere=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tre=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function qr(t){return da(t)||Jne.has(t)||Xne.test(t)||s_(t)}function s_(t){return sl(t,"length",are)}function nre(t){return sl(t,"size",o4)}function rre(t){return sl(t,"position",o4)}function sre(t){return sl(t,"url",lre)}function cp(t){return sl(t,"number",da)}function da(t){return!Number.isNaN(Number(t))}function ire(t){return t.endsWith("%")&&da(t.slice(0,-1))}function Ku(t){return lR(t)||sl(t,"number",lR)}function De(t){return i4.test(t)}function Qu(){return!0}function ki(t){return Zne.test(t)}function ore(t){return sl(t,"",cre)}function sl(t,e,n){var r=i4.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function are(t){return ere.test(t)}function o4(){return!1}function lre(t){return t.startsWith("url(")}function lR(t){return Number.isInteger(Number(t))}function cre(t){return tre.test(t)}function ure(){var t=lt("colors"),e=lt("spacing"),n=lt("blur"),r=lt("brightness"),s=lt("borderColor"),i=lt("borderRadius"),o=lt("borderSpacing"),a=lt("borderWidth"),l=lt("contrast"),c=lt("grayscale"),u=lt("hueRotate"),d=lt("invert"),f=lt("gap"),g=lt("gradientColorStops"),v=lt("gradientColorStopPositions"),y=lt("inset"),w=lt("margin"),x=lt("opacity"),_=lt("padding"),b=lt("saturate"),S=lt("scale"),k=lt("sepia"),R=lt("skew"),C=lt("space"),E=lt("translate"),I=function(){return["auto","contain","none"]},P=function(){return["auto","hidden","clip","visible","scroll"]},D=function(){return["auto",De,e]},j=function(){return[De,e]},N=function(){return["",qr]},L=function(){return["auto",da,De]},B=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},O=function(){return["solid","dashed","dotted","double","none"]},M=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},U=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",De]},F=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},z=function(){return[da,cp]},q=function(){return[da,De]};return{cacheSize:500,theme:{colors:[Qu],spacing:[qr],blur:["none","",ki,De],brightness:z(),borderColor:[t],borderRadius:["none","","full",ki,De],borderSpacing:j(),borderWidth:N(),contrast:z(),grayscale:$(),hueRotate:q(),invert:$(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[ire,s_],inset:D(),margin:D(),opacity:z(),padding:j(),saturate:z(),scale:z(),sepia:$(),skew:q(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[ki]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(B(),[De])}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ku]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Ku]}],"grid-cols":[{"grid-cols":[Qu]}],"col-start-end":[{col:["auto",{span:["full",Ku]},De]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Qu]}],"row-start-end":[{row:["auto",{span:[Ku]},De]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(U())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(U(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(U(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",De,e]}],"min-w":[{"min-w":["min","max","fit",De,qr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ki]},ki,De]}],h:[{h:[De,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",De,qr]}],"max-h":[{"max-h":[De,e,"min","max","fit"]}],"font-size":[{text:["base",ki,s_]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cp]}],"font-family":[{font:[Qu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",da,cp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",De,qr]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(O(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",qr]}],"underline-offset":[{"underline-offset":["auto",De,qr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(B(),[rre])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nre]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sre]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(O(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:O()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(O())}],"outline-offset":[{"outline-offset":[De,qr]}],"outline-w":[{outline:[qr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[qr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ki,ore]}],"shadow-color":[{shadow:[Qu]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":M()}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ki,De]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ku,De]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[qr,cp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var dre=Yne(ure);function fe(...t){return dre(t4(t))}function cR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sf(...t){return e=>{let n=!1;const r=t.map(s=>{const i=cR(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():cR(t[s],null)}}}}function Ne(...t){return m.useCallback(sf(...t),t)}function Wc(t){const e=fre(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),l=a.find(mre);if(l){const c=l.props.children,u=a.map(d=>d===l?m.Children.count(c)>1?m.Children.only(null):m.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:m.isValidElement(c)?m.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var hre=Wc("Slot");function fre(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n,o=m.isValidElement(s)?yre(s):void 0,a=Ne(o,r);if(m.isValidElement(s)){const l=gre(i,s.props);return s.type!==m.Fragment&&(l.ref=a),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var a4=Symbol("radix.slottable");function pre(t){const e=({children:n})=>h.jsx(h.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=a4,e}function mre(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===a4}function gre(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function yre(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const uR=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,dR=t4,qy=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return dR(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=uR(u)||uR(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...g}=u;return Object.entries(g).every(v=>{let[y,w]=v;return Array.isArray(w)?w.includes({...i,...a}[y]):{...i,...a}[y]===w})?[...c,d,f]:c},[]);return dR(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},LE=qy("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),we=oe.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?hre:"button";return h.jsx(o,{className:fe(LE({variant:e,size:n,className:t})),ref:i,...s})});we.displayName="Button";const vre=()=>{const{currentUser:t,isAdmin:e,signOut:n}=_i(),r=er(),{toast:s}=pn(),[i,o]=m.useState(0);m.useEffect(()=>{const l=()=>{const c=JSON.parse(localStorage.getItem("cartItems"))||[];o(c.reduce((u,d)=>u+d.quantity,0))};return l(),window.addEventListener("cartUpdated",l),()=>window.removeEventListener("cartUpdated",l)},[]);const a=async()=>{try{await n(),s({title:"تم تسجيل الخروج بنجاح!",description:"نأمل رؤيتك مرة أخرى قريباً.",variant:"default"}),r("/")}catch(l){s({title:"خطأ في تسجيل الخروج",description:l.message,variant:"destructive"})}};return h.jsx(me.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"bg-gradient-to-r from-water-blue to-water-green/80 shadow-lg sticky top-0 z-50 py-3 px-4 md:px-8",children:h.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[h.jsxs(Le,{to:"/",className:"flex items-center space-x-2 text-white hover:opacity-90 transition-opacity","aria-label":"الصفحة الرئيسية",children:[h.jsx(mh,{size:36,className:"text-white"}),h.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"رايت واتر"})]}),h.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 md:space-x-4",children:[h.jsx(Le,{to:"/products",children:h.jsx(we,{"aria-label":"المنتجات",variant:"ghost",className:"text-white hover:bg-white/20 px-2 sm:px-3",children:"المنتجات"})}),h.jsx(Le,{to:"/cart",children:h.jsxs(we,{"aria-label":"السلة",variant:"ghost",className:"text-white hover:bg-white/20 relative px-2 sm:px-3",children:[h.jsx(qc,{size:20}),h.jsx("span",{className:"ml-1 hidden md:inline",children:"السلة"}),i>0&&h.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] rounded-full min-h-4 min-w-4 px-[4px] flex items-center justify-center",children:i>99?"99+":i})]})}),t?h.jsxs(h.Fragment,{children:[e&&h.jsx(Le,{to:"/AdminDashboard",children:h.jsxs(we,{"aria-label":"لوحة التحكم",variant:"ghost",className:"text-white hover:bg-white/20 px-2 sm:px-3",children:[h.jsx(rf,{size:20}),h.jsx("span",{className:"ml-1 hidden md:inline",children:"التحكم"})]})}),h.jsx(Le,{to:"/profile",children:h.jsxs(we,{"aria-label":"الملف الشخصي",variant:"ghost",className:"text-white hover:bg-white/20 px-2 sm:px-3",children:[h.jsx(By,{size:20}),h.jsx("span",{className:"ml-1 hidden md:inline",children:"ملفي"})]})}),h.jsxs(we,{"aria-label":"تسجيل الخروج",variant:"ghost",onClick:a,className:"text-white hover:bg-white/20 px-2 sm:px-3",children:[h.jsx(zL,{size:20}),h.jsx("span",{className:"ml-1 hidden md:inline",children:"خروج"})]})]}):h.jsx(Le,{to:"/login",children:h.jsxs(we,{"aria-label":"تسجيل الدخول",variant:"outline",className:"text-white border-white hover:bg-white hover:text-primary px-2 sm:px-3",children:[h.jsx(BL,{size:20}),h.jsx("span",{className:"ml-1",children:"دخول"})]})})]})]})})},xre=()=>{const t=new Date().getFullYear(),e={facebook:"https://www.facebook.com/share/1AMT8hGZMM/",twitter:"https://twitter.com/your_username",instagram:"https://instagram.com/your_username",linkedin:"https://linkedin.com/company/your_company"};return h.jsxs(me.footer,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"bg-gradient-to-r from-water-blue-dark to-water-blue text-primary-foreground py-12 px-4",children:[h.jsxs("div",{className:"container mx-auto grid grid-cols-1 md:grid-cols-4 gap-8 text-center md:text-right",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsxs("div",{className:"flex items-center justify-center md:justify-start mb-4",children:[h.jsx(mh,{size:32,className:"mr-2"}),h.jsx("span",{className:"text-2xl font-bold",children:"رايت ووتر"})]}),h.jsx("p",{className:"text-sm text-blue-100 max-w-md",children:"نلتزم بتوفير أنظمة معالجة مياه وحلول شرب صحية عالية الجودة لضمان حياة أفضل."})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xl font-semibold mb-4",children:"روابط سريعة"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx(Le,{to:"/",className:"hover:text-water-blue-light transition-colors",children:"الرئيسية"})}),h.jsx("li",{children:h.jsx(Le,{to:"/products",className:"hover:text-water-blue-light transition-colors",children:"المنتجات"})}),h.jsx("li",{children:h.jsx(Le,{to:"/about",className:"hover:text-water-blue-light transition-colors",children:"عن الشركة"})}),h.jsx("li",{children:h.jsx(Le,{to:"/contact",className:"hover:text-water-blue-light transition-colors",children:"اتصل بنا"})}),h.jsx("li",{children:h.jsx(Le,{to:"/terms-conditions",className:"hover:text-water-blue-light transition-colors",children:"الشروط والأحكام"})})]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xl font-semibold mb-4",children:"تابعنا"}),h.jsxs("div",{className:"flex justify-center md:justify-start space-x-4 space-x-reverse mb-4",children:[h.jsx("a",{href:e.facebook,target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"hover:text-water-blue-light transition-colors",children:h.jsx(UL,{size:24})}),h.jsx("a",{href:e.twitter,target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",className:"hover:text-water-blue-light transition-colors",children:h.jsx(QL,{size:24})}),h.jsx("a",{href:e.instagram,target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"hover:text-water-blue-light transition-colors",children:h.jsx(pne,{size:24})}),h.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn",className:"hover:text-water-blue-light transition-colors",children:h.jsx(gne,{size:24})})]})]})]}),h.jsx("div",{className:"mt-8 pt-8 border-t border-water-blue-light/30 text-center text-sm text-blue-100",children:h.jsxs("p",{children:["© ",t," شركة رايت ووتر. جميع الحقوق محفوظة."]})})]})};function ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function wre(t,e){const n=m.createContext(e),r=i=>{const{children:o,...a}=i,l=m.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function xr(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),l=n.length;n=[...n,o];const c=d=>{var x;const{scope:f,children:g,...v}=d,y=((x=f==null?void 0:f[t])==null?void 0:x[l])||a,w=m.useMemo(()=>v,Object.values(v));return h.jsx(y.Provider,{value:w,children:g})};c.displayName=i+"Provider";function u(d,f){var y;const g=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=m.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,_re(s,...e)]}function _re(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Gy(t){const e=t+"CollectionProvider",[n,r]=xr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:x}=y,_=oe.useRef(null),b=oe.useRef(new Map).current;return h.jsx(s,{scope:w,itemMap:b,collectionRef:_,children:x})};o.displayName=e;const a=t+"CollectionSlot",l=Wc(a),c=oe.forwardRef((y,w)=>{const{scope:x,children:_}=y,b=i(a,x),S=Ne(w,b.collectionRef);return h.jsx(l,{ref:S,children:_})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Wc(u),g=oe.forwardRef((y,w)=>{const{scope:x,children:_,...b}=y,S=oe.useRef(null),k=Ne(w,S),R=i(u,x);return oe.useEffect(()=>(R.itemMap.set(S,{ref:S,...b}),()=>void R.itemMap.delete(S))),h.jsx(f,{[d]:"",ref:k,children:_})});g.displayName=u;function v(y){const w=i(t+"CollectionConsumer",y);return oe.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const b=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((R,C)=>b.indexOf(R.ref.current)-b.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var bre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ve=bre.reduce((t,e)=>{const n=Wc(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function $E(t,e){t&&ns.flushSync(()=>t.dispatchEvent(e))}function sn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function l4(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Ere="DismissableLayer",i_="dismissableLayer.update",Tre="dismissableLayer.pointerDownOutside",Ire="dismissableLayer.focusOutside",hR,c4=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wy=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=m.useContext(c4),[u,d]=m.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),v=Ne(e,C=>d(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(w),_=u?y.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=_>=x,k=Cre(C=>{const E=C.target,I=[...c.branches].some(P=>P.contains(E));!S||I||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),R=Pre(C=>{const E=C.target;[...c.branches].some(P=>P.contains(E))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return l4(C=>{_===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),m.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(hR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),fR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=hR)}},[u,f,n,c]),m.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),fR())},[u,c]),m.useEffect(()=>{const C=()=>g({});return document.addEventListener(i_,C),()=>document.removeEventListener(i_,C)},[]),h.jsx(Ve.div,{...l,ref:v,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,R.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,k.onPointerDownCapture)})});Wy.displayName=Ere;var Sre="DismissableLayerBranch",u4=m.forwardRef((t,e)=>{const n=m.useContext(c4),r=m.useRef(null),s=Ne(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),h.jsx(Ve.div,{...t,ref:s})});u4.displayName=Sre;function Cre(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){d4(Tre,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Pre(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&d4(Ire,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fR(){const t=new CustomEvent(i_);document.dispatchEvent(t)}function d4(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?$E(s,i):s.dispatchEvent(i)}var Are=Wy,Rre=u4,Lr=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},Nre="Portal",Hy=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);Lr(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Kg.createPortal(h.jsx(Ve.div,{...r,ref:e}),o):null});Hy.displayName=Nre;function kre(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var Ur=t=>{const{present:e,children:n}=t,r=Dre(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Ne(r.ref,jre(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};Ur.displayName="Presence";function Dre(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[a,l]=kre(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const c=up(r.current);i.current=a==="mounted"?c:"none"},[a]),Lr(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,g=up(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Lr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=g=>{const y=up(r.current).includes(g.animationName);if(g.target===e&&y&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=g=>{g.target===e&&(i.current=up(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function up(t){return(t==null?void 0:t.animationName)||"none"}function jre(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ore=Ih[" useInsertionEffect ".trim().toString()]||Lr;function il({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=Mre({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const u=m.useRef(t!==void 0);m.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=m.useCallback(u=>{var d;if(a){const f=Vre(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else i(u)},[a,t,i,o]);return[l,c]}function Mre({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return Ore(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Vre(t){return typeof t=="function"}var Lre=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$re="VisuallyHidden",FE=m.forwardRef((t,e)=>h.jsx(Ve.span,{...t,ref:e,style:{...Lre,...t.style}}));FE.displayName=$re;var UE="ToastProvider",[BE,Fre,Ure]=Gy("Toast"),[h4,qme]=xr("Toast",[Ure]),[Bre,Ky]=h4(UE),f4=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=m.useState(null),[c,u]=m.useState(0),d=m.useRef(!1),f=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${UE}\`. Expected non-empty \`string\`.`),h.jsx(BE.Provider,{scope:e,children:h.jsx(Bre,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:m.useCallback(()=>u(g=>g+1),[]),onToastRemove:m.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};f4.displayName=UE;var p4="ToastViewport",zre=["F8"],o_="toast.viewportPause",a_="toast.viewportResume",m4=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=zre,label:s="Notifications ({hotkey})",...i}=t,o=Ky(p4,n),a=Fre(n),l=m.useRef(null),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),f=Ne(e,d,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;m.useEffect(()=>{const w=x=>{var b;r.length!==0&&r.every(S=>x[S]||x.code===S)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=l.current,x=d.current;if(v&&w&&x){const _=()=>{if(!o.isClosePausedRef.current){const R=new CustomEvent(o_);x.dispatchEvent(R),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const R=new CustomEvent(a_);x.dispatchEvent(R),o.isClosePausedRef.current=!1}},S=R=>{!w.contains(R.relatedTarget)&&b()},k=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",_),w.addEventListener("focusout",S),w.addEventListener("pointermove",_),w.addEventListener("pointerleave",k),window.addEventListener("blur",_),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",_),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",_),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",_),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:w})=>{const _=a().map(b=>{const S=b.ref.current,k=[S,...nse(S)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?_.reverse():_).flat()},[a]);return m.useEffect(()=>{const w=d.current;if(w){const x=_=>{var k,R,C;const b=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!b){const E=document.activeElement,I=_.shiftKey;if(_.target===w&&I){(k=c.current)==null||k.focus();return}const j=y({tabbingDirection:I?"backwards":"forwards"}),N=j.findIndex(L=>L===E);z0(j.slice(N+1))?_.preventDefault():I?(R=c.current)==null||R.focus():(C=u.current)==null||C.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[a,y]),h.jsxs(Rre,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&h.jsx(l_,{ref:c,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});z0(w)}}),h.jsx(BE.Slot,{scope:n,children:h.jsx(Ve.ol,{tabIndex:-1,...i,ref:f})}),v&&h.jsx(l_,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});z0(w)}})]})});m4.displayName=p4;var g4="ToastFocusProxy",l_=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Ky(g4,n);return h.jsx(FE,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});l_.displayName=g4;var of="Toast",qre="toast.swipeStart",Gre="toast.swipeMove",Wre="toast.swipeCancel",Hre="toast.swipeEnd",y4=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=il({prop:r,defaultProp:s??!0,onChange:i,caller:of});return h.jsx(Ur,{present:n||a,children:h.jsx(Yre,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:sn(t.onPause),onResume:sn(t.onResume),onSwipeStart:ge(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ge(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ge(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ge(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});y4.displayName=of;var[Kre,Qre]=h4(of,{onClose(){}}),Yre=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:g,...v}=t,y=Ky(of,n),[w,x]=m.useState(null),_=Ne(e,L=>x(L)),b=m.useRef(null),S=m.useRef(null),k=s||y.duration,R=m.useRef(0),C=m.useRef(k),E=m.useRef(0),{onToastAdd:I,onToastRemove:P}=y,D=sn(()=>{var B;(w==null?void 0:w.contains(document.activeElement))&&((B=y.viewport)==null||B.focus()),o()}),j=m.useCallback(L=>{!L||L===1/0||(window.clearTimeout(E.current),R.current=new Date().getTime(),E.current=window.setTimeout(D,L))},[D]);m.useEffect(()=>{const L=y.viewport;if(L){const B=()=>{j(C.current),c==null||c()},O=()=>{const M=new Date().getTime()-R.current;C.current=C.current-M,window.clearTimeout(E.current),l==null||l()};return L.addEventListener(o_,O),L.addEventListener(a_,B),()=>{L.removeEventListener(o_,O),L.removeEventListener(a_,B)}}},[y.viewport,k,l,c,j]),m.useEffect(()=>{i&&!y.isClosePausedRef.current&&j(k)},[i,k,y.isClosePausedRef,j]),m.useEffect(()=>(I(),()=>P()),[I,P]);const N=m.useMemo(()=>w?T4(w):null,[w]);return y.viewport?h.jsxs(h.Fragment,{children:[N&&h.jsx(Xre,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:N}),h.jsx(Kre,{scope:n,onClose:D,children:ns.createPortal(h.jsx(BE.ItemSlot,{scope:n,children:h.jsx(Are,{asChild:!0,onEscapeKeyDown:ge(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||D(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ge(t.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:ge(t.onPointerDown,L=>{L.button===0&&(b.current={x:L.clientX,y:L.clientY})}),onPointerMove:ge(t.onPointerMove,L=>{if(!b.current)return;const B=L.clientX-b.current.x,O=L.clientY-b.current.y,M=!!S.current,U=["left","right"].includes(y.swipeDirection),$=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,F=U?$(0,B):0,z=U?0:$(0,O),q=L.pointerType==="touch"?10:2,W={x:F,y:z},Y={originalEvent:L,delta:W};M?(S.current=W,dp(Gre,d,Y,{discrete:!1})):pR(W,y.swipeDirection,q)?(S.current=W,dp(qre,u,Y,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(B)>q||Math.abs(O)>q)&&(b.current=null)}),onPointerUp:ge(t.onPointerUp,L=>{const B=S.current,O=L.target;if(O.hasPointerCapture(L.pointerId)&&O.releasePointerCapture(L.pointerId),S.current=null,b.current=null,B){const M=L.currentTarget,U={originalEvent:L,delta:B};pR(B,y.swipeDirection,y.swipeThreshold)?dp(Hre,g,U,{discrete:!0}):dp(Wre,f,U,{discrete:!0}),M.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),Xre=t=>{const{__scopeToast:e,children:n,...r}=t,s=Ky(of,e),[i,o]=m.useState(!1),[a,l]=m.useState(!1);return ese(()=>o(!0)),m.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Hy,{asChild:!0,children:h.jsx(FE,{...r,children:i&&h.jsxs(h.Fragment,{children:[s.label," ",n]})})})},Jre="ToastTitle",v4=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(Ve.div,{...r,ref:e})});v4.displayName=Jre;var Zre="ToastDescription",x4=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(Ve.div,{...r,ref:e})});x4.displayName=Zre;var w4="ToastAction",_4=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?h.jsx(E4,{altText:n,asChild:!0,children:h.jsx(zE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${w4}\`. Expected non-empty \`string\`.`),null)});_4.displayName=w4;var b4="ToastClose",zE=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=Qre(b4,n);return h.jsx(E4,{asChild:!0,children:h.jsx(Ve.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,s.onClose)})})});zE.displayName=b4;var E4=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return h.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function T4(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),tse(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...T4(r))}}),e}function dp(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?$E(s,i):s.dispatchEvent(i)}var pR=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function ese(t=()=>{}){const e=sn(t);Lr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function tse(t){return t.nodeType===t.ELEMENT_NODE}function nse(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function z0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var rse=f4,I4=m4,S4=y4,C4=v4,P4=x4,A4=_4,R4=zE;const sse=rse,N4=oe.forwardRef(({className:t,...e},n)=>h.jsx(I4,{ref:n,className:fe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));N4.displayName=I4.displayName;const ise=qy("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),k4=oe.forwardRef(({className:t,variant:e,...n},r)=>h.jsx(S4,{ref:r,className:fe(ise({variant:e}),t),...n}));k4.displayName=S4.displayName;const ose=oe.forwardRef(({className:t,...e},n)=>h.jsx(A4,{ref:n,className:fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));ose.displayName=A4.displayName;const D4=oe.forwardRef(({className:t,...e},n)=>h.jsx(R4,{ref:n,className:fe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:h.jsx(YL,{className:"h-4 w-4"})}));D4.displayName=R4.displayName;const j4=oe.forwardRef(({className:t,...e},n)=>h.jsx(C4,{ref:n,className:fe("text-sm font-semibold",t),...e}));j4.displayName=C4.displayName;const O4=oe.forwardRef(({className:t,...e},n)=>h.jsx(P4,{ref:n,className:fe("text-sm opacity-90",t),...e}));O4.displayName=P4.displayName;function M4(){const{toasts:t}=pn();return h.jsxs(sse,{children:[t.map(({id:e,title:n,description:r,action:s,...i})=>h.jsxs(k4,{...i,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(j4,{children:n}),r&&h.jsx(O4,{children:r})]}),s,h.jsx(D4,{})]},e)),h.jsx(N4,{})]})}const ase=()=>h.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[h.jsx(vre,{}),h.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:h.jsx(k1,{})}),h.jsx(xre,{}),h.jsx(M4,{})]}),mR=({adminOnly:t=!1})=>{const{currentUser:e,isAdmin:n,loading:r}=_i(),s=Ro();return r?h.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background",children:[h.jsx(tn,{className:"h-16 w-16 animate-spin text-primary"}),h.jsx("p",{className:"mt-4 text-xl text-foreground",children:"جاري التحقق..."})]}):e?t&&!n?h.jsx(KS,{to:"/",replace:!0}):h.jsx(k1,{}):h.jsx(KS,{to:"/login",state:{from:s},replace:!0})};let lse={data:""},cse=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||lse,use=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,dse=/\/\*[^]*?\*\/|  +/g,gR=/\n+/g,Ki=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Ki(o,i):i+"{"+Ki(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ki(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ki.p?Ki.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Ns={},V4=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+V4(t[n]);return e}return t},hse=(t,e,n,r,s)=>{let i=V4(t),o=Ns[i]||(Ns[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Ns[o]){let l=i!==t?t:(c=>{let u,d,f=[{}];for(;u=use.exec(c.replace(dse,""));)u[4]?f.shift():u[3]?(d=u[3].replace(gR," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][u[1]]=u[2].replace(gR," ").trim();return f[0]})(t);Ns[o]=Ki(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Ns.g?Ns.g:null;return n&&(Ns.g=Ns[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Ns[o],e,r,a),o},fse=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ki(a,""):a===!1?"":a}return r+s+(o??"")},"");function Qy(t){let e=this||{},n=t.call?t(e.p):t;return hse(n.unshift?n.raw?fse(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,cse(e.target),e.g,e.o,e.k)}let L4,c_,u_;Qy.bind({g:1});let ci=Qy.bind({k:1});function pse(t,e,n,r){Ki.p=e,L4=t,c_=n,u_=r}function Lo(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:c_&&c_()},a),n.o=/ *go\d+/.test(l),a.className=Qy.apply(n,r)+(l?" "+l:""),e&&(a.ref=o);let c=t;return t[0]&&(c=a.as||t,delete a.as),u_&&c[0]&&u_(a),L4(c,a)}return e?e(s):s}}var mse=t=>typeof t=="function",dg=(t,e)=>mse(t)?t(e):t,gse=(()=>{let t=0;return()=>(++t).toString()})(),$4=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),yse=20,F4=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,yse)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return F4(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},nm=[],ha={toasts:[],pausedAt:void 0},ol=t=>{ha=F4(ha,t),nm.forEach(e=>{e(ha)})},vse={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},xse=(t={})=>{let[e,n]=m.useState(ha),r=m.useRef(ha);m.useEffect(()=>(r.current!==ha&&n(ha),nm.push(n),()=>{let i=nm.indexOf(n);i>-1&&nm.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,a,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((a=t[i.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||vse[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:s}},wse=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||gse()}),af=t=>(e,n)=>{let r=wse(e,t,n);return ol({type:2,toast:r}),r.id},zn=(t,e)=>af("blank")(t,e);zn.error=af("error");zn.success=af("success");zn.loading=af("loading");zn.custom=af("custom");zn.dismiss=t=>{ol({type:3,toastId:t})};zn.remove=t=>ol({type:4,toastId:t});zn.promise=(t,e,n)=>{let r=zn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?dg(e.success,s):void 0;return i?zn.success(i,{id:r,...n,...n==null?void 0:n.success}):zn.dismiss(r),s}).catch(s=>{let i=e.error?dg(e.error,s):void 0;i?zn.error(i,{id:r,...n,...n==null?void 0:n.error}):zn.dismiss(r)}),t};var _se=(t,e)=>{ol({type:1,toast:{id:t,height:e}})},bse=()=>{ol({type:5,time:Date.now()})},Rd=new Map,Ese=1e3,Tse=(t,e=Ese)=>{if(Rd.has(t))return;let n=setTimeout(()=>{Rd.delete(t),ol({type:4,toastId:t})},e);Rd.set(t,n)},Ise=t=>{let{toasts:e,pausedAt:n}=xse(t);m.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(l<0){a.visible&&zn.dismiss(a.id);return}return setTimeout(()=>zn.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=m.useCallback(()=>{n&&ol({type:6,time:Date.now()})},[n]),s=m.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},u=e.filter(g=>(g.position||c)===(i.position||c)&&g.height),d=u.findIndex(g=>g.id===i.id),f=u.filter((g,v)=>v<d&&g.visible).length;return u.filter(g=>g.visible).slice(...a?[f+1]:[0,f]).reduce((g,v)=>g+(v.height||0)+l,0)},[e]);return m.useEffect(()=>{e.forEach(i=>{if(i.dismissed)Tse(i.id,i.removeDelay);else{let o=Rd.get(i.id);o&&(clearTimeout(o),Rd.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:_se,startPause:bse,endPause:r,calculateOffset:s}}},Sse=ci`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Cse=ci`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pse=ci`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ase=Lo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sse} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Cse} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Pse} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Rse=ci`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Nse=Lo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Rse} 1s linear infinite;
`,kse=ci`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Dse=ci`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,jse=Lo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kse} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Dse} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ose=Lo("div")`
  position: absolute;
`,Mse=Lo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Vse=ci`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lse=Lo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Vse} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$se=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?m.createElement(Lse,null,e):e:n==="blank"?null:m.createElement(Mse,null,m.createElement(Nse,{...r}),n!=="loading"&&m.createElement(Ose,null,n==="error"?m.createElement(Ase,{...r}):m.createElement(jse,{...r})))},Fse=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Use=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Bse="0%{opacity:0;} 100%{opacity:1;}",zse="0%{opacity:1;} 100%{opacity:0;}",qse=Lo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Gse=Lo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Wse=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=$4()?[Bse,zse]:[Fse(n),Use(n)];return{animation:e?`${ci(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ci(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Hse=m.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?Wse(t.position||e||"top-center",t.visible):{opacity:0},i=m.createElement($se,{toast:t}),o=m.createElement(Gse,{...t.ariaProps},dg(t.message,t));return m.createElement(qse,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):m.createElement(m.Fragment,null,i,o))});pse(m.createElement);var Kse=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=m.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return m.createElement("div",{ref:i,className:e,style:n},s)},Qse=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$4()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},Yse=Qy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,hp=16,Xse=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:l}=Ise(n);return m.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:hp,left:hp,right:hp,bottom:hp,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let u=c.position||e,d=l.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),f=Qse(u,d);return m.createElement(Kse,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?Yse:"",style:f},c.type==="custom"?dg(c.message,c):s?s(c):m.createElement(Hse,{toast:c,position:u}))}))};const Jse=()=>{const t=({isActive:e})=>`flex items-center px-4 py-3 text-lg rounded-lg transition-colors ${e?"bg-sky-500 text-white shadow-md":"text-slate-100 hover:bg-white/20"}`;return h.jsxs("div",{className:"flex min-h-screen bg-slate-200 dark:bg-gray-900",children:[h.jsxs("aside",{className:"w-64 bg-slate-800 text-white p-4 flex flex-col shadow-lg",children:[h.jsx("div",{className:"text-2xl font-bold mb-10 text-center",children:h.jsx(Le,{to:"/AdminDashboard",children:"رايت واتر"})}),h.jsxs("nav",{className:"flex flex-col gap-3",children:[h.jsxs(Bi,{to:"/AdminDashboard",end:!0,className:t,children:[h.jsx(mne,{className:"mr-3 rtl:ml-3"})," لوحة التحكم"]}),h.jsxs(Bi,{to:"/AdminDashboard/orders",className:t,children:[h.jsx(n_,{className:"mr-3 rtl:ml-3"})," إدارة الطلبات"]}),h.jsxs(Bi,{to:"/AdminDashboard/products",className:t,children:[h.jsx(gh,{className:"mr-3 rtl:ml-3"})," إدارة المنتجات"]}),h.jsxs(Bi,{to:"/AdminDashboard/users",className:t,children:[h.jsx(Gc,{className:"mr-3 rtl:ml-3"})," إدارة المستخدمين"]}),h.jsxs(Bi,{to:"/AdminDashboard/settings",className:t,children:[h.jsx(OE,{className:"mr-3 rtl:ml-3"})," الإعدادات"]})]}),h.jsx("div",{className:"mt-auto pt-4 border-t border-slate-700",children:h.jsxs(Le,{to:"/",className:"flex items-center justify-center px-4 py-3 text-lg rounded-lg transition-colors text-slate-300 hover:bg-white/10 hover:text-white",children:[h.jsx(fne,{className:"mr-3 rtl:ml-3"})," العودة للموقع"]})})]}),h.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:h.jsx(Outlet,{})})]})},ft=oe.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:fe("rounded-lg border bg-card text-card-foreground shadow-sm glassmorphism-card",t),...e}));ft.displayName="Card";const zt=oe.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:fe("flex flex-col space-y-1.5 p-6",t),...e}));zt.displayName="CardHeader";const Lt=oe.forwardRef(({className:t,...e},n)=>h.jsx("h3",{ref:n,className:fe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Lt.displayName="CardTitle";const Nr=oe.forwardRef(({className:t,...e},n)=>h.jsx("p",{ref:n,className:fe("text-sm text-muted-foreground",t),...e}));Nr.displayName="CardDescription";const Et=oe.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:fe("p-6 pt-0",t),...e}));Et.displayName="CardContent";const al=oe.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:fe("flex items-center p-6 pt-0",t),...e}));al.displayName="CardFooter";const Zse=()=>{const{currentUser:t,signOut:e}=_i(),n=er(),{toast:r}=pn(),s=async()=>{try{await e(),r({title:"تم تسجيل الخروج بنجاح!"}),n("/")}catch(o){r({title:"خطأ في تسجيل الخروج",description:o.message,variant:"destructive"})}},i=({isActive:o})=>`flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors ${o?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted/50 hover:text-foreground"}`;return h.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[h.jsx("aside",{className:"md:col-span-1",children:h.jsx(ft,{children:h.jsxs(Et,{className:"p-4",children:[h.jsxs("div",{className:"text-center mb-6 pt-4",children:[h.jsx("img",{src:(t==null?void 0:t.photoURL)||`https://ui-avatars.com/api/?name=${(t==null?void 0:t.displayName)||"User"}&background=random`,alt:"User Avatar",className:"w-24 h-24 rounded-full mx-auto mb-4 border-4 border-primary/50"}),h.jsx("h3",{className:"font-bold text-lg",children:t==null?void 0:t.displayName}),h.jsx("p",{className:"text-sm text-muted-foreground",children:t==null?void 0:t.email})]}),h.jsxs("nav",{className:"space-y-2",children:[h.jsxs(Bi,{to:"/profile",end:!0,className:i,children:[h.jsx(By,{className:"mr-3 rtl:ml-3 h-4 w-4"}),"معلومات الحساب"]}),h.jsxs(Bi,{to:"/profile/orders",className:i,children:[h.jsx(qc,{className:"mr-3 rtl:ml-3 h-4 w-4"}),"طلباتي"]}),h.jsxs(Bi,{to:"/profile/change-password",className:i,children:[h.jsx(Fa,{className:"mr-3 rtl:ml-3 h-4 w-4"}),"تغيير كلمة المرور"]}),h.jsxs("button",{onClick:s,className:`${i({isActive:!1})} w-full text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20`,children:[h.jsx(zL,{className:"mr-3 rtl:ml-3 h-4 w-4"}),"تسجيل الخروج"]})]})]})})}),h.jsx("main",{className:"md:col-span-3",children:h.jsx(ft,{children:h.jsx(Et,{className:"p-6",children:h.jsx(k1,{})})})})]})},fp=({icon:t,title:e,description:n,delay:r})=>h.jsx(me.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:r},children:h.jsxs(ft,{className:"text-center h-full glassmorphism-card hover:shadow-2xl transition-shadow duration-300",children:[h.jsxs(zt,{children:[h.jsx("div",{className:"mx-auto bg-gradient-to-br from-primary to-secondary text-white rounded-full p-4 w-fit mb-4",children:t}),h.jsx(Lt,{className:"text-2xl text-primary",children:e})]}),h.jsx(Et,{children:h.jsx(Nr,{className:"text-foreground/80 text-base",children:n})})]})}),eie=()=>h.jsxs("div",{className:"space-y-16",children:[h.jsx(me.section,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.7,ease:"easeOut"},className:"text-center py-16 md:py-24 bg-gradient-to-br from-water-blue/20 via-water-green/10 to-transparent rounded-xl shadow-lg",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsx(me.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-primary to-secondary rounded-full mb-6 shadow-md",children:h.jsx(mh,{size:64,className:"text-white"})}),h.jsx(me.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-5xl md:text-6xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"مياه نقية لحياة صحية مع رايت ووتر"}),h.jsx(me.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"text-xl md:text-2xl text-foreground/80 mb-10 max-w-3xl mx-auto",children:"نقدم حلولاً مبتكرة لمعالجة المياه وأنظمة شرب صحية تضمن لك ولعائلتك مياهاً آمنة ونقية كل يوم."}),h.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:h.jsx(Le,{to:"/products",children:h.jsx(we,{size:"lg",className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-lg px-10 py-6 rounded-full shadow-lg transform hover:scale-105 transition-transform duration-300",children:"اكتشف منتجاتنا"})})})]})}),h.jsxs("section",{className:"container mx-auto px-4",children:[h.jsx("h2",{className:"text-4xl font-bold text-center mb-12 text-primary",children:"لماذا تختار رايت واتر؟"}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[h.jsx(fp,{icon:h.jsx(mh,{size:40}),title:"جودة لا تضاهى",description:"نستخدم أحدث التقنيات لضمان أعلى معايير نقاء المياه.",delay:.2}),h.jsx(fp,{icon:h.jsx(rf,{size:40}),title:"حلول موثوقة",description:"منتجاتنا مصممة لتدوم طويلاً وتوفر أداءً يمكن الاعتماد عليه.",delay:.4}),h.jsx(fp,{icon:h.jsx(XL,{size:40}),title:"تركيب سريع",description:"فريقنا المحترف يضمن تركيباً سلساً وفعالاً لأنظمتنا.",delay:.6}),h.jsx(fp,{icon:h.jsx(Gc,{size:40}),title:"دعم فني متميز",description:"نقدم دعماً فنياً شاملاً وخدمة عملاء استثنائية.",delay:.8})]})]}),h.jsx("section",{className:"container mx-auto px-4 py-12",children:h.jsx("div",{className:"bg-gradient-to-r from-secondary to-primary text-white p-10 rounded-xl shadow-xl text-center md:text-right",children:h.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[h.jsxs("div",{className:"mb-6 md:mb-0",children:[h.jsx("h2",{className:"text-3xl font-bold mb-3",children:"هل أنت مستعد لتحسين جودة مياهك؟"}),h.jsx("p",{className:"text-lg opacity-90",children:"تواصل معنا اليوم للحصول على استشارة مجانية واكتشف الحل الأمثل لاحتياجاتك."})]}),h.jsx(Le,{to:"/contact",children:h.jsx(we,{variant:"outline",size:"lg",className:"border-white text-white hover:bg-white hover:text-primary text-lg px-8 py-4 rounded-full transform hover:scale-105 transition-transform duration-300",children:"اتصل بنا الآن"})})]})})}),h.jsxs("section",{className:"container mx-auto px-4 text-center",children:[h.jsx("h2",{className:"text-4xl font-bold text-center mb-8 text-primary",children:"منتجاتنا المميزة"}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[h.jsx(me.div,{whileHover:{y:-10},className:"cursor-pointer",children:h.jsxs(ft,{className:"overflow-hidden glassmorphism-card",children:[h.jsx("img",{alt:"فلتر مياه منزلي",className:"w-full h-56 object-cover",src:"https://envs.sh/g9Z.jpg"}),h.jsx(zt,{children:h.jsx(Lt,{className:"text-primary",children:"فلتر مياه منزلي"})}),h.jsx(Et,{children:h.jsx(Nr,{children:"نظام تنقية متعدد المراحل يوفر مياه شرب نقية وصحية."})})]})}),h.jsx(me.div,{whileHover:{y:-10},className:"cursor-pointer",children:h.jsxs(ft,{className:"overflow-hidden glassmorphism-card",children:[h.jsx("img",{alt:"محطة تحلية مياه صغيرة",className:"w-full h-56 object-cover",src:"https://images.unsplash.com/photo-1614195975309-a3baf592274f"}),h.jsx(zt,{children:h.jsx(Lt,{className:"text-primary",children:"محطة تحلية صغيرة"})}),h.jsx(Et,{children:h.jsx(Nr,{children:"حل مثالي لتحويل المياه المالحة إلى مياه عذبة صالحة للشرب."})})]})}),h.jsx(me.div,{whileHover:{y:-10},className:"cursor-pointer",children:h.jsxs(ft,{className:"overflow-hidden glassmorphism-card",children:[h.jsx("img",{alt:"نظام معالجة مياه صناعي",className:"w-full h-56 object-cover",src:"https://images.unsplash.com/photo-1614195975309-a3baf592274f"}),h.jsx(zt,{children:h.jsx(Lt,{className:"text-primary",children:"أنظمة معالجة صناعية"})}),h.jsx(Et,{children:h.jsx(Nr,{children:"حلول مخصصة لمعالجة المياه للاستخدامات الصناعية المختلفة."})})]})})]}),h.jsx(Le,{to:"/products",className:"mt-10 inline-block",children:h.jsx(we,{size:"lg",variant:"link",className:"text-primary text-lg hover:text-secondary",children:"عرض جميع المنتجات →"})})]})]}),ze=oe.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));ze.displayName="Input";var tie="Label",U4=m.forwardRef((t,e)=>h.jsx(Ve.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));U4.displayName=tie;var B4=U4;const nie=qy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ue=oe.forwardRef(({className:t,...e},n)=>h.jsx(B4,{ref:n,className:fe(nie(),t),...e}));Ue.displayName=B4.displayName;function z4(t,[e,n]){return Math.min(n,Math.max(e,t))}var rie=m.createContext(void 0);function qE(t){const e=m.useContext(rie);return t||e||"ltr"}function q4(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Yy(t){const[e,n]=m.useState(void 0);return Lr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var G4=["PageUp","PageDown"],W4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],H4={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},fu="Slider",[d_,sie,iie]=Gy(fu),[K4,Gme]=xr(fu,[iie]),[oie,Xy]=K4(fu),Q4=m.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:g=!1,form:v,...y}=t,w=m.useRef(new Set),x=m.useRef(0),b=o==="horizontal"?aie:lie,[S=[],k]=il({prop:u,defaultProp:c,onChange:D=>{var N;(N=[...w.current][x.current])==null||N.focus(),d(D)}}),R=m.useRef(S);function C(D){const j=fie(S,D);P(D,j)}function E(D){P(D,x.current)}function I(){const D=R.current[x.current];S[x.current]!==D&&f(S)}function P(D,j,{commit:N}={commit:!1}){const L=yie(i),B=vie(Math.round((D-r)/i)*i+r,L),O=z4(B,[r,s]);k((M=[])=>{const U=die(M,O,j);if(gie(U,l*i)){x.current=U.indexOf(O);const $=String(U)!==String(M);return $&&N&&f(U),$?U:M}else return M})}return h.jsx(oie,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:S,orientation:o,form:v,children:h.jsx(d_.Provider,{scope:t.__scopeSlider,children:h.jsx(d_.Slot,{scope:t.__scopeSlider,children:h.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...y,ref:e,onPointerDown:ge(y.onPointerDown,()=>{a||(R.current=S)}),min:r,max:s,inverted:g,onSlideStart:a?void 0:C,onSlideMove:a?void 0:E,onSlideEnd:a?void 0:I,onHomeKeyDown:()=>!a&&P(r,0,{commit:!0}),onEndKeyDown:()=>!a&&P(s,S.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:j})=>{if(!a){const B=G4.includes(D.key)||D.shiftKey&&W4.includes(D.key)?10:1,O=x.current,M=S[O],U=i*B*j;P(M+U,O,{commit:!0})}}})})})})});Q4.displayName=fu;var[Y4,X4]=K4(fu,{startEdge:"left",endEdge:"right",size:"width",direction:1}),aie=m.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=m.useState(null),g=Ne(e,b=>f(b)),v=m.useRef(void 0),y=qE(s),w=y==="ltr",x=w&&!i||!w&&i;function _(b){const S=v.current||d.getBoundingClientRect(),k=[0,S.width],C=GE(k,x?[n,r]:[r,n]);return v.current=S,C(b-S.left)}return h.jsx(Y4,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:h.jsx(J4,{dir:y,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const S=_(b.clientX);o==null||o(S)},onSlideMove:b=>{const S=_(b.clientX);a==null||a(S)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:b=>{const k=H4[x?"from-left":"from-right"].includes(b.key);c==null||c({event:b,direction:k?-1:1})}})})}),lie=m.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=m.useRef(null),d=Ne(e,u),f=m.useRef(void 0),g=!s;function v(y){const w=f.current||u.current.getBoundingClientRect(),x=[0,w.height],b=GE(x,g?[r,n]:[n,r]);return f.current=w,b(y-w.top)}return h.jsx(Y4,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:h.jsx(J4,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const w=v(y.clientY);i==null||i(w)},onSlideMove:y=>{const w=v(y.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:y=>{const x=H4[g?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:x?-1:1})}})})}),J4=m.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Xy(fu,n);return h.jsx(Ve.span,{...c,ref:e,onKeyDown:ge(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):G4.concat(W4).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ge(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:ge(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:ge(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),i(d))})})}),Z4="SliderTrack",e$=m.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Xy(Z4,n);return h.jsx(Ve.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});e$.displayName=Z4;var h_="SliderRange",t$=m.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Xy(h_,n),i=X4(h_,n),o=m.useRef(null),a=Ne(e,o),l=s.values.length,c=s.values.map(f=>s$(f,s.min,s.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Ve.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:d+"%"}})});t$.displayName=h_;var f_="SliderThumb",n$=m.forwardRef((t,e)=>{const n=sie(t.__scopeSlider),[r,s]=m.useState(null),i=Ne(e,a=>s(a)),o=m.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return h.jsx(cie,{...t,ref:i,index:o})}),cie=m.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...i}=t,o=Xy(f_,n),a=X4(f_,n),[l,c]=m.useState(null),u=Ne(e,_=>c(_)),d=l?o.form||!!l.closest("form"):!0,f=Yy(l),g=o.values[r],v=g===void 0?0:s$(g,o.min,o.max),y=hie(r,o.values.length),w=f==null?void 0:f[a.size],x=w?pie(w,v,a.direction):0;return m.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${v}% + ${x}px)`},children:[h.jsx(d_.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Ve.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:g===void 0?{display:"none"}:t.style,onFocus:ge(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&h.jsx(r$,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});n$.displayName=f_;var uie="RadioBubbleInput",r$=m.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const s=m.useRef(null),i=Ne(s,r),o=q4(e);return m.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ve.input,{style:{display:"none"},...n,ref:i,defaultValue:e})});r$.displayName=uie;function die(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,i)=>s-i)}function s$(t,e,n){const i=100/(n-e)*(t-e);return z4(i,[0,100])}function hie(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function fie(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function pie(t,e,n){const r=t/2,i=GE([0,50],[0,r]);return(r-i(e)*n)*n}function mie(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function gie(t,e){if(e>0){const n=mie(t);return Math.min(...n)>=e}return!0}function GE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function yie(t){return(String(t).split(".")[1]||"").length}function vie(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var i$=Q4,xie=e$,wie=t$,_ie=n$;const o$=oe.forwardRef(({className:t,...e},n)=>h.jsxs(i$,{ref:n,className:fe("relative flex w-full touch-none select-none items-center",t),...e,children:[h.jsx(xie,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:h.jsx(wie,{className:"absolute h-full bg-primary"})}),(Array.isArray(e.value)?e.value:[e.defaultValue||0]).map((r,s)=>h.jsx(_ie,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},s))]}));o$.displayName=i$.displayName;var Jy="Checkbox",[bie,Wme]=xr(Jy),[Eie,WE]=bie(Jy);function Tie(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=t,[f,g]=il({prop:n,defaultProp:s??!1,onChange:l,caller:Jy}),[v,y]=m.useState(null),[w,x]=m.useState(null),_=m.useRef(!1),b=v?!!o||!!v.closest("form"):!0,S={checked:f,disabled:i,setChecked:g,control:v,setControl:y,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:_,required:c,defaultChecked:fo(s)?!1:s,isFormControl:b,bubbleInput:w,setBubbleInput:x};return h.jsx(Eie,{scope:e,...S,children:Iie(d)?d(S):r})}var a$="CheckboxTrigger",l$=m.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:f,isFormControl:g,bubbleInput:v}=WE(a$,t),y=Ne(s,u),w=m.useRef(l);return m.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const _=()=>d(w.current);return x.addEventListener("reset",_),()=>x.removeEventListener("reset",_)}},[i,d]),h.jsx(Ve.button,{type:"button",role:"checkbox","aria-checked":fo(l)?"mixed":l,"aria-required":c,"data-state":f$(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:y,onKeyDown:ge(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:ge(n,x=>{d(_=>fo(_)?!0:!_),v&&g&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})})});l$.displayName=a$;var HE=m.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...d}=t;return h.jsx(Tie,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>h.jsxs(h.Fragment,{children:[h.jsx(l$,{...d,ref:e,__scopeCheckbox:n}),f&&h.jsx(h$,{__scopeCheckbox:n})]})})});HE.displayName=Jy;var c$="CheckboxIndicator",u$=m.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=WE(c$,n);return h.jsx(Ur,{present:r||fo(i.checked)||i.checked===!0,children:h.jsx(Ve.span,{"data-state":f$(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});u$.displayName=c$;var d$="CheckboxBubbleInput",h$=m.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:d,bubbleInput:f,setBubbleInput:g}=WE(d$,t),v=Ne(n,g),y=q4(i),w=Yy(r);m.useEffect(()=>{const _=f;if(!_)return;const b=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(b,"checked").set,R=!s.current;if(y!==i&&k){const C=new Event("click",{bubbles:R});_.indeterminate=fo(i),k.call(_,fo(i)?!1:i),_.dispatchEvent(C)}},[f,y,i,s]);const x=m.useRef(fo(i)?!1:i);return h.jsx(Ve.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:a,disabled:l,name:c,value:u,form:d,...e,tabIndex:-1,ref:v,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});h$.displayName=d$;function Iie(t){return typeof t=="function"}function fo(t){return t==="indeterminate"}function f$(t){return fo(t)?"indeterminate":t?"checked":"unchecked"}const hg=oe.forwardRef(({className:t,...e},n)=>h.jsx(HE,{ref:n,className:fe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:h.jsx(u$,{className:fe("flex items-center justify-center text-current"),children:h.jsx(Uy,{className:"h-4 w-4"})})}));hg.displayName=HE.displayName;const Sie=qy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function pu({className:t,variant:e,...n}){return h.jsx("div",{className:fe(Sie({variant:e}),t),...n})}const Cie=({product:t})=>{const{toast:e}=pn(),{addItemToCart:n}=zy();if(!t)return null;const r=t.stock<=0,s=()=>{if(r){e({title:"نفذ المخزون",description:`عفواً، منتج "${t.name}" غير متوفر حالياً.`,variant:"destructive"});return}n(t,1),e({title:"🛒 تمت الإضافة إلى السلة",description:`تم إضافة "${t.name}" إلى سلة التسوق.`,className:"bg-green-500 text-white"})},i=o=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(o||0);return h.jsx(me.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full h-full",children:h.jsxs(ft,{className:`overflow-hidden h-full flex flex-col group bg-white dark:bg-slate-800 border dark:border-slate-700 hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1 ${r?"opacity-70 bg-slate-50 dark:bg-slate-800/50":""}`,children:[h.jsxs(zt,{className:"p-0 relative",children:[h.jsx(Le,{to:`/products/${t.id}`,className:r?"pointer-events-none cursor-not-allowed":"",children:h.jsx("div",{className:"aspect-square w-full overflow-hidden",children:h.jsx("img",{alt:t.name||"صورة منتج",className:"w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-110",src:t.image||"https://via.placeholder.com/400?text=No+Image"})})}),t.originalPrice&&!r&&h.jsx(pu,{variant:"destructive",className:"absolute top-3 right-3 shadow-lg",children:"خصم"}),r&&h.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black/60 text-white text-sm font-bold px-4 py-2 rounded-md shadow-lg flex items-center backdrop-blur-sm",children:[h.jsx(GL,{className:"mr-2 h-5 w-5"})," نفد المخزون"]})]}),h.jsxs(Et,{className:"p-4 flex-grow flex flex-col",children:[h.jsxs("div",{className:"flex-grow",children:[h.jsx("span",{className:"text-xs text-muted-foreground",children:t.category||"غير مصنف"}),h.jsx(Le,{to:`/products/${t.id}`,className:r?"pointer-events-none":"",children:h.jsx(Lt,{className:"text-base font-bold text-slate-800 dark:text-slate-200 hover:text-primary transition-colors mt-1 mb-2 h-12 overflow-hidden",children:t.name||"اسم المنتج غير متوفر"})}),h.jsxs("div",{className:"flex items-center text-sm text-slate-500 dark:text-slate-400 mb-3",children:[h.jsx(Ol,{className:"h-4 w-4 text-yellow-400 fill-current mr-1"}),h.jsxs("span",{children:[t.rating||0," (",t.reviews||0," مراجعات)"]})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-baseline space-x-2 space-x-reverse mb-2",children:[h.jsx("p",{className:"text-xl font-extrabold text-primary",children:i(t.price)}),t.originalPrice&&h.jsx("p",{className:"text-sm text-muted-foreground line-through",children:i(t.originalPrice)})]}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["المتاح: ",t.stock||0]})]})]}),h.jsx(al,{className:"p-3 border-t dark:border-slate-700/50 mt-auto",children:h.jsxs(we,{onClick:s,className:"w-full",disabled:r,children:[h.jsx(qc,{className:"mr-2 h-4 w-4"}),r?"غير متوفر":"أضف إلى السلة"]})})]})})},Pie=()=>{const[t,e]=m.useState([]),[n,r]=m.useState([]),[s,i]=m.useState(""),[o,a]=m.useState([0,5e4]),[l,c]=m.useState([]),[u,d]=m.useState(!0),[f,g]=m.useState(null),v=oe.useMemo(()=>{if(t.length===0)return[];const w=new Set(t.map(x=>x.category).filter(Boolean));return Array.from(w)},[t]);m.useEffect(()=>{(async()=>{d(!0),g(null);try{const x=Rr(dt,"products"),b=(await gE(x)).docs.map(S=>({id:S.id,...S.data()}));b.length===0&&g("لا توجد منتجات متاحة حالياً. يرجى المحاولة مرة أخرى لاحقاً."),e(b)}catch(x){g("حدث خطأ أثناء جلب المنتجات."),console.error("Firestore fetch error:",x)}d(!1)})()},[]),m.useEffect(()=>{let w=[...t];s&&(w=w.filter(x=>x.name.toLowerCase().includes(s.toLowerCase())||x.description&&x.description.toLowerCase().includes(s.toLowerCase()))),w=w.filter(x=>x.price>=o[0]&&x.price<=o[1]),l.length>0&&(w=w.filter(x=>l.includes(x.category))),r(w)},[s,o,l,t]);const y=w=>{c(x=>x.includes(w)?x.filter(_=>_!==w):[...x,w])};return u?h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[h.jsx(tn,{className:"h-16 w-16 animate-spin text-primary mb-4"}),h.jsx("p",{className:"text-xl text-foreground",children:"جاري تحميل المنتجات..."})]}):h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-12 text-center",children:[h.jsx("h1",{className:"text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"منتجاتنا"}),h.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"اكتشف مجموعتنا الواسعة من حلول معالجة المياه وأنظمة الشرب الصحية المصممة لتلبية احتياجاتك."})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[h.jsxs(me.aside,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"md:col-span-1 space-y-8 p-6 bg-card/50 rounded-xl shadow-lg glassmorphism-card h-fit sticky top-24",children:[h.jsxs("div",{children:[h.jsxs(Ue,{htmlFor:"search",className:"text-lg font-semibold text-primary mb-2 flex items-center",children:[h.jsx(nf,{className:"ml-2 h-5 w-5"})," ابحث عن منتج"]}),h.jsx(ze,{id:"search",type:"text",placeholder:"اسم المنتج، وصف...",value:s,onChange:w=>i(w.target.value),className:"bg-background/70 border-primary/30 focus:border-primary"})]}),h.jsxs("div",{children:[h.jsxs(Ue,{className:"text-lg font-semibold text-primary mb-4 flex items-center",children:[h.jsx(une,{className:"ml-2 h-5 w-5"})," تصفية حسب السعر (ج.م)"]}),h.jsx(o$,{min:0,max:5e4,step:100,value:o,onValueChange:a,className:"[&>span:first-child]:h-1 [&>span:first-child]:bg-primary/30 [&_[role=slider]]:bg-primary [&_[role=slider]]:w-5 [&_[role=slider]]:h-5 [&_[role=slider]]:border-2 [&_[role=slider]]:border-primary-foreground"}),h.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[h.jsx("span",{children:o[0].toLocaleString("ar-EG")}),h.jsx("span",{children:o[1].toLocaleString("ar-EG")})]})]}),v.length>0&&h.jsxs("div",{children:[h.jsxs(Ue,{className:"text-lg font-semibold text-primary mb-3 flex items-center",children:[h.jsx(Sne,{className:"ml-2 h-5 w-5"})," الفئات"]}),h.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:v.map(w=>h.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[h.jsx(hg,{id:w,checked:l.includes(w),onCheckedChange:()=>y(w),className:"border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground"}),h.jsx(Ue,{htmlFor:w,className:"font-normal text-foreground hover:text-primary cursor-pointer transition-colors",children:w})]},w))})]})]}),h.jsxs("main",{className:"md:col-span-3",children:[f&&h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-10 col-span-full bg-red-50 border border-red-200 rounded-lg p-6 flex flex-col items-center justify-center",children:[h.jsx(jE,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),h.jsx("p",{className:"text-xl text-red-700 font-semibold",children:f}),h.jsx("p",{className:"text-sm text-red-600 mt-2",children:"إذا استمرت المشكلة، يرجى الاتصال بالدعم الفني."})]}),!u&&!f&&n.length===0&&h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-10 col-span-full flex flex-col items-center justify-center",children:[h.jsx(dne,{className:"w-24 h-24 mx-auto mb-6 text-muted-foreground opacity-50"}),h.jsx("p",{className:"text-2xl text-muted-foreground mb-2",children:t.length>0?"عفواً، لا توجد منتجات تطابق بحثك.":"لم يتم إضافة منتجات بعد."}),t.length>0&&h.jsx("p",{className:"text-md text-muted-foreground",children:"حاول تعديل الفلاتر أو توسيع نطاق البحث."})]}),!f&&n.length>0&&h.jsx(me.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:h.jsx(xj,{children:n.map(w=>h.jsx(Cie,{product:w},w.id))})})]})]})]})},yR=t=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t||0),Aie=()=>{const{productId:t}=N1(),[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(1),{addItemToCart:a}=zy(),{toast:l}=pn();m.useEffect(()=>{(async()=>{s(!0);try{const d=dr(dt,"products",t),f=await mE(d);f.exists()?n({id:f.id,...f.data()}):(console.log("No such product!"),n(null))}catch(d){console.error("Error fetching product:",d)}finally{s(!1)}})()},[t]);const c=()=>{e&&(a({...e,quantity:i}),l({title:"✅ تمت الإضافة إلى السلة",description:`تمت إضافة "${e.name}" إلى سلة التسوق.`}))};return r?h.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:h.jsx(tn,{className:"h-16 w-16 animate-spin text-primary"})}):e?h.jsx("div",{className:"container mx-auto px-4 py-12",children:h.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid md:grid-cols-2 gap-8 lg:gap-12 items-start",children:[h.jsx(me.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:h.jsx(ft,{className:"overflow-hidden shadow-lg",children:h.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-auto object-cover aspect-square"})})}),h.jsxs(me.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"space-y-6",children:[h.jsx(pu,{variant:"secondary",children:e.category||"فئة عامة"}),h.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:e.name}),h.jsx("p",{className:"text-lg text-muted-foreground",children:e.description||"لا يتوفر وصف لهذا المنتج."}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("p",{className:"text-3xl font-bold text-foreground",children:yR(e.price)}),e.oldPrice&&h.jsx("p",{className:"text-xl text-muted-foreground line-through",children:yR(e.oldPrice)})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"flex items-center text-amber-500",children:[h.jsx(Ol,{className:"h-5 w-5 fill-current"}),h.jsx(Ol,{className:"h-5 w-5 fill-current"}),h.jsx(Ol,{className:"h-5 w-5 fill-current"}),h.jsx(Ol,{className:"h-5 w-5 fill-current"}),h.jsx(Ol,{className:"h-5 w-5 fill-current"})]}),h.jsx("span",{className:"text-sm text-muted-foreground",children:"(مراجعات)"})]}),h.jsxs("div",{className:"border-t pt-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(Label,{htmlFor:"quantity",className:"text-lg",children:"الكمية:"}),h.jsx(Input,{id:"quantity",type:"number",min:"1",max:e.stock,value:i,onChange:u=>o(Math.max(1,parseInt(u.target.value)||1)),className:"w-20 text-center"})]}),h.jsxs(we,{onClick:c,size:"lg",className:"w-full",disabled:e.stock<=0,children:[h.jsx(qc,{className:"ml-2 h-5 w-5"}),e.stock>0?"أضف إلى السلة":"نفد المخزون"]})]})]})]})}):h.jsx("div",{className:"text-center py-20",children:h.jsx("h1",{children:"عذراً، لم يتم العثور على هذا المنتج."})})},Rie=()=>{const t=[{name:"المهندس/ أحمد خالد",role:"المدير التنفيذي ومؤسس الشركة",image:"https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8Y2VvfGVufDB8fDB8fHww&auto=format&fit=crop&w=300&q=60",description:"خبير في تقنيات معالجة المياه بخبرة تمتد لأكثر من 15 عامًا."},{name:"الدكتورة/ سارة علي",role:"رئيس قسم البحث والتطوير",image:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8ZmVtYWxlJTIwc2NpZW50aXN0fGVufDB8fDB8fHww&auto=format&fit=crop&w=300&q=60",description:"متخصصة في تطوير حلول مبتكرة لمعالجة المياه وتحليتها."},{name:"الأستاذ/ محمد حسن",role:"مدير التسويق والمبيعات",image:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8bWFuYWdlcnxlbnwwfHwwfHx8MA&auto=format&fit=crop&w=300&q=60",description:"يعمل على توسيع قاعدة عملاء الشركة وتقديم أفضل الخدمات."}],e=[{icon:h.jsx(mh,{className:"h-10 w-10 text-primary"}),title:"جودة لا تضاهى",description:"نلتزم بتقديم أعلى معايير الجودة في منتجاتنا وخدماتنا لضمان مياه نقية وصحية."},{icon:h.jsx(rf,{className:"h-10 w-10 text-primary"}),title:"موثوقية وأمان",description:"حلولنا مصممة لتكون موثوقة وآمنة، مما يوفر راحة البال لعملائنا الكرام."},{icon:h.jsx(XL,{className:"h-10 w-10 text-primary"}),title:"ابتكار مستمر",description:"نسعى دائمًا للابتكار وتطوير تقنيات جديدة لتلبية الاحتياجات المتغيرة لسوق معالجة المياه."}];return h.jsxs("div",{className:"container mx-auto px-4 py-12",children:[h.jsxs(me.section,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-center mb-16",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"عن شركة رايت ووتر"}),h.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"في رايت ووتر، نؤمن بأن الحصول على مياه شرب نظيفة وآمنة هو حق أساسي للجميع. مهمتنا هي توفير حلول مبتكرة وموثوقة لمعالجة المياه، تساهم في تحسين جودة الحياة وحماية البيئة."})]}),h.jsxs(me.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"mb-16 grid md:grid-cols-2 gap-12 items-center",children:[h.jsx("div",{children:h.jsx("img",{src:"https://images.unsplash.com/photo-1567427018141-0584cfcbf1b8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHdhdGVyJTIwdHJlYXRtZW50JTIwcGxhbnR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=600&q=80",alt:"محطة معالجة مياه حديثة تابعة لشركة رايت ووتر",className:"rounded-xl shadow-2xl w-full h-auto object-cover"})}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("h2",{className:"text-4xl font-bold text-primary flex items-center",children:[h.jsx(Cne,{className:"mr-3 h-10 w-10"})," رؤيتنا ورسالتنا"]}),h.jsxs("p",{className:"text-lg text-foreground leading-relaxed",children:[h.jsx("strong",{children:"رؤيتنا:"})," أن نكون الشركة الرائدة في مجال حلول معالجة المياه في مصر والشرق الأوسط، من خلال تقديم منتجات وخدمات مبتكرة تلبي أعلى معايير الجودة العالمية."]}),h.jsxs("p",{className:"text-lg text-foreground leading-relaxed",children:[h.jsx("strong",{children:"رسالتنا:"})," تمكين المجتمعات والأفراد من الوصول إلى مياه نقية وصحية عبر توفير تقنيات معالجة متطورة، مع الالتزام بالاستدامة البيئية والمسؤولية المجتمعية."]})]})]}),h.jsxs(me.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"mb-16",children:[h.jsxs("h2",{className:"text-4xl font-bold text-primary text-center mb-12 flex items-center justify-center",children:[h.jsx(Gc,{className:"mr-3 h-10 w-10"})," فريقنا المتميز"]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((n,r)=>h.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2*r+.6},children:h.jsxs(ft,{className:"text-center glassmorphism-card h-full hover:shadow-xl transition-shadow",children:[h.jsxs(zt,{className:"items-center",children:[h.jsx("img",{src:n.image,alt:n.name,className:"w-32 h-32 rounded-full object-cover mb-4 border-4 border-primary/50"}),h.jsx(Lt,{className:"text-xl text-primary",children:n.name}),h.jsx("p",{className:"text-sm text-secondary font-medium",children:n.role})]}),h.jsx(Et,{children:h.jsx("p",{className:"text-muted-foreground text-sm",children:n.description})})]})},r))})]}),h.jsxs(me.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.9},children:[h.jsx("h2",{className:"text-4xl font-bold text-primary text-center mb-12",children:"قيمنا الأساسية"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map((n,r)=>h.jsx(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2*r+.9},children:h.jsxs(ft,{className:"text-center p-6 glassmorphism-card h-full hover:shadow-xl transition-shadow",children:[h.jsx("div",{className:"flex justify-center mb-4",children:n.icon}),h.jsx("h3",{className:"text-2xl font-semibold text-primary mb-2",children:n.title}),h.jsx("p",{className:"text-muted-foreground",children:n.description})]})},r))})]}),h.jsxs(me.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1.2},className:"mt-16 text-center",children:[h.jsx("p",{className:"text-lg text-foreground",children:"نحن في رايت ووتر، لا نقدم مجرد منتجات، بل نقدم حلولاً شاملة تضمن لكم ولأحبائكم مياهاً أكثر نقاءً وصحة."}),h.jsx("img",{alt:"مجموعة متنوعة من فلاتر المياه وأنظمة التحلية من رايت ووتر",class:"w-full max-w-4xl mx-auto mt-8 rounded-lg shadow-lg",src:"https://images.unsplash.com/photo-1623990088169-3eafccdec2c0"})]})]})},p$=oe.forwardRef(({className:t,...e},n)=>h.jsx("textarea",{className:fe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));p$.displayName="Textarea";const Nie=()=>{const{toast:t}=pn(),[e,n]=m.useState({name:"",email:"",subject:"",message:""}),[r,s]=m.useState(!1),i=l=>{const{name:c,value:u}=l.target;n(d=>({...d,[c]:u}))},o=async l=>{l.preventDefault(),s(!0),await new Promise(c=>setTimeout(c,1500)),console.log("Form submitted:",e),t({title:"📬 تم إرسال رسالتك بنجاح!",description:"شكراً لتواصلك معنا. سنقوم بالرد عليك في أقرب وقت ممكن.",className:"bg-green-500 text-white"}),n({name:"",email:"",subject:"",message:""}),s(!1)},a=[{icon:h.jsx(Zte,{className:"h-8 w-8 text-primary"}),title:"المقر الرئيسي",details:["123 شارع النيل، الجيزة، مصر"]},{icon:h.jsx(WL,{className:"h-8 w-8 text-primary"}),title:"الهاتف",details:["0123-456-7890","02-2345-6789"]},{icon:h.jsx(tf,{className:"h-8 w-8 text-primary"}),title:"البريد الإلكتروني",details:["info@rightwater.com.eg","sales@rightwater.com.eg"]},{icon:h.jsx(one,{className:"h-8 w-8 text-primary"}),title:"ساعات العمل",details:["الأحد - الخميس: 9 صباحًا - 5 مساءً","الجمعة والسبت: مغلق"]}];return h.jsxs("div",{className:"container mx-auto px-4 py-12",children:[h.jsxs(me.section,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-center mb-16",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"تواصل معنا"}),h.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"نحن هنا لمساعدتك! سواء كان لديك استفسار عن منتجاتنا، أو تحتاج إلى دعم فني، أو ترغب في مناقشة حلول مخصصة، فريقنا جاهز لخدمتك."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-start",children:[h.jsxs(me.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.7,delay:.2},className:"space-y-8",children:[h.jsx("h2",{className:"text-3xl font-bold text-primary mb-6",children:"معلومات الاتصال"}),a.map((l,c)=>h.jsx(ft,{className:"glassmorphism-card overflow-hidden",children:h.jsxs(Et,{className:"p-6 flex items-start space-x-4 space-x-reverse",children:[h.jsx("div",{className:"flex-shrink-0 mt-1",children:l.icon}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground mb-1",children:l.title}),l.details.map((u,d)=>h.jsx("p",{className:"text-muted-foreground",children:u},d))]})]})},c))]}),h.jsx(me.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.7,delay:.4},children:h.jsxs(ft,{className:"glassmorphism-card p-6 md:p-8 shadow-xl",children:[h.jsx(zt,{className:"p-0 mb-6",children:h.jsx(Lt,{className:"text-3xl font-bold text-primary text-center",children:"أرسل لنا رسالة"})}),h.jsx(Et,{className:"p-0",children:h.jsxs("form",{onSubmit:o,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"name",className:"text-foreground font-medium",children:"الاسم الكامل"}),h.jsx(ze,{type:"text",name:"name",id:"name",value:e.name,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:"مثال: محمد أحمد"})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"email",className:"text-foreground font-medium",children:"البريد الإلكتروني"}),h.jsx(ze,{type:"email",name:"email",id:"email",value:e.email,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:"example@domain.com"})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"subject",className:"text-foreground font-medium",children:"الموضوع"}),h.jsx(ze,{type:"text",name:"subject",id:"subject",value:e.subject,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:"استفسار عن منتج..."})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"message",className:"text-foreground font-medium",children:"رسالتك"}),h.jsx(p$,{name:"message",id:"message",rows:"5",value:e.message,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:"اكتب رسالتك هنا..."})]}),h.jsx(we,{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity text-lg py-3",children:r?h.jsxs(h.Fragment,{children:[h.jsx(me.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"ml-2 h-5 w-5 border-2 border-transparent border-t-white rounded-full"}),"جاري الإرسال..."]}):h.jsxs(h.Fragment,{children:[h.jsx(KL,{className:"ml-2 h-5 w-5"})," إرسال الرسالة"]})})]})})]})})]}),h.jsxs(me.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.6},className:"mt-16",children:[h.jsx("h2",{className:"text-3xl font-bold text-primary text-center mb-8",children:"موقعنا على الخريطة"}),h.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-xl overflow-hidden shadow-2xl border-4 border-primary/30",children:h.jsx("iframe",{src:"https://www.openstreetmap.org/export/embed.html?bbox=31.198167800903324%2C30.03986893231807%2C31.20899200439453%2C30.04569608970079&layer=mapnik&marker=30.04278251960827%2C31.203579902648926",width:"100%",height:"450",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"موقع شركة رايت واتر"})}),h.jsx("div",{className:"text-center mt-4",children:h.jsx("a",{href:"https://www.openstreetmap.org/?mlat=30.04278&mlon=31.20358#map=17/30.04278/31.20358",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"عرض خريطة أكبر"})})]})]})},kie=()=>{const{cartItems:t,updateItemQuantity:e,removeItemFromCart:n,cartTotal:r}=zy(),{toast:s}=pn(),i=er(),o=r>0?50:0,a=r+o,l=()=>{if(t.length===0){s({title:"سلة التسوق فارغة",description:"الرجاء إضافة منتجات إلى السلة قبل المتابعة للدفع.",variant:"destructive"});return}const c=t.filter(u=>u.quantity>u.stock);if(c.length>0){s({title:"كمية غير متوفرة",description:`يرجى تعديل الكميات لـ: ${c.map(u=>u.name).join(", ")}. المخزون المتاح أقل من المطلوب.`,variant:"destructive"});return}i("/checkout",{state:{cartItems:t,subtotal:r,shippingCost:o,total:a,fromCart:!0}})};return h.jsxs("div",{className:"container mx-auto px-4 py-12",children:[h.jsxs(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-10 text-center",children:[h.jsxs("h1",{className:"text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:[h.jsx(qc,{className:"inline-block h-12 w-12 mr-3"})," سلة التسوق"]}),h.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"راجع طلبك وقم بإجراء التعديلات اللازمة قبل المتابعة إلى الدفع."})]}),t.length===0?h.jsxs(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"text-center py-16",children:[h.jsx("img",{alt:"سلة تسوق فارغة",className:"mx-auto w-64 h-64 mb-6 opacity-70",src:"https://images.unsplash.com/photo-1641833278434-50f92b93d65a"}),h.jsx("h2",{className:"text-3xl font-semibold text-foreground mb-4",children:"سلة التسوق فارغة!"}),h.jsx("p",{className:"text-muted-foreground mb-8",children:"لم تقم بإضافة أي منتجات إلى سلتك بعد. تصفح منتجاتنا الرائعة!"}),h.jsx(Le,{to:"/products",children:h.jsxs(we,{size:"lg",className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity",children:[h.jsx(qc,{className:"ml-2 h-5 w-5"})," تصفح المنتجات"]})})]}):h.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[h.jsx(me.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"lg:col-span-2 space-y-6",children:h.jsx(xj,{children:t.map(c=>h.jsx(me.div,{layout:!0,initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50,transition:{duration:.3}},transition:{type:"spring",stiffness:300,damping:30},children:h.jsxs(ft,{className:"flex flex-col sm:flex-row items-center p-4 glassmorphism-card overflow-hidden",children:[h.jsx("img",{src:c.image||"https://images.unsplash.com/photo-1600857080039-639f0a2c6f93?auto=format&fit=crop&w=100&q=60",alt:c.name,className:"w-24 h-24 object-cover rounded-md mb-4 sm:mb-0 sm:mr-4 sm:ml-4"}),h.jsxs("div",{className:"flex-grow text-center sm:text-right",children:[h.jsx(Le,{to:`/products/${c.id}`,children:h.jsx("h3",{className:"text-lg font-semibold text-primary hover:underline",children:c.name})}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["السعر: ",(c.price||0).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})]}),c.stock<=0&&h.jsxs("p",{className:"text-xs text-red-500 flex items-center justify-center sm:justify-start",children:[h.jsx(GL,{className:"ml-1 h-3 w-3"})," نفذ المخزون"]}),c.stock>0&&c.quantity>c.stock&&h.jsxs("p",{className:"text-xs text-red-500",children:["الكمية المطلوبة تتجاوز المخزون (",c.stock,")"]})]}),h.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse my-4 sm:my-0 sm:mx-4",children:[h.jsx(we,{variant:"ghost",size:"icon",onClick:()=>e(c.id,c.quantity-1),disabled:c.quantity<=1,children:h.jsx(_ne,{className:"h-5 w-5 text-primary"})}),h.jsx(ze,{type:"number",value:c.quantity,onChange:u=>{const d=parseInt(u.target.value);isNaN(d)||e(c.id,d)},min:"1",max:c.stock,className:"w-16 text-center bg-background/70 border-primary/30",disabled:c.stock<=0}),h.jsx(we,{variant:"ghost",size:"icon",onClick:()=>e(c.id,c.quantity+1),disabled:c.quantity>=c.stock||c.stock<=0,children:h.jsx(HL,{className:"h-5 w-5 text-primary"})})]}),h.jsxs("p",{className:"font-semibold text-lg text-foreground my-2 sm:my-0 sm:mr-4 sm:ml-4",children:["الإجمالي: ",((c.price||0)*c.quantity).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})]}),h.jsx(we,{variant:"ghost",size:"icon",onClick:()=>n(c.id),className:"text-red-500 hover:text-red-700",children:h.jsx(ME,{className:"h-5 w-5"})})]})},c.id))})}),h.jsx(me.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"lg:col-span-1",children:h.jsxs(ft,{className:"p-6 glassmorphism-card shadow-xl sticky top-24",children:[h.jsx(zt,{className:"p-0 mb-6",children:h.jsx(Lt,{className:"text-2xl font-bold text-primary text-center",children:"ملخص الطلب"})}),h.jsxs(Et,{className:"space-y-4 p-0",children:[h.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[h.jsx("span",{children:"المجموع الفرعي"}),h.jsx("span",{children:r.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),h.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[h.jsx("span",{children:"تكلفة الشحن"}),h.jsx("span",{children:o.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),h.jsx("hr",{className:"my-2 border-border/50"}),h.jsxs("div",{className:"flex justify-between text-xl font-bold text-foreground",children:[h.jsx("span",{children:"الإجمالي الكلي"}),h.jsx("span",{children:a.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]})]}),h.jsxs(al,{className:"p-0 mt-8 flex flex-col space-y-3",children:[h.jsxs(we,{onClick:l,size:"lg",className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity text-lg py-3",disabled:t.some(c=>c.quantity>c.stock||c.stock<=0)||t.length===0,children:[h.jsx(ane,{className:"ml-2 h-5 w-5"})," المتابعة إلى الدفع"]}),t.some(c=>c.quantity>c.stock||c.stock<=0)&&h.jsx("p",{className:"text-xs text-red-500 text-center",children:"يرجى تعديل الكميات للمنتجات غير المتوفرة أو التي تجاوزت المخزون."}),h.jsx(Le,{to:"/products",className:"w-full",children:h.jsxs(we,{variant:"outline",size:"lg",className:"w-full text-primary border-primary hover:bg-primary/10",children:[h.jsx($L,{className:"ml-2 h-5 w-5"})," متابعة التسوق"]})})]})]})})]})]})},Die="/assets/web-fox-logo-be4f294c.png",jie=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(""),[s,i]=m.useState(!1),o=er(),{toast:a}=pn(),l=async u=>{u.preventDefault(),i(!0);try{const f=await(await pb(ds,t,n)).user.getIdTokenResult();a({title:"تم تسجيل الدخول بنجاح!",description:"مرحباً بعودتك."}),f.claims.admin?o("/admin"):o("/profile")}catch(d){a({title:"فشل تسجيل الدخول",description:d.code==="auth/invalid-credential"?"البريد الإلكتروني أو كلمة المرور غير صحيحة.":d.message,variant:"destructive"})}i(!1)},c=async u=>{i(!0);try{await wO(ds,u),a({title:"تم تسجيل الدخول بنجاح!"}),o("/profile")}catch(d){a({title:"فشل تسجيل الدخول الاجتماعي",description:d.message,variant:"destructive"})}i(!1)};return h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)] p-4",children:[h.jsxs(ft,{className:"w-full max-w-md shadow-2xl glassmorphism-card",children:[h.jsxs(zt,{className:"text-center",children:[h.jsx(me.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mx-auto bg-gradient-to-r from-primary to-secondary text-white rounded-full p-3 w-fit mb-4",children:h.jsx(BL,{size:32})}),h.jsx(Lt,{className:"text-3xl font-bold text-primary",children:"تسجيل الدخول"}),h.jsx(Nr,{children:"مرحباً بعودتك! يرجى إدخال بياناتك."})]}),h.jsxs(Et,{children:[h.jsxs("form",{onSubmit:l,className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ue,{htmlFor:"email",children:"البريد الإلكتروني"}),h.jsxs("div",{className:"relative",children:[h.jsx(tf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(ze,{id:"email",type:"email",placeholder:"example@mail.com",value:t,onChange:u=>e(u.target.value),required:!0,className:"pl-10"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ue,{htmlFor:"password",children:"كلمة المرور"}),h.jsxs("div",{className:"relative",children:[h.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(ze,{id:"password",type:"password",placeholder:"********",value:n,onChange:u=>r(u.target.value),required:!0,className:"pl-10"})]})]}),h.jsx(we,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-lg",disabled:s,children:s?"جاري الدخول...":"تسجيل الدخول"})]}),h.jsxs("div",{className:"mt-6 relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("span",{className:"w-full border-t"})}),h.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:h.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"أو سجل الدخول باستخدام"})})]}),h.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-3",children:[h.jsxs(we,{variant:"outline",onClick:()=>c(ML),disabled:s,children:[h.jsx(sne,{className:"mr-2 h-4 w-4"})," Google"]}),h.jsxs(we,{variant:"outline",onClick:()=>c(VL),disabled:s,children:[h.jsx(UL,{className:"mr-2 h-4 w-4"})," Facebook"]}),h.jsxs(we,{variant:"outline",onClick:()=>c(LL),disabled:s,children:[h.jsx(QL,{className:"mr-2 h-4 w-4"})," Twitter"]})]})]}),h.jsxs(al,{className:"flex flex-col items-center space-y-2",children:[h.jsx(Le,{to:"/forgot-password",children:h.jsx(we,{variant:"link",className:"text-sm text-primary",children:"هل نسيت كلمة المرور؟"})}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["ليس لديك حساب؟"," ",h.jsx(Le,{to:"/signup",className:"font-medium text-primary hover:underline",children:"أنشئ حساباً جديداً"})]})]})]}),h.jsxs("div",{className:"mt-8 text-center",children:[h.jsx("img",{src:Die,alt:"Web Fox Logo",className:"w-20 h-20 opacity-80 mx-auto"}),h.jsx("p",{className:"text-sm text-muted-foreground font-medium mt-2",children:"تم تصميم الموقع تحت إشراف"}),h.jsx("p",{className:"text-lg text-foreground font-semibold",children:"Mohammed Nasser"})]})]})},Oie=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(""),[s,i]=m.useState(""),[o,a]=m.useState(""),[l,c]=m.useState(!1),u=er(),{toast:d}=pn(),f=async g=>{if(g.preventDefault(),s.length<6){d({title:"كلمة المرور ضعيفة",description:"يجب أن تكون كلمة المرور 6 أحرف على الأقل.",variant:"destructive"});return}if(s!==o){d({title:"خطأ في كلمة المرور",description:"كلمتا المرور غير متطابقتين.",variant:"destructive"});return}c(!0);try{const y=(await fb(ds,n,s)).user;await rh(y,{displayName:t}),await BV(dr(dt,"users",y.uid),{uid:y.uid,displayName:t,email:n,createdAt:it.now(),role:"user"}),d({title:"تم إنشاء الحساب بنجاح!",description:`مرحباً بك ${t||n}!`}),u("/")}catch(v){let y="حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.";v.code==="auth/email-already-in-use"?y="هذا البريد الإلكتروني مسجل بالفعل. حاول تسجيل الدخول.":v.code==="auth/invalid-email"&&(y="البريد الإلكتروني الذي أدخلته غير صالح."),d({title:"فشل إنشاء الحساب",description:y,variant:"destructive"})}c(!1)};return h.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center min-h-[calc(100vh-200px)] bg-gradient-to-br from-water-blue/10 to-water-green/5 p-4",children:h.jsxs(ft,{className:"w-full max-w-md shadow-2xl glassmorphism-card",children:[h.jsxs(zt,{className:"text-center",children:[h.jsx(me.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mx-auto bg-gradient-to-r from-primary to-secondary text-white rounded-full p-3 w-fit mb-4",children:h.jsx(Rne,{size:32})}),h.jsx(Lt,{className:"text-3xl font-bold text-primary",children:"إنشاء حساب جديد"}),h.jsx(Nr,{children:"انضم إلينا للاستمتاع بأفضل حلول المياه النقية."})]}),h.jsx(Et,{children:h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(Ue,{htmlFor:"displayName",children:"الاسم الكامل"}),h.jsxs("div",{className:"relative",children:[h.jsx(By,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(ze,{id:"displayName",type:"text",placeholder:"مثال: أحمد محمد",value:t,onChange:g=>e(g.target.value),required:!0,className:"pl-10"})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(Ue,{htmlFor:"email",children:"البريد الإلكتروني"}),h.jsxs("div",{className:"relative",children:[h.jsx(tf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(ze,{id:"email",type:"email",placeholder:"example@mail.com",value:n,onChange:g=>r(g.target.value),required:!0,className:"pl-10"})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(Ue,{htmlFor:"password",children:"كلمة المرور"}),h.jsxs("div",{className:"relative",children:[h.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(ze,{id:"password",type:"password",placeholder:"6 أحرف على الأقل",value:s,onChange:g=>i(g.target.value),required:!0,className:"pl-10"})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(Ue,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور"}),h.jsxs("div",{className:"relative",children:[h.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(ze,{id:"confirmPassword",type:"password",placeholder:"********",value:o,onChange:g=>a(g.target.value),required:!0,className:"pl-10"})]})]}),h.jsx(we,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-lg",disabled:l,children:l?"جاري الإنشاء...":"إنشاء الحساب"})]})}),h.jsx(al,{className:"flex justify-center",children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["لديك حساب بالفعل؟"," ",h.jsx(Le,{to:"/login",className:"font-medium text-primary hover:underline",children:"سجل الدخول"})]})})]})})},Mie=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(!1),[s,i]=m.useState(""),{sendPasswordReset:o}=_i(),{toast:a}=pn(),l=er(),c=async u=>{if(u.preventDefault(),r(!0),i(""),!o){a({title:"خطأ في الإعداد",description:"وظيفة استعادة كلمة المرور غير متاحة حالياً.",variant:"destructive"}),r(!1);return}try{await o(t),i("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني. يرجى التحقق من صندوق الوارد الخاص بك (والبريد العشوائي)."),a({title:"✅ تم الإرسال بنجاح",description:"تفقد بريدك الإلكتروني لإعادة تعيين كلمة المرور.",className:"bg-green-500 text-white"}),setTimeout(()=>l("/login"),3e3)}catch(d){console.error("Forgot Password Error:",d);let f="حدث خطأ أثناء محاولة إرسال بريد إعادة التعيين.";d.code==="auth/user-not-found"?f="لم يتم العثور على حساب مرتبط بهذا البريد الإلكتروني.":d.code==="auth/invalid-email"&&(f="البريد الإلكتروني الذي أدخلته غير صالح."),i(f),a({title:"❌ خطأ في الإرسال",description:f,variant:"destructive"})}finally{r(!1)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-secondary/10 p-4",children:h.jsx(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"w-full max-w-md",children:h.jsxs(ft,{className:"shadow-2xl glassmorphism-card overflow-hidden",children:[h.jsxs(zt,{className:"text-center p-8 bg-primary/10",children:[h.jsx(Fa,{className:"mx-auto h-16 w-16 text-primary mb-4"}),h.jsx(Lt,{className:"text-3xl font-bold text-primary",children:"نسيت كلمة المرور؟"}),h.jsx(Nr,{className:"text-muted-foreground pt-2",children:"لا تقلق! أدخل بريدك الإلكتروني المسجل وسنرسل لك رابطًا لإعادة تعيين كلمة المرور."})]}),h.jsx(Et,{className:"p-8 space-y-6",children:h.jsxs("form",{onSubmit:c,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsxs(Ue,{htmlFor:"email",className:"text-foreground font-medium flex items-center",children:[h.jsx(tf,{className:"ml-2 h-4 w-4 text-primary"}),"البريد الإلكتروني"]}),h.jsx(ze,{id:"email",type:"email",value:t,onChange:u=>e(u.target.value),placeholder:"example@domain.com",required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary text-lg p-3"})]}),s&&h.jsx("p",{className:`text-sm p-3 rounded-md ${s.includes("نجاح")||s.includes("تم إرسال")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s}),h.jsx(we,{type:"submit",className:"w-full text-lg py-3 bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity",disabled:n,children:n?h.jsxs(h.Fragment,{children:[h.jsx(tn,{className:"ml-2 h-5 w-5 animate-spin"}),"جاري الإرسال..."]}):h.jsxs(h.Fragment,{children:[h.jsx(KL,{className:"ml-2 h-5 w-5"}),"إرسال رابط إعادة التعيين"]})})]})}),h.jsxs(al,{className:"p-8 bg-primary/5 text-center flex flex-col items-center",children:[h.jsxs("p",{className:"text-sm text-muted-foreground",children:["تذكرت كلمة المرور؟"," ",h.jsx(Le,{to:"/login",className:"font-medium text-primary hover:underline",children:"تسجيل الدخول"})]}),h.jsxs(Le,{to:"/",className:"mt-4 text-sm text-primary hover:underline flex items-center",children:["العودة إلى الرئيسية ",h.jsx(hu,{className:"mr-1 h-4 w-4"})]})]})]})})})},Vie=()=>{const{currentUser:t}=_i(),{toast:e}=pn(),[n,r]=m.useState(!1),[s,i]=m.useState({name:"",phone:""});m.useEffect(()=>{t&&i({name:t.displayName||"",phone:t.phoneNumber||""})},[t]);const o=l=>{i({...s,[l.target.name]:l.target.value})},a=async l=>{if(l.preventDefault(),!s.name){e({title:"خطأ",description:"حقل الاسم لا يمكن أن يكون فارغاً.",variant:"destructive"});return}r(!0);try{t.displayName!==s.name&&await rh(t,{displayName:s.name});const c=dr(dt,"users",t.uid);await My(c,{displayName:s.name,phone:s.phone},{merge:!0}),e({title:"تم التحديث",description:"تم حفظ معلوماتك بنجاح."})}catch(c){console.error("Error updating profile: ",c),e({title:"خطأ",description:"فشل تحديث المعلومات.",variant:"destructive"})}finally{r(!1)}};return h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs(zt,{className:"p-0 mb-6",children:[h.jsx(Lt,{className:"text-2xl font-bold",children:"المعلومات الشخصية"}),h.jsx(Nr,{children:"قم بتحديث اسمك وبيانات الاتصال الخاصة بك."})]}),h.jsx(Et,{className:"p-0",children:h.jsxs("form",{onSubmit:a,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"name",children:"الاسم الكامل"}),h.jsx(ze,{id:"name",name:"name",value:s.name,onChange:o,required:!0})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"email",children:"البريد الإلكتروني (لا يمكن تغييره)"}),h.jsx(ze,{id:"email",type:"email",value:(t==null?void 0:t.email)||"",disabled:!0})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"phone",children:"رقم الهاتف (اختياري)"}),h.jsx(ze,{id:"phone",name:"phone",type:"tel",value:s.phone,onChange:o})]}),h.jsxs(we,{type:"submit",className:"w-full sm:w-auto",disabled:n,children:[n?h.jsx(tn,{className:"animate-spin mr-2"}):null,n?"جاري الحفظ...":"حفظ التغييرات"]})]})})]})},Lie=()=>{const{reauthenticateAndChangePassword:t,signOut:e}=_i(),{toast:n}=pn(),r=er(),[s,i]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,a]=m.useState(!1),[l,c]=m.useState(""),u=f=>{i({...s,[f.target.name]:f.target.value})},d=async f=>{if(f.preventDefault(),c(""),s.newPassword!==s.confirmPassword){c("كلمة المرور الجديدة وتأكيدها غير متطابقين.");return}if(s.newPassword.length<6){c("كلمة المرور الجديدة يجب أن تكون 6 أحرف على الأقل.");return}a(!0);try{await t(s.currentPassword,s.newPassword),n({title:"✅ تم تغيير كلمة المرور بنجاح!",description:"تم تحديث كلمة مرورك. سيتم تسجيل خروجك الآن للأمان.",className:"bg-green-500 text-white",duration:5e3}),await e(),r("/login")}catch(g){console.error(g),g.code==="auth/wrong-password"||g.code==="auth/invalid-credential"?c("كلمة المرور الحالية التي أدخلتها غير صحيحة."):c("حدث خطأ ما. يرجى المحاولة مرة أخرى.")}finally{a(!1)}};return h.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full",children:h.jsxs(ft,{className:"border-none shadow-none",children:[h.jsxs(zt,{children:[h.jsx(Fa,{className:"mx-auto h-10 w-10 text-primary mb-2"}),h.jsx(Lt,{className:"text-xl font-bold",children:"تغيير كلمة المرور"}),h.jsx(Nr,{children:"لأمان حسابك، أدخل كلمة مرورك الحالية أولاً."})]}),h.jsx(Et,{children:h.jsxs("form",{onSubmit:d,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"currentPassword",children:"كلمة المرور الحالية"}),h.jsx(ze,{id:"currentPassword",name:"currentPassword",type:"password",value:s.currentPassword,onChange:u,required:!0})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"newPassword",children:"كلمة المرور الجديدة"}),h.jsx(ze,{id:"newPassword",name:"newPassword",type:"password",value:s.newPassword,onChange:u,required:!0})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور الجديدة"}),h.jsx(ze,{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:u,required:!0})]}),l&&h.jsx("p",{className:"text-sm text-red-500",children:l}),h.jsxs(we,{type:"submit",className:"w-full",disabled:o,children:[o?h.jsx(tn,{className:"animate-spin mr-2 h-4 w-4"}):h.jsx(rf,{className:"mr-2 h-4 w-4"}),o?"جاري التحديث...":"تحديث كلمة المرور"]})]})})]})})},yh={_origin:"https://api.emailjs.com"},$ie=(t,e="https://api.emailjs.com")=>{yh._userID=t,yh._origin=e},m$=(t,e,n)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class vR{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const g$=(t,e,n={})=>new Promise((r,s)=>{const i=new XMLHttpRequest;i.addEventListener("load",({target:o})=>{const a=new vR(o);a.status===200||a.text==="OK"?r(a):s(a)}),i.addEventListener("error",({target:o})=>{s(new vR(o))}),i.open("POST",yh._origin+t,!0),Object.keys(n).forEach(o=>{i.setRequestHeader(o,n[o])}),i.send(e)}),Fie=(t,e,n,r)=>{const s=r||yh._userID;return m$(s,t,e),g$("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:s,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})},Uie=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},Bie=(t,e,n,r)=>{const s=r||yh._userID,i=Uie(n);m$(s,t,e);const o=new FormData(i);return o.append("lib_version","3.12.1"),o.append("service_id",t),o.append("template_id",e),o.append("user_id",s),g$("/api/v1.0/email/send-form",o)},xR={init:$ie,send:Fie,sendForm:Bie};var zie=Ih[" useId ".trim().toString()]||(()=>{}),qie=0;function va(t){const[e,n]=m.useState(zie());return Lr(()=>{t||n(r=>r??String(qie++))},[t]),t||(e?`radix-${e}`:"")}var q0="focusScope.autoFocusOnMount",G0="focusScope.autoFocusOnUnmount",wR={bubbles:!1,cancelable:!0},Gie="FocusScope",KE=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=m.useState(null),c=sn(s),u=sn(i),d=m.useRef(null),f=Ne(e,y=>l(y)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(b){if(g.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:ji(d.current,{select:!0})},w=function(b){if(g.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||ji(d.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&ji(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const _=new MutationObserver(x);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),_.disconnect()}}},[r,a,g.paused]),m.useEffect(()=>{if(a){bR.add(g);const y=document.activeElement;if(!a.contains(y)){const x=new CustomEvent(q0,wR);a.addEventListener(q0,c),a.dispatchEvent(x),x.defaultPrevented||(Wie(Xie(y$(a)),{select:!0}),document.activeElement===y&&ji(a))}return()=>{a.removeEventListener(q0,c),setTimeout(()=>{const x=new CustomEvent(G0,wR);a.addEventListener(G0,u),a.dispatchEvent(x),x.defaultPrevented||ji(y??document.body,{select:!0}),a.removeEventListener(G0,u),bR.remove(g)},0)}}},[a,c,u,g]);const v=m.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(w&&x){const _=y.currentTarget,[b,S]=Hie(_);b&&S?!y.shiftKey&&x===S?(y.preventDefault(),n&&ji(b,{select:!0})):y.shiftKey&&x===b&&(y.preventDefault(),n&&ji(S,{select:!0})):x===_&&y.preventDefault()}},[n,r,g.paused]);return h.jsx(Ve.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});KE.displayName=Gie;function Wie(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ji(r,{select:e}),document.activeElement!==n)return}function Hie(t){const e=y$(t),n=_R(e,t),r=_R(e.reverse(),t);return[n,r]}function y$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _R(t,e){for(const n of t)if(!Kie(n,{upTo:e}))return n}function Kie(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Qie(t){return t instanceof HTMLInputElement&&"select"in t}function ji(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Qie(t)&&e&&t.select()}}var bR=Yie();function Yie(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ER(t,e),t.unshift(e)},remove(e){var n;t=ER(t,e),(n=t[0])==null||n.resume()}}}function ER(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Xie(t){return t.filter(e=>e.tagName!=="A")}var W0=0;function QE(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??TR()),document.body.insertAdjacentElement("beforeend",t[1]??TR()),W0++,()=>{W0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),W0--}},[])}function TR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var uc="right-scroll-bar-position",dc="width-before-scroll-bar",Jie="with-scroll-bars-hidden",Zie="--removed-body-scroll-bar-size";function H0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function eoe(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var toe=typeof window<"u"?m.useLayoutEffect:m.useEffect,IR=new WeakMap;function YE(t,e){var n=eoe(e||null,function(r){return t.forEach(function(s){return H0(s,r)})});return toe(function(){var r=IR.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||H0(a,null)}),i.forEach(function(a){s.has(a)||H0(a,o)})}IR.set(n,t)},[t]),n}function noe(t){return t}function roe(t,e){e===void 0&&(e=noe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function XE(t){t===void 0&&(t={});var e=roe(null);return e.options=Nt({async:!0,ssr:!1},t),e}var v$=function(t){var e=t.sideCar,n=Ja(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Nt({},n))};v$.isSideCarExport=!0;function JE(t,e){return t.useMedium(e),v$}var x$=XE(),K0=function(){},Zy=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:K0,onWheelCapture:K0,onTouchMoveCapture:K0}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,x=w===void 0?"div":w,_=t.gapMode,b=Ja(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,k=YE([n,e]),R=Nt(Nt({},b),s);return m.createElement(m.Fragment,null,u&&m.createElement(S,{sideCar:x$,removeScrollBar:c,shards:d,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:_}),o?m.cloneElement(m.Children.only(a),Nt(Nt({},R),{ref:k})):m.createElement(x,Nt({},R,{className:l,ref:k}),a))});Zy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zy.classNames={fullWidth:dc,zeroRight:uc};var SR,soe=function(){if(SR)return SR;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ioe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=soe();return e&&t.setAttribute("nonce",e),t}function ooe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function aoe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var loe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ioe())&&(ooe(e,n),aoe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},coe=function(){var t=loe();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ev=function(){var t=coe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},uoe={left:0,top:0,right:0,gap:0},Q0=function(t){return parseInt(t||"",10)||0},doe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Q0(n),Q0(r),Q0(s)]},hoe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return uoe;var e=doe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},foe=ev(),hc="data-scroll-locked",poe=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Jie,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(hc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(uc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(uc," .").concat(uc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dc," .").concat(dc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hc,`] {
    `).concat(Zie,": ").concat(a,`px;
  }
`)},CR=function(){var t=parseInt(document.body.getAttribute(hc)||"0",10);return isFinite(t)?t:0},moe=function(){m.useEffect(function(){return document.body.setAttribute(hc,(CR()+1).toString()),function(){var t=CR()-1;t<=0?document.body.removeAttribute(hc):document.body.setAttribute(hc,t.toString())}},[])},ZE=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;moe();var i=m.useMemo(function(){return hoe(s)},[s]);return m.createElement(foe,{styles:poe(i,!e,s,n?"":"!important")})},p_=!1;if(typeof window<"u")try{var pp=Object.defineProperty({},"passive",{get:function(){return p_=!0,!0}});window.addEventListener("test",pp,pp),window.removeEventListener("test",pp,pp)}catch{p_=!1}var Tl=p_?{passive:!1}:!1,goe=function(t){return t.tagName==="TEXTAREA"},w$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!goe(t)&&n[e]==="visible")},yoe=function(t){return w$(t,"overflowY")},voe=function(t){return w$(t,"overflowX")},PR=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=_$(t,r);if(s){var i=b$(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},xoe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},woe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},_$=function(t,e){return t==="v"?yoe(e):voe(e)},b$=function(t,e){return t==="v"?xoe(e):woe(e)},_oe=function(t,e){return t==="h"&&e==="rtl"?-1:1},boe=function(t,e,n,r,s){var i=_oe(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var g=b$(t,a),v=g[0],y=g[1],w=g[2],x=y-w-i*v;(v||x)&&_$(t,a)&&(d+=x,f+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(s&&Math.abs(d)<1||!s&&o>d)||!u&&(s&&Math.abs(f)<1||!s&&-o>f))&&(c=!0),c},mp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},AR=function(t){return[t.deltaX,t.deltaY]},RR=function(t){return t&&"current"in t?t.current:t},Eoe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Toe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ioe=0,Il=[];function Soe(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(Ioe++)[0],i=m.useState(ev)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=rb([t.lockRef.current],(t.shards||[]).map(RR),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=mp(y),_=n.current,b="deltaX"in y?y.deltaX:_[0]-x[0],S="deltaY"in y?y.deltaY:_[1]-x[1],k,R=y.target,C=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in y&&C==="h"&&R.type==="range")return!1;var E=PR(C,R);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=PR(C,R)),!E)return!1;if(!r.current&&"changedTouches"in y&&(b||S)&&(r.current=k),!k)return!0;var I=r.current||k;return boe(I,w,y,I==="h"?b:S,!0)},[]),l=m.useCallback(function(y){var w=y;if(!(!Il.length||Il[Il.length-1]!==i)){var x="deltaY"in w?AR(w):mp(w),_=e.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&Eoe(k.delta,x)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var b=(o.current.shards||[]).map(RR).filter(Boolean).filter(function(k){return k.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),c=m.useCallback(function(y,w,x,_){var b={name:y,delta:w,target:x,should:_,shadowParent:Coe(x)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=m.useCallback(function(y){n.current=mp(y),r.current=void 0},[]),d=m.useCallback(function(y){c(y.type,AR(y),y.target,a(y,t.lockRef.current))},[]),f=m.useCallback(function(y){c(y.type,mp(y),y.target,a(y,t.lockRef.current))},[]);m.useEffect(function(){return Il.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Tl),document.addEventListener("touchmove",l,Tl),document.addEventListener("touchstart",u,Tl),function(){Il=Il.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Tl),document.removeEventListener("touchmove",l,Tl),document.removeEventListener("touchstart",u,Tl)}},[]);var g=t.removeScrollBar,v=t.inert;return m.createElement(m.Fragment,null,v?m.createElement(i,{styles:Toe(s)}):null,g?m.createElement(ZE,{gapMode:t.gapMode}):null)}function Coe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Poe=JE(x$,Soe);var E$=m.forwardRef(function(t,e){return m.createElement(Zy,Nt({},t,{ref:e,sideCar:Poe}))});E$.classNames=Zy.classNames;const eT=E$;var Aoe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Sl=new WeakMap,gp=new WeakMap,yp={},Y0=0,T$=function(t){return t&&(t.host||T$(t.parentNode))},Roe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=T$(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Noe=function(t,e,n,r){var s=Roe(e,Array.isArray(t)?t:[t]);yp[n]||(yp[n]=new WeakMap);var i=yp[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var g=f.getAttribute(r),v=g!==null&&g!=="false",y=(Sl.get(f)||0)+1,w=(i.get(f)||0)+1;Sl.set(f,y),i.set(f,w),o.push(f),y===1&&v&&gp.set(f,!0),w===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(e),a.clear(),Y0++,function(){o.forEach(function(d){var f=Sl.get(d)-1,g=i.get(d)-1;Sl.set(d,f),i.set(d,g),f||(gp.has(d)||d.removeAttribute(r),gp.delete(d)),g||d.removeAttribute(n)}),Y0--,Y0||(Sl=new WeakMap,Sl=new WeakMap,gp=new WeakMap,yp={})}},lf=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=e||Aoe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Noe(r,s,n,"aria-hidden")):function(){return null}},tv="Dialog",[I$,S$]=xr(tv),[koe,ss]=I$(tv),C$=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=m.useRef(null),l=m.useRef(null),[c,u]=il({prop:r,defaultProp:s??!1,onChange:i,caller:tv});return h.jsx(koe,{scope:e,triggerRef:a,contentRef:l,contentId:va(),titleId:va(),descriptionId:va(),open:c,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};C$.displayName=tv;var P$="DialogTrigger",A$=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ss(P$,n),i=Ne(e,s.triggerRef);return h.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":rT(s.open),...r,ref:i,onClick:ge(t.onClick,s.onOpenToggle)})});A$.displayName=P$;var tT="DialogPortal",[Doe,R$]=I$(tT,{forceMount:void 0}),N$=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ss(tT,e);return h.jsx(Doe,{scope:e,forceMount:n,children:m.Children.map(r,o=>h.jsx(Ur,{present:n||i.open,children:h.jsx(Hy,{asChild:!0,container:s,children:o})}))})};N$.displayName=tT;var fg="DialogOverlay",k$=m.forwardRef((t,e)=>{const n=R$(fg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ss(fg,t.__scopeDialog);return i.modal?h.jsx(Ur,{present:r||i.open,children:h.jsx(Ooe,{...s,ref:e})}):null});k$.displayName=fg;var joe=Wc("DialogOverlay.RemoveScroll"),Ooe=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ss(fg,n);return h.jsx(eT,{as:joe,allowPinchZoom:!0,shards:[s.contentRef],children:h.jsx(Ve.div,{"data-state":rT(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ua="DialogContent",D$=m.forwardRef((t,e)=>{const n=R$(Ua,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ss(Ua,t.__scopeDialog);return h.jsx(Ur,{present:r||i.open,children:i.modal?h.jsx(Moe,{...s,ref:e}):h.jsx(Voe,{...s,ref:e})})});D$.displayName=Ua;var Moe=m.forwardRef((t,e)=>{const n=ss(Ua,t.__scopeDialog),r=m.useRef(null),s=Ne(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return lf(i)},[]),h.jsx(j$,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ge(t.onFocusOutside,i=>i.preventDefault())})}),Voe=m.forwardRef((t,e)=>{const n=ss(Ua,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return h.jsx(j$,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),j$=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ss(Ua,n),l=m.useRef(null),c=Ne(e,l);return QE(),h.jsxs(h.Fragment,{children:[h.jsx(KE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:h.jsx(Wy,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":rT(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx($oe,{titleId:a.titleId}),h.jsx(Uoe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),nT="DialogTitle",O$=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ss(nT,n);return h.jsx(Ve.h2,{id:s.titleId,...r,ref:e})});O$.displayName=nT;var M$="DialogDescription",V$=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ss(M$,n);return h.jsx(Ve.p,{id:s.descriptionId,...r,ref:e})});V$.displayName=M$;var L$="DialogClose",$$=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ss(L$,n);return h.jsx(Ve.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,()=>s.onOpenChange(!1))})});$$.displayName=L$;function rT(t){return t?"open":"closed"}var F$="DialogTitleWarning",[Loe,U$]=wre(F$,{contentName:Ua,titleName:nT,docsSlug:"dialog"}),$oe=({titleId:t})=>{const e=U$(F$),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Foe="DialogDescriptionWarning",Uoe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${U$(Foe).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},B$=C$,z$=A$,q$=N$,sT=k$,iT=D$,oT=O$,aT=V$,nv=$$;const Nd=B$,Boe=z$,zoe=q$,qoe=nv,G$=oe.forwardRef(({className:t,...e},n)=>h.jsx(sT,{ref:n,className:fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));G$.displayName=sT.displayName;const kd=oe.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(zoe,{children:[h.jsx(G$,{}),h.jsxs(iT,{ref:r,className:fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,h.jsxs(nv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(YL,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kd.displayName=iT.displayName;const rv=({className:t,...e})=>h.jsx("div",{className:fe("flex flex-col space-y-1.5 text-center sm:text-right",t),...e});rv.displayName="DialogHeader";const lT=({className:t,...e})=>h.jsx("div",{className:fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",t),...e});lT.displayName="DialogFooter";const sv=oe.forwardRef(({className:t,...e},n)=>h.jsx(oT,{ref:n,className:fe("text-lg font-semibold leading-none tracking-tight",t),...e}));sv.displayName=oT.displayName;const Goe=oe.forwardRef(({className:t,...e},n)=>h.jsx(aT,{ref:n,className:fe("text-sm text-muted-foreground",t),...e}));Goe.displayName=aT.displayName;var NR=1,Woe=.9,Hoe=.8,Koe=.17,X0=.1,J0=.999,Qoe=.9999,Yoe=.99,Xoe=/[\\\/_+.#"@\[\(\{&]/,Joe=/[\\\/_+.#"@\[\(\{&]/g,Zoe=/[\s-]/,W$=/[\s-]/g;function m_(t,e,n,r,s,i,o){if(i===e.length)return s===t.length?NR:Yoe;var a=`${s},${i}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(i),c=n.indexOf(l,s),u=0,d,f,g,v;c>=0;)d=m_(t,e,n,r,c+1,i+1,o),d>u&&(c===s?d*=NR:Xoe.test(t.charAt(c-1))?(d*=Hoe,g=t.slice(s,c-1).match(Joe),g&&s>0&&(d*=Math.pow(J0,g.length))):Zoe.test(t.charAt(c-1))?(d*=Woe,v=t.slice(s,c-1).match(W$),v&&s>0&&(d*=Math.pow(J0,v.length))):(d*=Koe,s>0&&(d*=Math.pow(J0,c-s))),t.charAt(c)!==e.charAt(i)&&(d*=Qoe)),(d<X0&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(f=m_(t,e,n,r,c+1,i+2,o),f*X0>d&&(d=f*X0)),d>u&&(u=d),c=n.indexOf(l,c+1);return o[a]=u,u}function kR(t){return t.toLowerCase().replace(W$," ")}function eae(t,e){return m_(t,e,kR(t),kR(e),0,0,{})}function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Te.apply(null,arguments)}function fc(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function tae(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function H$(...t){return e=>t.forEach(n=>tae(n,e))}function cf(...t){return m.useCallback(H$(...t),t)}function nae(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:g,...v}=d,y=(f==null?void 0:f[t][l])||a,w=m.useMemo(()=>v,Object.values(v));return m.createElement(y.Provider,{value:w},g)}function u(d,f){const g=(f==null?void 0:f[t][l])||a,v=m.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,rae(s,...e)]}function rae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}const g_=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},sae=Ih["useId".toString()]||(()=>{});let iae=0;function Z0(t){const[e,n]=m.useState(sae());return g_(()=>{t||n(r=>r??String(iae++))},[t]),t||(e?`radix-${e}`:"")}function Ba(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function oae({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=aae({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Ba(n),l=m.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function aae({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=Ba(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}const cT=m.forwardRef((t,e)=>{const{children:n,...r}=t,s=m.Children.toArray(n),i=s.find(cae);if(i){const o=i.props.children,a=s.map(l=>l===i?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:l);return m.createElement(y_,Te({},r,{ref:e}),m.isValidElement(o)?m.cloneElement(o,void 0,a):null)}return m.createElement(y_,Te({},r,{ref:e}),n)});cT.displayName="Slot";const y_=m.forwardRef((t,e)=>{const{children:n,...r}=t;return m.isValidElement(n)?m.cloneElement(n,{...uae(r,n.props),ref:H$(e,n.ref)}):m.Children.count(n)>1?m.Children.only(null):null});y_.displayName="SlotClone";const lae=({children:t})=>m.createElement(m.Fragment,null,t);function cae(t){return m.isValidElement(t)&&t.type===lae}function uae(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{i==null||i(...a),s==null||s(...a)}:r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}const dae=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],iv=dae.reduce((t,e)=>{const n=m.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?cT:e;return m.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),m.createElement(a,Te({},o,{ref:s}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function hae(t,e){t&&ns.flushSync(()=>t.dispatchEvent(e))}function fae(t){const e=Ba(t);m.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e])}const v_="dismissableLayer.update",pae="dismissableLayer.pointerDownOutside",mae="dismissableLayer.focusOutside";let DR;const gae=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yae=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=m.useContext(gae),[u,d]=m.useState(null),[,f]=m.useState({}),g=cf(e,R=>d(R)),v=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(y),x=u?v.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,b=x>=w,S=vae(R=>{const C=R.target,E=[...c.branches].some(I=>I.contains(C));!b||E||(s==null||s(R),o==null||o(R),R.defaultPrevented||a==null||a())}),k=xae(R=>{const C=R.target;[...c.branches].some(I=>I.contains(C))||(i==null||i(R),o==null||o(R),R.defaultPrevented||a==null||a())});return fae(R=>{x===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&a&&(R.preventDefault(),a()))}),m.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(DR=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),jR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=DR)}},[u,n,c]),m.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),jR())},[u,c]),m.useEffect(()=>{const R=()=>f({});return document.addEventListener(v_,R),()=>document.removeEventListener(v_,R)},[]),m.createElement(iv.div,Te({},l,{ref:g,style:{pointerEvents:_?b?"auto":"none":void 0,...t.style},onFocusCapture:fc(t.onFocusCapture,k.onFocusCapture),onBlurCapture:fc(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:fc(t.onPointerDownCapture,S.onPointerDownCapture)}))});function vae(t){const e=Ba(t),n=m.useRef(!1),r=m.useRef(()=>{});return m.useEffect(()=>{const s=o=>{if(o.target&&!n.current){let l=function(){K$(pae,e,a,{discrete:!0})};const a={originalEvent:o};o.pointerType==="touch"?(document.removeEventListener("click",r.current),r.current=l,document.addEventListener("click",r.current,{once:!0})):l()}n.current=!1},i=window.setTimeout(()=>{document.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),document.removeEventListener("pointerdown",s),document.removeEventListener("click",r.current)}},[e]),{onPointerDownCapture:()=>n.current=!0}}function xae(t){const e=Ba(t),n=m.useRef(!1);return m.useEffect(()=>{const r=s=>{s.target&&!n.current&&K$(mae,e,{originalEvent:s},{discrete:!1})};return document.addEventListener("focusin",r),()=>document.removeEventListener("focusin",r)},[e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function jR(){const t=new CustomEvent(v_);document.dispatchEvent(t)}function K$(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?hae(s,i):s.dispatchEvent(i)}const ex="focusScope.autoFocusOnMount",tx="focusScope.autoFocusOnUnmount",OR={bubbles:!1,cancelable:!0},wae=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=m.useState(null),c=Ba(s),u=Ba(i),d=m.useRef(null),f=cf(e,y=>l(y)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(x){if(g.paused||!a)return;const _=x.target;a.contains(_)?d.current=_:Zo(d.current,{select:!0})},w=function(x){g.paused||!a||a.contains(x.relatedTarget)||Zo(d.current,{select:!0})};return document.addEventListener("focusin",y),document.addEventListener("focusout",w),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w)}}},[r,a,g.paused]),m.useEffect(()=>{if(a){VR.add(g);const y=document.activeElement;if(!a.contains(y)){const x=new CustomEvent(ex,OR);a.addEventListener(ex,c),a.dispatchEvent(x),x.defaultPrevented||(_ae(Sae(Q$(a)),{select:!0}),document.activeElement===y&&Zo(a))}return()=>{a.removeEventListener(ex,c),setTimeout(()=>{const x=new CustomEvent(tx,OR);a.addEventListener(tx,u),a.dispatchEvent(x),x.defaultPrevented||Zo(y??document.body,{select:!0}),a.removeEventListener(tx,u),VR.remove(g)},0)}}},[a,c,u,g]);const v=m.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(w&&x){const _=y.currentTarget,[b,S]=bae(_);b&&S?!y.shiftKey&&x===S?(y.preventDefault(),n&&Zo(b,{select:!0})):y.shiftKey&&x===b&&(y.preventDefault(),n&&Zo(S,{select:!0})):x===_&&y.preventDefault()}},[n,r,g.paused]);return m.createElement(iv.div,Te({tabIndex:-1},o,{ref:f,onKeyDown:v}))});function _ae(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Zo(r,{select:e}),document.activeElement!==n)return}function bae(t){const e=Q$(t),n=MR(e,t),r=MR(e.reverse(),t);return[n,r]}function Q$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function MR(t,e){for(const n of t)if(!Eae(n,{upTo:e}))return n}function Eae(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Tae(t){return t instanceof HTMLInputElement&&"select"in t}function Zo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Tae(t)&&e&&t.select()}}const VR=Iae();function Iae(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=LR(t,e),t.unshift(e)},remove(e){var n;t=LR(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function LR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Sae(t){return t.filter(e=>e.tagName!=="A")}const Cae=m.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=t;return r?Kg.createPortal(m.createElement(iv.div,Te({},s,{ref:e})),r):null});function Pae(t,e){return m.useReducer((n,r)=>{const s=e[n][r];return s??n},t)}const ov=t=>{const{present:e,children:n}=t,r=Aae(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=cf(r.ref,s.ref);return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};ov.displayName="Presence";function Aae(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Pae(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const c=vp(r.current);i.current=a==="mounted"?c:"none"},[a]),g_(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,g=vp(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),g_(()=>{if(e){const c=d=>{const g=vp(r.current).includes(d.animationName);d.target===e&&g&&ns.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(i.current=vp(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function vp(t){return(t==null?void 0:t.animationName)||"none"}let nx=0;function Rae(){m.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:$R()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:$R()),nx++,()=>{nx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),nx--}},[])}function $R(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var Y$=XE(),rx=function(){},av=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:rx,onWheelCapture:rx,onTouchMoveCapture:rx}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,x=w===void 0?"div":w,_=Ja(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,S=YE([n,e]),k=Nt(Nt({},_),s);return m.createElement(m.Fragment,null,u&&m.createElement(b,{sideCar:Y$,removeScrollBar:c,shards:d,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n}),o?m.cloneElement(m.Children.only(a),Nt(Nt({},k),{ref:S})):m.createElement(x,Nt({},k,{className:l,ref:S}),a))});av.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};av.classNames={fullWidth:dc,zeroRight:uc};var x_=!1;if(typeof window<"u")try{var xp=Object.defineProperty({},"passive",{get:function(){return x_=!0,!0}});window.addEventListener("test",xp,xp),window.removeEventListener("test",xp,xp)}catch{x_=!1}var Cl=x_?{passive:!1}:!1,Nae=function(t){var e=window.getComputedStyle(t);return e.overflowY!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowY==="visible")},kae=function(t){var e=window.getComputedStyle(t);return e.overflowX!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowX==="visible")},FR=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=X$(t,n);if(r){var s=J$(t,n),i=s[1],o=s[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Dae=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},jae=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},X$=function(t,e){return t==="v"?Nae(e):kae(e)},J$=function(t,e){return t==="v"?Dae(e):jae(e)},Oae=function(t,e){return t==="h"&&e==="rtl"?-1:1},Mae=function(t,e,n,r,s){var i=Oae(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var g=J$(t,a),v=g[0],y=g[1],w=g[2],x=y-w-i*v;(v||x)&&X$(t,a)&&(d+=x,f+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(s&&d===0||!s&&o>d)||!u&&(s&&f===0||!s&&-o>f))&&(c=!0),c},wp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},UR=function(t){return[t.deltaX,t.deltaY]},BR=function(t){return t&&"current"in t?t.current:t},Vae=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Lae=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$ae=0,Pl=[];function Fae(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState($ae++)[0],i=m.useState(function(){return ev()})[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=rb([t.lockRef.current],(t.shards||[]).map(BR),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var x=wp(y),_=n.current,b="deltaX"in y?y.deltaX:_[0]-x[0],S="deltaY"in y?y.deltaY:_[1]-x[1],k,R=y.target,C=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in y&&C==="h"&&R.type==="range")return!1;var E=FR(C,R);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=FR(C,R)),!E)return!1;if(!r.current&&"changedTouches"in y&&(b||S)&&(r.current=k),!k)return!0;var I=r.current||k;return Mae(I,w,y,I==="h"?b:S,!0)},[]),l=m.useCallback(function(y){var w=y;if(!(!Pl.length||Pl[Pl.length-1]!==i)){var x="deltaY"in w?UR(w):wp(w),_=e.current.filter(function(k){return k.name===w.type&&k.target===w.target&&Vae(k.delta,x)})[0];if(_&&_.should){w.preventDefault();return}if(!_){var b=(o.current.shards||[]).map(BR).filter(Boolean).filter(function(k){return k.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.preventDefault()}}},[]),c=m.useCallback(function(y,w,x,_){var b={name:y,delta:w,target:x,should:_};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=m.useCallback(function(y){n.current=wp(y),r.current=void 0},[]),d=m.useCallback(function(y){c(y.type,UR(y),y.target,a(y,t.lockRef.current))},[]),f=m.useCallback(function(y){c(y.type,wp(y),y.target,a(y,t.lockRef.current))},[]);m.useEffect(function(){return Pl.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Cl),document.addEventListener("touchmove",l,Cl),document.addEventListener("touchstart",u,Cl),function(){Pl=Pl.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Cl),document.removeEventListener("touchmove",l,Cl),document.removeEventListener("touchstart",u,Cl)}},[]);var g=t.removeScrollBar,v=t.inert;return m.createElement(m.Fragment,null,v?m.createElement(i,{styles:Lae(s)}):null,g?m.createElement(ZE,{gapMode:"margin"}):null)}const Uae=JE(Y$,Fae);var Z$=m.forwardRef(function(t,e){return m.createElement(av,Nt({},t,{ref:e,sideCar:Uae}))});Z$.classNames=av.classNames;const Bae=Z$,e5="Dialog",[t5,Hme]=nae(e5),[zae,ll]=t5(e5),qae=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=m.useRef(null),l=m.useRef(null),[c=!1,u]=oae({prop:r,defaultProp:s,onChange:i});return m.createElement(zae,{scope:e,triggerRef:a,contentRef:l,contentId:Z0(),titleId:Z0(),descriptionId:Z0(),open:c,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),modal:o},n)},n5="DialogPortal",[Gae,r5]=t5(n5,{forceMount:void 0}),Wae=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ll(n5,e);return m.createElement(Gae,{scope:e,forceMount:n},m.Children.map(r,o=>m.createElement(ov,{present:n||i.open},m.createElement(Cae,{asChild:!0,container:s},o))))},w_="DialogOverlay",Hae=m.forwardRef((t,e)=>{const n=r5(w_,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ll(w_,t.__scopeDialog);return i.modal?m.createElement(ov,{present:r||i.open},m.createElement(Kae,Te({},s,{ref:e}))):null}),Kae=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ll(w_,n);return m.createElement(Bae,{as:cT,allowPinchZoom:!0,shards:[s.contentRef]},m.createElement(iv.div,Te({"data-state":i5(s.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),vh="DialogContent",Qae=m.forwardRef((t,e)=>{const n=r5(vh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ll(vh,t.__scopeDialog);return m.createElement(ov,{present:r||i.open},i.modal?m.createElement(Yae,Te({},s,{ref:e})):m.createElement(Xae,Te({},s,{ref:e})))}),Yae=m.forwardRef((t,e)=>{const n=ll(vh,t.__scopeDialog),r=m.useRef(null),s=cf(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return lf(i)},[]),m.createElement(s5,Te({},t,{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fc(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:fc(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:fc(t.onFocusOutside,i=>i.preventDefault())}))}),Xae=m.forwardRef((t,e)=>{const n=ll(vh,t.__scopeDialog),r=m.useRef(!1);return m.createElement(s5,Te({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i;if((i=t.onCloseAutoFocus)===null||i===void 0||i.call(t,s),!s.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),s.preventDefault()}r.current=!1},onInteractOutside:s=>{var i,o;(i=t.onInteractOutside)===null||i===void 0||i.call(t,s),s.defaultPrevented||(r.current=!0);const a=s.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&s.preventDefault()}}))}),s5=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ll(vh,n),l=m.useRef(null),c=cf(e,l);return Rae(),m.createElement(m.Fragment,null,m.createElement(wae,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i},m.createElement(yae,Te({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":i5(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function i5(t){return t?"open":"closed"}const Jae=qae,Zae=Wae,ele=Hae,tle=Qae;var nle='[cmdk-list-sizer=""]',Yu='[cmdk-group=""]',sx='[cmdk-group-items=""]',rle='[cmdk-group-heading=""]',uT='[cmdk-item=""]',zR=`${uT}:not([aria-disabled="true"])`,__="cmdk-item-select",Ds="data-value",sle=(t,e)=>eae(t,e),o5=m.createContext(void 0),uf=()=>m.useContext(o5),a5=m.createContext(void 0),dT=()=>m.useContext(a5),l5=m.createContext(void 0),c5=m.forwardRef((t,e)=>{let n=m.useRef(null),r=Ml(()=>{var F,z,q;return{search:"",value:(q=(z=t.value)!=null?z:(F=t.defaultValue)==null?void 0:F.toLowerCase())!=null?q:"",filtered:{count:0,items:new Map,groups:new Set}}}),s=Ml(()=>new Set),i=Ml(()=>new Map),o=Ml(()=>new Map),a=Ml(()=>new Set),l=u5(t),{label:c,children:u,value:d,onValueChange:f,filter:g,shouldFilter:v,vimBindings:y=!0,...w}=t,x=m.useId(),_=m.useId(),b=m.useId(),S=mle();mu(()=>{if(d!==void 0){let F=d.trim().toLowerCase();r.current.value=F,S(6,D),k.emit()}},[d]);let k=m.useMemo(()=>({subscribe:F=>(a.current.add(F),()=>a.current.delete(F)),snapshot:()=>r.current,setState:(F,z,q)=>{var W,Y,K;if(!Object.is(r.current[F],z)){if(r.current[F]=z,F==="search")P(),E(),S(1,I);else if(F==="value")if(((W=l.current)==null?void 0:W.value)!==void 0){let ne=z??"";(K=(Y=l.current).onValueChange)==null||K.call(Y,ne);return}else q||S(5,D);k.emit()}},emit:()=>{a.current.forEach(F=>F())}}),[]),R=m.useMemo(()=>({value:(F,z)=>{z!==o.current.get(F)&&(o.current.set(F,z),r.current.filtered.items.set(F,C(z)),S(2,()=>{E(),k.emit()}))},item:(F,z)=>(s.current.add(F),z&&(i.current.has(z)?i.current.get(z).add(F):i.current.set(z,new Set([F]))),S(3,()=>{P(),E(),r.current.value||I(),k.emit()}),()=>{o.current.delete(F),s.current.delete(F),r.current.filtered.items.delete(F);let q=j();S(4,()=>{P(),(q==null?void 0:q.getAttribute("id"))===F&&I(),k.emit()})}),group:F=>(i.current.has(F)||i.current.set(F,new Set),()=>{o.current.delete(F),i.current.delete(F)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],commandRef:n,listId:x,inputId:b,labelId:_}),[]);function C(F){var z,q;let W=(q=(z=l.current)==null?void 0:z.filter)!=null?q:sle;return F?W(F,r.current.search):0}function E(){if(!n.current||!r.current.search||l.current.shouldFilter===!1)return;let F=r.current.filtered.items,z=[];r.current.filtered.groups.forEach(W=>{let Y=i.current.get(W),K=0;Y.forEach(ne=>{let ee=F.get(ne);K=Math.max(ee,K)}),z.push([W,K])});let q=n.current.querySelector(nle);N().sort((W,Y)=>{var K,ne;let ee=W.getAttribute(Ds),he=Y.getAttribute(Ds);return((K=F.get(he))!=null?K:0)-((ne=F.get(ee))!=null?ne:0)}).forEach(W=>{let Y=W.closest(sx);Y?Y.appendChild(W.parentElement===Y?W:W.closest(`${sx} > *`)):q.appendChild(W.parentElement===q?W:W.closest(`${sx} > *`))}),z.sort((W,Y)=>Y[1]-W[1]).forEach(W=>{let Y=n.current.querySelector(`${Yu}[${Ds}="${W[0]}"]`);Y==null||Y.parentElement.appendChild(Y)})}function I(){let F=N().find(q=>!q.ariaDisabled),z=F==null?void 0:F.getAttribute(Ds);k.setState("value",z||void 0)}function P(){if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let F=0;for(let z of s.current){let q=o.current.get(z),W=C(q);r.current.filtered.items.set(z,W),W>0&&F++}for(let[z,q]of i.current)for(let W of q)if(r.current.filtered.items.get(W)>0){r.current.filtered.groups.add(z);break}r.current.filtered.count=F}function D(){var F,z,q;let W=j();W&&(((F=W.parentElement)==null?void 0:F.firstChild)===W&&((q=(z=W.closest(Yu))==null?void 0:z.querySelector(rle))==null||q.scrollIntoView({block:"nearest"})),W.scrollIntoView({block:"nearest"}))}function j(){var F;return(F=n.current)==null?void 0:F.querySelector(`${uT}[aria-selected="true"]`)}function N(){return Array.from(n.current.querySelectorAll(zR))}function L(F){let z=N()[F];z&&k.setState("value",z.getAttribute(Ds))}function B(F){var z;let q=j(),W=N(),Y=W.findIndex(ne=>ne===q),K=W[Y+F];(z=l.current)!=null&&z.loop&&(K=Y+F<0?W[W.length-1]:Y+F===W.length?W[0]:W[Y+F]),K&&k.setState("value",K.getAttribute(Ds))}function O(F){let z=j(),q=z==null?void 0:z.closest(Yu),W;for(;q&&!W;)q=F>0?fle(q,Yu):ple(q,Yu),W=q==null?void 0:q.querySelector(zR);W?k.setState("value",W.getAttribute(Ds)):B(F)}let M=()=>L(N().length-1),U=F=>{F.preventDefault(),F.metaKey?M():F.altKey?O(1):B(1)},$=F=>{F.preventDefault(),F.metaKey?L(0):F.altKey?O(-1):B(-1)};return m.createElement("div",{ref:df([n,e]),...w,"cmdk-root":"",onKeyDown:F=>{var z;if((z=w.onKeyDown)==null||z.call(w,F),!F.defaultPrevented)switch(F.key){case"n":case"j":{y&&F.ctrlKey&&U(F);break}case"ArrowDown":{U(F);break}case"p":case"k":{y&&F.ctrlKey&&$(F);break}case"ArrowUp":{$(F);break}case"Home":{F.preventDefault(),L(0);break}case"End":{F.preventDefault(),M();break}case"Enter":if(!F.nativeEvent.isComposing){F.preventDefault();let q=j();if(q){let W=new Event(__);q.dispatchEvent(W)}}}}},m.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:gle},c),m.createElement(a5.Provider,{value:k},m.createElement(o5.Provider,{value:R},u)))}),ile=m.forwardRef((t,e)=>{var n,r;let s=m.useId(),i=m.useRef(null),o=m.useContext(l5),a=uf(),l=u5(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;mu(()=>a.item(s,o==null?void 0:o.id),[]);let u=d5(s,i,[t.value,t.children,i]),d=dT(),f=za(k=>k.value&&k.value===u.current),g=za(k=>c||a.filter()===!1?!0:k.search?k.filtered.items.get(s)>0:!0);m.useEffect(()=>{let k=i.current;if(!(!k||t.disabled))return k.addEventListener(__,v),()=>k.removeEventListener(__,v)},[g,t.onSelect,t.disabled]);function v(){var k,R;y(),(R=(k=l.current).onSelect)==null||R.call(k,u.current)}function y(){d.setState("value",u.current,!0)}if(!g)return null;let{disabled:w,value:x,onSelect:_,forceMount:b,...S}=t;return m.createElement("div",{ref:df([i,e]),...S,id:s,"cmdk-item":"",role:"option","aria-disabled":w||void 0,"aria-selected":f||void 0,"data-disabled":w||void 0,"data-selected":f||void 0,onPointerMove:w?void 0:y,onClick:w?void 0:v},t.children)}),ole=m.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...i}=t,o=m.useId(),a=m.useRef(null),l=m.useRef(null),c=m.useId(),u=uf(),d=za(v=>s||u.filter()===!1?!0:v.search?v.filtered.groups.has(o):!0);mu(()=>u.group(o),[]),d5(o,a,[t.value,t.heading,l]);let f=m.useMemo(()=>({id:o,forceMount:s}),[s]),g=m.createElement(l5.Provider,{value:f},r);return m.createElement("div",{ref:df([a,e]),...i,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&m.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),m.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},g))}),ale=m.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=m.useRef(null),i=za(o=>!o.search);return!n&&!i?null:m.createElement("div",{ref:df([s,e]),...r,"cmdk-separator":"",role:"separator"})}),lle=m.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,i=dT(),o=za(u=>u.search),a=za(u=>u.value),l=uf(),c=m.useMemo(()=>{var u;let d=(u=l.commandRef.current)==null?void 0:u.querySelector(`${uT}[${Ds}="${a}"]`);return d==null?void 0:d.getAttribute("id")},[a,l.commandRef]);return m.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),m.createElement("input",{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:s?t.value:o,onChange:u=>{s||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),cle=m.forwardRef((t,e)=>{let{children:n,...r}=t,s=m.useRef(null),i=m.useRef(null),o=uf();return m.useEffect(()=>{if(i.current&&s.current){let a=i.current,l=s.current,c,u=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let d=a.offsetHeight;l.style.setProperty("--cmdk-list-height",d.toFixed(1)+"px")})});return u.observe(a),()=>{cancelAnimationFrame(c),u.unobserve(a)}}},[]),m.createElement("div",{ref:df([s,e]),...r,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:o.listId,"aria-labelledby":o.inputId},m.createElement("div",{ref:i,"cmdk-list-sizer":""},n))}),ule=m.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:o,...a}=t;return m.createElement(Jae,{open:n,onOpenChange:r},m.createElement(Zae,{container:o},m.createElement(ele,{"cmdk-overlay":"",className:s}),m.createElement(tle,{"aria-label":t.label,"cmdk-dialog":"",className:i},m.createElement(c5,{ref:e,...a}))))}),dle=m.forwardRef((t,e)=>{let n=m.useRef(!0),r=za(s=>s.filtered.count===0);return m.useEffect(()=>{n.current=!1},[]),n.current||!r?null:m.createElement("div",{ref:e,...t,"cmdk-empty":"",role:"presentation"})}),hle=m.forwardRef((t,e)=>{let{progress:n,children:r,...s}=t;return m.createElement("div",{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},m.createElement("div",{"aria-hidden":!0},r))}),tr=Object.assign(c5,{List:cle,Item:ile,Input:lle,Group:ole,Separator:ale,Dialog:ule,Empty:dle,Loading:hle});function fle(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function ple(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function u5(t){let e=m.useRef(t);return mu(()=>{e.current=t}),e}var mu=typeof window>"u"?m.useEffect:m.useLayoutEffect;function Ml(t){let e=m.useRef();return e.current===void 0&&(e.current=t()),e}function df(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function za(t){let e=dT(),n=()=>t(e.snapshot());return m.useSyncExternalStore(e.subscribe,n,n)}function d5(t,e,n){let r=m.useRef(),s=uf();return mu(()=>{var i;let o=(()=>{var a;for(let l of n){if(typeof l=="string")return l.trim().toLowerCase();if(typeof l=="object"&&"current"in l)return l.current?(a=l.current.textContent)==null?void 0:a.trim().toLowerCase():r.current}})();s.value(t,o),(i=e.current)==null||i.setAttribute(Ds,o),r.current=o}),r}var mle=()=>{let[t,e]=m.useState(),n=Ml(()=>new Map);return mu(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}},gle={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const h5=m.forwardRef(({className:t,...e},n)=>h.jsx(tr,{ref:n,className:fe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));h5.displayName=tr.displayName;const f5=m.forwardRef(({className:t,...e},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(nf,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(tr.Input,{ref:n,className:fe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));f5.displayName=tr.Input.displayName;const p5=m.forwardRef(({className:t,...e},n)=>h.jsx(tr.List,{ref:n,className:fe("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));p5.displayName=tr.List.displayName;const m5=m.forwardRef((t,e)=>h.jsx(tr.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));m5.displayName=tr.Empty.displayName;const g5=m.forwardRef(({className:t,...e},n)=>h.jsx(tr.Group,{ref:n,className:fe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));g5.displayName=tr.Group.displayName;const yle=m.forwardRef(({className:t,...e},n)=>h.jsx(tr.Separator,{ref:n,className:fe("-mx-1 my-1 h-px bg-border",t),...e}));yle.displayName=tr.Separator.displayName;const y5=m.forwardRef(({className:t,...e},n)=>h.jsx(tr.Item,{ref:n,className:fe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...e}));y5.displayName=tr.Item.displayName;function v5(t){const e=vle(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),l=a.find(wle);if(l){const c=l.props.children,u=a.map(d=>d===l?m.Children.count(c)>1?m.Children.only(null):m.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:m.isValidElement(c)?m.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function vle(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=ble(s),a=_le(i,s.props);return s.type!==m.Fragment&&(a.ref=r?sf(r,o):o),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var xle=Symbol("radix.slottable");function wle(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xle}function _le(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function ble(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ele=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bi=Ele.reduce((t,e)=>{const n=v5(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Tle(t,e){t&&ns.flushSync(()=>t.dispatchEvent(e))}var Ile="DismissableLayer",b_="dismissableLayer.update",Sle="dismissableLayer.pointerDownOutside",Cle="dismissableLayer.focusOutside",qR,x5=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),w5=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=m.useContext(x5),[u,d]=m.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),v=Ne(e,C=>d(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(w),_=u?y.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=_>=x,k=Rle(C=>{const E=C.target,I=[...c.branches].some(P=>P.contains(E));!S||I||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),R=Nle(C=>{const E=C.target;[...c.branches].some(P=>P.contains(E))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return l4(C=>{_===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),m.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(qR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),GR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=qR)}},[u,f,n,c]),m.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),GR())},[u,c]),m.useEffect(()=>{const C=()=>g({});return document.addEventListener(b_,C),()=>document.removeEventListener(b_,C)},[]),h.jsx(bi.div,{...l,ref:v,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,R.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,k.onPointerDownCapture)})});w5.displayName=Ile;var Ple="DismissableLayerBranch",Ale=m.forwardRef((t,e)=>{const n=m.useContext(x5),r=m.useRef(null),s=Ne(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),h.jsx(bi.div,{...t,ref:s})});Ale.displayName=Ple;function Rle(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){_5(Sle,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Nle(t,e=globalThis==null?void 0:globalThis.document){const n=sn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&_5(Cle,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function GR(){const t=new CustomEvent(b_);document.dispatchEvent(t)}function _5(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Tle(s,i):s.dispatchEvent(i)}var ix="focusScope.autoFocusOnMount",ox="focusScope.autoFocusOnUnmount",WR={bubbles:!1,cancelable:!0},kle="FocusScope",b5=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=m.useState(null),c=sn(s),u=sn(i),d=m.useRef(null),f=Ne(e,y=>l(y)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(b){if(g.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:Oi(d.current,{select:!0})},w=function(b){if(g.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||Oi(d.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&Oi(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const _=new MutationObserver(x);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),_.disconnect()}}},[r,a,g.paused]),m.useEffect(()=>{if(a){KR.add(g);const y=document.activeElement;if(!a.contains(y)){const x=new CustomEvent(ix,WR);a.addEventListener(ix,c),a.dispatchEvent(x),x.defaultPrevented||(Dle(Lle(E5(a)),{select:!0}),document.activeElement===y&&Oi(a))}return()=>{a.removeEventListener(ix,c),setTimeout(()=>{const x=new CustomEvent(ox,WR);a.addEventListener(ox,u),a.dispatchEvent(x),x.defaultPrevented||Oi(y??document.body,{select:!0}),a.removeEventListener(ox,u),KR.remove(g)},0)}}},[a,c,u,g]);const v=m.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(w&&x){const _=y.currentTarget,[b,S]=jle(_);b&&S?!y.shiftKey&&x===S?(y.preventDefault(),n&&Oi(b,{select:!0})):y.shiftKey&&x===b&&(y.preventDefault(),n&&Oi(S,{select:!0})):x===_&&y.preventDefault()}},[n,r,g.paused]);return h.jsx(bi.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});b5.displayName=kle;function Dle(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Oi(r,{select:e}),document.activeElement!==n)return}function jle(t){const e=E5(t),n=HR(e,t),r=HR(e.reverse(),t);return[n,r]}function E5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function HR(t,e){for(const n of t)if(!Ole(n,{upTo:e}))return n}function Ole(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Mle(t){return t instanceof HTMLInputElement&&"select"in t}function Oi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Mle(t)&&e&&t.select()}}var KR=Vle();function Vle(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=QR(t,e),t.unshift(e)},remove(e){var n;t=QR(t,e),(n=t[0])==null||n.resume()}}}function QR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Lle(t){return t.filter(e=>e.tagName!=="A")}const $le=["top","right","bottom","left"],Io=Math.min,ar=Math.max,pg=Math.round,_p=Math.floor,Es=t=>({x:t,y:t}),Fle={left:"right",right:"left",bottom:"top",top:"bottom"},Ule={start:"end",end:"start"};function E_(t,e,n){return ar(t,Io(e,n))}function ui(t,e){return typeof t=="function"?t(e):t}function di(t){return t.split("-")[0]}function gu(t){return t.split("-")[1]}function hT(t){return t==="x"?"y":"x"}function fT(t){return t==="y"?"height":"width"}function Js(t){return["top","bottom"].includes(di(t))?"y":"x"}function pT(t){return hT(Js(t))}function Ble(t,e,n){n===void 0&&(n=!1);const r=gu(t),s=pT(t),i=fT(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=mg(o)),[o,mg(o)]}function zle(t){const e=mg(t);return[T_(t),e,T_(e)]}function T_(t){return t.replace(/start|end/g,e=>Ule[e])}function qle(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Gle(t,e,n,r){const s=gu(t);let i=qle(di(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(T_)))),i}function mg(t){return t.replace(/left|right|bottom|top/g,e=>Fle[e])}function Wle(t){return{top:0,right:0,bottom:0,left:0,...t}}function T5(t){return typeof t!="number"?Wle(t):{top:t,right:t,bottom:t,left:t}}function gg(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function YR(t,e,n){let{reference:r,floating:s}=t;const i=Js(e),o=pT(e),a=fT(o),l=di(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-s.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:d};break;case"left":g={x:r.x-s.width,y:d};break;default:g={x:r.x,y:r.y}}switch(gu(e)){case"start":g[o]-=f*(n&&c?-1:1);break;case"end":g[o]+=f*(n&&c?-1:1);break}return g}const Hle=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=YR(c,r,l),f=r,g={},v=0;for(let y=0;y<a.length;y++){const{name:w,fn:x}=a[y],{x:_,y:b,data:S,reset:k}=await x({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});u=_??u,d=b??d,g={...g,[w]:{...g[w],...S}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:u,y:d}=YR(c,f,l)),y=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:g}};async function xh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:g=0}=ui(e,t),v=T5(g),w=a[f?d==="floating"?"reference":"floating":d],x=gg(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},k=gg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:b,strategy:l}):_);return{top:(x.top-k.top+v.top)/S.y,bottom:(k.bottom-x.bottom+v.bottom)/S.y,left:(x.left-k.left+v.left)/S.x,right:(k.right-x.right+v.right)/S.x}}const Kle=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ui(t,e)||{};if(c==null)return{};const d=T5(u),f={x:n,y:r},g=pT(s),v=fT(g),y=await o.getDimensions(c),w=g==="y",x=w?"top":"left",_=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=i.reference[v]+i.reference[g]-f[g]-i.floating[v],k=f[g]-i.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=R?R[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(R)))&&(C=a.floating[b]||i.floating[v]);const E=S/2-k/2,I=C/2-y[v]/2-1,P=Io(d[x],I),D=Io(d[_],I),j=P,N=C-y[v]-D,L=C/2-y[v]/2+E,B=E_(j,L,N),O=!l.arrow&&gu(s)!=null&&L!==B&&i.reference[v]/2-(L<j?P:D)-y[v]/2<0,M=O?L<j?L-j:L-N:0;return{[g]:f[g]+M,data:{[g]:B,centerOffset:L-B-M,...O&&{alignmentOffset:M}},reset:O}}}),Qle=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...w}=ui(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=di(s),_=Js(a),b=di(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(b||!y?[mg(a)]:zle(a)),R=v!=="none";!f&&R&&k.push(...Gle(a,y,v,S));const C=[a,...k],E=await xh(e,w),I=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&I.push(E[x]),d){const B=Ble(s,o,S);I.push(E[B[0]],E[B[1]])}if(P=[...P,{placement:s,overflows:I}],!I.every(B=>B<=0)){var D,j;const B=(((D=i.flip)==null?void 0:D.index)||0)+1,O=C[B];if(O){var N;const U=d==="alignment"?_!==Js(O):!1,$=((N=P[0])==null?void 0:N.overflows[0])>0;if(!U||$)return{data:{index:B,overflows:P},reset:{placement:O}}}let M=(j=P.filter(U=>U.overflows[0]<=0).sort((U,$)=>U.overflows[1]-$.overflows[1])[0])==null?void 0:j.placement;if(!M)switch(g){case"bestFit":{var L;const U=(L=P.filter($=>{if(R){const F=Js($.placement);return F===_||F==="y"}return!0}).map($=>[$.placement,$.overflows.filter(F=>F>0).reduce((F,z)=>F+z,0)]).sort(($,F)=>$[1]-F[1])[0])==null?void 0:L[0];U&&(M=U);break}case"initialPlacement":M=a;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function XR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function JR(t){return $le.some(e=>t[e]>=0)}const Yle=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ui(t,e);switch(r){case"referenceHidden":{const i=await xh(e,{...s,elementContext:"reference"}),o=XR(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:JR(o)}}}case"escaped":{const i=await xh(e,{...s,altBoundary:!0}),o=XR(i,n.floating);return{data:{escapedOffsets:o,escaped:JR(o)}}}default:return{}}}}};async function Xle(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=di(n),a=gu(n),l=Js(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=ui(e,t);let{mainAxis:f,crossAxis:g,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*u,y:f*c}:{x:f*c,y:g*u}}const Jle=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await Xle(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Zle=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x,y:_}=w;return{x,y:_}}},...l}=ui(t,e),c={x:n,y:r},u=await xh(e,l),d=Js(di(s)),f=hT(d);let g=c[f],v=c[d];if(i){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",_=g+u[w],b=g-u[x];g=E_(_,g,b)}if(o){const w=d==="y"?"top":"left",x=d==="y"?"bottom":"right",_=v+u[w],b=v-u[x];v=E_(_,v,b)}const y=a.fn({...e,[f]:g,[d]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[d]:o}}}}}},ece=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ui(t,e),u={x:n,y:r},d=Js(s),f=hT(d);let g=u[f],v=u[d];const y=ui(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const b=f==="y"?"height":"width",S=i.reference[f]-i.floating[b]+w.mainAxis,k=i.reference[f]+i.reference[b]-w.mainAxis;g<S?g=S:g>k&&(g=k)}if(c){var x,_;const b=f==="y"?"width":"height",S=["top","left"].includes(di(s)),k=i.reference[d]-i.floating[b]+(S&&((x=o.offset)==null?void 0:x[d])||0)+(S?0:w.crossAxis),R=i.reference[d]+i.reference[b]+(S?0:((_=o.offset)==null?void 0:_[d])||0)-(S?w.crossAxis:0);v<k?v=k:v>R&&(v=R)}return{[f]:g,[d]:v}}}},tce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ui(t,e),u=await xh(e,c),d=di(s),f=gu(s),g=Js(s)==="y",{width:v,height:y}=i.floating;let w,x;d==="top"||d==="bottom"?(w=d,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,w=f==="end"?"top":"bottom");const _=y-u.top-u.bottom,b=v-u.left-u.right,S=Io(y-u[w],_),k=Io(v-u[x],b),R=!e.middlewareData.shift;let C=S,E=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=_),R&&!f){const P=ar(u.left,0),D=ar(u.right,0),j=ar(u.top,0),N=ar(u.bottom,0);g?E=v-2*(P!==0||D!==0?P+D:ar(u.left,u.right)):C=y-2*(j!==0||N!==0?j+N:ar(u.top,u.bottom))}await l({...e,availableWidth:E,availableHeight:C});const I=await o.getDimensions(a.floating);return v!==I.width||y!==I.height?{reset:{rects:!0}}:{}}}};function lv(){return typeof window<"u"}function yu(t){return I5(t)?(t.nodeName||"").toLowerCase():"#document"}function fr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ps(t){var e;return(e=(I5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function I5(t){return lv()?t instanceof Node||t instanceof fr(t).Node:!1}function es(t){return lv()?t instanceof Element||t instanceof fr(t).Element:!1}function Is(t){return lv()?t instanceof HTMLElement||t instanceof fr(t).HTMLElement:!1}function ZR(t){return!lv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fr(t).ShadowRoot}function hf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ts(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function nce(t){return["table","td","th"].includes(yu(t))}function cv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function mT(t){const e=gT(),n=es(t)?ts(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function rce(t){let e=So(t);for(;Is(e)&&!Hc(e);){if(mT(e))return e;if(cv(e))return null;e=So(e)}return null}function gT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hc(t){return["html","body","#document"].includes(yu(t))}function ts(t){return fr(t).getComputedStyle(t)}function uv(t){return es(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function So(t){if(yu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ZR(t)&&t.host||Ps(t);return ZR(e)?e.host:e}function S5(t){const e=So(t);return Hc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Is(e)&&hf(e)?e:S5(e)}function wh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=S5(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=fr(s);if(i){const a=I_(o);return e.concat(o,o.visualViewport||[],hf(s)?s:[],a&&n?wh(a):[])}return e.concat(s,wh(s,[],n))}function I_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function C5(t){const e=ts(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Is(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=pg(n)!==i||pg(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function yT(t){return es(t)?t:t.contextElement}function pc(t){const e=yT(t);if(!Is(e))return Es(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=C5(e);let o=(i?pg(n.width):n.width)/r,a=(i?pg(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const sce=Es(0);function P5(t){const e=fr(t);return!gT()||!e.visualViewport?sce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ice(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==fr(t)?!1:e}function qa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=yT(t);let o=Es(1);e&&(r?es(r)&&(o=pc(r)):o=pc(t));const a=ice(i,n,r)?P5(i):Es(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=fr(i),g=r&&es(r)?fr(r):r;let v=f,y=I_(v);for(;y&&r&&g!==v;){const w=pc(y),x=y.getBoundingClientRect(),_=ts(y),b=x.left+(y.clientLeft+parseFloat(_.paddingLeft))*w.x,S=x.top+(y.clientTop+parseFloat(_.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,d*=w.y,l+=b,c+=S,v=fr(y),y=I_(v)}}return gg({width:u,height:d,x:l,y:c})}function vT(t,e){const n=uv(t).scrollLeft;return e?e.left+n:qa(Ps(t)).left+n}function A5(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:vT(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function oce(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ps(r),a=e?cv(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Es(1);const u=Es(0),d=Is(r);if((d||!d&&!i)&&((yu(r)!=="body"||hf(o))&&(l=uv(r)),Is(r))){const g=qa(r);c=pc(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const f=o&&!d&&!i?A5(o,l,!0):Es(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function ace(t){return Array.from(t.getClientRects())}function lce(t){const e=Ps(t),n=uv(t),r=t.ownerDocument.body,s=ar(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ar(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+vT(t);const a=-n.scrollTop;return ts(r).direction==="rtl"&&(o+=ar(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function cce(t,e){const n=fr(t),r=Ps(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=gT();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function uce(t,e){const n=qa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Is(t)?pc(t):Es(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function eN(t,e,n){let r;if(e==="viewport")r=cce(t,n);else if(e==="document")r=lce(Ps(t));else if(es(e))r=uce(e,n);else{const s=P5(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return gg(r)}function R5(t,e){const n=So(t);return n===e||!es(n)||Hc(n)?!1:ts(n).position==="fixed"||R5(n,e)}function dce(t,e){const n=e.get(t);if(n)return n;let r=wh(t,[],!1).filter(a=>es(a)&&yu(a)!=="body"),s=null;const i=ts(t).position==="fixed";let o=i?So(t):t;for(;es(o)&&!Hc(o);){const a=ts(o),l=mT(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||hf(o)&&!l&&R5(t,o))?r=r.filter(u=>u!==o):s=a,o=So(o)}return e.set(t,r),r}function hce(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?cv(e)?[]:dce(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=eN(e,u,s);return c.top=ar(d.top,c.top),c.right=Io(d.right,c.right),c.bottom=Io(d.bottom,c.bottom),c.left=ar(d.left,c.left),c},eN(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function fce(t){const{width:e,height:n}=C5(t);return{width:e,height:n}}function pce(t,e,n){const r=Is(e),s=Ps(e),i=n==="fixed",o=qa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Es(0);function c(){l.x=vT(s)}if(r||!r&&!i)if((yu(e)!=="body"||hf(s))&&(a=uv(e)),r){const g=qa(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?A5(s,a):Es(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function ax(t){return ts(t).position==="static"}function tN(t,e){if(!Is(t)||ts(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ps(t)===n&&(n=n.ownerDocument.body),n}function N5(t,e){const n=fr(t);if(cv(t))return n;if(!Is(t)){let s=So(t);for(;s&&!Hc(s);){if(es(s)&&!ax(s))return s;s=So(s)}return n}let r=tN(t,e);for(;r&&nce(r)&&ax(r);)r=tN(r,e);return r&&Hc(r)&&ax(r)&&!mT(r)?n:r||rce(t)||n}const mce=async function(t){const e=this.getOffsetParent||N5,n=this.getDimensions,r=await n(t.floating);return{reference:pce(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gce(t){return ts(t).direction==="rtl"}const yce={convertOffsetParentRelativeRectToViewportRelativeRect:oce,getDocumentElement:Ps,getClippingRect:hce,getOffsetParent:N5,getElementRects:mce,getClientRects:ace,getDimensions:fce,getScale:pc,isElement:es,isRTL:gce};function k5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vce(t,e){let n=null,r;const s=Ps(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:g}=c;if(a||e(),!f||!g)return;const v=_p(d),y=_p(s.clientWidth-(u+f)),w=_p(s.clientHeight-(d+g)),x=_p(u),b={rootMargin:-v+"px "+-y+"px "+-w+"px "+-x+"px",threshold:ar(0,Io(1,l))||1};let S=!0;function k(R){const C=R[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!k5(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(k,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(t)}return o(!0),i}function xT(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=yT(t),u=s||i?[...c?wh(c):[],...wh(e)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const d=c&&a?vce(c,n):null;let f=-1,g=null;o&&(g=new ResizeObserver(x=>{let[_]=x;_&&_.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let v,y=l?qa(t):null;l&&w();function w(){const x=qa(t);y&&!k5(y,x)&&n(),y=x,v=requestAnimationFrame(w)}return n(),()=>{var x;u.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),d==null||d(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const xce=Jle,wce=Zle,_ce=Qle,bce=tce,Ece=Yle,nN=Kle,Tce=ece,Ice=(t,e,n)=>{const r=new Map,s={platform:yce,...n},i={...s.platform,_c:r};return Hle(t,e,{...s,platform:i})};var rm=typeof document<"u"?m.useLayoutEffect:m.useEffect;function yg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!yg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!yg(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function D5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function rN(t,e){const n=D5(t);return Math.round(e*n)/n}function lx(t){const e=m.useRef(t);return rm(()=>{e.current=t}),e}function wT(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,g]=m.useState(r);yg(f,r)||g(r);const[v,y]=m.useState(null),[w,x]=m.useState(null),_=m.useCallback(U=>{U!==R.current&&(R.current=U,y(U))},[]),b=m.useCallback(U=>{U!==C.current&&(C.current=U,x(U))},[]),S=i||v,k=o||w,R=m.useRef(null),C=m.useRef(null),E=m.useRef(u),I=l!=null,P=lx(l),D=lx(s),j=lx(c),N=m.useCallback(()=>{if(!R.current||!C.current)return;const U={placement:e,strategy:n,middleware:f};D.current&&(U.platform=D.current),Ice(R.current,C.current,U).then($=>{const F={...$,isPositioned:j.current!==!1};L.current&&!yg(E.current,F)&&(E.current=F,ns.flushSync(()=>{d(F)}))})},[f,e,n,D,j]);rm(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(U=>({...U,isPositioned:!1})))},[c]);const L=m.useRef(!1);rm(()=>(L.current=!0,()=>{L.current=!1}),[]),rm(()=>{if(S&&(R.current=S),k&&(C.current=k),S&&k){if(P.current)return P.current(S,k,N);N()}},[S,k,N,P,I]);const B=m.useMemo(()=>({reference:R,floating:C,setReference:_,setFloating:b}),[_,b]),O=m.useMemo(()=>({reference:S,floating:k}),[S,k]),M=m.useMemo(()=>{const U={position:n,left:0,top:0};if(!O.floating)return U;const $=rN(O.floating,u.x),F=rN(O.floating,u.y);return a?{...U,transform:"translate("+$+"px, "+F+"px)",...D5(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:F}},[n,a,O.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:N,refs:B,elements:O,floatingStyles:M}),[u,N,B,O,M])}const Sce=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?nN({element:r.current,padding:s}).fn(n):{}:r?nN({element:r,padding:s}).fn(n):{}}}},_T=(t,e)=>({...xce(t),options:[t,e]}),bT=(t,e)=>({...wce(t),options:[t,e]}),ET=(t,e)=>({...Tce(t),options:[t,e]}),TT=(t,e)=>({..._ce(t),options:[t,e]}),IT=(t,e)=>({...bce(t),options:[t,e]}),ST=(t,e)=>({...Ece(t),options:[t,e]}),CT=(t,e)=>({...Sce(t),options:[t,e]});var Cce="Arrow",j5=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return h.jsx(bi.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});j5.displayName=Cce;var Pce=j5,PT="Popper",[O5,M5]=xr(PT),[Ace,V5]=O5(PT),L5=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return h.jsx(Ace,{scope:e,anchor:r,onAnchorChange:s,children:n})};L5.displayName=PT;var $5="PopperAnchor",F5=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=V5($5,n),o=m.useRef(null),a=Ne(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:h.jsx(bi.div,{...s,ref:a})});F5.displayName=$5;var AT="PopperContent",[Rce,Nce]=O5(AT),U5=m.forwardRef((t,e)=>{var ee,he,ae,le,ue,ve;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=t,w=V5(AT,n),[x,_]=m.useState(null),b=Ne(e,Pe=>_(Pe)),[S,k]=m.useState(null),R=Yy(S),C=(R==null?void 0:R.width)??0,E=(R==null?void 0:R.height)??0,I=r+(i!=="center"?"-"+i:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],j=D.length>0,N={padding:P,boundary:D.filter(Dce),altBoundary:j},{refs:L,floatingStyles:B,placement:O,isPositioned:M,middlewareData:U}=wT({strategy:"fixed",placement:I,whileElementsMounted:(...Pe)=>xT(...Pe,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[_T({mainAxis:s+E,alignmentAxis:o}),l&&bT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?ET():void 0,...N}),l&&TT({...N}),IT({...N,apply:({elements:Pe,rects:$e,availableWidth:Se,availableHeight:Ke})=>{const{width:Ae,height:Be}=$e.reference,Ge=Pe.floating.style;Ge.setProperty("--radix-popper-available-width",`${Se}px`),Ge.setProperty("--radix-popper-available-height",`${Ke}px`),Ge.setProperty("--radix-popper-anchor-width",`${Ae}px`),Ge.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),S&&CT({element:S,padding:a}),jce({arrowWidth:C,arrowHeight:E}),f&&ST({strategy:"referenceHidden",...N})]}),[$,F]=q5(O),z=sn(v);Lr(()=>{M&&(z==null||z())},[M,z]);const q=(ee=U.arrow)==null?void 0:ee.x,W=(he=U.arrow)==null?void 0:he.y,Y=((ae=U.arrow)==null?void 0:ae.centerOffset)!==0,[K,ne]=m.useState();return Lr(()=>{x&&ne(window.getComputedStyle(x).zIndex)},[x]),h.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:M?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(le=U.transformOrigin)==null?void 0:le.x,(ue=U.transformOrigin)==null?void 0:ue.y].join(" "),...((ve=U.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(Rce,{scope:n,placedSide:$,onArrowChange:k,arrowX:q,arrowY:W,shouldHideArrow:Y,children:h.jsx(bi.div,{"data-side":$,"data-align":F,...y,ref:b,style:{...y.style,animation:M?void 0:"none"}})})})});U5.displayName=AT;var B5="PopperArrow",kce={top:"bottom",right:"left",bottom:"top",left:"right"},z5=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Nce(B5,r),o=kce[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(Pce,{...s,ref:n,style:{...s.style,display:"block"}})})});z5.displayName=B5;function Dce(t){return t!==null}var jce=t=>({name:"transformOrigin",options:t,fn(e){var w,x,_;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=q5(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,g=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let v="",y="";return c==="bottom"?(v=o?d:`${f}px`,y=`${-l}px`):c==="top"?(v=o?d:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,y=o?d:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,y=o?d:`${g}px`),{data:{x:v,y}}}});function q5(t){const[e,n="center"]=t.split("-");return[e,n]}var Oce=L5,G5=F5,Mce=U5,Vce=z5,Lce="Portal",W5=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);Lr(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Kg.createPortal(h.jsx(bi.div,{...r,ref:e}),o):null});W5.displayName=Lce;var dv="Popover",[H5,Kme]=xr(dv,[M5]),ff=M5(),[$ce,$o]=H5(dv),K5=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=ff(e),l=m.useRef(null),[c,u]=m.useState(!1),[d,f]=il({prop:r,defaultProp:s??!1,onChange:i,caller:dv});return h.jsx(Oce,{...a,children:h.jsx($ce,{scope:e,contentId:va(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(g=>!g),[f]),hasCustomAnchor:c,onCustomAnchorAdd:m.useCallback(()=>u(!0),[]),onCustomAnchorRemove:m.useCallback(()=>u(!1),[]),modal:o,children:n})})};K5.displayName=dv;var Q5="PopoverAnchor",Fce=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=$o(Q5,n),i=ff(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return m.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(G5,{...i,...r,ref:e})});Fce.displayName=Q5;var Y5="PopoverTrigger",X5=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=$o(Y5,n),i=ff(n),o=Ne(e,s.triggerRef),a=h.jsx(bi.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":n3(s.open),...r,ref:o,onClick:ge(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:h.jsx(G5,{asChild:!0,...i,children:a})});X5.displayName=Y5;var RT="PopoverPortal",[Uce,Bce]=H5(RT,{forceMount:void 0}),J5=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=$o(RT,e);return h.jsx(Uce,{scope:e,forceMount:n,children:h.jsx(Ur,{present:n||i.open,children:h.jsx(W5,{asChild:!0,container:s,children:r})})})};J5.displayName=RT;var Kc="PopoverContent",Z5=m.forwardRef((t,e)=>{const n=Bce(Kc,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=$o(Kc,t.__scopePopover);return h.jsx(Ur,{present:r||i.open,children:i.modal?h.jsx(qce,{...s,ref:e}):h.jsx(Gce,{...s,ref:e})})});Z5.displayName=Kc;var zce=v5("PopoverContent.RemoveScroll"),qce=m.forwardRef((t,e)=>{const n=$o(Kc,t.__scopePopover),r=m.useRef(null),s=Ne(e,r),i=m.useRef(!1);return m.useEffect(()=>{const o=r.current;if(o)return lf(o)},[]),h.jsx(eT,{as:zce,allowPinchZoom:!0,children:h.jsx(e3,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Gce=m.forwardRef((t,e)=>{const n=$o(Kc,t.__scopePopover),r=m.useRef(!1),s=m.useRef(!1);return h.jsx(e3,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),e3=m.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=$o(Kc,n),g=ff(n);return QE(),h.jsx(b5,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:h.jsx(w5,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(Mce,{"data-state":n3(f.open),role:"dialog",id:f.contentId,...g,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),t3="PopoverClose",Wce=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=$o(t3,n);return h.jsx(bi.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,()=>s.onOpenChange(!1))})});Wce.displayName=t3;var Hce="PopoverArrow",Kce=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ff(n);return h.jsx(Vce,{...s,...r,ref:e})});Kce.displayName=Hce;function n3(t){return t?"open":"closed"}var Qce=K5,Yce=X5,Xce=J5,r3=Z5;const Jce=Qce,Zce=Yce,s3=m.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>h.jsx(Xce,{children:h.jsx(r3,{ref:s,align:e,sideOffset:n,className:fe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));s3.displayName=r3.displayName;function eue({options:t,value:e,onSelect:n,placeholder:r,searchPlaceholder:s,emptyPlaceholder:i,triggerClassName:o}){var c;const[a,l]=m.useState(!1);return h.jsxs(Jce,{open:a,onOpenChange:l,children:[h.jsx(Zce,{asChild:!0,children:h.jsxs(we,{variant:"outline",role:"combobox","aria-expanded":a,className:fe("w-full justify-between font-normal",o),children:[e?(c=t.find(u=>u.value===e))==null?void 0:c.label:r||"Select option...",h.jsx(rne,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(s3,{className:"w-[--radix-popover-trigger-width] p-0",children:h.jsxs(h5,{children:[h.jsx(f5,{placeholder:s||"Search..."}),h.jsxs(p5,{children:[h.jsx(m5,{children:i||"No results found."}),h.jsx(g5,{children:t.map(u=>h.jsxs(y5,{value:u.label,onSelect:()=>{n(u.value),l(!1)},children:[h.jsx(Uy,{className:fe("mr-2 h-4 w-4",e===u.value?"opacity-100":"opacity-0")}),u.label]},u.value))})]})]})})]})}const sN=[{value:"AR",label:"الأرجنتين"},{value:"JO",label:"الأردن"},{value:"EC",label:"الإكوادور"},{value:"AE",label:"الإمارات العربية المتحدة"},{value:"BS",label:"الباهاما"},{value:"BH",label:"البحرين"},{value:"BR",label:"البرازيل"},{value:"PT",label:"البرتغال"},{value:"BA",label:"البوسنة والهرسك"},{value:"GA",label:"الغابون"},{value:"ME",label:"الجبل الأسود"},{value:"DZ",label:"الجزائر"},{value:"DK",label:"الدانمرك"},{value:"CV",label:"الرأس الأخضر"},{value:"SV",label:"السلفادور"},{value:"SN",label:"السنغال"},{value:"SD",label:"السودان"},{value:"SE",label:"السويد"},{value:"EH",label:"الصحراء الغربية"},{value:"SO",label:"الصومال"},{value:"CN",label:"الصين"},{value:"IQ",label:"العراق"},{value:"PH",label:"الفلبين"},{value:"CM",label:"الكاميرون"},{value:"CG",label:"الكونغو - برازافيل"},{value:"CD",label:"الكونغو - كينشاسا"},{value:"KW",label:"الكويت"},{value:"HU",label:"المجر"},{value:"MA",label:"المغرب"},{value:"MX",label:"المكسيك"},{value:"SA",label:"المملكة العربية السعودية"},{value:"GB",label:"المملكة المتحدة"},{value:"NO",label:"النرويج"},{value:"AT",label:"النمسا"},{value:"NE",label:"النيجر"},{value:"IN",label:"الهند"},{value:"US",label:"الولايات المتحدة"},{value:"JP",label:"اليابان"},{value:"YE",label:"اليمن"},{value:"GR",label:"اليونان"},{value:"AW",label:"أروبا"},{value:"AZ",label:"أذربيجان"},{value:"AM",label:"أرمينيا"},{value:"ES",label:"إسبانيا"},{value:"AU",label:"أستراليا"},{value:"EE",label:"إستونيا"},{value:"IL",label:"إسرائيل"},{value:"AF",label:"أفغانستان"},{value:"AL",label:"ألبانيا"},{value:"DE",label:"ألمانيا"},{value:"IT",label:"إيطاليا"},{value:"AQ",label:"أنتاركتيكا"},{value:"AG",label:"أنتيغوا وبربودا"},{value:"AD",label:"أندورا"},{value:"ID",label:"إندونيسيا"},{value:"AO",label:"أنغولا"},{value:"AI",label:"أنغويلا"},{value:"UY",label:"أوروغواي"},{value:"UZ",label:"أوزبكستان"},{value:"UG",label:"أوغندا"},{value:"UA",label:"أوكرانيا"},{value:"IR",label:"إيران"},{value:"IE",label:"أيرلندا"},{value:"IS",label:"أيسلندا"},{value:"ET",label:"إثيوبيا"},{value:"ER",label:"إريتريا"},{value:"PG",label:"بابوا غينيا الجديدة"},{value:"PY",label:"باراغواي"},{value:"PK",label:"باكستان"},{value:"PW",label:"بالاو"},{value:"BB",label:"بربادوس"},{value:"BM",label:"برمودا"},{value:"BN",label:"بروناي"},{value:"BE",label:"بلجيكا"},{value:"BG",label:"بلغاريا"},{value:"BZ",label:"بليز"},{value:"BD",label:"بنغلاديش"},{value:"PA",label:"بنما"},{value:"BJ",label:"بنين"},{value:"BT",label:"بوتان"},{value:"BW",label:"بوتسوانا"},{value:"PR",label:"بورتوريكو"},{value:"BF",label:"بوركينا فاسو"},{value:"BI",label:"بوروندي"},{value:"PL",label:"بولندا"},{value:"BO",label:"بوليفيا"},{value:"PF",label:"بولينيزيا الفرنسية"},{value:"PE",label:"بيرو"},{value:"TZ",label:"تانزانيا"},{value:"TH",label:"تايلاند"},{value:"TW",label:"تايوان"},{value:"TM",label:"تركمانستان"},{value:"TR",label:"تركيا"},{value:"TT",label:"ترينيداد وتوباغو"},{value:"TD",label:"تشاد"},{value:"CL",label:"تشيلي"},{value:"TG",label:"توغو"},{value:"TV",label:"توفالو"},{value:"TK",label:"توكيلاو"},{value:"TN",label:"تونس"},{value:"TO",label:"تونغا"},{value:"TL",label:"تيمور - ليشتي"},{value:"JM",label:"جامايكا"},{value:"GI",label:"جبل طارق"},{value:"AX",label:"جزر أولاند"},{value:"AN",label:"جزر الأنتيل الهولندية"},{value:"TC",label:"جزر تركس وكايكوس"},{value:"KM",label:"جزر القمر"},{value:"MV",label:"جزر المالديف"},{value:"SB",label:"جزر سليمان"},{value:"FO",label:"جزر فارو"},{value:"FK",label:"جزر فوكلاند"},{value:"FJ",label:"جزر فيجي"},{value:"KY",label:"جزر كايمان"},{value:"CK",label:"جزر كوك"},{value:"CC",label:"جزر كوكوس"},{value:"MH",label:"جزر مارشال"},{value:"MP",label:"جزر ماريانا الشمالية"},{value:"VI",label:"جزر فيرجن الأمريكية"},{value:"VG",label:"جزر فيرجن البريطانية"},{value:"CF",label:"جمهورية أفريقيا الوسطى"},{value:"CZ",label:"جمهورية التشيك"},{value:"DO",label:"جمهورية الدومينيكان"},{value:"ZA",label:"جنوب أفريقيا"},{value:"GP",label:"جوادلوب"},{value:"GE",label:"جورجيا"},{value:"DJ",label:"جيبوتي"},{value:"RW",label:"رواندا"},{value:"RU",label:"روسيا"},{value:"BY",label:"روسيا البيضاء"},{value:"RO",label:"رومانيا"},{value:"RE",label:"روينيون"},{value:"ZM",label:"زامبيا"},{value:"ZW",label:"زيمبابوي"},{value:"CI",label:"ساحل العاج"},{value:"WS",label:"ساموا"},{value:"AS",label:"ساموا الأمريكية"},{value:"SM",label:"سان مارينو"},{value:"ST",label:"ساو تومي وبرينسيب"},{value:"LK",label:"سريلانكا"},{value:"SK",label:"سلوفاكيا"},{value:"SI",label:"سلوفينيا"},{value:"SG",label:"سنغافورة"},{value:"SZ",label:"سوازيلاند"},{value:"SY",label:"سوريا"},{value:"SR",label:"سورينام"},{value:"CH",label:"سويسرا"},{value:"SL",label:"سيراليون"},{value:"SC",label:"سيشل"},{value:"RS",label:"صربيا"},{value:"TJ",label:"طاجيكستان"},{value:"OM",label:"عُمان"},{value:"GM",label:"غامبيا"},{value:"GH",label:"غانا"},{value:"GD",label:"غرينادا"},{value:"GT",label:"غواتيمالا"},{value:"GY",label:"غيانا"},{value:"GF",label:"غيانا الفرنسية"},{value:"GN",label:"غينيا"},{value:"GQ",label:"غينيا الاستوائية"},{value:"GW",label:"غينيا بيساو"},{value:"VU",label:"فانواتو"},{value:"FR",label:"فرنسا"},{value:"PS",label:"فلسطين"},{value:"VE",label:"فنزويلا"},{value:"FI",label:"فنلندا"},{value:"VN",label:"فيتنام"},{value:"CY",label:"قبرص"},{value:"QA",label:"قطر"},{value:"KG",label:"قيرغيزستان"},{value:"KZ",label:"كازاخستان"},{value:"HR",label:"كرواتيا"},{value:"KH",label:"كمبوديا"},{value:"CA",label:"كندا"},{value:"CU",label:"كوبا"},{value:"KR",label:"كوريا الجنوبية"},{value:"KP",label:"كوريا الشمالية"},{value:"CR",label:"كوستاريكا"},{value:"CO",label:"كولومبيا"},{value:"KI",label:"كيريباتي"},{value:"KE",label:"كينيا"},{value:"LV",label:"لاتفيا"},{value:"LA",label:"لاوس"},{value:"LB",label:"لبنان"},{value:"LU",label:"لوكسمبورغ"},{value:"LY",label:"ليبيا"},{value:"LR",label:"ليبيريا"},{value:"LT",label:"ليتوانيا"},{value:"LI",label:"ليختنشتاين"},{value:"LS",label:"ليسوتو"},{value:"MQ",label:"مارتينيك"},{value:"MT",label:"مالطا"},{value:"ML",label:"مالي"},{value:"MY",label:"ماليزيا"},{value:"YT",label:"مايوت"},{value:"MG",label:"مدغشقر"},{value:"EG",label:"مصر"},{value:"MK",label:"مقدونيا"},{value:"MW",label:"ملاوي"},{value:"MN",label:"منغوليا"},{value:"MR",label:"موريتانيا"},{value:"MU",label:"موريشيوس"},{value:"MZ",label:"موزمبيق"},{value:"MD",label:"مولدوفا"},{value:"MC",label:"موناكو"},{value:"MS",label:"مونتسرات"},{value:"MM",label:"ميانمار (بورما)"},{value:"FM",label:"ميكرونيزيا"},{value:"NA",label:"ناميبيا"},{value:"NR",label:"ناورو"},{value:"NP",label:"نيبال"},{value:"NG",label:"نيجيريا"},{value:"NI",label:"نيكاراغوا"},{value:"NZ",label:"نيوزيلندا"},{value:"NU",label:"نيوي"},{value:"HT",label:"هايتي"},{value:"HN",label:"هندوراس"},{value:"NL",label:"هولندا"},{value:"HK",label:"هونغ كونغ"}],tue=t=>{const e={};return/^[a-zA-Z\u0600-\u06FF\s-']+$/.test(t.firstName.trim())||(e.firstName="الاسم الأول يجب أن يحتوي على حروف فقط."),/^[a-zA-Z\u0600-\u06FF\s-']+$/.test(t.lastName.trim())||(e.lastName="الاسم الأخير يجب أن يحتوي على حروف فقط."),/^\S+@\S+\.\S+$/.test(t.email)||(e.email="صيغة البريد الإلكتروني غير صحيحة."),/^\+?[0-9\s-()]{7,15}$/.test(t.phone)||(e.phone="صيغة رقم الهاتف غير صحيحة."),t.address.trim().length<10&&(e.address="العنوان يجب ألا يقل عن 10 أحرف."),t.city.trim().length<2&&(e.city="اسم المدينة يجب ألا يقل عن حرفين."),t.country||(e.country="يرجى اختيار دولة."),t.postalCode&&!/^[a-zA-Z0-9\s-]{3,10}$/.test(t.postalCode)&&(e.postalCode="الرمز البريدي غير صالح."),e},nue=()=>{const t=er(),{toast:e}=pn(),{cartItems:n,cartTotal:r,clearCart:s}=zy(),{currentUser:i}=_i(),[o,a]=m.useState(!1),[l,c]=m.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",country:"EG",postalCode:"",paymentMethod:"cod"}),[u,d]=m.useState({});m.useEffect(()=>{var x;n.length===0&&!((x=location.state)!=null&&x.fromCart)&&(e({title:"سلتك فارغة!",description:"يتم توجيهك لصفحة المنتجات.",variant:"destructive"}),t("/products"))},[n,t,e,location.state]),m.useEffect(()=>{var x;if(i){const _=((x=i.displayName)==null?void 0:x.split(" "))||["",""];c(b=>({...b,email:i.email||"",firstName:_[0]||"",lastName:_.slice(1).join(" ")||"",phone:i.phoneNumber||""}))}},[i]);const f=r>0?50:0,g=r+f,v=x=>{const{name:_,value:b}=x.target;c(S=>({...S,[_]:b})),u[_]&&d(S=>({...S,[_]:null}))},y=x=>{c(_=>({..._,country:x,postalCode:""})),u.country&&d(_=>({..._,country:null,postalCode:null}))},w=async x=>{var b;if(x.preventDefault(),!n||n.length===0)return;const _=tue(l);if(Object.keys(_).length>0){d(_),e({title:"بيانات غير مكتملة",description:"يرجى مراجعة الحقول التي عليها علامة حمراء.",variant:"destructive"});return}a(!0);try{const S=((b=sN.find(L=>L.value===l.country))==null?void 0:b.label)||l.country,k={userId:i?i.uid:null,shipping:{fullName:`${l.firstName.trim()} ${l.lastName.trim()}`,phone:l.phone,address:l.address,city:l.city,country:S,postalCode:l.postalCode},userEmail:l.email,items:n.map(L=>({id:L.id,name:L.name,quantity:L.quantity,price:L.price,imageUrl:L.image||null})),subtotal:r,shippingCost:f,total:g,status:"pending",paymentMethod:l.paymentMethod,createdAt:it.now()},R=await vE(Rr(dt,"orders"),k),C=wE(dt);n.forEach(L=>{const B=dr(dt,"products",L.id);C.update(B,{stock:qV(-L.quantity)})}),await C.commit();const E=n.map(L=>`
          <tr>
            <td style="padding:8px; border-bottom:1px solid #ddd;">${L.name}</td>
            <td style="padding:8px; border-bottom:1px solid #ddd; text-align:center;">${L.quantity}</td>
            <td style="padding:8px; border-bottom:1px solid #ddd; text-align:right;">${(L.price*L.quantity).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})}</td>
          </tr>
        `).join(""),I={to_name:k.shipping.fullName,order_id:R.id,order_total:g.toLocaleString("ar-EG",{style:"currency",currency:"EGP"}),order_address:`${k.shipping.address}, ${k.shipping.city}, ${k.shipping.country}`,order_items_html:E,customer_phone:k.shipping.phone,payment_method:"الدفع عند الاستلام",order_subtotal:r.toLocaleString("ar-EG",{style:"currency",currency:"EGP"}),order_shipping_cost:f.toLocaleString("ar-EG",{style:"currency",currency:"EGP"}),from_name:"متجر Right Water",support_email:"rightwater156@gmail.com"},P="service_64z3nuk",D="template_12584ol",j="template_6dk4ib8",N="Yv-DxRXZ5X9ZmSg3K";try{const L={...I,to_email:k.userEmail,reply_to:"rightwater156@gmail.com"};await xR.send(P,D,L,N);const B={...I,to_email:"rightwater156@gmail.com",client_email:k.userEmail,reply_to:k.userEmail};await xR.send(P,j,B,N)}catch(L){console.error("فشل إرسال الإيميل:",L)}s(),e({title:"🎉 تم إرسال طلبك بنجاح!",description:`شكراً لك. رقم طلبك هو: ${R.id}`,className:"bg-green-500 text-white",duration:7e3}),t(`/order-success/${R.id}`,{state:{orderData:{id:R.id,...k}}})}catch(S){console.error("Error placing order: ",S),e({title:"حدث خطأ",description:"لم نتمكن من إتمام طلبك. يرجى المحاولة لاحقاً.",variant:"destructive"})}finally{a(!1)}};return!n.length&&!o?h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[h.jsx(tn,{className:"h-12 w-12 animate-spin text-primary mb-4"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"جاري التحقق من السلة..."})]}):h.jsxs("div",{className:"container mx-auto px-4 py-12",children:[h.jsx(me.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-4xl font-extrabold text-center mb-8 text-primary",children:"إتمام عملية الدفع"}),h.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[h.jsxs(me.form,{onSubmit:w,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-2 space-y-4 bg-card p-6 rounded-xl shadow-xl",children:[h.jsx("h2",{className:"text-xl font-semibold border-b pb-2 mb-4",children:"معلومات الشحن"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"firstName",children:"الاسم الأول"}),h.jsx(ze,{id:"firstName",name:"firstName",value:l.firstName,onChange:v,required:!0,className:u.firstName?"border-destructive":""}),u.firstName&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.firstName})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"lastName",children:"الاسم الأخير"}),h.jsx(ze,{id:"lastName",name:"lastName",value:l.lastName,onChange:v,required:!0,className:u.lastName?"border-destructive":""}),u.lastName&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.lastName})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"email",children:"البريد الإلكتروني"}),h.jsx(ze,{id:"email",name:"email",type:"email",value:l.email,onChange:v,required:!0,className:u.email?"border-destructive":""}),u.email&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.email})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"phone",children:"رقم الهاتف"}),h.jsx(ze,{id:"phone",name:"phone",type:"tel",value:l.phone,onChange:v,required:!0,className:u.phone?"border-destructive":""}),u.phone&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.phone})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx(Ue,{htmlFor:"address",children:"العنوان بالتفصيل"}),h.jsx(ze,{id:"address",name:"address",value:l.address,onChange:v,required:!0,className:u.address?"border-destructive":""}),u.address&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.address})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"country",children:"الدولة"}),h.jsx(eue,{options:sN,value:l.country,onSelect:y,placeholder:"اختر الدولة...",searchPlaceholder:"ابحث...",emptyPlaceholder:"لا توجد نتائج.",triggerClassName:u.country?"border-destructive":""}),u.country&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.country})]}),h.jsxs("div",{children:[h.jsx(Ue,{htmlFor:"city",children:"المدينة / المحافظة"}),h.jsx(ze,{id:"city",name:"city",value:l.city,onChange:v,required:!0,className:u.city?"border-destructive":""}),u.city&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.city})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx(Ue,{htmlFor:"postalCode",children:"الرمز البريدي (اختياري)"}),h.jsx(ze,{id:"postalCode",name:"postalCode",value:l.postalCode,onChange:v,className:u.postalCode?"border-destructive":""}),u.postalCode&&h.jsx("p",{className:"text-destructive text-xs mt-1",children:u.postalCode})]})]}),h.jsxs(we,{type:"submit",className:"w-full mt-6",size:"lg",disabled:o,children:[o?h.jsx(tn,{className:"animate-spin mr-2 h-4 w-4"}):h.jsx(vne,{className:"mr-2 h-4 w-4"}),o?"جاري تنفيذ الطلب...":"تأكيد الطلب والدفع عند الاستلام"]})]}),h.jsx(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"sticky top-24",children:h.jsxs(ft,{className:"p-6 shadow-xl rounded-xl bg-card",children:[h.jsx(zt,{className:"p-0 mb-4",children:h.jsx(Lt,{className:"text-center text-lg font-semibold text-primary",children:"ملخص طلبك"})}),h.jsxs(Et,{className:"p-0",children:[h.jsx("div",{className:"max-h-60 overflow-y-auto pr-2 custom-scrollbar space-y-3 mb-3",children:n.map(x=>h.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:x.image,alt:x.name,className:"w-12 h-12 rounded-md object-cover"}),h.jsxs("div",{className:"text-sm",children:[h.jsx("p",{className:"font-semibold",children:x.name}),h.jsxs("p",{className:"text-muted-foreground",children:["الكمية: ",x.quantity]})]})]}),h.jsx("p",{className:"text-sm font-medium",children:(x.price*x.quantity).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]},x.id))}),h.jsxs("div",{className:"pt-3 border-t space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[h.jsx("span",{children:"المجموع الفرعي:"}),h.jsx("span",{children:r.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),f>0&&h.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[h.jsx("span",{children:"تكلفة الشحن:"}),h.jsx("span",{children:f.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),h.jsxs("div",{className:"flex justify-between pt-2 border-t font-semibold text-lg",children:[h.jsx("span",{children:"الإجمالي الكلي:"}),h.jsx("span",{children:g.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]})]})]})]})})]})]})},rue="modulepreload",sue=function(t){return"/"+t},iN={},i3=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=sue(i),i in iN)return;iN[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":rue,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},iue=()=>{var a,l,c,u,d,f,g,v,y;const{orderId:t}=N1(),e=Ro(),[n,r]=m.useState(((a=e.state)==null?void 0:a.orderData)||null),[s,i]=m.useState(!((l=e.state)!=null&&l.orderData));m.useEffect(()=>{!n&&t&&(async()=>{try{const{db:x,doc:_,getDoc:b}=await i3(()=>Promise.resolve().then(()=>Kte),void 0),S=await b(_(x,"orders",t));S.exists()&&r({id:S.id,...S.data()})}catch(x){console.error("Error fetching order:",x),r(null)}finally{i(!1)}})()},[t,n]);const o=w=>typeof w!="number"?"":new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(w);return s?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:h.jsx(tn,{className:"h-12 w-12 text-sky-500 animate-spin"})}):n?h.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-12",children:h.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto bg-white dark:bg-slate-800 rounded-xl shadow-xl p-6 sm:p-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(me.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:h.jsx(tne,{className:"w-12 h-12 text-green-500"})}),h.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"تم استلام طلبك بنجاح!"}),h.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:["شكراً لك، ",(c=n.shipping)==null?void 0:c.fullName,". سنقوم بمعالجة طلبك في أقرب وقت."]}),h.jsxs("p",{className:"text-sky-600 dark:text-sky-400 font-medium bg-sky-50 dark:bg-sky-900/50 rounded-md p-2 inline-block",children:["رقم الطلب: ",n.id]})]}),h.jsxs("div",{className:"border-t border-b dark:border-slate-700 py-6 mb-6",children:[h.jsxs("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[h.jsx(gh,{className:"mr-2 rtl:ml-2 rtl:mr-0 text-sky-500"}),"ملخص الطلب"]}),h.jsx("div",{className:"space-y-4",children:(u=n.items)==null?void 0:u.map(w=>h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[h.jsx("img",{src:w.imageUrl||"https://via.placeholder.com/64",alt:w.name,className:"w-16 h-16 object-cover rounded-lg border dark:border-slate-700"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.name}),h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["الكمية: ",w.quantity]})]})]}),h.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:o(w.price*w.quantity)})]},w.id||w.name))})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-4",children:"سيتم الشحن إلى"}),h.jsxs("div",{className:"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[h.jsx("p",{className:"font-semibold",children:(d=n.shipping)==null?void 0:d.fullName}),h.jsx("p",{children:(f=n.shipping)==null?void 0:f.address}),h.jsxs("p",{children:[(g=n.shipping)==null?void 0:g.city,", ",(v=n.shipping)==null?void 0:v.country]}),h.jsxs("p",{children:["الهاتف: ",(y=n.shipping)==null?void 0:y.phone]})]})]}),h.jsxs("div",{className:"border-t dark:border-slate-700 pt-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[h.jsx(we,{asChild:!0,variant:"outline",children:h.jsxs(Le,{to:"/products",className:"w-full sm:w-auto flex items-center justify-center",children:[h.jsx(hu,{className:"ml-2 rtl:mr-2 rtl:ml-0 h-4 w-4"}),"متابعة التسوق"]})}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["المجموع الفرعي: ",o(n.subtotal)]}),h.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["الشحن: ",o(n.shippingCost)]}),h.jsxs("p",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:["الإجمالي: ",o(n.total)]})]})]})]})})}):h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:h.jsxs("div",{className:"text-center p-4",children:[h.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"عذراً، لم نتمكن من العثور على طلبك"}),h.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"قد يكون الرابط غير صحيح أو تم حذف الطلب."}),h.jsx(we,{asChild:!0,children:h.jsx(Le,{to:"/",children:"العودة للصفحة الرئيسية"})})]})})},bp=t=>typeof t!="number"?"N/A":new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t),oue=t=>t!=null&&t.toDate?new Intl.DateTimeFormat("ar-EG",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit"}).format(t.toDate()):"تاريخ غير معروف",aue=t=>({pending:{label:"قيد المراجعة",color:"bg-yellow-100 dark:bg-yellow-900/50",textColor:"text-yellow-800 dark:text-yellow-300"},processing:{label:"قيد المعالجة",color:"bg-blue-100 dark:bg-blue-900/50",textColor:"text-blue-800 dark:text-blue-300"},shipped:{label:"تم الشحن",color:"bg-sky-100 dark:bg-sky-900/50",textColor:"text-sky-800 dark:text-sky-300"},completed:{label:"مكتمل",color:"bg-green-100 dark:bg-green-900/50",textColor:"text-green-800 dark:text-green-300"},cancelled:{label:"ملغي",color:"bg-red-100 dark:bg-red-900/50",textColor:"text-red-800 dark:text-red-300"},"on-hold":{label:"في الانتظار",color:"bg-orange-100 dark:bg-orange-900/50",textColor:"text-orange-800 dark:text-orange-300"}})[t]||{label:t,color:"bg-slate-100 dark:bg-slate-700",textColor:"text-slate-800 dark:text-slate-300"},lue=()=>{var o,a,l,c,u;const{orderId:t}=N1(),[e,n]=m.useState(null),[r,s]=m.useState(!0);if(m.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const f=await mE(dr(dt,"orders",t));f.exists()&&n({id:f.id,...f.data()})}catch(f){console.error("Error fetching order:",f)}finally{s(!1)}})()},[t]),r)return h.jsx("div",{className:"flex justify-center items-center h-screen",children:h.jsx(tn,{className:"h-12 w-12 animate-spin text-primary"})});if(!e)return h.jsx("div",{className:"text-center p-8",children:h.jsx("h1",{children:"لم يتم العثور على الطلب المحدد."})});const i=aue(e.status);return h.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 min-h-screen py-12",children:h.jsx("div",{className:"container mx-auto px-4",children:h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[h.jsxs(ft,{className:"max-w-4xl mx-auto shadow-xl",children:[h.jsxs(zt,{className:"border-b dark:border-slate-700 p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[h.jsxs("div",{children:[h.jsxs(Lt,{className:"text-2xl font-bold flex items-center gap-2",children:[h.jsx(hne,{className:"h-6 w-6 text-primary"}),h.jsx("span",{children:"تفاصيل الطلب"})]}),h.jsxs(Nr,{children:["رقم الطلب: ",e.id]})]}),h.jsx(pu,{className:`text-sm px-3 py-1 ${i.color} ${i.textColor}`,children:i.label})]}),h.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-4 flex items-center gap-2",children:[h.jsx(ene,{className:"h-4 w-4"}),h.jsxs("span",{children:["تاريخ الطلب: ",oue(e.createdAt)]})]})]}),h.jsxs(Et,{className:"p-6 space-y-8",children:[h.jsxs("section",{children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"سيتم الشحن إلى"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-slate-700 dark:text-slate-300",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(By,{className:"h-5 w-5 text-primary"}),h.jsx("span",{children:(o=e.shipping)==null?void 0:o.fullName})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(WL,{className:"h-5 w-5 text-primary"}),h.jsx("span",{children:(a=e.shipping)==null?void 0:a.phone})]}),h.jsxs("div",{className:"md:col-span-2 flex items-start gap-3",children:[h.jsx(xne,{className:"h-5 w-5 text-primary mt-1"}),h.jsx("span",{children:`${(l=e.shipping)==null?void 0:l.address}, ${(c=e.shipping)==null?void 0:c.city}`})]})]})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"المنتجات"}),h.jsx("div",{className:"space-y-4",children:(u=e.items)==null?void 0:u.map(d=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("img",{src:d.imageUrl,alt:d.name,className:"w-16 h-16 object-cover rounded-md"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:d.name}),h.jsxs("p",{className:"text-sm text-slate-500",children:["الكمية: ",d.quantity]})]})]}),h.jsx("p",{className:"font-semibold",children:bp(d.price*d.quantity)})]},d.id))})]}),h.jsxs("section",{className:"border-t dark:border-slate-700 pt-6",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ملخص الدفع"}),h.jsxs("div",{className:"space-y-2 max-w-sm ml-auto rtl:mr-auto rtl:ml-0",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-slate-500",children:"المجموع الفرعي:"}),h.jsx("span",{children:bp(e.subtotal)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-slate-500",children:"تكلفة الشحن:"}),h.jsx("span",{children:bp(e.shippingCost)})]}),h.jsxs("div",{className:"flex justify-between font-bold text-lg border-t dark:border-slate-600 pt-2 mt-2",children:[h.jsx("span",{children:"الإجمالي الكلي:"}),h.jsx("span",{children:bp(e.total)})]})]})]})]})]}),h.jsx("div",{className:"text-center mt-8",children:h.jsx(we,{asChild:!0,variant:"outline",children:h.jsxs(Le,{to:"/profile",children:[h.jsx($L,{className:"ml-2 h-4 w-4"}),"العودة إلى طلباتي"]})})})]})})})},cue=()=>{const t=[{icon:h.jsx(F0,{size:28,className:"text-sky-500"}),title:"1. مقدمة وقبول الشروط",content:"مرحبًا بك في موقع رايت واتر. باستخدامك لموقعنا وخدماتنا، فإنك توافق على الالتزام بهذه الشروط والأحكام. إذا كنت لا توافق على أي جزء من هذه الشروط، فيجب عليك عدم استخدام خدماتنا. نحتفظ بالحق في تعديل هذه الشروط في أي وقت، وستصبح التعديلات سارية فور نشرها."},{icon:h.jsx(Ane,{size:28,className:"text-sky-500"}),title:"2. استخدام الموقع وحساب المستخدم",content:"يجب أن يكون عمرك 18 عامًا على الأقل لاستخدام خدماتنا وإنشاء حساب. أنت مسؤول عن الحفاظ على سرية معلومات حسابك وكلمة المرور، وعن جميع الأنشطة التي تحدث تحت حسابك. يجب عليك إخطارنا فورًا بأي استخدام غير مصرح به لحسابك."},{icon:h.jsx(Ine,{size:28,className:"text-sky-500"}),title:"3. المنتجات والطلبات",content:"نسعى جاهدين لعرض معلومات دقيقة عن المنتجات، بما في ذلك الأسعار والمواصفات. ومع ذلك، قد تحدث أخطاء. نحتفظ بالحق في تصحيح أي أخطاء ورفض أو إلغاء أي طلبات تم تقديمها بناءً على معلومات غير صحيحة. جميع الطلبات تخضع للتوفر."},{icon:h.jsx(rf,{size:28,className:"text-sky-500"}),title:"4. الملكية الفكرية",content:"جميع المحتويات الموجودة على هذا الموقع، بما في ذلك النصوص والرسومات والشعارات والصور والبرامج، هي ملك لشركة رايت واتر أو مورديها ومحمية بموجب قوانين حقوق النشر."},{icon:h.jsx(jE,{size:28,className:"text-sky-500"}),title:"5. تحديد المسؤولية",content:"إلى أقصى حد يسمح به القانون، لن تكون شركة رايت واتر مسؤولة عن أي أضرار مباشرة أو غير مباشرة تنشأ عن استخدامك لخدماتنا."},{icon:h.jsx(F0,{size:28,className:"text-sky-500"}),title:"6. القانون الحاكم",content:"تخضع هذه الشروط والأحكام وتُفسر وفقًا لقوانين جمهورية مصر العربية."},{icon:h.jsx(tf,{size:28,className:"text-sky-500"}),title:"7. معلومات الاتصال",content:"إذا كان لديك أي أسئلة حول هذه الشروط والأحكام، يرجى التواصل معنا عبر صفحة 'اتصل بنا'."}];return h.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 py-12 md:py-20",children:h.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs(me.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"text-center mb-12 md:mb-16",children:[h.jsx(F0,{className:"mx-auto text-sky-500 mb-4 h-16 w-16"}),h.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-sky-600 dark:text-sky-400 mb-3",children:"الشروط والأحكام"}),h.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"آخر تحديث: 8 يونيو 2024"})]}),h.jsx("div",{className:"max-w-3xl mx-auto bg-white dark:bg-slate-800 p-6 sm:p-10 rounded-xl shadow-2xl space-y-10",children:t.map((e,n)=>h.jsxs(me.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.5,delay:n*.1},children:[h.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse mb-4",children:[h.jsx("div",{className:"flex-shrink-0 p-2 bg-sky-100 dark:bg-sky-700/30 rounded-full mt-1",children:e.icon}),h.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-700 dark:text-slate-200",children:e.title})]}),h.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed",children:e.content})]},n))})]})})},uue=t=>typeof t!="number"?"N/A":new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t),due=t=>t!=null&&t.toDate?new Intl.DateTimeFormat("ar-EG",{day:"numeric",month:"long",year:"numeric"}).format(t.toDate()):"تاريخ غير معروف",hue=t=>({pending:{label:"قيد المراجعة",color:"bg-yellow-100 dark:bg-yellow-900/50",textColor:"text-yellow-800 dark:text-yellow-300"},processing:{label:"قيد المعالجة",color:"bg-blue-100 dark:bg-blue-900/50",textColor:"text-blue-800 dark:text-blue-300"},shipped:{label:"تم الشحن",color:"bg-sky-100 dark:bg-sky-900/50",textColor:"text-sky-800 dark:text-sky-300"},completed:{label:"مكتمل",color:"bg-green-100 dark:bg-green-900/50",textColor:"text-green-800 dark:text-green-300"},cancelled:{label:"ملغي",color:"bg-red-100 dark:bg-red-900/50",textColor:"text-red-800 dark:text-red-300"},"on-hold":{label:"في الانتظار",color:"bg-orange-100 dark:bg-orange-900/50",textColor:"text-orange-800 dark:text-orange-300"}})[t]||{label:t,color:"bg-slate-100 dark:bg-slate-700",textColor:"text-slate-800 dark:text-slate-300"},fue=()=>{const{currentUser:t}=_i(),[e,n]=m.useState([]),[r,s]=m.useState(!0);return m.useEffect(()=>{if(!t)return;s(!0);const i=Uc(Rr(dt,"orders"),fE("userId","==",t.uid),Ma("createdAt","desc")),o=Jh(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));n(l),s(!1)},()=>s(!1));return()=>o()},[t]),r?h.jsx(tn,{className:"h-8 w-8 animate-spin mx-auto mt-8"}):h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs(zt,{className:"p-0 mb-6",children:[h.jsx(Lt,{className:"text-2xl font-bold",children:"طلباتي السابقة"}),h.jsx(Nr,{children:"هنا يمكنك تتبع جميع طلباتك."})]}),h.jsx(Et,{className:"p-0",children:e.length>0?h.jsx("div",{className:"space-y-4",children:e.map(i=>{const o=hue(i.status);return h.jsxs("div",{className:"border p-4 rounded-lg flex justify-between items-center hover:bg-muted/50 transition-colors",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"font-semibold",children:["طلب رقم #",i.id.slice(0,8),"..."]}),h.jsx("p",{className:"text-sm text-muted-foreground",children:due(i.createdAt)}),h.jsx(pu,{variant:"outline",className:`${o.color} ${o.textColor} mt-2`,children:o.label})]}),h.jsxs("div",{className:"text-left",children:[h.jsx("p",{className:"font-bold",children:uue(i.total)}),h.jsx(we,{asChild:!0,variant:"link",className:"p-0 h-auto text-primary",children:h.jsx(Le,{to:`/profile/orders/${i.id}`,children:"عرض التفاصيل"})})]})]},i.id)})}):h.jsx("p",{className:"text-muted-foreground text-center py-8",children:"لا توجد طلبات سابقة."})})]})},pue=({title:t,value:e,icon:n,color:r,linkTo:s})=>h.jsx(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4},className:"h-full",children:h.jsxs(ft,{className:`bg-white dark:bg-slate-800 shadow-lg hover:shadow-xl transition-shadow duration-300 border-l-4 border-${r}-500 dark:border-${r}-400 h-full flex flex-col`,children:[h.jsxs(zt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Lt,{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:t}),n]}),h.jsx(Et,{className:"flex-grow",children:h.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:e})}),s&&h.jsx(al,{className:"pt-0",children:h.jsx(we,{variant:"link",asChild:!0,className:`p-0 h-auto text-xs text-${r}-600 dark:text-${r}-400 hover:text-${r}-700`,children:h.jsx(Le,{to:s,children:"عرض الكل →"})})})]})}),mue=({to:t,title:e,description:n,icon:r,bgColorClass:s})=>h.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"h-full",children:h.jsx(Le,{to:t,className:"block h-full group",children:h.jsxs(ft,{className:`${s} text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 h-full flex flex-col justify-between p-6 rounded-lg`,children:[h.jsxs("div",{children:[h.jsx("div",{className:"p-3 bg-white/20 rounded-full w-fit mb-4 group-hover:bg-white/30 transition-colors",children:r}),h.jsx(Lt,{className:"text-xl sm:text-2xl font-semibold mb-2",children:e}),h.jsx("p",{className:"text-sm opacity-90",children:n})]}),h.jsx("div",{className:"mt-4 text-right",children:h.jsx("span",{className:"text-sm font-medium group-hover:underline",children:"الانتقال →"})})]})})}),gue=()=>{const[t,e]=m.useState([]),[n,r]=m.useState({users:0,products:0}),[s,i]=m.useState(!0);m.useEffect(()=>{(async()=>{try{const{getDocs:y}=await i3(()=>import("./index.esm-2d9133e9.js"),[]),w=await y(Rr(dt,"users")),x=await y(Rr(dt,"products"));r({users:w.size,products:x.size})}catch(y){console.error("Error fetching static data: ",y)}})();const g=Uc(Rr(dt,"orders"),Ma("createdAt","desc")),v=Jh(g,y=>{const w=y.docs.map(x=>({id:x.id,...x.data()}));e(w),i(!1)},y=>{console.error("Error listening to orders: ",y),i(!1)});return()=>v()},[]);const o=m.useMemo(()=>{const g=t.filter(v=>v.status==="delivered").reduce((v,y)=>v+(y.total||0),0);return{totalOrders:t.length,totalRevenue:g,recentOrders:t.slice(0,5)}},[t]),a=f=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(f),l=f=>f!=null&&f.toDate?new Date(f.toDate()).toLocaleDateString("ar-EG",{day:"2-digit",month:"short",year:"numeric"}):"-",c=f=>({pending:"قيد الانتظار",processing:"قيد المعالجة",shipped:"تم الشحن",completed:"مكتمل",cancelled:"ملغي"})[f]||f,u=[{title:"إجمالي المستخدمين",value:s?"...":n.users,icon:h.jsx(Gc,{className:"h-6 w-6 text-sky-500"}),color:"sky",linkTo:"/AdminDashboard/users"},{title:"إجمالي الطلبات",value:s?"...":o.totalOrders,icon:h.jsx(n_,{className:"h-6 w-6 text-green-500"}),color:"green",linkTo:"/AdminDashboard/orders"},{title:"الإيرادات المكتملة",value:s?"...":a(o.totalRevenue),icon:h.jsx(lne,{className:"h-6 w-6 text-amber-500"}),color:"amber"},{title:"المنتجات النشطة",value:s?"...":n.products,icon:h.jsx(gh,{className:"h-6 w-6 text-purple-500"}),color:"purple",linkTo:"/AdminDashboard/products"}],d=[{to:"/AdminDashboard/products",title:"إدارة المنتجات",description:"إضافة، تعديل، وحذف المنتجات.",icon:h.jsx(gh,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-sky-500 to-sky-700"},{to:"/AdminDashboard/orders",title:"إدارة الطلبات",description:"متابعة ومعالجة طلبات العملاء.",icon:h.jsx(n_,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-green-500 to-green-700"},{to:"/AdminDashboard/users",title:"إدارة المستخدمين",description:"عرض وتعديل معلومات المستخدمين.",icon:h.jsx(Gc,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-purple-500 to-purple-700"},{to:"/AdminDashboard/settings",title:"إعدادات الموقع",description:"تكوين إعدادات المتجر العامة.",icon:h.jsx(OE,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-slate-500 to-slate-700"}];return h.jsxs("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 p-4 sm:p-6 lg:p-8",children:[h.jsxs(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100",children:"لوحة تحكم المدير"}),h.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[h.jsxs(we,{variant:"outline",size:"icon",className:"relative",children:[h.jsx(Jte,{className:"h-5 w-5"}),h.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:"3"})]}),h.jsxs(we,{variant:"outline",children:[h.jsx(wne,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-5 w-5"})," رسائل الدعم"]})]})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:u.map(f=>h.jsx(pue,{...f},f.title))}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:d.map(f=>h.jsx(mue,{...f},f.title))}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx(me.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:h.jsxs(ft,{className:"bg-white dark:bg-slate-800 shadow-lg h-full",children:[h.jsx(zt,{children:h.jsx(Lt,{className:"text-xl font-semibold text-slate-700 dark:text-slate-200",children:"أحدث الطلبات"})}),h.jsx(Et,{children:s?h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"جاري تحميل الطلبات..."}):o.recentOrders.length>0?h.jsx("ul",{className:"space-y-3",children:o.recentOrders.map(f=>{var g;return h.jsxs("li",{className:"flex justify-between items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-md transition-colors",children:[h.jsxs("div",{children:[h.jsxs(Le,{to:`/AdminDashboard/orders/${f.id}`,className:"font-medium text-sky-600 dark:text-sky-400 hover:underline",children:["#",f.id.slice(0,8)]}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:((g=f.shipping)==null?void 0:g.fullName)||f.userEmail})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:a(f.total)}),h.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l(f.createdAt)," - ",c(f.status)]})]})]},f.id)})}):h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"لا توجد طلبات حديثة."})})]})}),h.jsx(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:h.jsxs(ft,{className:"bg-white dark:bg-slate-800 shadow-lg h-full",children:[h.jsx(zt,{children:h.jsx(Lt,{className:"text-xl font-semibold text-slate-700 dark:text-slate-200",children:"نظرة عامة على النشاط"})}),h.jsx(Et,{children:h.jsxs("div",{className:"h-64 flex items-center justify-center text-slate-400 dark:text-slate-500",children:[h.jsx(Xte,{size:48}),h.jsx("p",{className:"ml-4 rtl:mr-4",children:"مخطط النشاط سيكون هنا"})]})})]})})]})]})},hv=oe.forwardRef(({className:t,...e},n)=>h.jsx("div",{className:"w-full overflow-auto",children:h.jsx("table",{ref:n,className:fe("w-full caption-bottom text-sm",t),...e})}));hv.displayName="Table";const fv=oe.forwardRef(({className:t,...e},n)=>h.jsx("thead",{ref:n,className:fe("[&_tr]:border-b",t),...e}));fv.displayName="TableHeader";const pv=oe.forwardRef(({className:t,...e},n)=>h.jsx("tbody",{ref:n,className:fe("[&_tr:last-child]:border-0",t),...e}));pv.displayName="TableBody";const yue=oe.forwardRef(({className:t,...e},n)=>h.jsx("tfoot",{ref:n,className:fe("bg-primary font-medium text-primary-foreground",t),...e}));yue.displayName="TableFooter";const Ga=oe.forwardRef(({className:t,...e},n)=>h.jsx("tr",{ref:n,className:fe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Ga.displayName="TableRow";const Jt=oe.forwardRef(({className:t,...e},n)=>h.jsx("th",{ref:n,className:fe("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Jt.displayName="TableHead";const Zt=oe.forwardRef(({className:t,...e},n)=>h.jsx("td",{ref:n,className:fe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Zt.displayName="TableCell";const vue=oe.forwardRef(({className:t,...e},n)=>h.jsx("caption",{ref:n,className:fe("mt-4 text-sm text-muted-foreground",t),...e}));vue.displayName="TableCaption";function oN(t,[e,n]){return Math.min(n,Math.max(e,t))}function en(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function NT(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:g,...v}=d,y=(f==null?void 0:f[t][l])||a,w=m.useMemo(()=>v,Object.values(v));return m.createElement(y.Provider,{value:w},g)}function u(d,f){const g=(f==null?void 0:f[t][l])||a,v=m.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,xue(s,...e)]}function xue(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function wue(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function o3(...t){return e=>t.forEach(n=>wue(n,e))}function Pn(...t){return m.useCallback(o3(...t),t)}const _h=m.forwardRef((t,e)=>{const{children:n,...r}=t,s=m.Children.toArray(n),i=s.find(bue);if(i){const o=i.props.children,a=s.map(l=>l===i?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:l);return m.createElement(S_,Te({},r,{ref:e}),m.isValidElement(o)?m.cloneElement(o,void 0,a):null)}return m.createElement(S_,Te({},r,{ref:e}),n)});_h.displayName="Slot";const S_=m.forwardRef((t,e)=>{const{children:n,...r}=t;return m.isValidElement(n)?m.cloneElement(n,{...Eue(r,n.props),ref:e?o3(e,n.ref):n.ref}):m.Children.count(n)>1?m.Children.only(null):null});S_.displayName="SlotClone";const _ue=({children:t})=>m.createElement(m.Fragment,null,t);function bue(t){return m.isValidElement(t)&&t.type===_ue}function Eue(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Tue(t){const e=t+"CollectionProvider",[n,r]=NT(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,w=oe.useRef(null),x=oe.useRef(new Map).current;return oe.createElement(s,{scope:v,itemMap:x,collectionRef:w},y)},a=t+"CollectionSlot",l=oe.forwardRef((g,v)=>{const{scope:y,children:w}=g,x=i(a,y),_=Pn(v,x.collectionRef);return oe.createElement(_h,{ref:_},w)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=oe.forwardRef((g,v)=>{const{scope:y,children:w,...x}=g,_=oe.useRef(null),b=Pn(v,_),S=i(c,y);return oe.useEffect(()=>(S.itemMap.set(_,{ref:_,...x}),()=>void S.itemMap.delete(_))),oe.createElement(_h,{[u]:"",ref:b},w)});function f(g){const v=i(t+"CollectionConsumer",g);return oe.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((S,k)=>x.indexOf(S.ref.current)-x.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}const Iue=m.createContext(void 0);function Sue(t){const e=m.useContext(Iue);return t||e||"ltr"}const Cue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],mn=Cue.reduce((t,e)=>{const n=m.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?_h:e;return m.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),m.createElement(a,Te({},o,{ref:s}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Pue(t,e){t&&ns.flushSync(()=>t.dispatchEvent(e))}function hi(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Aue(t,e=globalThis==null?void 0:globalThis.document){const n=hi(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const C_="dismissableLayer.update",Rue="dismissableLayer.pointerDownOutside",Nue="dismissableLayer.focusOutside";let aN;const kue=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Due=m.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=m.useContext(kue),[d,f]=m.useState(null),g=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=m.useState({}),y=Pn(e,E=>f(E)),w=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=w.indexOf(x),b=d?w.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,k=b>=_,R=jue(E=>{const I=E.target,P=[...u.branches].some(D=>D.contains(I));!k||P||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},g),C=Oue(E=>{const I=E.target;[...u.branches].some(D=>D.contains(I))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},g);return Aue(E=>{b===u.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},g),m.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(aN=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),lN(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=aN)}},[d,g,r,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),lN())},[d,u]),m.useEffect(()=>{const E=()=>v({});return document.addEventListener(C_,E),()=>document.removeEventListener(C_,E)},[]),m.createElement(mn.div,Te({},c,{ref:y,style:{pointerEvents:S?k?"auto":"none":void 0,...t.style},onFocusCapture:en(t.onFocusCapture,C.onFocusCapture),onBlurCapture:en(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:en(t.onPointerDownCapture,R.onPointerDownCapture)}))});function jue(t,e=globalThis==null?void 0:globalThis.document){const n=hi(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){a3(Rue,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Oue(t,e=globalThis==null?void 0:globalThis.document){const n=hi(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&a3(Nue,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lN(){const t=new CustomEvent(C_);document.dispatchEvent(t)}function a3(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Pue(s,i):s.dispatchEvent(i)}let cx=0;function Mue(){m.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:cN()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:cN()),cx++,()=>{cx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),cx--}},[])}function cN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const ux="focusScope.autoFocusOnMount",dx="focusScope.autoFocusOnUnmount",uN={bubbles:!1,cancelable:!0},Vue=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=m.useState(null),c=hi(s),u=hi(i),d=m.useRef(null),f=Pn(e,y=>l(y)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(b){if(g.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:Mi(d.current,{select:!0})},w=function(b){if(g.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||Mi(d.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&Mi(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const _=new MutationObserver(x);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),_.disconnect()}}},[r,a,g.paused]),m.useEffect(()=>{if(a){hN.add(g);const y=document.activeElement;if(!a.contains(y)){const x=new CustomEvent(ux,uN);a.addEventListener(ux,c),a.dispatchEvent(x),x.defaultPrevented||(Lue(zue(l3(a)),{select:!0}),document.activeElement===y&&Mi(a))}return()=>{a.removeEventListener(ux,c),setTimeout(()=>{const x=new CustomEvent(dx,uN);a.addEventListener(dx,u),a.dispatchEvent(x),x.defaultPrevented||Mi(y??document.body,{select:!0}),a.removeEventListener(dx,u),hN.remove(g)},0)}}},[a,c,u,g]);const v=m.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(w&&x){const _=y.currentTarget,[b,S]=$ue(_);b&&S?!y.shiftKey&&x===S?(y.preventDefault(),n&&Mi(b,{select:!0})):y.shiftKey&&x===b&&(y.preventDefault(),n&&Mi(S,{select:!0})):x===_&&y.preventDefault()}},[n,r,g.paused]);return m.createElement(mn.div,Te({tabIndex:-1},o,{ref:f,onKeyDown:v}))});function Lue(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Mi(r,{select:e}),document.activeElement!==n)return}function $ue(t){const e=l3(t),n=dN(e,t),r=dN(e.reverse(),t);return[n,r]}function l3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function dN(t,e){for(const n of t)if(!Fue(n,{upTo:e}))return n}function Fue(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Uue(t){return t instanceof HTMLInputElement&&"select"in t}function Mi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Uue(t)&&e&&t.select()}}const hN=Bue();function Bue(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=fN(t,e),t.unshift(e)},remove(e){var n;t=fN(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function fN(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function zue(t){return t.filter(e=>e.tagName!=="A")}const $r=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},que=Ih["useId".toString()]||(()=>{});let Gue=0;function c3(t){const[e,n]=m.useState(que());return $r(()=>{t||n(r=>r??String(Gue++))},[t]),t||(e?`radix-${e}`:"")}function Wue(t){const[e,n]=m.useState(void 0);return $r(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const u3="Popper",[d3,h3]=NT(u3),[Hue,f3]=d3(u3),Kue=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return m.createElement(Hue,{scope:e,anchor:r,onAnchorChange:s},n)},Que="PopperAnchor",Yue=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=f3(Que,n),o=m.useRef(null),a=Pn(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.createElement(mn.div,Te({},s,{ref:a}))}),p3="PopperContent",[Xue,Qme]=d3(p3),Jue=m.forwardRef((t,e)=>{var n,r,s,i,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:g="center",alignOffset:v=0,arrowPadding:y=0,avoidCollisions:w=!0,collisionBoundary:x=[],collisionPadding:_=0,sticky:b="partial",hideWhenDetached:S=!1,updatePositionStrategy:k="optimized",onPlaced:R,...C}=t,E=f3(p3,u),[I,P]=m.useState(null),D=Pn(e,Se=>P(Se)),[j,N]=m.useState(null),L=Wue(j),B=(n=L==null?void 0:L.width)!==null&&n!==void 0?n:0,O=(r=L==null?void 0:L.height)!==null&&r!==void 0?r:0,M=d+(g!=="center"?"-"+g:""),U=typeof _=="number"?_:{top:0,right:0,bottom:0,left:0,..._},$=Array.isArray(x)?x:[x],F=$.length>0,z={padding:U,boundary:$.filter(Zue),altBoundary:F},{refs:q,floatingStyles:W,placement:Y,isPositioned:K,middlewareData:ne}=wT({strategy:"fixed",placement:M,whileElementsMounted:(...Se)=>xT(...Se,{animationFrame:k==="always"}),elements:{reference:E.anchor},middleware:[_T({mainAxis:f+O,alignmentAxis:v}),w&&bT({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?ET():void 0,...z}),w&&TT({...z}),IT({...z,apply:({elements:Se,rects:Ke,availableWidth:Ae,availableHeight:Be})=>{const{width:Ge,height:$t}=Ke.reference,Qe=Se.floating.style;Qe.setProperty("--radix-popper-available-width",`${Ae}px`),Qe.setProperty("--radix-popper-available-height",`${Be}px`),Qe.setProperty("--radix-popper-anchor-width",`${Ge}px`),Qe.setProperty("--radix-popper-anchor-height",`${$t}px`)}}),j&&CT({element:j,padding:y}),ede({arrowWidth:B,arrowHeight:O}),S&&ST({strategy:"referenceHidden",...z})]}),[ee,he]=m3(Y),ae=hi(R);$r(()=>{K&&(ae==null||ae())},[K,ae]);const le=(s=ne.arrow)===null||s===void 0?void 0:s.x,ue=(i=ne.arrow)===null||i===void 0?void 0:i.y,ve=((o=ne.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Pe,$e]=m.useState();return $r(()=>{I&&$e(window.getComputedStyle(I).zIndex)},[I]),m.createElement("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:K?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(a=ne.transformOrigin)===null||a===void 0?void 0:a.x,(l=ne.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},m.createElement(Xue,{scope:u,placedSide:ee,onArrowChange:N,arrowX:le,arrowY:ue,shouldHideArrow:ve},m.createElement(mn.div,Te({"data-side":ee,"data-align":he},C,{ref:D,style:{...C.style,animation:K?void 0:"none",opacity:(c=ne.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function Zue(t){return t!==null}const ede=t=>({name:"transformOrigin",options:t,fn(e){var n,r,s,i,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=d?0:t.arrowWidth,g=d?0:t.arrowHeight,[v,y]=m3(a),w={start:"0%",center:"50%",end:"100%"}[y],x=((r=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0)+f/2,_=((i=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+g/2;let b="",S="";return v==="bottom"?(b=d?w:`${x}px`,S=`${-g}px`):v==="top"?(b=d?w:`${x}px`,S=`${l.floating.height+g}px`):v==="right"?(b=`${-g}px`,S=d?w:`${_}px`):v==="left"&&(b=`${l.floating.width+g}px`,S=d?w:`${_}px`),{data:{x:b,y:S}}}});function m3(t){const[e,n="center"]=t.split("-");return[e,n]}const tde=Kue,nde=Yue,rde=Jue,sde=m.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=t;return r?Kg.createPortal(m.createElement(mn.div,Te({},s,{ref:e})),r):null});function pN({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=ide({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=hi(n),l=m.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function ide({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=hi(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}function ode(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const ade=m.forwardRef((t,e)=>m.createElement(mn.span,Te({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var g3=XE(),hx=function(){},mv=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:hx,onWheelCapture:hx,onTouchMoveCapture:hx}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,x=w===void 0?"div":w,_=Ja(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,S=YE([n,e]),k=Nt(Nt({},_),s);return m.createElement(m.Fragment,null,u&&m.createElement(b,{sideCar:g3,removeScrollBar:c,shards:d,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n}),o?m.cloneElement(m.Children.only(a),Nt(Nt({},k),{ref:S})):m.createElement(x,Nt({},k,{className:l,ref:S}),a))});mv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mv.classNames={fullWidth:dc,zeroRight:uc};var P_=!1;if(typeof window<"u")try{var Ep=Object.defineProperty({},"passive",{get:function(){return P_=!0,!0}});window.addEventListener("test",Ep,Ep),window.removeEventListener("test",Ep,Ep)}catch{P_=!1}var Al=P_?{passive:!1}:!1,lde=function(t){return t.tagName==="TEXTAREA"},y3=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!lde(t)&&n[e]==="visible")},cde=function(t){return y3(t,"overflowY")},ude=function(t){return y3(t,"overflowX")},mN=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=v3(t,n);if(r){var s=x3(t,n),i=s[1],o=s[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},dde=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},hde=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},v3=function(t,e){return t==="v"?cde(e):ude(e)},x3=function(t,e){return t==="v"?dde(e):hde(e)},fde=function(t,e){return t==="h"&&e==="rtl"?-1:1},pde=function(t,e,n,r,s){var i=fde(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var g=x3(t,a),v=g[0],y=g[1],w=g[2],x=y-w-i*v;(v||x)&&v3(t,a)&&(d+=x,f+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(s&&d===0||!s&&o>d)||!u&&(s&&f===0||!s&&-o>f))&&(c=!0),c},Tp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},gN=function(t){return[t.deltaX,t.deltaY]},yN=function(t){return t&&"current"in t?t.current:t},mde=function(t,e){return t[0]===e[0]&&t[1]===e[1]},gde=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},yde=0,Rl=[];function vde(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(yde++)[0],i=m.useState(function(){return ev()})[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=rb([t.lockRef.current],(t.shards||[]).map(yN),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var x=Tp(y),_=n.current,b="deltaX"in y?y.deltaX:_[0]-x[0],S="deltaY"in y?y.deltaY:_[1]-x[1],k,R=y.target,C=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in y&&C==="h"&&R.type==="range")return!1;var E=mN(C,R);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=mN(C,R)),!E)return!1;if(!r.current&&"changedTouches"in y&&(b||S)&&(r.current=k),!k)return!0;var I=r.current||k;return pde(I,w,y,I==="h"?b:S,!0)},[]),l=m.useCallback(function(y){var w=y;if(!(!Rl.length||Rl[Rl.length-1]!==i)){var x="deltaY"in w?gN(w):Tp(w),_=e.current.filter(function(k){return k.name===w.type&&k.target===w.target&&mde(k.delta,x)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var b=(o.current.shards||[]).map(yN).filter(Boolean).filter(function(k){return k.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),c=m.useCallback(function(y,w,x,_){var b={name:y,delta:w,target:x,should:_};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=m.useCallback(function(y){n.current=Tp(y),r.current=void 0},[]),d=m.useCallback(function(y){c(y.type,gN(y),y.target,a(y,t.lockRef.current))},[]),f=m.useCallback(function(y){c(y.type,Tp(y),y.target,a(y,t.lockRef.current))},[]);m.useEffect(function(){return Rl.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Al),document.addEventListener("touchmove",l,Al),document.addEventListener("touchstart",u,Al),function(){Rl=Rl.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Al),document.removeEventListener("touchmove",l,Al),document.removeEventListener("touchstart",u,Al)}},[]);var g=t.removeScrollBar,v=t.inert;return m.createElement(m.Fragment,null,v?m.createElement(i,{styles:gde(s)}):null,g?m.createElement(ZE,{gapMode:"margin"}):null)}const xde=JE(g3,vde);var w3=m.forwardRef(function(t,e){return m.createElement(mv,Nt({},t,{ref:e,sideCar:xde}))});w3.classNames=mv.classNames;const wde=w3,_de=[" ","Enter","ArrowUp","ArrowDown"],bde=[" ","Enter"],gv="Select",[yv,vv,Ede]=Tue(gv),[vu,Yme]=NT(gv,[Ede,h3]),kT=h3(),[Tde,cl]=vu(gv),[Ide,Sde]=vu(gv),Cde=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:g}=t,v=kT(e),[y,w]=m.useState(null),[x,_]=m.useState(null),[b,S]=m.useState(!1),k=Sue(c),[R=!1,C]=pN({prop:r,defaultProp:s,onChange:i}),[E,I]=pN({prop:o,defaultProp:a,onChange:l}),P=m.useRef(null),D=y?!!y.closest("form"):!0,[j,N]=m.useState(new Set),L=Array.from(j).map(B=>B.props.value).join(";");return m.createElement(tde,v,m.createElement(Tde,{required:g,scope:e,trigger:y,onTriggerChange:w,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:c3(),value:E,onValueChange:I,open:R,onOpenChange:C,dir:k,triggerPointerDownPosRef:P,disabled:f},m.createElement(yv.Provider,{scope:e},m.createElement(Ide,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(B=>{N(O=>new Set(O).add(B))},[]),onNativeOptionRemove:m.useCallback(B=>{N(O=>{const M=new Set(O);return M.delete(B),M})},[])},n)),D?m.createElement(I3,{key:L,"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:d,value:E,onChange:B=>I(B.target.value),disabled:f},E===void 0?m.createElement("option",{value:""}):null,Array.from(j)):null))},Pde="SelectTrigger",Ade=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=kT(n),o=cl(Pde,n),a=o.disabled||r,l=Pn(e,o.onTriggerChange),c=vv(n),[u,d,f]=S3(v=>{const y=c().filter(_=>!_.disabled),w=y.find(_=>_.value===o.value),x=C3(y,v,w);x!==void 0&&o.onValueChange(x.value)}),g=()=>{a||(o.onOpenChange(!0),f())};return m.createElement(nde,Te({asChild:!0},i),m.createElement(mn.button,Te({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":T3(o.value)?"":void 0},s,{ref:l,onClick:en(s.onClick,v=>{v.currentTarget.focus()}),onPointerDown:en(s.onPointerDown,v=>{const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(g(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:en(s.onKeyDown,v=>{const y=u.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&d(v.key),!(y&&v.key===" ")&&_de.includes(v.key)&&(g(),v.preventDefault())})})))}),Rde="SelectValue",Nde=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=cl(Rde,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=Pn(e,l.onValueNodeChange);return $r(()=>{c(u)},[c,u]),m.createElement(mn.span,Te({},a,{ref:d,style:{pointerEvents:"none"}}),T3(l.value)?m.createElement(m.Fragment,null,o):i)}),kde=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return m.createElement(mn.span,Te({"aria-hidden":!0},s,{ref:e}),r||"▼")}),Dde=t=>m.createElement(sde,Te({asChild:!0},t)),Qc="SelectContent",jde=m.forwardRef((t,e)=>{const n=cl(Qc,t.__scopeSelect),[r,s]=m.useState();if($r(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?ns.createPortal(m.createElement(_3,{scope:t.__scopeSelect},m.createElement(yv.Slot,{scope:t.__scopeSelect},m.createElement("div",null,t.children))),i):null}return m.createElement(Ode,Te({},t,{ref:e}))}),js=10,[_3,ul]=vu(Qc),Ode=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:w,...x}=t,_=cl(Qc,n),[b,S]=m.useState(null),[k,R]=m.useState(null),C=Pn(e,ee=>S(ee)),[E,I]=m.useState(null),[P,D]=m.useState(null),j=vv(n),[N,L]=m.useState(!1),B=m.useRef(!1);m.useEffect(()=>{if(b)return lf(b)},[b]),Mue();const O=m.useCallback(ee=>{const[he,...ae]=j().map(ve=>ve.ref.current),[le]=ae.slice(-1),ue=document.activeElement;for(const ve of ee)if(ve===ue||(ve==null||ve.scrollIntoView({block:"nearest"}),ve===he&&k&&(k.scrollTop=0),ve===le&&k&&(k.scrollTop=k.scrollHeight),ve==null||ve.focus(),document.activeElement!==ue))return},[j,k]),M=m.useCallback(()=>O([E,b]),[O,E,b]);m.useEffect(()=>{N&&M()},[N,M]);const{onOpenChange:U,triggerPointerDownPosRef:$}=_;m.useEffect(()=>{if(b){let ee={x:0,y:0};const he=le=>{var ue,ve,Pe,$e;ee={x:Math.abs(Math.round(le.pageX)-((ue=(ve=$.current)===null||ve===void 0?void 0:ve.x)!==null&&ue!==void 0?ue:0)),y:Math.abs(Math.round(le.pageY)-((Pe=($e=$.current)===null||$e===void 0?void 0:$e.y)!==null&&Pe!==void 0?Pe:0))}},ae=le=>{ee.x<=10&&ee.y<=10?le.preventDefault():b.contains(le.target)||U(!1),document.removeEventListener("pointermove",he),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",ae,{capture:!0})}}},[b,U,$]),m.useEffect(()=>{const ee=()=>U(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[U]);const[F,z]=S3(ee=>{const he=j().filter(ue=>!ue.disabled),ae=he.find(ue=>ue.ref.current===document.activeElement),le=C3(he,ee,ae);le&&setTimeout(()=>le.ref.current.focus())}),q=m.useCallback((ee,he,ae)=>{const le=!B.current&&!ae;(_.value!==void 0&&_.value===he||le)&&(I(ee),le&&(B.current=!0))},[_.value]),W=m.useCallback(()=>b==null?void 0:b.focus(),[b]),Y=m.useCallback((ee,he,ae)=>{const le=!B.current&&!ae;(_.value!==void 0&&_.value===he||le)&&D(ee)},[_.value]),K=r==="popper"?vN:Mde,ne=K===vN?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:w}:{};return m.createElement(_3,{scope:n,content:b,viewport:k,onViewportChange:R,itemRefCallback:q,selectedItem:E,onItemLeave:W,itemTextRefCallback:Y,focusSelectedItem:M,selectedItemText:P,position:r,isPositioned:N,searchRef:F},m.createElement(wde,{as:_h,allowPinchZoom:!0},m.createElement(Vue,{asChild:!0,trapped:_.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:en(s,ee=>{var he;(he=_.trigger)===null||he===void 0||he.focus({preventScroll:!0}),ee.preventDefault()})},m.createElement(Due,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>_.onOpenChange(!1)},m.createElement(K,Te({role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ee=>ee.preventDefault()},x,ne,{onPlaced:()=>L(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:en(x.onKeyDown,ee=>{const he=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!he&&ee.key.length===1&&z(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let le=j().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const ue=ee.target,ve=le.indexOf(ue);le=le.slice(ve+1)}setTimeout(()=>O(le)),ee.preventDefault()}})}))))))}),Mde=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=cl(Qc,n),o=ul(Qc,n),[a,l]=m.useState(null),[c,u]=m.useState(null),d=Pn(e,C=>u(C)),f=vv(n),g=m.useRef(!1),v=m.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:x,focusSelectedItem:_}=o,b=m.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&y&&w&&x){const C=i.trigger.getBoundingClientRect(),E=c.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const ue=P.left-E.left,ve=I.left-ue,Pe=C.left-ve,$e=C.width+Pe,Se=Math.max($e,E.width),Ke=window.innerWidth-js,Ae=oN(ve,[js,Ke-Se]);a.style.minWidth=$e+"px",a.style.left=Ae+"px"}else{const ue=E.right-P.right,ve=window.innerWidth-I.right-ue,Pe=window.innerWidth-C.right-ve,$e=C.width+Pe,Se=Math.max($e,E.width),Ke=window.innerWidth-js,Ae=oN(ve,[js,Ke-Se]);a.style.minWidth=$e+"px",a.style.right=Ae+"px"}const D=f(),j=window.innerHeight-js*2,N=y.scrollHeight,L=window.getComputedStyle(c),B=parseInt(L.borderTopWidth,10),O=parseInt(L.paddingTop,10),M=parseInt(L.borderBottomWidth,10),U=parseInt(L.paddingBottom,10),$=B+O+N+U+M,F=Math.min(w.offsetHeight*5,$),z=window.getComputedStyle(y),q=parseInt(z.paddingTop,10),W=parseInt(z.paddingBottom,10),Y=C.top+C.height/2-js,K=j-Y,ne=w.offsetHeight/2,ee=w.offsetTop+ne,he=B+O+ee,ae=$-he;if(he<=Y){const ue=w===D[D.length-1].ref.current;a.style.bottom="0px";const ve=c.clientHeight-y.offsetTop-y.offsetHeight,Pe=Math.max(K,ne+(ue?W:0)+ve+M),$e=he+Pe;a.style.height=$e+"px"}else{const ue=w===D[0].ref.current;a.style.top="0px";const Pe=Math.max(Y,B+y.offsetTop+(ue?q:0)+ne)+ae;a.style.height=Pe+"px",y.scrollTop=he-Y+y.offsetTop}a.style.margin=`${js}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[f,i.trigger,i.valueNode,a,c,y,w,x,i.dir,r]);$r(()=>b(),[b]);const[S,k]=m.useState();$r(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const R=m.useCallback(C=>{C&&v.current===!0&&(b(),_==null||_(),v.current=!1)},[b,_]);return m.createElement(Vde,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:R},m.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S}},m.createElement(mn.div,Te({},s,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),vN=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=js,...i}=t,o=kT(n);return m.createElement(rde,Te({},o,i,{ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Vde,DT]=vu(Qc,{}),xN="SelectViewport",Lde=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ul(xN,n),i=DT(xN,n),o=Pn(e,s.onViewportChange),a=m.useRef(0);return m.createElement(m.Fragment,null,m.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),m.createElement(yv.Slot,{scope:n},m.createElement(mn.div,Te({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:en(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=i;if(d!=null&&d.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const g=window.innerHeight-js*2,v=parseFloat(u.style.minHeight),y=parseFloat(u.style.height),w=Math.max(v,y);if(w<g){const x=w+f,_=Math.min(g,x),b=x-_;u.style.height=_+"px",u.style.bottom==="0px"&&(c.scrollTop=b>0?b:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),$de="SelectGroup",[Xme,Fde]=vu($de),Ude="SelectLabel",Bde=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Fde(Ude,n);return m.createElement(mn.div,Te({id:s.id},r,{ref:e}))}),A_="SelectItem",[zde,b3]=vu(A_),qde=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=cl(A_,n),l=ul(A_,n),c=a.value===r,[u,d]=m.useState(i??""),[f,g]=m.useState(!1),v=Pn(e,x=>{var _;return(_=l.itemRefCallback)===null||_===void 0?void 0:_.call(l,x,r,s)}),y=c3(),w=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.createElement(zde,{scope:n,value:r,disabled:s,textId:y,isSelected:c,onItemTextChange:m.useCallback(x=>{d(_=>{var b;return _||((b=x==null?void 0:x.textContent)!==null&&b!==void 0?b:"").trim()})},[])},m.createElement(yv.ItemSlot,{scope:n,value:r,disabled:s,textValue:u},m.createElement(mn.div,Te({role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:v,onFocus:en(o.onFocus,()=>g(!0)),onBlur:en(o.onBlur,()=>g(!1)),onPointerUp:en(o.onPointerUp,w),onPointerMove:en(o.onPointerMove,x=>{if(s){var _;(_=l.onItemLeave)===null||_===void 0||_.call(l)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:en(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var _;(_=l.onItemLeave)===null||_===void 0||_.call(l)}}),onKeyDown:en(o.onKeyDown,x=>{var _;((_=l.searchRef)===null||_===void 0?void 0:_.current)!==""&&x.key===" "||(bde.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})}))))}),Ip="SelectItemText",Gde=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=cl(Ip,n),a=ul(Ip,n),l=b3(Ip,n),c=Sde(Ip,n),[u,d]=m.useState(null),f=Pn(e,x=>d(x),l.onItemTextChange,x=>{var _;return(_=a.itemTextRefCallback)===null||_===void 0?void 0:_.call(a,x,l.value,l.disabled)}),g=u==null?void 0:u.textContent,v=m.useMemo(()=>m.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},g),[l.disabled,l.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=c;return $r(()=>(y(v),()=>w(v)),[y,w,v]),m.createElement(m.Fragment,null,m.createElement(mn.span,Te({id:l.textId},i,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ns.createPortal(i.children,o.valueNode):null)}),Wde="SelectItemIndicator",Hde=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return b3(Wde,n).isSelected?m.createElement(mn.span,Te({"aria-hidden":!0},r,{ref:e})):null}),wN="SelectScrollUpButton",Kde=m.forwardRef((t,e)=>{const n=ul(wN,t.__scopeSelect),r=DT(wN,t.__scopeSelect),[s,i]=m.useState(!1),o=Pn(e,r.onScrollButtonChange);return $r(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollTop>0;i(c)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?m.createElement(E3,Te({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}})):null}),_N="SelectScrollDownButton",Qde=m.forwardRef((t,e)=>{const n=ul(_N,t.__scopeSelect),r=DT(_N,t.__scopeSelect),[s,i]=m.useState(!1),o=Pn(e,r.onScrollButtonChange);return $r(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollHeight-a.clientHeight,u=Math.ceil(a.scrollTop)<c;i(u)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?m.createElement(E3,Te({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}})):null}),E3=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ul("SelectScrollButton",n),o=m.useRef(null),a=vv(n),l=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>l(),[l]),$r(()=>{var c;const u=a().find(d=>d.ref.current===document.activeElement);u==null||(c=u.ref.current)===null||c===void 0||c.scrollIntoView({block:"nearest"})},[a]),m.createElement(mn.div,Te({"aria-hidden":!0},s,{ref:e,style:{flexShrink:0,...s.style},onPointerDown:en(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:en(s.onPointerMove,()=>{var c;(c=i.onItemLeave)===null||c===void 0||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:en(s.onPointerLeave,()=>{l()})}))}),Yde=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return m.createElement(mn.div,Te({"aria-hidden":!0},r,{ref:e}))});function T3(t){return t===""||t===void 0}const I3=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Pn(e,s),o=ode(n);return m.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),m.createElement(ade,{asChild:!0},m.createElement("select",Te({},r,{ref:i,defaultValue:n})))});I3.displayName="BubbleSelect";function S3(t){const e=hi(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function C3(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Xde(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Xde(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const Jde=Cde,P3=Ade,Zde=Nde,ehe=kde,the=Dde,A3=jde,nhe=Lde,R3=Bde,N3=qde,rhe=Gde,she=Hde,k3=Kde,D3=Qde,j3=Yde,R_=Jde,N_=Zde,vg=oe.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(P3,{ref:r,className:fe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(ehe,{asChild:!0,children:h.jsx(FL,{className:"h-4 w-4 opacity-50"})})]}));vg.displayName=P3.displayName;const O3=oe.forwardRef(({className:t,...e},n)=>h.jsx(k3,{ref:n,className:fe("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(nne,{className:"h-4 w-4"})}));O3.displayName=k3.displayName;const M3=oe.forwardRef(({className:t,...e},n)=>h.jsx(D3,{ref:n,className:fe("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(FL,{className:"h-4 w-4"})}));M3.displayName=D3.displayName;const xg=oe.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>h.jsx(the,{children:h.jsxs(A3,{ref:s,className:fe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(O3,{}),h.jsx(nhe,{className:fe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(M3,{})]})}));xg.displayName=A3.displayName;const ihe=oe.forwardRef(({className:t,...e},n)=>h.jsx(R3,{ref:n,className:fe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));ihe.displayName=R3.displayName;const wg=oe.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(N3,{ref:r,className:fe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(she,{children:h.jsx(Uy,{className:"h-4 w-4"})})}),h.jsx(rhe,{children:e})]}));wg.displayName=N3.displayName;const ohe=oe.forwardRef(({className:t,...e},n)=>h.jsx(j3,{ref:n,className:fe("-mx-1 my-1 h-px bg-muted",t),...e}));ohe.displayName=j3.displayName;const ahe=({order:t,logoPreview:e,handleLogoUpload:n,formatDate:r,formatPrice:s,getStatusInfo:i})=>{const o=m.useRef(null),a=()=>{const C=window.open("","_blank");C.document.write("<html><head><title>فاتورة طلب</title>"),C.document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">'),C.document.write('<style>body { direction: rtl; font-family: "Cairo", sans-serif; padding: 20px; } @media print { body { -webkit-print-color-adjust: exact; } .no-print { display: none; } }</style>'),C.document.write("</head><body>"),o.current&&C.document.write(o.current.innerHTML),C.document.write("</body></html>"),C.document.close(),setTimeout(()=>{C.print(),C.close()},500)},l=t||{},c=l.shipping||{},u=c.fullName||"غير متوفر",d=l.userEmail||"غير متوفر",f=c.phone||"غير متوفر",g=c.address||"غير متوفر",v=c.city||"غير متوفر",y=c.country||"غير متوفر",w=c.postalCode||"",x=c.notes||"",_=l.items||[],b=l.subtotal||0,S=l.shippingCost||0,k=l.total||0,R=i(l.status);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{ref:o,children:[h.jsxs(rv,{className:"p-6 border-b dark:border-slate-700",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs(sv,{className:"text-2xl font-bold text-sky-600 dark:text-sky-400",children:["تفاصيل الطلب #",l.id?l.id.slice(0,8):"غير محدد"]}),e&&h.jsx("img",{src:e,alt:"شعار المتجر",className:"h-12 max-w-[150px] object-contain"})]}),h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["تاريخ الطلب: ",r(l.createdAt)]}),h.jsx(pu,{className:`${R.color} ${R.textColor} text-xs`,children:R.label})]}),h.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-2 text-slate-700 dark:text-slate-200",children:"معلومات العميل"}),h.jsxs("p",{children:[h.jsx("strong",{children:"الاسم:"})," ",u]}),h.jsxs("p",{children:[h.jsx("strong",{children:"البريد:"})," ",d]}),h.jsxs("p",{children:[h.jsx("strong",{children:"الهاتف:"})," ",f]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-2 text-slate-700 dark:text-slate-200",children:"عنوان الشحن"}),h.jsx("p",{children:g}),h.jsxs("p",{children:[v,w&&`, ${w}`]}),h.jsx("p",{children:y}),x&&h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["ملاحظات: ",x]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-2 text-slate-700 dark:text-slate-200",children:"المنتجات المطلوبة"}),_.length>0?h.jsxs(hv,{children:[h.jsx(fv,{children:h.jsxs(Ga,{children:[h.jsx(Jt,{className:"text-right",children:"المنتج"}),h.jsx(Jt,{className:"text-right",children:"الكمية"}),h.jsx(Jt,{className:"text-right",children:"السعر"}),h.jsx(Jt,{className:"text-right",children:"الإجمالي"})]})}),h.jsx(pv,{children:_.map(C=>h.jsxs(Ga,{children:[h.jsx(Zt,{children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("img",{src:C.imageUrl||"https://via.placeholder.com/50",alt:C.name||"منتج",className:"w-10 h-10 object-cover rounded-md ml-3 rtl:mr-3"}),C.name||"اسم المنتج غير متوفر"]})}),h.jsx(Zt,{children:C.quantity||0}),h.jsx(Zt,{children:s(C.price)}),h.jsx(Zt,{children:s((C.price||0)*(C.quantity||0))})]},C.id||C.name))})]}):h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"لا توجد منتجات في هذا الطلب."})]}),h.jsxs("div",{className:"text-right border-t dark:border-slate-700 pt-4 mt-4",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"المجموع الفرعي:"})," ",s(b)]}),h.jsxs("p",{children:[h.jsx("strong",{children:"تكلفة الشحن:"})," ",s(S)]}),h.jsxs("p",{className:"text-xl font-bold",children:[h.jsx("strong",{children:"الإجمالي الكلي:"})," ",s(k)]})]})]})]}),h.jsxs(lT,{className:"p-6 border-t dark:border-slate-700 flex-col sm:flex-row gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2 no-print",children:[h.jsxs("label",{htmlFor:"logoUploadModal",className:"cursor-pointer",children:[h.jsx(we,{variant:"outline",asChild:!0,children:h.jsxs("span",{children:[h.jsx(Pne,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," تحميل شعار"]})}),h.jsx(ze,{id:"logoUploadModal",type:"file",accept:"image/*",onChange:n,className:"hidden"})]}),h.jsxs(we,{onClick:a,className:"bg-green-500 hover:bg-green-600 text-white",children:[h.jsx(Tne,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," طباعة الفاتورة"]})]}),h.jsx(qoe,{asChild:!0,className:"no-print",children:h.jsx(we,{variant:"outline",children:"إغلاق"})})]})]})};var V3="AlertDialog",[lhe,Jme]=xr(V3,[S$]),Ei=S$(),L3=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ei(e);return h.jsx(B$,{...r,...n,modal:!0})};L3.displayName=V3;var che="AlertDialogTrigger",$3=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ei(n);return h.jsx(z$,{...s,...r,ref:e})});$3.displayName=che;var uhe="AlertDialogPortal",F3=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ei(e);return h.jsx(q$,{...r,...n})};F3.displayName=uhe;var dhe="AlertDialogOverlay",U3=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ei(n);return h.jsx(sT,{...s,...r,ref:e})});U3.displayName=dhe;var mc="AlertDialogContent",[hhe,fhe]=lhe(mc),phe=pre("AlertDialogContent"),B3=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Ei(n),o=m.useRef(null),a=Ne(e,o),l=m.useRef(null);return h.jsx(Loe,{contentName:mc,titleName:z3,docsSlug:"alert-dialog",children:h.jsx(hhe,{scope:n,cancelRef:l,children:h.jsxs(iT,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:ge(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[h.jsx(phe,{children:r}),h.jsx(ghe,{contentRef:o})]})})})});B3.displayName=mc;var z3="AlertDialogTitle",q3=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ei(n);return h.jsx(oT,{...s,...r,ref:e})});q3.displayName=z3;var G3="AlertDialogDescription",W3=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ei(n);return h.jsx(aT,{...s,...r,ref:e})});W3.displayName=G3;var mhe="AlertDialogAction",H3=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ei(n);return h.jsx(nv,{...s,...r,ref:e})});H3.displayName=mhe;var K3="AlertDialogCancel",Q3=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=fhe(K3,n),i=Ei(n),o=Ne(e,s);return h.jsx(nv,{...i,...r,ref:o})});Q3.displayName=K3;var ghe=({contentRef:t})=>{const e=`\`${mc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${mc}\` by passing a \`${G3}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${mc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},yhe=L3,vhe=$3,xhe=F3,Y3=U3,X3=B3,J3=H3,Z3=Q3,eF=q3,tF=W3;const whe=yhe,_he=vhe,bhe=xhe,nF=oe.forwardRef(({className:t,...e},n)=>h.jsx(Y3,{className:fe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));nF.displayName=Y3.displayName;const rF=oe.forwardRef(({className:t,...e},n)=>h.jsxs(bhe,{children:[h.jsx(nF,{}),h.jsx(X3,{ref:n,className:fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));rF.displayName=X3.displayName;const _g=({className:t,...e})=>h.jsx("div",{className:fe("flex flex-col space-y-2 text-center sm:text-left",t),...e});_g.displayName="AlertDialogHeader";const bg=({className:t,...e})=>h.jsx("div",{className:fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 rtl:sm:space-x-reverse",t),...e});bg.displayName="AlertDialogFooter";const Eg=oe.forwardRef(({className:t,...e},n)=>h.jsx(eF,{ref:n,className:fe("text-lg font-semibold",t),...e}));Eg.displayName=eF.displayName;const Tg=oe.forwardRef(({className:t,...e},n)=>h.jsx(tF,{ref:n,className:fe("text-sm text-muted-foreground",t),...e}));Tg.displayName=tF.displayName;const Ig=oe.forwardRef(({className:t,...e},n)=>h.jsx(J3,{ref:n,className:fe(LE(),t),...e}));Ig.displayName=J3.displayName;const Sg=oe.forwardRef(({className:t,...e},n)=>h.jsx(Z3,{ref:n,className:fe(LE({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Sg.displayName=Z3.displayName;var Ehe="Arrow",sF=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return h.jsx(Ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});sF.displayName=Ehe;var The=sF,jT="Popper",[iF,oF]=xr(jT),[Ihe,aF]=iF(jT),lF=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return h.jsx(Ihe,{scope:e,anchor:r,onAnchorChange:s,children:n})};lF.displayName=jT;var cF="PopperAnchor",uF=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=aF(cF,n),o=m.useRef(null),a=Ne(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:h.jsx(Ve.div,{...s,ref:a})});uF.displayName=cF;var OT="PopperContent",[She,Che]=iF(OT),dF=m.forwardRef((t,e)=>{var ee,he,ae,le,ue,ve;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=t,w=aF(OT,n),[x,_]=m.useState(null),b=Ne(e,Pe=>_(Pe)),[S,k]=m.useState(null),R=Yy(S),C=(R==null?void 0:R.width)??0,E=(R==null?void 0:R.height)??0,I=r+(i!=="center"?"-"+i:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],j=D.length>0,N={padding:P,boundary:D.filter(Ahe),altBoundary:j},{refs:L,floatingStyles:B,placement:O,isPositioned:M,middlewareData:U}=wT({strategy:"fixed",placement:I,whileElementsMounted:(...Pe)=>xT(...Pe,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[_T({mainAxis:s+E,alignmentAxis:o}),l&&bT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?ET():void 0,...N}),l&&TT({...N}),IT({...N,apply:({elements:Pe,rects:$e,availableWidth:Se,availableHeight:Ke})=>{const{width:Ae,height:Be}=$e.reference,Ge=Pe.floating.style;Ge.setProperty("--radix-popper-available-width",`${Se}px`),Ge.setProperty("--radix-popper-available-height",`${Ke}px`),Ge.setProperty("--radix-popper-anchor-width",`${Ae}px`),Ge.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),S&&CT({element:S,padding:a}),Rhe({arrowWidth:C,arrowHeight:E}),f&&ST({strategy:"referenceHidden",...N})]}),[$,F]=pF(O),z=sn(v);Lr(()=>{M&&(z==null||z())},[M,z]);const q=(ee=U.arrow)==null?void 0:ee.x,W=(he=U.arrow)==null?void 0:he.y,Y=((ae=U.arrow)==null?void 0:ae.centerOffset)!==0,[K,ne]=m.useState();return Lr(()=>{x&&ne(window.getComputedStyle(x).zIndex)},[x]),h.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:M?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(le=U.transformOrigin)==null?void 0:le.x,(ue=U.transformOrigin)==null?void 0:ue.y].join(" "),...((ve=U.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(She,{scope:n,placedSide:$,onArrowChange:k,arrowX:q,arrowY:W,shouldHideArrow:Y,children:h.jsx(Ve.div,{"data-side":$,"data-align":F,...y,ref:b,style:{...y.style,animation:M?void 0:"none"}})})})});dF.displayName=OT;var hF="PopperArrow",Phe={top:"bottom",right:"left",bottom:"top",left:"right"},fF=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Che(hF,r),o=Phe[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(The,{...s,ref:n,style:{...s.style,display:"block"}})})});fF.displayName=hF;function Ahe(t){return t!==null}var Rhe=t=>({name:"transformOrigin",options:t,fn(e){var w,x,_;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=pF(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,g=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let v="",y="";return c==="bottom"?(v=o?d:`${f}px`,y=`${-l}px`):c==="top"?(v=o?d:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,y=o?d:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,y=o?d:`${g}px`),{data:{x:v,y}}}});function pF(t){const[e,n="center"]=t.split("-");return[e,n]}var Nhe=lF,khe=uF,Dhe=dF,jhe=fF,fx="rovingFocusGroup.onEntryFocus",Ohe={bubbles:!1,cancelable:!0},pf="RovingFocusGroup",[k_,mF,Mhe]=Gy(pf),[Vhe,gF]=xr(pf,[Mhe]),[Lhe,$he]=Vhe(pf),yF=m.forwardRef((t,e)=>h.jsx(k_.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(k_.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Fhe,{...t,ref:e})})}));yF.displayName=pf;var Fhe=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=m.useRef(null),g=Ne(e,f),v=qE(i),[y,w]=il({prop:o,defaultProp:a??null,onChange:l,caller:pf}),[x,_]=m.useState(!1),b=sn(c),S=mF(n),k=m.useRef(!1),[R,C]=m.useState(0);return m.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(fx,b),()=>E.removeEventListener(fx,b)},[b]),h.jsx(Lhe,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:y,onItemFocus:m.useCallback(E=>w(E),[w]),onItemShiftTab:m.useCallback(()=>_(!0),[]),onFocusableItemAdd:m.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:m.useCallback(()=>C(E=>E-1),[]),children:h.jsx(Ve.div,{tabIndex:x||R===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{k.current=!0}),onFocus:ge(t.onFocus,E=>{const I=!k.current;if(E.target===E.currentTarget&&I&&!x){const P=new CustomEvent(fx,Ohe);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const D=S().filter(O=>O.focusable),j=D.find(O=>O.active),N=D.find(O=>O.id===y),B=[j,N,...D].filter(Boolean).map(O=>O.ref.current);wF(B,u)}}k.current=!1}),onBlur:ge(t.onBlur,()=>_(!1))})})}),vF="RovingFocusGroupItem",xF=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=va(),c=i||l,u=$he(vF,n),d=u.currentTabStopId===c,f=mF(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=u;return m.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),h.jsx(k_.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:h.jsx(Ve.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ge(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:ge(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ge(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=zhe(w,u.orientation,u.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=f().filter(S=>S.focusable).map(S=>S.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const S=b.indexOf(w.currentTarget);b=u.loop?qhe(b,S+1):b.slice(S+1)}setTimeout(()=>wF(b))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:y!=null}):o})})});xF.displayName=vF;var Uhe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bhe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function zhe(t,e,n){const r=Bhe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Uhe[r]}function wF(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function qhe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Ghe=yF,Whe=xF,D_=["Enter"," "],Hhe=["ArrowDown","PageUp","Home"],_F=["ArrowUp","PageDown","End"],Khe=[...Hhe,..._F],Qhe={ltr:[...D_,"ArrowRight"],rtl:[...D_,"ArrowLeft"]},Yhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mf="Menu",[bh,Xhe,Jhe]=Gy(mf),[dl,bF]=xr(mf,[Jhe,oF,gF]),xv=oF(),EF=gF(),[Zhe,hl]=dl(mf),[efe,gf]=dl(mf),TF=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=xv(e),[l,c]=m.useState(null),u=m.useRef(!1),d=sn(i),f=qE(s);return m.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),h.jsx(Nhe,{...a,children:h.jsx(Zhe,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:h.jsx(efe,{scope:e,onClose:m.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};TF.displayName=mf;var tfe="MenuAnchor",MT=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=xv(n);return h.jsx(khe,{...s,...r,ref:e})});MT.displayName=tfe;var VT="MenuPortal",[nfe,IF]=dl(VT,{forceMount:void 0}),SF=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=hl(VT,e);return h.jsx(nfe,{scope:e,forceMount:n,children:h.jsx(Ur,{present:n||i.open,children:h.jsx(Hy,{asChild:!0,container:s,children:r})})})};SF.displayName=VT;var kr="MenuContent",[rfe,LT]=dl(kr),CF=m.forwardRef((t,e)=>{const n=IF(kr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=hl(kr,t.__scopeMenu),o=gf(kr,t.__scopeMenu);return h.jsx(bh.Provider,{scope:t.__scopeMenu,children:h.jsx(Ur,{present:r||i.open,children:h.jsx(bh.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(sfe,{...s,ref:e}):h.jsx(ife,{...s,ref:e})})})})}),sfe=m.forwardRef((t,e)=>{const n=hl(kr,t.__scopeMenu),r=m.useRef(null),s=Ne(e,r);return m.useEffect(()=>{const i=r.current;if(i)return lf(i)},[]),h.jsx($T,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ge(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ife=m.forwardRef((t,e)=>{const n=hl(kr,t.__scopeMenu);return h.jsx($T,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ofe=Wc("MenuContent.ScrollLock"),$T=m.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:g,disableOutsideScroll:v,...y}=t,w=hl(kr,n),x=gf(kr,n),_=xv(n),b=EF(n),S=Xhe(n),[k,R]=m.useState(null),C=m.useRef(null),E=Ne(e,C,w.onContentChange),I=m.useRef(0),P=m.useRef(""),D=m.useRef(0),j=m.useRef(null),N=m.useRef("right"),L=m.useRef(0),B=v?eT:m.Fragment,O=v?{as:ofe,allowPinchZoom:!0}:void 0,M=$=>{var ee,he;const F=P.current+$,z=S().filter(ae=>!ae.disabled),q=document.activeElement,W=(ee=z.find(ae=>ae.ref.current===q))==null?void 0:ee.textValue,Y=z.map(ae=>ae.textValue),K=vfe(Y,F,W),ne=(he=z.find(ae=>ae.textValue===K))==null?void 0:he.ref.current;(function ae(le){P.current=le,window.clearTimeout(I.current),le!==""&&(I.current=window.setTimeout(()=>ae(""),1e3))})(F),ne&&setTimeout(()=>ne.focus())};m.useEffect(()=>()=>window.clearTimeout(I.current),[]),QE();const U=m.useCallback($=>{var z,q;return N.current===((z=j.current)==null?void 0:z.side)&&wfe($,(q=j.current)==null?void 0:q.area)},[]);return h.jsx(rfe,{scope:n,searchRef:P,onItemEnter:m.useCallback($=>{U($)&&$.preventDefault()},[U]),onItemLeave:m.useCallback($=>{var F;U($)||((F=C.current)==null||F.focus(),R(null))},[U]),onTriggerLeave:m.useCallback($=>{U($)&&$.preventDefault()},[U]),pointerGraceTimerRef:D,onPointerGraceIntentChange:m.useCallback($=>{j.current=$},[]),children:h.jsx(B,{...O,children:h.jsx(KE,{asChild:!0,trapped:s,onMountAutoFocus:ge(i,$=>{var F;$.preventDefault(),(F=C.current)==null||F.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:g,children:h.jsx(Ghe,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:R,onEntryFocus:ge(l,$=>{x.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(Dhe,{role:"menu","aria-orientation":"vertical","data-state":zF(w.open),"data-radix-menu-content":"",dir:x.dir,..._,...y,ref:E,style:{outline:"none",...y.style},onKeyDown:ge(y.onKeyDown,$=>{const z=$.target.closest("[data-radix-menu-content]")===$.currentTarget,q=$.ctrlKey||$.altKey||$.metaKey,W=$.key.length===1;z&&($.key==="Tab"&&$.preventDefault(),!q&&W&&M($.key));const Y=C.current;if($.target!==Y||!Khe.includes($.key))return;$.preventDefault();const ne=S().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);_F.includes($.key)&&ne.reverse(),gfe(ne)}),onBlur:ge(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(I.current),P.current="")}),onPointerMove:ge(t.onPointerMove,Eh($=>{const F=$.target,z=L.current!==$.clientX;if($.currentTarget.contains(F)&&z){const q=$.clientX>L.current?"right":"left";N.current=q,L.current=$.clientX}}))})})})})})})});CF.displayName=kr;var afe="MenuGroup",FT=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(Ve.div,{role:"group",...r,ref:e})});FT.displayName=afe;var lfe="MenuLabel",PF=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(Ve.div,{...r,ref:e})});PF.displayName=lfe;var Cg="MenuItem",bN="menu.itemSelect",wv=m.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=m.useRef(null),o=gf(Cg,t.__scopeMenu),a=LT(Cg,t.__scopeMenu),l=Ne(e,i),c=m.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const f=new CustomEvent(bN,{bubbles:!0,cancelable:!0});d.addEventListener(bN,g=>r==null?void 0:r(g),{once:!0}),$E(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(AF,{...s,ref:l,disabled:n,onClick:ge(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:ge(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ge(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||D_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});wv.displayName=Cg;var AF=m.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=LT(Cg,n),a=EF(n),l=m.useRef(null),c=Ne(e,l),[u,d]=m.useState(!1),[f,g]=m.useState("");return m.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),h.jsx(bh.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:h.jsx(Whe,{asChild:!0,...a,focusable:!r,children:h.jsx(Ve.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:ge(t.onPointerMove,Eh(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(t.onPointerLeave,Eh(v=>o.onItemLeave(v))),onFocus:ge(t.onFocus,()=>d(!0)),onBlur:ge(t.onBlur,()=>d(!1))})})})}),cfe="MenuCheckboxItem",RF=m.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return h.jsx(OF,{scope:t.__scopeMenu,checked:n,children:h.jsx(wv,{role:"menuitemcheckbox","aria-checked":Pg(n)?"mixed":n,...s,ref:e,"data-state":BT(n),onSelect:ge(s.onSelect,()=>r==null?void 0:r(Pg(n)?!0:!n),{checkForDefaultPrevented:!1})})})});RF.displayName=cfe;var NF="MenuRadioGroup",[ufe,dfe]=dl(NF,{value:void 0,onValueChange:()=>{}}),kF=m.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=sn(r);return h.jsx(ufe,{scope:t.__scopeMenu,value:n,onValueChange:i,children:h.jsx(FT,{...s,ref:e})})});kF.displayName=NF;var DF="MenuRadioItem",jF=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=dfe(DF,t.__scopeMenu),i=n===s.value;return h.jsx(OF,{scope:t.__scopeMenu,checked:i,children:h.jsx(wv,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":BT(i),onSelect:ge(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});jF.displayName=DF;var UT="MenuItemIndicator",[OF,hfe]=dl(UT,{checked:!1}),MF=m.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=hfe(UT,n);return h.jsx(Ur,{present:r||Pg(i.checked)||i.checked===!0,children:h.jsx(Ve.span,{...s,ref:e,"data-state":BT(i.checked)})})});MF.displayName=UT;var ffe="MenuSeparator",VF=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(Ve.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});VF.displayName=ffe;var pfe="MenuArrow",LF=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=xv(n);return h.jsx(jhe,{...s,...r,ref:e})});LF.displayName=pfe;var mfe="MenuSub",[Zme,$F]=dl(mfe),ld="MenuSubTrigger",FF=m.forwardRef((t,e)=>{const n=hl(ld,t.__scopeMenu),r=gf(ld,t.__scopeMenu),s=$F(ld,t.__scopeMenu),i=LT(ld,t.__scopeMenu),o=m.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=m.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return m.useEffect(()=>u,[u]),m.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(MT,{asChild:!0,...c,children:h.jsx(AF,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":zF(n.open),...t,ref:sf(e,s.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ge(t.onPointerMove,Eh(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ge(t.onPointerLeave,Eh(d=>{var g,v;u();const f=(g=n.content)==null?void 0:g.getBoundingClientRect();if(f){const y=(v=n.content)==null?void 0:v.dataset.side,w=y==="right",x=w?-5:5,_=f[w?"left":"right"],b=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:_,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:_,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ge(t.onKeyDown,d=>{var g;const f=i.searchRef.current!=="";t.disabled||f&&d.key===" "||Qhe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),d.preventDefault())})})})});FF.displayName=ld;var UF="MenuSubContent",BF=m.forwardRef((t,e)=>{const n=IF(kr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=hl(kr,t.__scopeMenu),o=gf(kr,t.__scopeMenu),a=$F(UF,t.__scopeMenu),l=m.useRef(null),c=Ne(e,l);return h.jsx(bh.Provider,{scope:t.__scopeMenu,children:h.jsx(Ur,{present:r||i.open,children:h.jsx(bh.Slot,{scope:t.__scopeMenu,children:h.jsx($T,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ge(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ge(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ge(t.onKeyDown,u=>{var g;const d=u.currentTarget.contains(u.target),f=Yhe[o.dir].includes(u.key);d&&f&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});BF.displayName=UF;function zF(t){return t?"open":"closed"}function Pg(t){return t==="indeterminate"}function BT(t){return Pg(t)?"indeterminate":t?"checked":"unchecked"}function gfe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function yfe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function vfe(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=yfe(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function xfe(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(s=!s)}return s}function wfe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return xfe(n,e)}function Eh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var _fe=TF,bfe=MT,Efe=SF,Tfe=CF,Ife=FT,Sfe=PF,Cfe=wv,Pfe=RF,Afe=kF,Rfe=jF,Nfe=MF,kfe=VF,Dfe=LF,jfe=FF,Ofe=BF,_v="DropdownMenu",[Mfe,ege]=xr(_v,[bF]),Vn=bF(),[Vfe,qF]=Mfe(_v),GF=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=Vn(e),c=m.useRef(null),[u,d]=il({prop:s,defaultProp:i??!1,onChange:o,caller:_v});return h.jsx(Vfe,{scope:e,triggerId:va(),triggerRef:c,contentId:va(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(f=>!f),[d]),modal:a,children:h.jsx(_fe,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};GF.displayName=_v;var WF="DropdownMenuTrigger",HF=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=qF(WF,n),o=Vn(n);return h.jsx(bfe,{asChild:!0,...o,children:h.jsx(Ve.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:sf(e,i.triggerRef),onPointerDown:ge(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:ge(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});HF.displayName=WF;var Lfe="DropdownMenuPortal",KF=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Vn(e);return h.jsx(Efe,{...r,...n})};KF.displayName=Lfe;var QF="DropdownMenuContent",YF=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=qF(QF,n),i=Vn(n),o=m.useRef(!1);return h.jsx(Tfe,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:ge(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ge(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});YF.displayName=QF;var $fe="DropdownMenuGroup",Ffe=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Ife,{...s,...r,ref:e})});Ffe.displayName=$fe;var Ufe="DropdownMenuLabel",XF=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Sfe,{...s,...r,ref:e})});XF.displayName=Ufe;var Bfe="DropdownMenuItem",JF=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Cfe,{...s,...r,ref:e})});JF.displayName=Bfe;var zfe="DropdownMenuCheckboxItem",ZF=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Pfe,{...s,...r,ref:e})});ZF.displayName=zfe;var qfe="DropdownMenuRadioGroup",Gfe=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Afe,{...s,...r,ref:e})});Gfe.displayName=qfe;var Wfe="DropdownMenuRadioItem",e6=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Rfe,{...s,...r,ref:e})});e6.displayName=Wfe;var Hfe="DropdownMenuItemIndicator",t6=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Nfe,{...s,...r,ref:e})});t6.displayName=Hfe;var Kfe="DropdownMenuSeparator",n6=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(kfe,{...s,...r,ref:e})});n6.displayName=Kfe;var Qfe="DropdownMenuArrow",Yfe=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Dfe,{...s,...r,ref:e})});Yfe.displayName=Qfe;var Xfe="DropdownMenuSubTrigger",r6=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(jfe,{...s,...r,ref:e})});r6.displayName=Xfe;var Jfe="DropdownMenuSubContent",s6=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Vn(n);return h.jsx(Ofe,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});s6.displayName=Jfe;var Zfe=GF,epe=HF,tpe=KF,i6=YF,o6=XF,a6=JF,l6=ZF,c6=e6,u6=t6,d6=n6,h6=r6,f6=s6;const p6=Zfe,m6=epe,npe=oe.forwardRef(({className:t,inset:e,children:n,...r},s)=>h.jsxs(h6,{ref:s,className:fe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,h.jsx(t_,{className:"ml-auto h-4 w-4"})]}));npe.displayName=h6.displayName;const rpe=oe.forwardRef(({className:t,...e},n)=>h.jsx(f6,{ref:n,className:fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));rpe.displayName=f6.displayName;const zT=oe.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx(tpe,{children:h.jsx(i6,{ref:r,sideOffset:e,className:fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));zT.displayName=i6.displayName;const gc=oe.forwardRef(({className:t,inset:e,...n},r)=>h.jsx(a6,{ref:r,className:fe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));gc.displayName=a6.displayName;const spe=oe.forwardRef(({className:t,children:e,checked:n,...r},s)=>h.jsxs(l6,{ref:s,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(u6,{children:h.jsx(Uy,{className:"h-4 w-4"})})}),e]}));spe.displayName=l6.displayName;const ipe=oe.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(c6,{ref:r,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(u6,{children:h.jsx(ine,{className:"h-2 w-2 fill-current"})})}),e]}));ipe.displayName=c6.displayName;const ope=oe.forwardRef(({className:t,inset:e,...n},r)=>h.jsx(o6,{ref:r,className:fe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));ope.displayName=o6.displayName;const ape=oe.forwardRef(({className:t,...e},n)=>h.jsx(d6,{ref:n,className:fe("-mx-1 my-1 h-px bg-muted",t),...e}));ape.displayName=d6.displayName;const lpe=({orders:t,selectedOrders:e,handleSelectOrder:n,handleSelectAll:r,openDetailsModal:s,handleStatusChange:i,handleDeleteOrder:o,formatDate:a,formatPrice:l,getStatusInfo:c,statusOptions:u})=>h.jsx("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-lg overflow-x-auto",children:h.jsxs(hv,{children:[h.jsx(fv,{className:"bg-slate-50 dark:bg-slate-700/50",children:h.jsxs(Ga,{children:[h.jsx(Jt,{className:"px-3 py-3.5 w-10 text-center",children:h.jsx(hg,{checked:e.length===t.length&&t.length>0,onCheckedChange:d=>r(d),"aria-label":"تحديد الكل"})}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"رقم الطلب"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"العميل"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"التاريخ"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"الإجمالي"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"الحالة"}),h.jsx(Jt,{className:"text-center px-3 py-3.5",children:"الإجراءات"})]})}),h.jsx(pv,{children:t.map(d=>{const f=c(d.status),g=d.customerInfo||{},v=d.shipping||{},y=g.name||v.fullName||"غير متوفر",w=g.email||d.userEmail||"غير متوفر",x=typeof d.totalAmount<"u"?d.totalAmount:typeof d.total<"u"?d.total:0;return h.jsxs(Ga,{"data-state":e.includes(d.id)?"selected":"",className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[h.jsx(Zt,{className:"px-3 py-4 text-center",children:h.jsx(hg,{checked:e.includes(d.id),onCheckedChange:_=>n(d.id,_),"aria-label":`تحديد الطلب ${d.id.slice(0,8)}`})}),h.jsx(Zt,{className:"font-medium text-sky-600 dark:text-sky-400 px-3 py-4",children:h.jsxs("span",{onClick:()=>s(d),className:"hover:underline cursor-pointer",children:["#",d.id.slice(0,8),"..."]})}),h.jsxs(Zt,{className:"px-3 py-4",children:[h.jsx("div",{children:y}),h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:w})]}),h.jsx(Zt,{className:"px-3 py-4",children:a(d.createdAt)}),h.jsx(Zt,{className:"px-3 py-4",children:l(x)}),h.jsx(Zt,{className:"px-3 py-4",children:h.jsxs(R_,{value:d.status||"",onValueChange:_=>i(d.id,_),children:[h.jsx(vg,{className:`w-full text-xs h-8 px-2 py-1 rounded-md border-0 focus:ring-0 focus:ring-offset-0 ${f.color} ${f.textColor}`,children:h.jsx(N_,{})}),h.jsx(xg,{children:u.filter(_=>_.value!=="all").map(_=>h.jsx(wg,{value:_.value,className:"text-xs",children:_.label},_.value))})]})}),h.jsx(Zt,{className:"text-center px-3 py-4",children:h.jsxs(p6,{children:[h.jsx(m6,{asChild:!0,children:h.jsx(we,{variant:"ghost",size:"icon",children:h.jsx(qL,{className:"h-5 w-5"})})}),h.jsxs(zT,{align:"end",children:[h.jsxs(gc,{onClick:()=>s(d),children:[h.jsx(cne,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," عرض التفاصيل"]}),h.jsxs(whe,{children:[h.jsx(_he,{asChild:!0,children:h.jsxs(gc,{onSelect:_=>_.preventDefault(),className:"text-red-600 focus:text-red-600 dark:focus:text-red-400",children:[h.jsx(ME,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," حذف الطلب"]})}),h.jsxs(rF,{dir:"rtl",children:[h.jsxs(_g,{children:[h.jsx(Eg,{children:"تأكيد الحذف"}),h.jsxs(Tg,{children:["هل أنت متأكد أنك تريد حذف الطلب رقم #",d.id.slice(0,8),"...؟ هذا الإجراء لا يمكن التراجع عنه."]})]}),h.jsxs(bg,{children:[h.jsx(Sg,{children:"إلغاء"}),h.jsx(Ig,{onClick:()=>o(d.id),className:"bg-red-500 hover:bg-red-600",children:"حذف"})]})]})]})]})]})})]},d.id)})})]})}),cpe=({searchTerm:t,setSearchTerm:e,statusFilter:n,setStatusFilter:r,statusOptions:s,selectedOrders:i,handleBulkStatusUpdate:o,setSelectedOrders:a,setCurrentPage:l})=>h.jsx("div",{className:"mb-6 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[h.jsxs("div",{className:"relative",children:[h.jsx(ze,{type:"text",placeholder:"ابحث برقم الطلب، اسم العميل...",value:t,onChange:c=>{e(c.target.value),l(1)},className:"w-full dark:bg-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600 focus:ring-sky-500 focus:border-sky-500 pl-10 rtl:pr-10 rtl:pl-3"}),h.jsx(nf,{className:"absolute left-3 rtl:right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"فلترة بالحالة"}),h.jsxs(R_,{value:n,onValueChange:c=>{r(c),l(1)},children:[h.jsx(vg,{className:"w-full dark:bg-slate-700 dark:text-slate-200",children:h.jsx(N_,{placeholder:"اختر حالة..."})}),h.jsx(xg,{children:s.map(c=>h.jsx(wg,{value:c.value,children:c.label},c.value))})]})]}),i.length>0&&h.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-2 gap-2 items-center mt-2 md:mt-0",children:[h.jsxs(R_,{onValueChange:c=>o(c),children:[h.jsx(vg,{className:"w-full dark:bg-slate-700 dark:text-slate-200",children:h.jsx(N_,{placeholder:"تحديث حالة المحدد..."})}),h.jsx(xg,{children:s.filter(c=>c.value!=="all").map(c=>h.jsx(wg,{value:c.value,children:c.label},c.value))})]}),h.jsxs(we,{variant:"outline",onClick:()=>a([]),className:"w-full",children:["إلغاء تحديد (",i.length,")"]})]})]})}),upe=({currentPage:t,totalPages:e,changePage:n,totalItems:r})=>h.jsxs("div",{className:"flex items-center justify-between mt-6 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[h.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["صفحة ",t," من ",e," (إجمالي ",r," طلبات)"]}),h.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[h.jsxs(we,{variant:"outline",size:"icon",onClick:()=>n(1),disabled:t===1,"aria-label":"الصفحة الأولى",children:[h.jsx(iR,{className:"h-4 w-4 rtl:hidden"}),h.jsx(sR,{className:"h-4 w-4 ltr:hidden"})]}),h.jsxs(we,{variant:"outline",size:"icon",onClick:()=>n(t-1),disabled:t===1,"aria-label":"الصفحة السابقة",children:[h.jsx(t_,{className:"h-4 w-4 rtl:hidden"}),h.jsx(rR,{className:"h-4 w-4 ltr:hidden"})]}),h.jsxs(we,{variant:"outline",size:"icon",onClick:()=>n(t+1),disabled:t===e,"aria-label":"الصفحة التالية",children:[h.jsx(rR,{className:"h-4 w-4 rtl:hidden"}),h.jsx(t_,{className:"h-4 w-4 ltr:hidden"})]}),h.jsxs(we,{variant:"outline",size:"icon",onClick:()=>n(e),disabled:t===e,"aria-label":"الصفحة الأخيرة",children:[h.jsx(sR,{className:"h-4 w-4 rtl:hidden"}),h.jsx(iR,{className:"h-4 w-4 ltr:hidden"})]})]})]}),j_=[{value:"all",label:"جميع الحالات"},{value:"pending",label:"قيد الانتظار",color:"bg-yellow-500 dark:bg-yellow-400",textColor:"text-white"},{value:"processing",label:"قيد المعالجة",color:"bg-blue-500 dark:bg-blue-400",textColor:"text-white"},{value:"shipped",label:"تم الشحن",color:"bg-sky-500 dark:bg-sky-400",textColor:"text-white"},{value:"delivered",label:"تم التسليم",color:"bg-green-500 dark:bg-green-400",textColor:"text-white"},{value:"cancelled",label:"ملغي",color:"bg-red-500 dark:bg-red-400",textColor:"text-white"}],EN=t=>j_.find(e=>e.value===t)||{label:t||"غير معروف",color:"bg-slate-500",textColor:"text-white"},TN=t=>{const e=Number(t);return isNaN(e)?new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(0):new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e)},IN=t=>{if(!t||!t.seconds)return"غير متوفر";try{return new Date(t.seconds*1e3).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"تاريخ غير صالح"}},px=10,dpe=()=>{const t=er(),{toast:e}=pn(),[n,r]=m.useState([]),[s,i]=m.useState(!0),[o,a]=m.useState(null),[l,c]=m.useState(""),[u,d]=m.useState("all"),[f,g]=m.useState([]),[v,y]=m.useState(!1),[w,x]=m.useState(null),[_,b]=m.useState(null),[S,k]=m.useState(1);m.useEffect(()=>{i(!0);let M=Uc(Rr(dt,"orders"),Ma("createdAt","desc"));u!=="all"&&(M=Uc(Rr(dt,"orders"),fE("status","==",u),Ma("createdAt","desc")));const U=Jh(M,$=>{const F=$.docs.map(z=>({id:z.id,...z.data()}));r(F),i(!1),a(null)},$=>{console.error("Error fetching orders: ",$),a("فشل في تحميل الطلبات. يرجى المحاولة مرة أخرى."),i(!1),e({title:"خطأ",description:"فشل في تحميل الطلبات.",variant:"destructive"})});return()=>U()},[u,e]);const R=m.useMemo(()=>n.filter(M=>{var U;return M.id.toLowerCase().includes(l.toLowerCase())||((U=M.shipping)==null?void 0:U.fullName)&&M.shipping.fullName.toLowerCase().includes(l.toLowerCase())||M.userEmail&&M.userEmail.toLowerCase().includes(l.toLowerCase())}),[n,l]),C=m.useMemo(()=>{const M=(S-1)*px;return R.slice(M,M+px)},[R,S]),E=Math.ceil(R.length/px),I=async(M,U)=>{try{const $=dr(dt,"orders",M);await My($,{status:U,updatedAt:new Date}),e({title:"تم التحديث",description:"تم تحديث حالة الطلب."})}catch{e({title:"خطأ",description:"فشل تحديث حالة الطلب.",variant:"destructive"})}},P=async M=>{if(f.length===0||M==="all"){e({title:"تنبيه",description:"يرجى تحديد طلب واحد على الأقل وحالة صالحة للتحديث."});return}const U=wE(dt);f.forEach($=>{U.update(dr(dt,"orders",$),{status:M,updatedAt:new Date})});try{await U.commit(),e({title:"تم التحديث الجماعي",description:`تم تحديث حالة ${f.length} طلبات.`}),g([])}catch{e({title:"خطأ",description:"فشل التحديث الجماعي للحالات.",variant:"destructive"})}},D=async M=>{try{await yE(dr(dt,"orders",M)),e({title:"تم الحذف",description:"تم حذف الطلب بنجاح."})}catch{e({title:"خطأ",description:"فشل حذف الطلب.",variant:"destructive"})}},j=(M,U)=>{g($=>U?[...$,M]:$.filter(F=>F!==M))},N=M=>{g(M?C.map(U=>U.id):[])},L=M=>{x(M),y(!0)},B=M=>{const U=M.target.files[0];U&&b(URL.createObjectURL(U))},O=M=>{M>0&&M<=E&&(k(M),g([]))};return s?h.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:h.jsx(tn,{className:"h-16 w-16 text-sky-500 animate-spin"})}):o?h.jsx("div",{className:"text-center py-10 text-red-500",children:o}):h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[h.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[h.jsx(yne,{className:"mr-3 rtl:ml-3 rtl:mr-0",size:32}),"إدارة الطلبات"]}),h.jsxs(we,{variant:"outline",onClick:()=>t("/admin"),children:[h.jsx(hu,{className:"ml-2 h-4 w-4"}),"الرجوع للوحة التحكم"]})]}),h.jsx(cpe,{searchTerm:l,setSearchTerm:c,statusFilter:u,setStatusFilter:d,statusOptions:j_,selectedOrders:f,handleBulkStatusUpdate:P,setSelectedOrders:g,setCurrentPage:k}),C.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(bne,{className:"mx-auto h-16 w-16 text-slate-400 dark:text-slate-500 mb-4"}),h.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400",children:"لا توجد طلبات تطابق بحثك."})]}):h.jsxs(h.Fragment,{children:[h.jsx(lpe,{orders:C,selectedOrders:f,handleSelectOrder:j,handleSelectAll:N,openDetailsModal:L,handleStatusChange:I,handleDeleteOrder:D,formatDate:IN,formatPrice:TN,getStatusInfo:EN,statusOptions:j_}),E>1&&h.jsx(upe,{currentPage:S,totalPages:E,changePage:O,totalItems:R.length})]}),h.jsx(Nd,{open:v,onOpenChange:y,children:h.jsx(ahe,{order:w,logoPreview:_,handleLogoUpload:B,formatDate:IN,formatPrice:TN,getStatusInfo:EN})})]})};function hpe(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var Ag={},fpe={get exports(){return Ag},set exports(t){Ag=t}};(function(t){var e,n,r={};fpe.exports=r,r.parse=function(s,i){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,c={},u=new Uint8Array(s),d=u.length-4;a(u,d)!=101010256;)d--;l=d,l+=4;var f=o(u,l+=4);o(u,l+=2);var g=a(u,l+=2),v=a(u,l+=4);l+=4,l=v;for(var y=0;y<f;y++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),g=a(u,l+=4);var w=a(u,l+=4),x=o(u,l+=4),_=o(u,l+2),b=o(u,l+4);l+=6;var S=a(u,l+=8);l+=4,l+=x+_+b,r._readLocal(u,S,c,g,w,i)}return c},r._readLocal=function(s,i,o,a,l,c){var u=r.bin.readUshort,d=r.bin.readUint;d(s,i),u(s,i+=4),u(s,i+=2);var f=u(s,i+=2);d(s,i+=2),d(s,i+=4),i+=4;var g=u(s,i+=8),v=u(s,i+=2);i+=2;var y=r.bin.readUTF8(s,i,g);if(i+=g,i+=v,c)o[y]={size:l,csize:a};else{var w=new Uint8Array(s.buffer,i);if(f==0)o[y]=new Uint8Array(w.buffer.slice(i,i+a));else{if(f!=8)throw"unknown compression method: "+f;var x=new Uint8Array(l);r.inflateRaw(w,x),o[y]=x}}},r.inflateRaw=function(s,i){return r.F.inflate(s,i)},r.inflate=function(s,i){return s[0],s[1],r.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),i)},r.deflate=function(s,i){i==null&&(i={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*s.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(s,a,o,i.level);var l=r.adler(s,0,s.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(s,i){i==null&&(i={level:6});var o=new Uint8Array(50+Math.floor(1.1*s.length)),a=r.F.deflateRaw(s,o,a,i.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(s,i){i==null&&(i=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var u in s){var d=!r._noNeed(u)&&!i,f=s[u],g=r.crc.crc(f,0,f.length);c[u]={cpr:d,usize:f.length,crc:g,file:d?r.deflateRaw(f):f}}for(var u in c)o+=c[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var v=new Uint8Array(o),y=0,w=[];for(var u in c){var x=c[u];w.push(y),y=r._writeHeader(v,y,u,x,0)}var _=0,b=y;for(var u in c)x=c[u],w.push(y),y=r._writeHeader(v,y,u,x,1,w[_++]);var S=y-b;return a(v,y,101010256),y+=4,l(v,y+=4,_),l(v,y+=2,_),a(v,y+=2,S),a(v,y+=4,b),y+=4,y+=2,v.buffer},r._noNeed=function(s){var i=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},r._writeHeader=function(s,i,o,a,l,c){var u=r.bin.writeUint,d=r.bin.writeUshort,f=a.file;return u(s,i,l==0?67324752:33639248),i+=4,l==1&&(i+=2),d(s,i,20),d(s,i+=2,0),d(s,i+=2,a.cpr?8:0),u(s,i+=2,0),u(s,i+=4,a.crc),u(s,i+=4,f.length),u(s,i+=4,a.usize),d(s,i+=4,r.bin.sizeUTF8(o)),d(s,i+=2,0),i+=2,l==1&&(i+=2,i+=2,u(s,i+=6,c),i+=4),i+=r.bin.writeUTF8(s,i,o),l==0&&(s.set(f,i),i+=f.length),i},r.crc={table:function(){for(var s=new Uint32Array(256),i=0;i<256;i++){for(var o=i,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;s[i]=o}return s}(),update:function(s,i,o,a){for(var l=0;l<a;l++)s=r.crc.table[255&(s^i[o+l])]^s>>>8;return s},crc:function(s,i,o){return 4294967295^r.crc.update(4294967295,s,i,o)}},r.adler=function(s,i,o){for(var a=1,l=0,c=i,u=i+o;c<u;){for(var d=Math.min(c+5552,u);c<d;)l+=a+=s[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(s,i){return s[i]|s[i+1]<<8},writeUshort:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255},readUint:function(s,i){return 16777216*s[i+3]+(s[i+2]<<16|s[i+1]<<8|s[i])},writeUint:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255,s[i+2]=o>>16&255,s[i+3]=o>>24&255},readASCII:function(s,i,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(s[i+l]);return a},writeASCII:function(s,i,o){for(var a=0;a<o.length;a++)s[i+a]=o.charCodeAt(a)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,i,o){for(var a,l="",c=0;c<o;c++)l+="%"+r.bin.pad(s[i+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(s,i,o)}return a},writeUTF8:function(s,i,o){for(var a=o.length,l=0,c=0;c<a;c++){var u=o.charCodeAt(c);if(!(4294967168&u))s[i+l]=u,l++;else if(!(4294965248&u))s[i+l]=192|u>>6,s[i+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))s[i+l]=224|u>>12,s[i+l+1]=128|u>>6&63,s[i+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";s[i+l]=240|u>>18,s[i+l+1]=128|u>>12&63,s[i+l+2]=128|u>>6&63,s[i+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(s){for(var i=s.length,o=0,a=0;a<i;a++){var l=s.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(s,i,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,f=0,g=o<<3,v=0,y=s.length;if(a==0){for(;f<y;)d(i,g,f+(D=Math.min(65535,y-f))==y?1:0),g=r.F._copyExact(s,f,D,i,g+8),f+=D;return g>>>3}var w=c.lits,x=c.strt,_=c.prev,b=0,S=0,k=0,R=0,C=0,E=0;for(y>2&&(x[E=r.F._hash(s,0)]=0),f=0;f<y;f++){if(C=E,f+1<y-2){E=r.F._hash(s,f+1);var I=f+1&32767;_[I]=x[E],x[E]=I}if(v<=f){(b>14e3||S>26697)&&y-f>100&&(v<f&&(w[b]=f-v,b+=2,v=f),g=r.F._writeBlock(f==y-1||v==y?1:0,w,b,R,s,k,f-k,i,g),b=S=R=0,k=f);var P=0;f<y-2&&(P=r.F._bestMatch(s,f,_,C,Math.min(l[2],y-f),l[3]));var D=P>>>16,j=65535&P;if(P!=0){j=65535&P;var N=u(D=P>>>16,c.of0);c.lhst[257+N]++;var L=u(j,c.df0);c.dhst[L]++,R+=c.exb[N]+c.dxb[L],w[b]=D<<23|f-v,w[b+1]=j<<16|N<<8|L,b+=2,v=f+D}else c.lhst[s[f]]++;S++}}for(k==f&&s.length!=0||(v<f&&(w[b]=f-v,b+=2,v=f),g=r.F._writeBlock(1,w,b,R,s,k,f-k,i,g),b=0,S=0,b=S=R=0,k=f);7&g;)g++;return g>>>3},r.F._bestMatch=function(s,i,o,a,l,c){var u=32767&i,d=o[u],f=u-d+32768&32767;if(d==u||a!=r.F._hash(s,i-f))return 0;for(var g=0,v=0,y=Math.min(32767,i);f<=y&&--c!=0&&d!=u;){if(g==0||s[i+g]==s[i+g-f]){var w=r.F._howLong(s,i,f);if(w>g){if(v=f,(g=w)>=l)break;f+2<w&&(w=f+2);for(var x=0,_=0;_<w-2;_++){var b=i-f+_+32768&32767,S=b-o[b]+32768&32767;S>x&&(x=S,d=b)}}}f+=(u=d)-(d=o[u])+32768&32767}return g<<16|v},r.F._howLong=function(s,i,o){if(s[i]!=s[i-o]||s[i+1]!=s[i+1-o]||s[i+2]!=s[i+2-o])return 0;var a=i,l=Math.min(s.length,i+258);for(i+=3;i<l&&s[i]==s[i-o];)i++;return i-a},r.F._hash=function(s,i){return(s[i]<<8|s[i+1])+(s[i+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(s,i,o,a,l,c,u,d,f){var g,v,y,w,x,_,b,S,k,R=r.F.U,C=r.F._putsF,E=r.F._putsE;R.lhst[256]++,v=(g=r.F.getTrees())[0],y=g[1],w=g[2],x=g[3],_=g[4],b=g[5],S=g[6],k=g[7];var I=32+(f+3&7?8-(f+3&7):0)+(u<<3),P=a+r.F.contSize(R.fltree,R.lhst)+r.F.contSize(R.fdtree,R.dhst),D=a+r.F.contSize(R.ltree,R.lhst)+r.F.contSize(R.dtree,R.dhst);D+=14+3*b+r.F.contSize(R.itree,R.ihst)+(2*R.ihst[16]+3*R.ihst[17]+7*R.ihst[18]);for(var j=0;j<286;j++)R.lhst[j]=0;for(j=0;j<30;j++)R.dhst[j]=0;for(j=0;j<19;j++)R.ihst[j]=0;var N=I<P&&I<D?0:P<D?1:2;if(C(d,f,s),C(d,f+1,N),f+=3,N==0){for(;7&f;)f++;f=r.F._copyExact(l,c,u,d,f)}else{var L,B;if(N==1&&(L=R.fltree,B=R.fdtree),N==2){r.F.makeCodes(R.ltree,v),r.F.revCodes(R.ltree,v),r.F.makeCodes(R.dtree,y),r.F.revCodes(R.dtree,y),r.F.makeCodes(R.itree,w),r.F.revCodes(R.itree,w),L=R.ltree,B=R.dtree,E(d,f,x-257),E(d,f+=5,_-1),E(d,f+=5,b-4),f+=4;for(var O=0;O<b;O++)E(d,f+3*O,R.itree[1+(R.ordr[O]<<1)]);f+=3*b,f=r.F._codeTiny(S,R.itree,d,f),f=r.F._codeTiny(k,R.itree,d,f)}for(var M=c,U=0;U<o;U+=2){for(var $=i[U],F=$>>>23,z=M+(8388607&$);M<z;)f=r.F._writeLit(l[M++],L,d,f);if(F!=0){var q=i[U+1],W=q>>16,Y=q>>8&255,K=255&q;E(d,f=r.F._writeLit(257+Y,L,d,f),F-R.of0[Y]),f+=R.exb[Y],C(d,f=r.F._writeLit(K,B,d,f),W-R.df0[K]),f+=R.dxb[K],M+=F}}f=r.F._writeLit(256,L,d,f)}return f},r.F._copyExact=function(s,i,o,a,l){var c=l>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(s.buffer,i,o),c),l+(o+4<<3)},r.F.getTrees=function(){for(var s=r.F.U,i=r.F._hufTree(s.lhst,s.ltree,15),o=r.F._hufTree(s.dhst,s.dtree,15),a=[],l=r.F._lenCodes(s.ltree,a),c=[],u=r.F._lenCodes(s.dtree,c),d=0;d<a.length;d+=2)s.ihst[a[d]]++;for(d=0;d<c.length;d+=2)s.ihst[c[d]]++;for(var f=r.F._hufTree(s.ihst,s.itree,7),g=19;g>4&&s.itree[1+(s.ordr[g-1]<<1)]==0;)g--;return[i,o,f,l,u,g,a,c]},r.F.getSecond=function(s){for(var i=[],o=0;o<s.length;o+=2)i.push(s[o+1]);return i},r.F.nonZero=function(s){for(var i="",o=0;o<s.length;o+=2)s[o+1]!=0&&(i+=(o>>1)+",");return i},r.F.contSize=function(s,i){for(var o=0,a=0;a<i.length;a++)o+=i[a]*s[1+(a<<1)];return o},r.F._codeTiny=function(s,i,o,a){for(var l=0;l<s.length;l+=2){var c=s[l],u=s[l+1];a=r.F._writeLit(c,i,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,u,d),a+=d)}return a},r.F._lenCodes=function(s,i){for(var o=s.length;o!=2&&s[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=s[a+1],c=a+3<o?s[a+3]:-1,u=a+5<o?s[a+5]:-1,d=a==0?-1:s[a-1];if(l==0&&c==l&&u==l){for(var f=a+5;f+2<o&&s[f+2]==l;)f+=2;(g=Math.min(f+1-a>>>1,138))<11?i.push(17,g-3):i.push(18,g-11),a+=2*g-2}else if(l==d&&c==l&&u==l){for(f=a+5;f+2<o&&s[f+2]==l;)f+=2;var g=Math.min(f+1-a>>>1,6);i.push(16,g-3),a+=2*g-2}else i.push(l,0)}return o>>>1},r.F._hufTree=function(s,i,o){var a=[],l=s.length,c=i.length,u=0;for(u=0;u<c;u+=2)i[u]=0,i[u+1]=0;for(u=0;u<l;u++)s[u]!=0&&a.push({lit:u,f:s[u]});var d=a.length,f=a.slice(0);if(d==0)return 0;if(d==1){var g=a[0].lit;return f=g==0?1:0,i[1+(g<<1)]=1,i[1+(f<<1)]=1,1}a.sort(function(S,k){return S.f-k.f});var v=a[0],y=a[1],w=0,x=1,_=2;for(a[0]={lit:-1,f:v.f+y.f,l:v,r:y,d:0};x!=d-1;)v=w!=x&&(_==d||a[w].f<a[_].f)?a[w++]:a[_++],y=w!=x&&(_==d||a[w].f<a[_].f)?a[w++]:a[_++],a[x++]={lit:-1,f:v.f+y.f,l:v,r:y};var b=r.F.setDepth(a[x-1],0);for(b>o&&(r.F.restrictDepth(f,o,b),b=o),u=0;u<d;u++)i[1+(f[u].lit<<1)]=f[u].d;return b},r.F.setDepth=function(s,i){return s.lit!=-1?(s.d=i,i):Math.max(r.F.setDepth(s.l,i+1),r.F.setDepth(s.r,i+1))},r.F.restrictDepth=function(s,i,o){var a=0,l=1<<o-i,c=0;for(s.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),a=0;a<s.length&&s[a].d>i;a++){var u=s[a].d;s[a].d=i,c+=l-(1<<o-u)}for(c>>>=o-i;c>0;)(u=s[a].d)<i?(s[a].d++,c-=1<<i-u-1):a++;for(;a>=0;a--)s[a].d==i&&c<0&&(s[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(s,i){var o=0;return i[16|o]<=s&&(o|=16),i[8|o]<=s&&(o|=8),i[4|o]<=s&&(o|=4),i[2|o]<=s&&(o|=2),i[1|o]<=s&&(o|=1),o},r.F._writeLit=function(s,i,o,a){return r.F._putsF(o,a,i[s<<1]),a+i[1+(s<<1)]},r.F.inflate=function(s,i){var o=Uint8Array;if(s[0]==3&&s[1]==0)return i||new o(0);var a=r.F,l=a._bitsF,c=a._bitsE,u=a._decodeTiny,d=a.makeCodes,f=a.codes2map,g=a._get17,v=a.U,y=i==null;y&&(i=new o(s.length>>>2<<3));for(var w,x,_=0,b=0,S=0,k=0,R=0,C=0,E=0,I=0,P=0;_==0;)if(_=l(s,P,1),b=l(s,P+1,2),P+=3,b!=0){if(y&&(i=r.F._check(i,I+(1<<17))),b==1&&(w=v.flmap,x=v.fdmap,C=511,E=31),b==2){S=c(s,P,5)+257,k=c(s,P+5,5)+1,R=c(s,P+10,4)+4,P+=14;for(var D=0;D<38;D+=2)v.itree[D]=0,v.itree[D+1]=0;var j=1;for(D=0;D<R;D++){var N=c(s,P+3*D,3);v.itree[1+(v.ordr[D]<<1)]=N,N>j&&(j=N)}P+=3*R,d(v.itree,j),f(v.itree,j,v.imap),w=v.lmap,x=v.dmap,P=u(v.imap,(1<<j)-1,S+k,s,P,v.ttree);var L=a._copyOut(v.ttree,0,S,v.ltree);C=(1<<L)-1;var B=a._copyOut(v.ttree,S,k,v.dtree);E=(1<<B)-1,d(v.ltree,L),f(v.ltree,L,w),d(v.dtree,B),f(v.dtree,B,x)}for(;;){var O=w[g(s,P)&C];P+=15&O;var M=O>>>4;if(!(M>>>8))i[I++]=M;else{if(M==256)break;var U=I+M-254;if(M>264){var $=v.ldef[M-257];U=I+($>>>3)+c(s,P,7&$),P+=7&$}var F=x[g(s,P)&E];P+=15&F;var z=F>>>4,q=v.ddef[z],W=(q>>>4)+l(s,P,15&q);for(P+=15&q,y&&(i=r.F._check(i,I+(1<<17)));I<U;)i[I]=i[I++-W],i[I]=i[I++-W],i[I]=i[I++-W],i[I]=i[I++-W];I=U}}}else{7&P&&(P+=8-(7&P));var Y=4+(P>>>3),K=s[Y-4]|s[Y-3]<<8;y&&(i=r.F._check(i,I+K)),i.set(new o(s.buffer,s.byteOffset+Y,K),I),P=Y+K<<3,I+=K}return i.length==I?i:i.slice(0,I)},r.F._check=function(s,i){var o=s.length;if(i<=o)return s;var a=new Uint8Array(Math.max(o<<1,i));return a.set(s,0),a},r.F._decodeTiny=function(s,i,o,a,l,c){for(var u=r.F._bitsE,d=r.F._get17,f=0;f<o;){var g=s[d(a,l)&i];l+=15&g;var v=g>>>4;if(v<=15)c[f]=v,f++;else{var y=0,w=0;v==16?(w=3+u(a,l,2),l+=2,y=c[f-1]):v==17?(w=3+u(a,l,3),l+=3):v==18&&(w=11+u(a,l,7),l+=7);for(var x=f+w;f<x;)c[f]=y,f++}}return l},r.F._copyOut=function(s,i,o,a){for(var l=0,c=0,u=a.length>>>1;c<o;){var d=s[c+i];a[c<<1]=0,a[1+(c<<1)]=d,d>l&&(l=d),c++}for(;c<u;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(s,i){for(var o,a,l,c,u=r.F.U,d=s.length,f=u.bl_count,g=0;g<=i;g++)f[g]=0;for(g=1;g<d;g+=2)f[s[g]]++;var v=u.next_code;for(o=0,f[0]=0,a=1;a<=i;a++)o=o+f[a-1]<<1,v[a]=o;for(l=0;l<d;l+=2)(c=s[l+1])!=0&&(s[l]=v[c],v[c]++)},r.F.codes2map=function(s,i,o){for(var a=s.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(s[c+1]!=0)for(var u=c>>1,d=s[c+1],f=u<<4|d,g=i-d,v=s[c]<<g,y=v+(1<<g);v!=y;)o[l[v]>>>15-i]=f,v++},r.F.revCodes=function(s,i){for(var o=r.F.U.rev15,a=15-i,l=0;l<s.length;l+=2){var c=s[l]<<i-s[l+1];s[l]=o[c]>>>a}},r.F._putsE=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8},r.F._putsF=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8,s[a+2]|=o>>>16},r.F._bitsE=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8)>>>(7&i)&(1<<o)-1},r.F._bitsF=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)&(1<<o)-1},r.F._get17=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)},r.F._get25=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16|s[3+(i>>>3)]<<24)>>>(7&i)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var s=r.F.U,i=0;i<32768;i++){var o=i;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,s.rev15[i]=(o>>>16|o<<16)>>>17}function a(l,c,u){for(;c--!=0;)l.push(0,u)}for(i=0;i<32;i++)s.ldef[i]=s.of0[i]<<3|s.exb[i],s.ddef[i]=s.df0[i]<<4|s.dxb[i];a(s.fltree,144,8),a(s.fltree,112,9),a(s.fltree,24,7),a(s.fltree,8,8),r.F.makeCodes(s.fltree,9),r.F.codes2map(s.fltree,9,s.flmap),r.F.revCodes(s.fltree,9),a(s.fdtree,32,5),r.F.makeCodes(s.fdtree,5),r.F.codes2map(s.fdtree,5,s.fdmap),r.F.revCodes(s.fdtree,5),a(s.itree,19,0),a(s.ltree,286,0),a(s.dtree,30,0),a(s.ttree,320,0)}()})();var ppe=hpe({__proto__:null,default:Ag},[Ag]);const cs=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,f){u[d]=f>>8&255,u[d+1]=255&f},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,f){u[d]=f>>24&255,u[d+1]=f>>16&255,u[d+2]=f>>8&255,u[d+3]=255&f},readASCII(u,d,f){let g="";for(let v=0;v<f;v++)g+=String.fromCharCode(u[d+v]);return g},writeASCII(u,d,f){for(let g=0;g<f.length;g++)u[d+g]=f.charCodeAt(g)},readBytes(u,d,f){const g=[];for(let v=0;v<f;v++)g.push(u[d+v]);return g},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,f){let g,v="";for(let y=0;y<f;y++)v+=`%${t.pad(u[d+y].toString(16))}`;try{g=decodeURIComponent(v)}catch{return t.readASCII(u,d,f)}return g}};function e(u,d,f,g){const v=d*f,y=i(g),w=Math.ceil(d*y/8),x=new Uint8Array(4*v),_=new Uint32Array(x.buffer),{ctype:b}=g,{depth:S}=g,k=t.readUshort;if(b==6){const $=v<<2;if(S==8)for(var R=0;R<$;R+=4)x[R]=u[R],x[R+1]=u[R+1],x[R+2]=u[R+2],x[R+3]=u[R+3];if(S==16)for(R=0;R<$;R++)x[R]=u[R<<1]}else if(b==2){const $=g.tabs.tRNS;if($==null){if(S==8)for(R=0;R<v;R++){var C=3*R;_[R]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C]}if(S==16)for(R=0;R<v;R++)C=6*R,_[R]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C]}else{var E=$[0];const F=$[1],z=$[2];if(S==8)for(R=0;R<v;R++){var I=R<<2;C=3*R,_[R]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C],u[C]==E&&u[C+1]==F&&u[C+2]==z&&(x[I+3]=0)}if(S==16)for(R=0;R<v;R++)I=R<<2,C=6*R,_[R]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C],k(u,C)==E&&k(u,C+2)==F&&k(u,C+4)==z&&(x[I+3]=0)}}else if(b==3){const $=g.tabs.PLTE,F=g.tabs.tRNS,z=F?F.length:0;if(S==1)for(var P=0;P<f;P++){var D=P*w,j=P*d;for(R=0;R<d;R++){I=j+R<<2;var N=3*(L=u[D+(R>>3)]>>7-((7&R)<<0)&1);x[I]=$[N],x[I+1]=$[N+1],x[I+2]=$[N+2],x[I+3]=L<z?F[L]:255}}if(S==2)for(P=0;P<f;P++)for(D=P*w,j=P*d,R=0;R<d;R++)I=j+R<<2,N=3*(L=u[D+(R>>2)]>>6-((3&R)<<1)&3),x[I]=$[N],x[I+1]=$[N+1],x[I+2]=$[N+2],x[I+3]=L<z?F[L]:255;if(S==4)for(P=0;P<f;P++)for(D=P*w,j=P*d,R=0;R<d;R++)I=j+R<<2,N=3*(L=u[D+(R>>1)]>>4-((1&R)<<2)&15),x[I]=$[N],x[I+1]=$[N+1],x[I+2]=$[N+2],x[I+3]=L<z?F[L]:255;if(S==8)for(R=0;R<v;R++){var L;I=R<<2,N=3*(L=u[R]),x[I]=$[N],x[I+1]=$[N+1],x[I+2]=$[N+2],x[I+3]=L<z?F[L]:255}}else if(b==4){if(S==8)for(R=0;R<v;R++){I=R<<2;var B=u[O=R<<1];x[I]=B,x[I+1]=B,x[I+2]=B,x[I+3]=u[O+1]}if(S==16)for(R=0;R<v;R++){var O;I=R<<2,B=u[O=R<<2],x[I]=B,x[I+1]=B,x[I+2]=B,x[I+3]=u[O+2]}}else if(b==0)for(E=g.tabs.tRNS?g.tabs.tRNS:-1,P=0;P<f;P++){const $=P*w,F=P*d;if(S==1)for(var M=0;M<d;M++){var U=(B=255*(u[$+(M>>>3)]>>>7-(7&M)&1))==255*E?0:255;_[F+M]=U<<24|B<<16|B<<8|B}else if(S==2)for(M=0;M<d;M++)U=(B=85*(u[$+(M>>>2)]>>>6-((3&M)<<1)&3))==85*E?0:255,_[F+M]=U<<24|B<<16|B<<8|B;else if(S==4)for(M=0;M<d;M++)U=(B=17*(u[$+(M>>>1)]>>>4-((1&M)<<2)&15))==17*E?0:255,_[F+M]=U<<24|B<<16|B<<8|B;else if(S==8)for(M=0;M<d;M++)U=(B=u[$+M])==E?0:255,_[F+M]=U<<24|B<<16|B<<8|B;else if(S==16)for(M=0;M<d;M++)B=u[$+(M<<1)],U=k(u,$+(M<<1))==E?0:255,_[F+M]=U<<24|B<<16|B<<8|B}return x}function n(u,d,f,g){const v=i(u),y=Math.ceil(f*v/8),w=new Uint8Array((y+1+u.interlace)*g);return d=u.tabs.CgBI?s(d,w):r(d,w),u.interlace==0?d=o(d,u,0,f,g):u.interlace==1&&(d=function(_,b){const S=b.width,k=b.height,R=i(b),C=R>>3,E=Math.ceil(S*R/8),I=new Uint8Array(k*E);let P=0;const D=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],N=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const M=N[B],U=L[B];let $=0,F=0,z=D[B];for(;z<k;)z+=M,F++;let q=j[B];for(;q<S;)q+=U,$++;const W=Math.ceil($*R/8);o(_,b,P,$,F);let Y=0,K=D[B];for(;K<k;){let ne=j[B],ee=P+Y*W<<3;for(;ne<S;){var O;if(R==1&&(O=(O=_[ee>>3])>>7-(7&ee)&1,I[K*E+(ne>>3)]|=O<<7-((7&ne)<<0)),R==2&&(O=(O=_[ee>>3])>>6-(7&ee)&3,I[K*E+(ne>>2)]|=O<<6-((3&ne)<<1)),R==4&&(O=(O=_[ee>>3])>>4-(7&ee)&15,I[K*E+(ne>>1)]|=O<<4-((1&ne)<<2)),R>=8){const he=K*E+ne*C;for(let ae=0;ae<C;ae++)I[he+ae]=_[(ee>>3)+ae]}ee+=R,ne+=U}Y++,K+=M}$*F!=0&&(P+=F*(1+W)),B+=1}return I}(d,u)),d}function r(u,d){return s(new Uint8Array(u.buffer,2,u.length-6),d)}var s=function(){const u={H:{}};return u.H.N=function(d,f){const g=Uint8Array;let v,y,w=0,x=0,_=0,b=0,S=0,k=0,R=0,C=0,E=0;if(d[0]==3&&d[1]==0)return f||new g(0);const I=u.H,P=I.b,D=I.e,j=I.R,N=I.n,L=I.A,B=I.Z,O=I.m,M=f==null;for(M&&(f=new g(d.length>>>2<<5));w==0;)if(w=P(d,E,1),x=P(d,E+1,2),E+=3,x!=0){if(M&&(f=u.H.W(f,C+(1<<17))),x==1&&(v=O.J,y=O.h,k=511,R=31),x==2){_=D(d,E,5)+257,b=D(d,E+5,5)+1,S=D(d,E+10,4)+4,E+=14;let $=1;for(var U=0;U<38;U+=2)O.Q[U]=0,O.Q[U+1]=0;for(U=0;U<S;U++){const q=D(d,E+3*U,3);O.Q[1+(O.X[U]<<1)]=q,q>$&&($=q)}E+=3*S,N(O.Q,$),L(O.Q,$,O.u),v=O.w,y=O.d,E=j(O.u,(1<<$)-1,_+b,d,E,O.v);const F=I.V(O.v,0,_,O.C);k=(1<<F)-1;const z=I.V(O.v,_,b,O.D);R=(1<<z)-1,N(O.C,F),L(O.C,F,v),N(O.D,z),L(O.D,z,y)}for(;;){const $=v[B(d,E)&k];E+=15&$;const F=$>>>4;if(!(F>>>8))f[C++]=F;else{if(F==256)break;{let z=C+F-254;if(F>264){const ne=O.q[F-257];z=C+(ne>>>3)+D(d,E,7&ne),E+=7&ne}const q=y[B(d,E)&R];E+=15&q;const W=q>>>4,Y=O.c[W],K=(Y>>>4)+P(d,E,15&Y);for(E+=15&Y;C<z;)f[C]=f[C++-K],f[C]=f[C++-K],f[C]=f[C++-K],f[C]=f[C++-K];C=z}}}}else{7&E&&(E+=8-(7&E));const $=4+(E>>>3),F=d[$-4]|d[$-3]<<8;M&&(f=u.H.W(f,C+F)),f.set(new g(d.buffer,d.byteOffset+$,F),C),E=$+F<<3,C+=F}return f.length==C?f:f.slice(0,C)},u.H.W=function(d,f){const g=d.length;if(f<=g)return d;const v=new Uint8Array(g<<1);return v.set(d,0),v},u.H.R=function(d,f,g,v,y,w){const x=u.H.e,_=u.H.Z;let b=0;for(;b<g;){const S=d[_(v,y)&f];y+=15&S;const k=S>>>4;if(k<=15)w[b]=k,b++;else{let R=0,C=0;k==16?(C=3+x(v,y,2),y+=2,R=w[b-1]):k==17?(C=3+x(v,y,3),y+=3):k==18&&(C=11+x(v,y,7),y+=7);const E=b+C;for(;b<E;)w[b]=R,b++}}return y},u.H.V=function(d,f,g,v){let y=0,w=0;const x=v.length>>>1;for(;w<g;){const _=d[w+f];v[w<<1]=0,v[1+(w<<1)]=_,_>y&&(y=_),w++}for(;w<x;)v[w<<1]=0,v[1+(w<<1)]=0,w++;return y},u.H.n=function(d,f){const g=u.H.m,v=d.length;let y,w,x,_;const b=g.j;for(var S=0;S<=f;S++)b[S]=0;for(S=1;S<v;S+=2)b[d[S]]++;const k=g.K;for(y=0,b[0]=0,w=1;w<=f;w++)y=y+b[w-1]<<1,k[w]=y;for(x=0;x<v;x+=2)_=d[x+1],_!=0&&(d[x]=k[_],k[_]++)},u.H.A=function(d,f,g){const v=d.length,y=u.H.m.r;for(let w=0;w<v;w+=2)if(d[w+1]!=0){const x=w>>1,_=d[w+1],b=x<<4|_,S=f-_;let k=d[w]<<S;const R=k+(1<<S);for(;k!=R;)g[y[k]>>>15-f]=b,k++}},u.H.l=function(d,f){const g=u.H.m.r,v=15-f;for(let y=0;y<d.length;y+=2){const w=d[y]<<f-d[y+1];d[y]=g[w]>>>v}},u.H.M=function(d,f,g){g<<=7&f;const v=f>>>3;d[v]|=g,d[v+1]|=g>>>8},u.H.I=function(d,f,g){g<<=7&f;const v=f>>>3;d[v]|=g,d[v+1]|=g>>>8,d[v+2]|=g>>>16},u.H.e=function(d,f,g){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<g)-1},u.H.b=function(d,f,g){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<g)-1},u.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var f=0;f<32768;f++){let v=f;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,d.r[f]=(v>>>16|v<<16)>>>17}function g(v,y,w){for(;y--!=0;)v.push(0,w)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];g(d._,144,8),g(d._,112,9),g(d._,24,7),g(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),g(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),g(d.Q,19,0),g(d.C,286,0),g(d.D,30,0),g(d.v,320,0)}(),u.H.N}();function i(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,d,f,g,v){let y=i(d);const w=Math.ceil(g*y/8);let x,_;y=Math.ceil(y/8);let b=u[f],S=0;if(b>1&&(u[f]=[0,0,1][b-2]),b==3)for(S=y;S<w;S++)u[S+1]=u[S+1]+(u[S+1-y]>>>1)&255;for(let k=0;k<v;k++)if(x=f+k*w,_=x+k+1,b=u[_-1],S=0,b==0)for(;S<w;S++)u[x+S]=u[_+S];else if(b==1){for(;S<y;S++)u[x+S]=u[_+S];for(;S<w;S++)u[x+S]=u[_+S]+u[x+S-y]}else if(b==2)for(;S<w;S++)u[x+S]=u[_+S]+u[x+S-w];else if(b==3){for(;S<y;S++)u[x+S]=u[_+S]+(u[x+S-w]>>>1);for(;S<w;S++)u[x+S]=u[_+S]+(u[x+S-w]+u[x+S-y]>>>1)}else{for(;S<y;S++)u[x+S]=u[_+S]+a(0,u[x+S-w],0);for(;S<w;S++)u[x+S]=u[_+S]+a(u[x+S-y],u[x+S-w],u[x+S-y-w])}return u}function a(u,d,f){const g=u+d-f,v=g-u,y=g-d,w=g-f;return v*v<=y*y&&v*v<=w*w?u:y*y<=w*w?d:f}function l(u,d,f){f.width=t.readUint(u,d),d+=4,f.height=t.readUint(u,d),d+=4,f.depth=u[d],d++,f.ctype=u[d],d++,f.compress=u[d],d++,f.filter=u[d],d++,f.interlace=u[d],d++}function c(u,d,f,g,v,y,w,x,_){const b=Math.min(d,v),S=Math.min(f,y);let k=0,R=0;for(let B=0;B<S;B++)for(let O=0;O<b;O++)if(w>=0&&x>=0?(k=B*d+O<<2,R=(x+B)*v+w+O<<2):(k=(-x+B)*d-w+O<<2,R=B*v+O<<2),_==0)g[R]=u[k],g[R+1]=u[k+1],g[R+2]=u[k+2],g[R+3]=u[k+3];else if(_==1){var C=u[k+3]*.00392156862745098,E=u[k]*C,I=u[k+1]*C,P=u[k+2]*C,D=g[R+3]*(1/255),j=g[R]*D,N=g[R+1]*D,L=g[R+2]*D;const M=1-C,U=C+D*M,$=U==0?0:1/U;g[R+3]=255*U,g[R+0]=(E+j*M)*$,g[R+1]=(I+N*M)*$,g[R+2]=(P+L*M)*$}else if(_==2)C=u[k+3],E=u[k],I=u[k+1],P=u[k+2],D=g[R+3],j=g[R],N=g[R+1],L=g[R+2],C==D&&E==j&&I==N&&P==L?(g[R]=0,g[R+1]=0,g[R+2]=0,g[R+3]=0):(g[R]=E,g[R+1]=I,g[R+2]=P,g[R+3]=C);else if(_==3){if(C=u[k+3],E=u[k],I=u[k+1],P=u[k+2],D=g[R+3],j=g[R],N=g[R+1],L=g[R+2],C==D&&E==j&&I==N&&P==L)continue;if(C<220&&D>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let g=8;const v=t,y=v.readUshort,w=v.readUint,x={tabs:{},frames:[]},_=new Uint8Array(f.length);let b,S=0,k=0;const R=[137,80,78,71,13,10,26,10];for(var C=0;C<8;C++)if(f[C]!=R[C])throw"The input is not a PNG file!";for(;g<f.length;){const B=v.readUint(f,g);g+=4;const O=v.readASCII(f,g,4);if(g+=4,O=="IHDR")l(f,g,x);else if(O=="iCCP"){for(var E=g;f[E]!=0;)E++;v.readASCII(f,g,E-g),f[E+1];const M=f.slice(E+2,g+B);let U=null;try{U=r(M)}catch{U=s(M)}x.tabs[O]=U}else if(O=="CgBI")x.tabs[O]=f.slice(g,g+4);else if(O=="IDAT"){for(C=0;C<B;C++)_[S+C]=f[g+C];S+=B}else if(O=="acTL")x.tabs[O]={num_frames:w(f,g),num_plays:w(f,g+4)},b=new Uint8Array(f.length);else if(O=="fcTL"){k!=0&&((L=x.frames[x.frames.length-1]).data=n(x,b.slice(0,k),L.rect.width,L.rect.height),k=0);const M={x:w(f,g+12),y:w(f,g+16),width:w(f,g+4),height:w(f,g+8)};let U=y(f,g+22);U=y(f,g+20)/(U==0?100:U);const $={rect:M,delay:Math.round(1e3*U),dispose:f[g+24],blend:f[g+25]};x.frames.push($)}else if(O=="fdAT"){for(C=0;C<B-4;C++)b[k+C]=f[g+C+4];k+=B-4}else if(O=="pHYs")x.tabs[O]=[v.readUint(f,g),v.readUint(f,g+4),f[g+8]];else if(O=="cHRM")for(x.tabs[O]=[],C=0;C<8;C++)x.tabs[O].push(v.readUint(f,g+4*C));else if(O=="tEXt"||O=="zTXt"){x.tabs[O]==null&&(x.tabs[O]={});var I=v.nextZero(f,g),P=v.readASCII(f,g,I-g),D=g+B-I-1;if(O=="tEXt")N=v.readASCII(f,I+1,D);else{var j=r(f.slice(I+2,I+2+D));N=v.readUTF8(j,0,j.length)}x.tabs[O][P]=N}else if(O=="iTXt"){x.tabs[O]==null&&(x.tabs[O]={}),I=0,E=g,I=v.nextZero(f,E),P=v.readASCII(f,E,I-E);const M=f[E=I+1];var N;f[E+1],E+=2,I=v.nextZero(f,E),v.readASCII(f,E,I-E),E=I+1,I=v.nextZero(f,E),v.readUTF8(f,E,I-E),D=B-((E=I+1)-g),M==0?N=v.readUTF8(f,E,D):(j=r(f.slice(E,E+D)),N=v.readUTF8(j,0,j.length)),x.tabs[O][P]=N}else if(O=="PLTE")x.tabs[O]=v.readBytes(f,g,B);else if(O=="hIST"){const M=x.tabs.PLTE.length/3;for(x.tabs[O]=[],C=0;C<M;C++)x.tabs[O].push(y(f,g+2*C))}else if(O=="tRNS")x.ctype==3?x.tabs[O]=v.readBytes(f,g,B):x.ctype==0?x.tabs[O]=y(f,g):x.ctype==2&&(x.tabs[O]=[y(f,g),y(f,g+2),y(f,g+4)]);else if(O=="gAMA")x.tabs[O]=v.readUint(f,g)/1e5;else if(O=="sRGB")x.tabs[O]=f[g];else if(O=="bKGD")x.ctype==0||x.ctype==4?x.tabs[O]=[y(f,g)]:x.ctype==2||x.ctype==6?x.tabs[O]=[y(f,g),y(f,g+2),y(f,g+4)]:x.ctype==3&&(x.tabs[O]=f[g]);else if(O=="IEND")break;g+=B,v.readUint(f,g),g+=4}var L;return k!=0&&((L=x.frames[x.frames.length-1]).data=n(x,b.slice(0,k),L.rect.width,L.rect.height)),x.data=n(x,_,x.width,x.height),delete x.compress,delete x.interlace,delete x.filter,x},toRGBA8:function(d){const f=d.width,g=d.height;if(d.tabs.acTL==null)return[e(d.data,f,g,d).buffer];const v=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const y=f*g*4,w=new Uint8Array(y),x=new Uint8Array(y),_=new Uint8Array(y);for(let S=0;S<d.frames.length;S++){const k=d.frames[S],R=k.rect.x,C=k.rect.y,E=k.rect.width,I=k.rect.height,P=e(k.data,E,I,d);if(S!=0)for(var b=0;b<y;b++)_[b]=w[b];if(k.blend==0?c(P,E,I,w,f,g,R,C,0):k.blend==1&&c(P,E,I,w,f,g,R,C,1),v.push(w.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)c(x,E,I,w,f,g,R,C,0);else if(k.dispose==2)for(b=0;b<y;b++)w[b]=_[b]}}return v},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=cs,{_bin:e}=cs,n=cs._paeth;var r={table:function(){const E=new Uint32Array(256);for(let I=0;I<256;I++){let P=I;for(let D=0;D<8;D++)1&P?P=3988292384^P>>>1:P>>>=1;E[I]=P}return E}(),update(E,I,P,D){for(let j=0;j<D;j++)E=r.table[255&(E^I[P+j])]^E>>>8;return E},crc:(E,I,P)=>4294967295^r.update(4294967295,E,I,P)};function s(E,I,P,D){I[P]+=E[0]*D>>4,I[P+1]+=E[1]*D>>4,I[P+2]+=E[2]*D>>4,I[P+3]+=E[3]*D>>4}function i(E){return Math.max(0,Math.min(255,E))}function o(E,I){const P=E[0]-I[0],D=E[1]-I[1],j=E[2]-I[2],N=E[3]-I[3];return P*P+D*D+j*j+N*N}function a(E,I,P,D,j,N,L){L==null&&(L=1);const B=D.length,O=[];for(var M=0;M<B;M++){const K=D[M];O.push([K>>>0&255,K>>>8&255,K>>>16&255,K>>>24&255])}for(M=0;M<B;M++){let K=4294967295;for(var U=0,$=0;$<B;$++){var F=o(O[M],O[$]);$!=M&&F<K&&(K=F,U=$)}}const z=new Uint32Array(j.buffer),q=new Int16Array(I*P*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<W.length;M++)W[M]=255*((W[M]+.5)/16-.5);for(let K=0;K<P;K++)for(let ne=0;ne<I;ne++){var Y;M=4*(K*I+ne),L!=2?Y=[i(E[M]+q[M]),i(E[M+1]+q[M+1]),i(E[M+2]+q[M+2]),i(E[M+3]+q[M+3])]:(F=W[4*(3&K)+(3&ne)],Y=[i(E[M]+F),i(E[M+1]+F),i(E[M+2]+F),i(E[M+3]+F)]),U=0;let ee=16777215;for($=0;$<B;$++){const le=o(Y,O[$]);le<ee&&(ee=le,U=$)}const he=O[U],ae=[Y[0]-he[0],Y[1]-he[1],Y[2]-he[2],Y[3]-he[3]];L==1&&(ne!=I-1&&s(ae,q,M+4,7),K!=P-1&&(ne!=0&&s(ae,q,M+4*I-4,3),s(ae,q,M+4*I,5),ne!=I-1&&s(ae,q,M+4*I+4,1))),N[M>>2]=U,z[M>>2]=D[U]}}function l(E,I,P,D,j){j==null&&(j={});const{crc:N}=r,L=e.writeUint,B=e.writeUshort,O=e.writeASCII;let M=8;const U=E.frames.length>1;let $,F=!1,z=33+(U?20:0);if(j.sRGB!=null&&(z+=13),j.pHYs!=null&&(z+=21),j.iCCP!=null&&($=pako.deflate(j.iCCP),z+=21+$.length+4),E.ctype==3){for(var q=E.plte.length,W=0;W<q;W++)E.plte[W]>>>24!=255&&(F=!0);z+=8+3*q+4+(F?8+1*q+4:0)}for(var Y=0;Y<E.frames.length;Y++)U&&(z+=38),z+=(he=E.frames[Y]).cimg.length+12,Y!=0&&(z+=4);z+=12;const K=new Uint8Array(z),ne=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)K[W]=ne[W];if(L(K,M,13),M+=4,O(K,M,"IHDR"),M+=4,L(K,M,I),M+=4,L(K,M,P),M+=4,K[M]=E.depth,M++,K[M]=E.ctype,M++,K[M]=0,M++,K[M]=0,M++,K[M]=0,M++,L(K,M,N(K,M-17,17)),M+=4,j.sRGB!=null&&(L(K,M,1),M+=4,O(K,M,"sRGB"),M+=4,K[M]=j.sRGB,M++,L(K,M,N(K,M-5,5)),M+=4),j.iCCP!=null){const ae=13+$.length;L(K,M,ae),M+=4,O(K,M,"iCCP"),M+=4,O(K,M,"ICC profile"),M+=11,M+=2,K.set($,M),M+=$.length,L(K,M,N(K,M-(ae+4),ae+4)),M+=4}if(j.pHYs!=null&&(L(K,M,9),M+=4,O(K,M,"pHYs"),M+=4,L(K,M,j.pHYs[0]),M+=4,L(K,M,j.pHYs[1]),M+=4,K[M]=j.pHYs[2],M++,L(K,M,N(K,M-13,13)),M+=4),U&&(L(K,M,8),M+=4,O(K,M,"acTL"),M+=4,L(K,M,E.frames.length),M+=4,L(K,M,j.loop!=null?j.loop:0),M+=4,L(K,M,N(K,M-12,12)),M+=4),E.ctype==3){for(L(K,M,3*(q=E.plte.length)),M+=4,O(K,M,"PLTE"),M+=4,W=0;W<q;W++){const ae=3*W,le=E.plte[W],ue=255&le,ve=le>>>8&255,Pe=le>>>16&255;K[M+ae+0]=ue,K[M+ae+1]=ve,K[M+ae+2]=Pe}if(M+=3*q,L(K,M,N(K,M-3*q-4,3*q+4)),M+=4,F){for(L(K,M,q),M+=4,O(K,M,"tRNS"),M+=4,W=0;W<q;W++)K[M+W]=E.plte[W]>>>24&255;M+=q,L(K,M,N(K,M-q-4,q+4)),M+=4}}let ee=0;for(Y=0;Y<E.frames.length;Y++){var he=E.frames[Y];U&&(L(K,M,26),M+=4,O(K,M,"fcTL"),M+=4,L(K,M,ee++),M+=4,L(K,M,he.rect.width),M+=4,L(K,M,he.rect.height),M+=4,L(K,M,he.rect.x),M+=4,L(K,M,he.rect.y),M+=4,B(K,M,D[Y]),M+=2,B(K,M,1e3),M+=2,K[M]=he.dispose,M++,K[M]=he.blend,M++,L(K,M,N(K,M-30,30)),M+=4);const ae=he.cimg;L(K,M,(q=ae.length)+(Y==0?0:4)),M+=4;const le=M;O(K,M,Y==0?"IDAT":"fdAT"),M+=4,Y!=0&&(L(K,M,ee++),M+=4),K.set(ae,M),M+=q,L(K,M,N(K,le,M-le)),M+=4}return L(K,M,0),M+=4,O(K,M,"IEND"),M+=4,L(K,M,N(K,M-4,4)),M+=4,K.buffer}function c(E,I,P){for(let D=0;D<E.frames.length;D++){const j=E.frames[D];j.rect.width;const N=j.rect.height,L=new Uint8Array(N*j.bpl+N);j.cimg=g(j.img,N,j.bpp,j.bpl,L,I,P)}}function u(E,I,P,D,j){const N=j[0],L=j[1],B=j[2],O=j[3],M=j[4],U=j[5];let $=6,F=8,z=255;for(var q=0;q<E.length;q++){const Ke=new Uint8Array(E[q]);for(var W=Ke.length,Y=0;Y<W;Y+=4)z&=Ke[Y+3]}const K=z!=255,ne=function(Ae,Be,Ge,$t,Qe,gn){const Ct=[];for(var Ye=0;Ye<Ae.length;Ye++){const Kt=new Uint8Array(Ae[Ye]),Ln=new Uint32Array(Kt.buffer);var on;let $n=0,An=0,nr=Be,is=Ge,Fo=$t?1:0;if(Ye!=0){const bv=gn||$t||Ye==1||Ct[Ye-2].dispose!=0?1:2;let xu=0,fl=1e9;for(let Ti=0;Ti<bv;Ti++){var wr=new Uint8Array(Ae[Ye-1-Ti]);const yf=new Uint32Array(Ae[Ye-1-Ti]);let Fn=Be,br=Ge,os=-1,rr=-1;for(let Er=0;Er<Ge;Er++)for(let as=0;as<Be;as++)Ln[We=Er*Be+as]!=yf[We]&&(as<Fn&&(Fn=as),as>os&&(os=as),Er<br&&(br=Er),Er>rr&&(rr=Er));os==-1&&(Fn=br=os=rr=0),Qe&&((1&Fn)==1&&Fn--,(1&br)==1&&br--);const wu=(os-Fn+1)*(rr-br+1);wu<fl&&(fl=wu,xu=Ti,$n=Fn,An=br,nr=os-Fn+1,is=rr-br+1)}wr=new Uint8Array(Ae[Ye-1-xu]),xu==1&&(Ct[Ye-1].dispose=2),on=new Uint8Array(nr*is*4),t(wr,Be,Ge,on,nr,is,-$n,-An,0),Fo=t(Kt,Be,Ge,on,nr,is,-$n,-An,3)?1:0,Fo==1?f(Kt,Be,Ge,on,{x:$n,y:An,width:nr,height:is}):t(Kt,Be,Ge,on,nr,is,-$n,-An,0)}else on=Kt.slice(0);Ct.push({rect:{x:$n,y:An,width:nr,height:is},img:on,blend:Fo,dispose:0})}if($t)for(Ye=0;Ye<Ct.length;Ye++){if((_r=Ct[Ye]).blend==1)continue;const Kt=_r.rect,Ln=Ct[Ye-1].rect,$n=Math.min(Kt.x,Ln.x),An=Math.min(Kt.y,Ln.y),nr={x:$n,y:An,width:Math.max(Kt.x+Kt.width,Ln.x+Ln.width)-$n,height:Math.max(Kt.y+Kt.height,Ln.y+Ln.height)-An};Ct[Ye-1].dispose=1,Ye-1!=0&&d(Ae,Be,Ge,Ct,Ye-1,nr,Qe),d(Ae,Be,Ge,Ct,Ye,nr,Qe)}let Dt=0;if(Ae.length!=1)for(var We=0;We<Ct.length;We++){var _r;Dt+=(_r=Ct[We]).rect.width*_r.rect.height}return Ct}(E,I,P,N,L,B),ee={},he=[],ae=[];if(D!=0){const Ke=[];for(Y=0;Y<ne.length;Y++)Ke.push(ne[Y].img.buffer);const Ae=function(Qe){let gn=0;for(var Ct=0;Ct<Qe.length;Ct++)gn+=Qe[Ct].byteLength;const Ye=new Uint8Array(gn);let on=0;for(Ct=0;Ct<Qe.length;Ct++){const wr=new Uint8Array(Qe[Ct]),Dt=wr.length;for(let We=0;We<Dt;We+=4){let _r=wr[We],Kt=wr[We+1],Ln=wr[We+2];const $n=wr[We+3];$n==0&&(_r=Kt=Ln=0),Ye[on+We]=_r,Ye[on+We+1]=Kt,Ye[on+We+2]=Ln,Ye[on+We+3]=$n}on+=Dt}return Ye.buffer}(Ke),Be=y(Ae,D);for(Y=0;Y<Be.plte.length;Y++)he.push(Be.plte[Y].est.rgba);let Ge=0;for(Y=0;Y<ne.length;Y++){const $t=(ue=ne[Y]).img.length;var le=new Uint8Array(Be.inds.buffer,Ge>>2,$t>>2);ae.push(le);const Qe=new Uint8Array(Be.abuf,Ge,$t);U&&a(ue.img,ue.rect.width,ue.rect.height,he,Qe,le),ue.img.set(Qe),Ge+=$t}}else for(q=0;q<ne.length;q++){var ue=ne[q];const Ke=new Uint32Array(ue.img.buffer);var ve=ue.rect.width;for(W=Ke.length,le=new Uint8Array(W),ae.push(le),Y=0;Y<W;Y++){const Ae=Ke[Y];if(Y!=0&&Ae==Ke[Y-1])le[Y]=le[Y-1];else if(Y>ve&&Ae==Ke[Y-ve])le[Y]=le[Y-ve];else{let Be=ee[Ae];if(Be==null&&(ee[Ae]=Be=he.length,he.push(Ae),he.length>=300))break;le[Y]=Be}}}const Pe=he.length;for(Pe<=256&&M==0&&(F=Pe<=2?1:Pe<=4?2:Pe<=16?4:8,F=Math.max(F,O)),q=0;q<ne.length;q++){(ue=ne[q]).rect.x,ue.rect.y,ve=ue.rect.width;const Ke=ue.rect.height;let Ae=ue.img;new Uint32Array(Ae.buffer);let Be=4*ve,Ge=4;if(Pe<=256&&M==0){Be=Math.ceil(F*ve/8);var $e=new Uint8Array(Be*Ke);const $t=ae[q];for(let Qe=0;Qe<Ke;Qe++){Y=Qe*Be;const gn=Qe*ve;if(F==8)for(var Se=0;Se<ve;Se++)$e[Y+Se]=$t[gn+Se];else if(F==4)for(Se=0;Se<ve;Se++)$e[Y+(Se>>1)]|=$t[gn+Se]<<4-4*(1&Se);else if(F==2)for(Se=0;Se<ve;Se++)$e[Y+(Se>>2)]|=$t[gn+Se]<<6-2*(3&Se);else if(F==1)for(Se=0;Se<ve;Se++)$e[Y+(Se>>3)]|=$t[gn+Se]<<7-1*(7&Se)}Ae=$e,$=3,Ge=1}else if(K==0&&ne.length==1){$e=new Uint8Array(ve*Ke*3);const $t=ve*Ke;for(Y=0;Y<$t;Y++){const Qe=3*Y,gn=4*Y;$e[Qe]=Ae[gn],$e[Qe+1]=Ae[gn+1],$e[Qe+2]=Ae[gn+2]}Ae=$e,$=2,Ge=3,Be=3*ve}ue.img=Ae,ue.bpl=Be,ue.bpp=Ge}return{ctype:$,depth:F,plte:he,frames:ne}}function d(E,I,P,D,j,N,L){const B=Uint8Array,O=Uint32Array,M=new B(E[j-1]),U=new O(E[j-1]),$=j+1<E.length?new B(E[j+1]):null,F=new B(E[j]),z=new O(F.buffer);let q=I,W=P,Y=-1,K=-1;for(let ee=0;ee<N.height;ee++)for(let he=0;he<N.width;he++){const ae=N.x+he,le=N.y+ee,ue=le*I+ae,ve=z[ue];ve==0||D[j-1].dispose==0&&U[ue]==ve&&($==null||$[4*ue+3]!=0)||(ae<q&&(q=ae),ae>Y&&(Y=ae),le<W&&(W=le),le>K&&(K=le))}Y==-1&&(q=W=Y=K=0),L&&((1&q)==1&&q--,(1&W)==1&&W--),N={x:q,y:W,width:Y-q+1,height:K-W+1};const ne=D[j];ne.rect=N,ne.blend=1,ne.img=new Uint8Array(N.width*N.height*4),D[j-1].dispose==0?(t(M,I,P,ne.img,N.width,N.height,-N.x,-N.y,0),f(F,I,P,ne.img,N)):t(F,I,P,ne.img,N.width,N.height,-N.x,-N.y,0)}function f(E,I,P,D,j){t(E,I,P,D,j.width,j.height,-j.x,-j.y,2)}function g(E,I,P,D,j,N,L){const B=[];let O,M=[0,1,2,3,4];N!=-1?M=[N]:(I*D>5e5||P==1)&&(M=[0]),L&&(O={level:0});const U=ppe;for(var $=0;$<M.length;$++){for(let q=0;q<I;q++)v(j,E,q,D,P,M[$]);B.push(U.deflate(j,O))}let F,z=1e9;for($=0;$<B.length;$++)B[$].length<z&&(F=$,z=B[$].length);return B[F]}function v(E,I,P,D,j,N){const L=P*D;let B=L+P;if(E[B]=N,B++,N==0)if(D<500)for(var O=0;O<D;O++)E[B+O]=I[L+O];else E.set(new Uint8Array(I.buffer,L,D),B);else if(N==1){for(O=0;O<j;O++)E[B+O]=I[L+O];for(O=j;O<D;O++)E[B+O]=I[L+O]-I[L+O-j]+256&255}else if(P==0){for(O=0;O<j;O++)E[B+O]=I[L+O];if(N==2)for(O=j;O<D;O++)E[B+O]=I[L+O];if(N==3)for(O=j;O<D;O++)E[B+O]=I[L+O]-(I[L+O-j]>>1)+256&255;if(N==4)for(O=j;O<D;O++)E[B+O]=I[L+O]-n(I[L+O-j],0,0)+256&255}else{if(N==2)for(O=0;O<D;O++)E[B+O]=I[L+O]+256-I[L+O-D]&255;if(N==3){for(O=0;O<j;O++)E[B+O]=I[L+O]+256-(I[L+O-D]>>1)&255;for(O=j;O<D;O++)E[B+O]=I[L+O]+256-(I[L+O-D]+I[L+O-j]>>1)&255}if(N==4){for(O=0;O<j;O++)E[B+O]=I[L+O]+256-n(0,I[L+O-D],0)&255;for(O=j;O<D;O++)E[B+O]=I[L+O]+256-n(I[L+O-j],I[L+O-D],I[L+O-j-D])&255}}}function y(E,I){const P=new Uint8Array(E),D=P.slice(0),j=new Uint32Array(D.buffer),N=w(D,I),L=N[0],B=N[1],O=P.length,M=new Uint8Array(O>>2);let U;if(P.length<2e7)for(var $=0;$<O;$+=4)U=x(L,F=P[$]*(1/255),z=P[$+1]*(1/255),q=P[$+2]*(1/255),W=P[$+3]*(1/255)),M[$>>2]=U.ind,j[$>>2]=U.est.rgba;else for($=0;$<O;$+=4){var F=P[$]*.00392156862745098,z=P[$+1]*(1/255),q=P[$+2]*(1/255),W=P[$+3]*(1/255);for(U=L;U.left;)U=_(U.est,F,z,q,W)<=0?U.left:U.right;M[$>>2]=U.ind,j[$>>2]=U.est.rgba}return{abuf:D.buffer,inds:M,plte:B}}function w(E,I,P){P==null&&(P=1e-4);const D=new Uint32Array(E.buffer),j={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=k(E,j.i0,j.i1),j.est=R(j.bst);const N=[j];for(;N.length<I;){let B=0,O=0;for(var L=0;L<N.length;L++)N[L].est.L>B&&(B=N[L].est.L,O=L);if(B<P)break;const M=N[O],U=b(E,D,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=U||M.i1<=U){M.est.L=0;continue}const $={i0:M.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};$.bst=k(E,$.i0,$.i1),$.est=R($.bst);const F={i0:U,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(F.bst={R:[],m:[],N:M.bst.N-$.bst.N},L=0;L<16;L++)F.bst.R[L]=M.bst.R[L]-$.bst.R[L];for(L=0;L<4;L++)F.bst.m[L]=M.bst.m[L]-$.bst.m[L];F.est=R(F.bst),M.left=$,M.right=F,N[O]=$,N.push(F)}for(N.sort((B,O)=>O.bst.N-B.bst.N),L=0;L<N.length;L++)N[L].ind=L;return[j,N]}function x(E,I,P,D,j){if(E.left==null)return E.tdst=function($,F,z,q,W){const Y=F-$[0],K=z-$[1],ne=q-$[2],ee=W-$[3];return Y*Y+K*K+ne*ne+ee*ee}(E.est.q,I,P,D,j),E;const N=_(E.est,I,P,D,j);let L=E.left,B=E.right;N>0&&(L=E.right,B=E.left);const O=x(L,I,P,D,j);if(O.tdst<=N*N)return O;const M=x(B,I,P,D,j);return M.tdst<O.tdst?M:O}function _(E,I,P,D,j){const{e:N}=E;return N[0]*I+N[1]*P+N[2]*D+N[3]*j-E.eMq}function b(E,I,P,D,j,N){for(D-=4;P<D;){for(;S(E,P,j)<=N;)P+=4;for(;S(E,D,j)>N;)D-=4;if(P>=D)break;const L=I[P>>2];I[P>>2]=I[D>>2],I[D>>2]=L,P+=4,D-=4}for(;S(E,P,j)>N;)P-=4;return P+4}function S(E,I,P){return E[I]*P[0]+E[I+1]*P[1]+E[I+2]*P[2]+E[I+3]*P[3]}function k(E,I,P){const D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],N=P-I>>2;for(let L=I;L<P;L+=4){const B=E[L]*.00392156862745098,O=E[L+1]*(1/255),M=E[L+2]*(1/255),U=E[L+3]*(1/255);j[0]+=B,j[1]+=O,j[2]+=M,j[3]+=U,D[0]+=B*B,D[1]+=B*O,D[2]+=B*M,D[3]+=B*U,D[5]+=O*O,D[6]+=O*M,D[7]+=O*U,D[10]+=M*M,D[11]+=M*U,D[15]+=U*U}return D[4]=D[1],D[8]=D[2],D[9]=D[6],D[12]=D[3],D[13]=D[7],D[14]=D[11],{R:D,m:j,N}}function R(E){const{R:I}=E,{m:P}=E,{N:D}=E,j=P[0],N=P[1],L=P[2],B=P[3],O=D==0?0:1/D,M=[I[0]-j*j*O,I[1]-j*N*O,I[2]-j*L*O,I[3]-j*B*O,I[4]-N*j*O,I[5]-N*N*O,I[6]-N*L*O,I[7]-N*B*O,I[8]-L*j*O,I[9]-L*N*O,I[10]-L*L*O,I[11]-L*B*O,I[12]-B*j*O,I[13]-B*N*O,I[14]-B*L*O,I[15]-B*B*O],U=M,$=C;let F=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,q=0;if(D!=0)for(let Y=0;Y<16&&(F=$.multVec(U,F),q=Math.sqrt($.dot(F,F)),F=$.sml(1/q,F),!(Y!=0&&Math.abs(q-z)<1e-9));Y++)z=q;const W=[j*O,N*O,L*O,B*O];return{Cov:M,q:W,e:F,L:z,eMq255:$.dot($.sml(255,W),F),eMq:$.dot(F,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var C={multVec:(E,I)=>[E[0]*I[0]+E[1]*I[1]+E[2]*I[2]+E[3]*I[3],E[4]*I[0]+E[5]*I[1]+E[6]*I[2]+E[7]*I[3],E[8]*I[0]+E[9]*I[1]+E[10]*I[2]+E[11]*I[3],E[12]*I[0]+E[13]*I[1]+E[14]*I[2]+E[15]*I[3]],dot:(E,I)=>E[0]*I[0]+E[1]*I[1]+E[2]*I[2]+E[3]*I[3],sml:(E,I)=>[E*I[0],E*I[1],E*I[2],E*I[3]]};cs.encode=function(I,P,D,j,N,L,B){j==null&&(j=0),B==null&&(B=!1);const O=u(I,P,D,j,[!1,!1,!1,0,B,!1]);return c(O,-1),l(O,P,D,N,L)},cs.encodeLL=function(I,P,D,j,N,L,B,O){const M={ctype:0+(j==1?0:2)+(N==0?0:4),depth:L,frames:[]},U=(j+N)*L,$=U*P;for(let F=0;F<I.length;F++)M.frames.push({rect:{x:0,y:0,width:P,height:D},img:new Uint8Array(I[F]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil($/8)});return c(M,0,!0),l(M,P,D,B,O)},cs.encode.compress=u,cs.encode.dither=a,cs.quantize=y,cs.quantize.getKDtree=w,cs.quantize.getNearest=x})();const qT=typeof window<"u",g6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Rg=qT&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper");(qT||g6)&&(Rg&&Rg.getOriginalSymbol(window,"File")||typeof File<"u");(qT||g6)&&(Rg&&Rg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u");function mpe(t){const e=gpe(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),l=a.find(vpe);if(l){const c=l.props.children,u=a.map(d=>d===l?m.Children.count(c)>1?m.Children.only(null):m.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:m.isValidElement(c)?m.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function gpe(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=wpe(s),a=xpe(i,s.props);return s.type!==m.Fragment&&(a.ref=r?sf(r,o):o),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ype=Symbol("radix.slottable");function vpe(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ype}function xpe(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function wpe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _pe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],y6=_pe.reduce((t,e)=>{const n=mpe(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),GT="Progress",WT=100,[bpe,tge]=xr(GT),[Epe,Tpe]=bpe(GT),v6=m.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=Ipe,...o}=t;(s||s===0)&&!SN(s)&&console.error(Spe(`${s}`,"Progress"));const a=SN(s)?s:WT;r!==null&&!CN(r,a)&&console.error(Cpe(`${r}`,"Progress"));const l=CN(r,a)?r:null,c=Ng(l)?i(l,a):void 0;return h.jsx(Epe,{scope:n,value:l,max:a,children:h.jsx(y6.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Ng(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":_6(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});v6.displayName=GT;var x6="ProgressIndicator",w6=m.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Tpe(x6,n);return h.jsx(y6.div,{"data-state":_6(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});w6.displayName=x6;function Ipe(t,e){return`${Math.round(t/e*100)}%`}function _6(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Ng(t){return typeof t=="number"}function SN(t){return Ng(t)&&!isNaN(t)&&t>0}function CN(t,e){return Ng(t)&&!isNaN(t)&&t<=e&&t>=0}function Spe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${WT}\`.`}function Cpe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${WT} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var b6=v6,Ppe=w6;const Ape=m.forwardRef(({className:t,value:e,...n},r)=>h.jsx(b6,{ref:r,className:fe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:h.jsx(Ppe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ape.displayName=b6.displayName;const Rpe=()=>{const t=er(),[e,n]=m.useState([]),[r,s]=m.useState(!0),[i,o]=m.useState(null),{toast:a}=pn(),[l,c]=m.useState(!1);m.useState(!1),m.useState(!1),m.useState(null);const[u,d]=m.useState({name:"",category:"",price:0,description:"",image:"",stock:0,originalPrice:null}),[f,g]=m.useState(null),[v,y]=m.useState(""),[w,x]=m.useState(0),[_,b]=m.useState(!1);m.useState({amount:0,type:"add"});const[S,k]=m.useState("");m.useEffect(()=>{s(!0);const P=query(Rr(dt,"products"),Ma("name")),D=Jh(P,j=>{n(j.docs.map(N=>({id:N.id,...N.data()}))),s(!1)},j=>{o("حدث خطأ أثناء تحميل المنتجات."),s(!1)});return()=>D()},[]);const R=()=>{g(null),y(""),x(0),b(!1);const P=document.getElementById("file-upload");P&&(P.value="")},C=P=>new Promise((D,j)=>{if(!P){j(new Error("No file provided."));return}b(!0);const N=hL(OL,`products/${Date.now()}_${P.name}`),L=_ee(N,P);L.on("state_changed",B=>x(B.bytesTransferred/B.totalBytes*100),B=>{b(!1),j(B)},()=>dL(L.snapshot.ref).then(B=>{b(!1),D(B)}))}),E=async P=>{if(P.preventDefault(),!u.name||u.price<=0||!f){a({title:"بيانات ناقصة",description:"الرجاء إدخال اسم وسعر وصورة المنتج.",variant:"destructive"});return}try{const D=await C(f);await vE(Rr(dt,"products"),{...u,image:D}),a({title:"✅ تم إضافة المنتج",className:"bg-green-500 text-white"}),c(!1),R(),d({name:"",category:"",price:0,description:"",image:"",stock:0,originalPrice:null})}catch(D){a({title:"❌ خطأ في الإضافة",description:D.message,variant:"destructive"})}},I=(P,D,j,N=!1)=>h.jsx("form",{onSubmit:j,className:"space-y-4 text-right max-h-[70vh] overflow-y-auto p-1"});return e.filter(P=>P.name.toLowerCase().includes(S.toLowerCase())||P.category&&P.category.toLowerCase().includes(S.toLowerCase())),r?h.jsxs("div",{className:"flex items-center justify-center p-10",children:[h.jsx(tn,{className:"h-12 w-12 animate-spin text-primary"}),h.jsx("p",{className:"ml-4 text-lg text-muted-foreground",children:"جاري تحميل المنتجات..."})]}):i?h.jsxs("div",{className:"p-10 text-center",children:[h.jsx(jE,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),h.jsx("p",{className:"text-lg text-destructive",children:i})]}):h.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[h.jsxs("h2",{className:"text-2xl font-semibold text-slate-800 dark:text-slate-100 flex items-center",children:[h.jsx(gh,{className:"mr-3"}),"إدارة المنتجات"]}),h.jsxs(we,{variant:"outline",onClick:()=>t("/admin"),children:[h.jsx(hu,{className:"ml-2 h-4 w-4"}),"الرجوع للوحة التحكم"]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[h.jsxs("div",{className:"relative w-full sm:w-auto",children:[h.jsx(nf,{className:"absolute left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(ze,{type:"text",placeholder:"ابحث...",value:S,onChange:P=>k(P.target.value),className:"max-w-sm pl-10 rtl:pr-10"})]}),h.jsxs(Nd,{open:l,onOpenChange:c,children:[h.jsx(Boe,{asChild:!0,children:h.jsxs(we,{onClick:()=>{R(),c(!0)},children:[h.jsx(HL,{className:"mr-2 h-5 w-5"})," إضافة منتج"]})}),h.jsxs(kd,{className:"sm:max-w-lg text-right",children:[h.jsx(rv,{children:h.jsx(sv,{children:"إضافة منتج جديد"})}),I(u,d,E)]})]})]})]})},Npe=()=>{const t=er();return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[h.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[h.jsx(OE,{className:"mr-3 rtl:ml-3 rtl:mr-0",size:32}),"الإعدادات"]}),h.jsxs(we,{variant:"outline",onClick:()=>t("/admin"),children:[h.jsx(hu,{className:"ml-2 h-4 w-4"}),"الرجوع إلى لوحة التحكم"]})]}),h.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[h.jsx("p",{children:"هذه الصفحة مخصصة لإعدادات المسؤول."}),h.jsx("p",{children:"يمكنك إضافة الحقول والنماذج اللازمة هنا لتغيير إعدادات الموقع."})]})]})},mx="hoIGjbMl4AbEEX4LCQeTx8YNfXB2",kpe=()=>{const t=er(),{currentUser:e}=_i(),{toast:n}=pn(),r=bO(),[s,i]=m.useState([]),[o,a]=m.useState(!0),[l,c]=m.useState(""),[u,d]=m.useState(!1),[f,g]=m.useState(!1),[v,y]=m.useState(!1),[w,x]=m.useState(null),[_,b]=m.useState(!1),[S,k]=m.useState({displayName:"",email:"",phone:"",role:""}),R=m.useCallback(async()=>{a(!0);try{const O=Uc(Rr(dt,"users"),Ma("createdAt","desc")),U=(await gE(O)).docs.map($=>({id:$.id,...$.data()}));i(U)}catch(O){console.error("Error fetching users: ",O),n({title:"خطأ في تحميل المستخدمين",variant:"destructive"})}finally{a(!1)}},[n]);m.useEffect(()=>{R()},[R]);const C=O=>{x(O),k({displayName:O.displayName||"",email:O.email||"",phone:O.phone||"",role:O.role||"customer"}),d(!0)},E=O=>{const{name:M,value:U}=O.target;k($=>({...$,[M]:U}))},I=async()=>{if(w){if(S.role!==w.role&&(e==null?void 0:e.uid)!==mx){n({title:"غير مصرح لك",description:"لا يمكنك تغيير أدوار المستخدمين. هذه الصلاحية للأدمن الخارق فقط.",variant:"destructive"});return}b(!0);try{const O=dr(dt,"users",w.id);await My(O,S),n({title:"تم تحديث المستخدم بنجاح"}),d(!1),await R()}catch(O){console.error("Error updating user: ",O),n({title:"خطأ في تحديث المستخدم",variant:"destructive"})}finally{b(!1)}}},P=O=>{x(O),g(!0)},D=async()=>{if(w){b(!0);try{await yE(dr(dt,"users",w.id)),n({title:"تم حذف المستخدم بنجاح"}),g(!1),await R()}catch(O){console.error("Error deleting user: ",O),n({title:"خطأ في حذف المستخدم",variant:"destructive"})}finally{b(!1)}}},j=O=>{x(O),y(!0)},N=async()=>{if(w!=null&&w.email){b(!0);try{await hb(r,w.email),n({title:"تم إرسال الرابط بنجاح",description:`تم إرسال رابط إعادة تعيين كلمة المرور إلى ${w.email}.`}),y(!1)}catch(O){console.error("Error sending password reset email: ",O),n({title:"حدث خطأ",description:"لم نتمكن من إرسال البريد. يرجى المحاولة مرة أخرى.",variant:"destructive"})}finally{b(!1)}}},L=s.filter(O=>O.displayName&&O.displayName.toLowerCase().includes(l.toLowerCase())||O.email&&O.email.toLowerCase().includes(l.toLowerCase())||O.phone&&O.phone.includes(l)),B=O=>!O||!O.seconds?"-":new Date(O.seconds*1e3).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"});return h.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[h.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[h.jsx(Gc,{className:"mr-3 rtl:ml-3 rtl:mr-0",size:32}),"إدارة المستخدمين"]}),h.jsxs(we,{variant:"outline",onClick:()=>t("/admin"),children:[h.jsx(hu,{className:"ml-2 h-4 w-4"}),"الرجوع للوحة التحكم"]})]}),h.jsxs("div",{className:"relative w-full sm:max-w-md",children:[h.jsx(nf,{className:"absolute left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),h.jsx(ze,{type:"text",placeholder:"ابحث بالاسم، البريد أو الهاتف...",value:l,onChange:O=>c(O.target.value),className:"w-full pl-10 rtl:pr-10 rtl:pl-3"})]}),o?h.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-250px)]",children:h.jsx(tn,{className:"h-16 w-16 text-sky-500 animate-spin"})}):L.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(Nne,{className:"mx-auto h-16 w-16 text-slate-400 dark:text-slate-500 mb-4"}),h.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400",children:"لم يتم العثور على مستخدمين."})]}):h.jsx("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-lg overflow-x-auto",children:h.jsxs(hv,{children:[h.jsx(fv,{className:"bg-slate-50 dark:bg-slate-700/50",children:h.jsxs(Ga,{children:[h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"الاسم"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"البريد الإلكتروني"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"الهاتف"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"الدور"}),h.jsx(Jt,{className:"text-right px-3 py-3.5",children:"تاريخ التسجيل"}),h.jsx(Jt,{className:"text-center px-3 py-3.5",children:"الإجراءات"})]})}),h.jsx(pv,{children:L.map(O=>h.jsxs(Ga,{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[h.jsx(Zt,{className:"font-medium px-3 py-4",children:O.displayName||"-"}),h.jsx(Zt,{className:"px-3 py-4",children:O.email}),h.jsx(Zt,{className:"px-3 py-4",children:O.phone||"-"}),h.jsx(Zt,{className:"px-3 py-4",children:h.jsx(pu,{variant:O.role==="admin"?"destructive":"secondary",children:O.role==="admin"?"مدير":"عميل"})}),h.jsx(Zt,{className:"px-3 py-4",children:B(O.createdAt)}),h.jsx(Zt,{className:"text-center px-3 py-4",children:h.jsxs(p6,{children:[h.jsx(m6,{asChild:!0,children:h.jsx(we,{variant:"ghost",size:"icon",children:h.jsx(qL,{className:"h-5 w-5"})})}),h.jsxs(zT,{align:"end",children:[h.jsxs(gc,{onClick:()=>C(O),children:[h.jsx(Ene,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," تعديل"]}),h.jsxs(gc,{onClick:()=>j(O),children:[h.jsx(Fa,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," إعادة تعيين كلمة المرور"]}),h.jsxs(gc,{onClick:()=>P(O),className:"text-red-600 focus:text-red-600 dark:focus:text-red-400",children:[h.jsx(ME,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," حذف"]})]})]})})]},O.id))})]})}),h.jsx(Nd,{open:u,onOpenChange:d,children:h.jsxs(kd,{className:"sm:max-w-[425px] bg-white dark:bg-slate-800",children:[h.jsx(rv,{children:h.jsx(sv,{children:"تعديل بيانات المستخدم"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[h.jsx(Ue,{htmlFor:"edit-displayName",className:"text-right col-span-1",children:"الاسم"}),h.jsx(ze,{id:"edit-displayName",name:"displayName",value:S.displayName,onChange:E,className:"col-span-3"})]}),h.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[h.jsx(Ue,{htmlFor:"edit-email",className:"text-right col-span-1",children:"البريد"}),h.jsx(ze,{id:"edit-email",name:"email",value:S.email,onChange:E,className:"col-span-3",disabled:!0})]}),h.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[h.jsx(Ue,{htmlFor:"edit-phone",className:"text-right col-span-1",children:"الهاتف"}),h.jsx(ze,{id:"edit-phone",name:"phone",value:S.phone,onChange:E,className:"col-span-3"})]}),h.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[h.jsx(Ue,{htmlFor:"edit-role",className:"text-right col-span-1",children:"الدور"}),h.jsxs("select",{id:"edit-role",name:"role",value:S.role,onChange:E,className:"col-span-3 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:(e==null?void 0:e.uid)!==mx,children:[h.jsx("option",{value:"customer",children:"عميل"}),h.jsx("option",{value:"admin",children:"مدير"})]})]}),(e==null?void 0:e.uid)!==mx&&h.jsx("p",{className:"col-span-4 text-xs text-slate-500 dark:text-slate-400 text-center",children:"صلاحية تغيير الدور مقتصرة على الأدمن الخارق فقط."})]}),h.jsxs(lT,{children:[h.jsx(we,{onClick:I,disabled:_,children:_?h.jsx(tn,{className:"animate-spin"}):"حفظ التغييرات"}),h.jsx(we,{variant:"outline",onClick:()=>d(!1),children:"إلغاء"})]})]})}),h.jsx(Nd,{open:f,onOpenChange:g,children:h.jsxs(kd,{children:[h.jsxs(_g,{children:[h.jsx(Eg,{children:"تأكيد الحذف"}),h.jsxs(Tg,{children:['هل أنت متأكد أنك تريد حذف المستخدم "',w==null?void 0:w.displayName,'"؟ هذا الإجراء لا يمكن التراجع عنه.']})]}),h.jsxs(bg,{children:[h.jsx(Sg,{onClick:()=>g(!1),children:"إلغاء"}),h.jsx(Ig,{asChild:!0,children:h.jsx(we,{variant:"destructive",onClick:D,disabled:_,children:_?h.jsx(tn,{className:"animate-spin"}):"حذف"})})]})]})}),h.jsx(Nd,{open:v,onOpenChange:y,children:h.jsxs(kd,{children:[h.jsxs(_g,{children:[h.jsx(Eg,{children:"إعادة تعيين كلمة المرور"}),h.jsxs(Tg,{children:['هل أنت متأكد أنك تريد إرسال رابط إعادة تعيين كلمة المرور إلى "',w==null?void 0:w.email,'"؟']})]}),h.jsxs(bg,{children:[h.jsx(Sg,{onClick:()=>y(!1),children:"إلغاء"}),h.jsx(Ig,{asChild:!0,children:h.jsx(we,{onClick:N,disabled:_,children:_?h.jsx(tn,{className:"animate-spin"}):"إرسال"})})]})]})})]})},ir=({children:t})=>h.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[" ",t," "]}),Dpe=()=>h.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[calc(100vh-250px)]",children:[h.jsx(me.h1,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:100,delay:.1},className:"text-8xl font-bold text-primary mb-4",children:"404"}),h.jsx(me.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-2xl font-semibold mb-6",children:"الصفحة غير موجودة"}),h.jsx(me.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-muted-foreground mb-8 max-w-sm",children:"عذراً، لم نتمكن من العثور على الصفحة التي تبحث عنها."}),h.jsx(me.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:h.jsx(we,{asChild:!0,children:h.jsx(Le,{to:"/",children:"العودة إلى الصفحة الرئيسية"})})})]});function jpe(){return h.jsx(kne,{children:h.jsx(Vne,{children:h.jsxs(gB,{children:[h.jsxs(lB,{children:[h.jsxs(Ze,{path:"/",element:h.jsx(ase,{}),children:[h.jsx(Ze,{index:!0,element:h.jsx(ir,{children:h.jsx(eie,{})})}),h.jsx(Ze,{path:"products",element:h.jsx(ir,{children:h.jsx(Pie,{})})}),h.jsx(Ze,{path:"product/:productId",element:h.jsx(ir,{children:h.jsx(Aie,{})})}),h.jsx(Ze,{path:"cart",element:h.jsx(ir,{children:h.jsx(kie,{})})}),h.jsx(Ze,{path:"about",element:h.jsx(ir,{children:h.jsx(Rie,{})})}),h.jsx(Ze,{path:"contact",element:h.jsx(ir,{children:h.jsx(Nie,{})})}),h.jsx(Ze,{path:"login",element:h.jsx(ir,{children:h.jsx(jie,{})})}),h.jsx(Ze,{path:"signup",element:h.jsx(ir,{children:h.jsx(Oie,{})})}),h.jsx(Ze,{path:"forgot-password",element:h.jsx(ir,{children:h.jsx(Mie,{})})}),h.jsx(Ze,{path:"order-success/:orderId",element:h.jsx(ir,{children:h.jsx(iue,{})})}),h.jsx(Ze,{path:"terms-conditions",element:h.jsx(ir,{children:h.jsx(cue,{})})}),h.jsxs(Ze,{element:h.jsx(mR,{}),children:[h.jsx(Ze,{path:"checkout",element:h.jsx(ir,{children:h.jsx(nue,{})})}),h.jsxs(Ze,{path:"profile",element:h.jsx(Zse,{}),children:[h.jsx(Ze,{index:!0,element:h.jsx(Vie,{})}),h.jsx(Ze,{path:"orders",element:h.jsx(fue,{})}),h.jsx(Ze,{path:"orders/:orderId",element:h.jsx(lue,{})}),h.jsx(Ze,{path:"change-password",element:h.jsx(Lie,{})})]})]}),h.jsx(Ze,{path:"*",element:h.jsx(ir,{children:h.jsx(Dpe,{})})})]}),h.jsx(Ze,{element:h.jsx(mR,{adminOnly:!0}),children:h.jsxs(Ze,{path:"/AdminDashboard",element:h.jsx(Jse,{}),children:[h.jsx(Ze,{index:!0,element:h.jsx(gue,{})}),h.jsx(Ze,{path:"orders",element:h.jsx(dpe,{})}),h.jsx(Ze,{path:"products",element:h.jsx(Rpe,{})}),h.jsx(Ze,{path:"users",element:h.jsx(kpe,{})}),h.jsx(Ze,{path:"settings",element:h.jsx(Npe,{})})]})})]}),h.jsx(M4,{}),h.jsx(Xse,{position:"bottom-center"})]})})})}gx.createRoot(document.getElementById("root")).render(h.jsx(oe.StrictMode,{children:h.jsx(jpe,{})}));export{Rr as $,UV as A,Oa as B,bs as C,Vt as D,Bme as E,Za as F,sE as G,Ume as H,Bpe as I,Vr as J,MJ as K,LJ as L,vE as M,gme as N,yme as O,aZ as P,fn as Q,lme as R,Qpe as S,it as T,jme as U,Cy as V,iZ as W,Dme as X,mme as Y,Zpe as Z,NO as _,hh as a,Hpe as a0,VJ as a1,KJ as a2,Fme as a3,yE as a4,kme as a5,nme as a6,$me as a7,dr as a8,ome as a9,ime as aA,Jh as aB,Eme as aC,ame as aD,Ma as aE,Pme as aF,Ame as aG,rZ as aH,Uc as aI,CV as aJ,Kpe as aK,Nme as aL,zV as aM,BV as aN,Mme as aO,Lpe as aP,vme as aQ,dme as aR,ume as aS,pme as aT,rme as aU,My as aV,Ome as aW,eme as aX,fE as aY,wE as aZ,Xpe as aa,Jpe as ab,tme as ac,Lme as ad,fme as ae,hme as af,It as ag,Zh as ah,YJ as ai,Tme as aj,mE as ak,xme as al,wme as am,gE as an,_me as ao,bme as ap,$J as aq,Vme as ar,qV as as,Ype as at,WJ as au,cme as av,sme as aw,Ime as ax,Cme as ay,Sme as az,FJ as b,Bc as c,el as d,nt as e,Z as f,uu as g,Yh as h,Jp as i,jy as j,Xh as k,ky as l,pE as m,zc as n,Dy as o,ca as p,oZ as q,kt as r,Ca as s,ie as t,Fpe as u,AQ as v,yt as w,zme as x,Re as y,$pe as z};
